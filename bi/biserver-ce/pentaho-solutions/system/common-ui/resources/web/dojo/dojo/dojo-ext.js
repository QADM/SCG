/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/
/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/
if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_1,_2){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _3=dojo.date.stamp._isoRegExp.exec(_1),_4=null;if(_3){_3.shift();if(_3[1]){_3[1]--;}if(_3[6]){_3[6]*=1000;}if(_2){_2=new Date(_2);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(_5){return _2["get"+_5]();}),function(_6,_7){_3[_7]=_3[_7]||_6;});}_4=new Date(_3[0]||1970,_3[1]||0,_3[2]||1,_3[3]||0,_3[4]||0,_3[5]||0,_3[6]||0);if(_3[0]<100){_4.setFullYear(_3[0]||1970);}var _8=0,_9=_3[7]&&_3[7].charAt(0);if(_9!="Z"){_8=((_3[8]||0)*60)+(Number(_3[9])||0);if(_9!="-"){_8*=-1;}}if(_9){_8-=_4.getTimezoneOffset();}if(_8){_4.setTime(_4.getTime()+_8*60000);}}return _4;};dojo.date.stamp.toISOString=function(_a,_b){var _c=function(n){return (n<10)?"0"+n:n;};_b=_b||{};var _d=[],_e=_b.zulu?"getUTC":"get",_f="";if(_b.selector!="time"){var _10=_a[_e+"FullYear"]();_f=["0000".substr((_10+"").length)+_10,_c(_a[_e+"Month"]()+1),_c(_a[_e+"Date"]())].join("-");}_d.push(_f);if(_b.selector!="date"){var _11=[_c(_a[_e+"Hours"]()),_c(_a[_e+"Minutes"]()),_c(_a[_e+"Seconds"]())].join(":");var _12=_a[_e+"Milliseconds"]();if(_b.milliseconds){_11+="."+(_12<100?"0":"")+_c(_12);}if(_b.zulu){_11+="Z";}else{if(_b.selector!="time"){var _13=_a.getTimezoneOffset();var _14=Math.abs(_13);_11+=(_13>0?"-":"+")+_c(Math.floor(_14/60))+":"+_c(_14%60);}}_d.push(_11);}return _d.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;function _15(_16){if(d.isString(_16)){return "string";}if(typeof _16=="number"){return "number";}if(typeof _16=="boolean"){return "boolean";}if(d.isFunction(_16)){return "function";}if(d.isArray(_16)){return "array";}if(_16 instanceof Date){return "date";}if(_16 instanceof d._Url){return "url";}return "object";};function _17(_18,_19){switch(_19){case "string":return _18;case "number":return _18.length?Number(_18):NaN;case "boolean":return typeof _18=="boolean"?_18:!(_18.toLowerCase()=="false");case "function":if(d.isFunction(_18)){_18=_18.toString();_18=d.trim(_18.substring(_18.indexOf("{")+1,_18.length-1));}try{if(_18===""||_18.search(/[^\w\.]+/i)!=-1){return new Function(_18);}else{return d.getObject(_18,false)||new Function(_18);}}catch(e){return new Function();}case "array":return _18?_18.split(/\s*,\s*/):[];case "date":switch(_18){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_18);}case "url":return d.baseUrl+_18;default:return d.fromJson(_18);}};var _1a={},_1b={};d.connect(d,"extend",function(){_1b={};});function _1c(cls,_1d){for(var _1e in cls){if(_1e.charAt(0)=="_"){continue;}if(_1e in _1a){continue;}_1d[_1e]=_15(cls[_1e]);}return _1d;};function _1f(_20,_21){var c=_1b[_20];if(!c){var cls=d.getObject(_20),_22=null;if(!cls){return null;}if(!_21){_22=_1c(cls.prototype,{});}c={cls:cls,params:_22};}else{if(!_21&&!c.params){c.params=_1c(c.cls.prototype,{});}}return c;};this._functionFromScript=function(_23,_24){var _25="";var _26="";var _27=(_23.getAttribute(_24+"args")||_23.getAttribute("args"));if(_27){d.forEach(_27.split(/\s*,\s*/),function(_28,idx){_25+="var "+_28+" = arguments["+idx+"]; ";});}var _29=_23.getAttribute("with");if(_29&&_29.length){d.forEach(_29.split(/\s*,\s*/),function(_2a){_25+="with("+_2a+"){";_26+="}";});}return new Function(_25+_23.innerHTML+_26);};this.instantiate=function(_2b,_2c,_2d){var _2e=[],_2c=_2c||{};_2d=_2d||{};var _2f=(_2d.scope||d._scopeName)+"Type",_30="data-"+(_2d.scope||d._scopeName)+"-";d.forEach(_2b,function(obj){if(!obj){return;}var _31,_32,_33,_34,_35,_36;if(obj.node){_31=obj.node;_32=obj.type;_36=obj.fastpath;_33=obj.clsInfo||(_32&&_1f(_32,_36));_34=_33&&_33.cls;_35=obj.scripts;}else{_31=obj;_32=_2f in _2c?_2c[_2f]:_31.getAttribute(_2f);_33=_32&&_1f(_32);_34=_33&&_33.cls;_35=(_34&&(_34._noScript||_34.prototype._noScript)?[]:d.query("> script[type^='dojo/']",_31));}if(!_33){throw new Error("Could not load class '"+_32);}var _37={};if(_2d.defaults){d._mixin(_37,_2d.defaults);}if(obj.inherited){d._mixin(_37,obj.inherited);}if(_36){var _38=_31.getAttribute(_30+"props");if(_38&&_38.length){try{_38=d.fromJson.call(_2d.propsThis,"{"+_38+"}");d._mixin(_37,_38);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_38+"'");}}var _39=_31.getAttribute(_30+"attach-point");if(_39){_37.dojoAttachPoint=_39;}var _3a=_31.getAttribute(_30+"attach-event");if(_3a){_37.dojoAttachEvent=_3a;}dojo.mixin(_37,_2c);}else{var _3b=_31.attributes;for(var _3c in _33.params){var _3d=_3c in _2c?{value:_2c[_3c],specified:true}:_3b.getNamedItem(_3c);if(!_3d||(!_3d.specified&&(!dojo.isIE||_3c.toLowerCase()!="value"))){continue;}var _3e=_3d.value;switch(_3c){case "class":_3e="className" in _2c?_2c.className:_31.className;break;case "style":_3e="style" in _2c?_2c.style:(_31.style&&_31.style.cssText);}var _3f=_33.params[_3c];if(typeof _3e=="string"){_37[_3c]=_17(_3e,_3f);}else{_37[_3c]=_3e;}}}var _40=[],_41=[];d.forEach(_35,function(_42){_31.removeChild(_42);var _43=(_42.getAttribute(_30+"event")||_42.getAttribute("event")),_32=_42.getAttribute("type"),nf=d.parser._functionFromScript(_42,_30);if(_43){if(_32=="dojo/connect"){_40.push({event:_43,func:nf});}else{_37[_43]=nf;}}else{_41.push(nf);}});var _44=_34.markupFactory||_34.prototype&&_34.prototype.markupFactory;var _45=_44?_44(_37,_31,_34):new _34(_37,_31);_2e.push(_45);var _46=(_31.getAttribute(_30+"id")||_31.getAttribute("jsId"));if(_46){d.setObject(_46,_45);}d.forEach(_40,function(_47){d.connect(_45,_47.event,null,_47.func);});d.forEach(_41,function(_48){_48.call(_45);});});if(!_2c._started){d.forEach(_2e,function(_49){if(!_2d.noStart&&_49&&dojo.isFunction(_49.startup)&&!_49._started&&(!_49.getParent||!_49.getParent())){_49.startup();}});}return _2e;};this.parse=function(_4a,_4b){var _4c;if(!_4b&&_4a&&_4a.rootNode){_4b=_4a;_4c=_4b.rootNode;}else{_4c=_4a;}_4c=_4c?dojo.byId(_4c):dojo.body();_4b=_4b||{};var _4d=(_4b.scope||d._scopeName)+"Type",_4e="data-"+(_4b.scope||d._scopeName)+"-";function _4f(_50,_51){var _52=dojo.clone(_50.inherited);dojo.forEach(["dir","lang"],function(_53){var val=_50.node.getAttribute(_53);if(val){_52[_53]=val;}});var _54=_50.clsInfo&&!_50.clsInfo.cls.prototype._noScript?_50.scripts:null;var _55=(!_50.clsInfo||!_50.clsInfo.cls.prototype.stopParser)||(_4b&&_4b.template);for(var _56=_50.node.firstChild;_56;_56=_56.nextSibling){if(_56.nodeType==1){var _57,_58=_55&&_56.getAttribute(_4e+"type");if(_58){_57=_58;}else{_57=_55&&_56.getAttribute(_4d);}var _59=_58==_57;if(_57){var _5a={"type":_57,fastpath:_59,clsInfo:_1f(_57,_59),node:_56,scripts:[],inherited:_52};_51.push(_5a);_4f(_5a,_51);}else{if(_54&&_56.nodeName.toLowerCase()=="script"){_57=_56.getAttribute("type");if(_57&&/^dojo\/\w/i.test(_57)){_54.push(_56);}}else{if(_55){_4f({node:_56,inherited:_52},_51);}}}}}};var _5b={};if(_4b&&_4b.inherited){for(var key in _4b.inherited){if(_4b.inherited[key]){_5b[key]=_4b.inherited[key];}}}var _5c=[];_4f({node:_4c,inherited:_5b},_5c);var _5d=_4b&&_4b.template?{template:true}:null;return this.instantiate(_5c,_5d,_4b);};}();(function(){var _5e=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.getObject("dijit.wai.onload")===dojo._loaders[0]){dojo._loaders.splice(1,0,_5e);}else{dojo._loaders.unshift(_5e);}})();}if(!dojo._hasResource["dojo.store.util.QueryResults"]){dojo._hasResource["dojo.store.util.QueryResults"]=true;dojo.provide("dojo.store.util.QueryResults");dojo.getObject("store.util",true,dojo);dojo.store.util.QueryResults=function(_5f){if(!_5f){return _5f;}if(_5f.then){_5f=dojo.delegate(_5f);}function _60(_61){if(!_5f[_61]){_5f[_61]=function(){var _62=arguments;return dojo.when(_5f,function(_63){Array.prototype.unshift.call(_62,_63);return dojo.store.util.QueryResults(dojo[_61].apply(dojo,_62));});};}};_60("forEach");_60("filter");_60("map");if(!_5f.total){_5f.total=dojo.when(_5f,function(_64){return _64.length;});}return _5f;};}if(!dojo._hasResource["dojo.store.util.SimpleQueryEngine"]){dojo._hasResource["dojo.store.util.SimpleQueryEngine"]=true;dojo.provide("dojo.store.util.SimpleQueryEngine");dojo.getObject("store.util",true,dojo);dojo.store.util.SimpleQueryEngine=function(_65,_66){switch(typeof _65){default:throw new Error("Can not query with a "+typeof _65);case "object":case "undefined":var _67=_65;_65=function(_68){for(var key in _67){var _69=_67[key];if(_69&&_69.test){if(!_69.test(_68[key])){return false;}}else{if(_69!=_68[key]){return false;}}}return true;};break;case "string":if(!this[_65]){throw new Error("No filter function "+_65+" was found in store");}_65=this[_65];case "function":}function _6a(_6b){var _6c=dojo.filter(_6b,_65);if(_66&&_66.sort){_6c.sort(function(a,b){for(var _6d,i=0;_6d=_66.sort[i];i++){var _6e=a[_6d.attribute];var _6f=b[_6d.attribute];if(_6e!=_6f){return !!_6d.descending==_6e>_6f?-1:1;}}return 0;});}if(_66&&(_66.start||_66.count)){var _70=_6c.length;_6c=_6c.slice(_66.start||0,(_66.start||0)+(_66.count||Infinity));_6c.total=_70;}return _6c;};_6a.matches=_65;return _6a;};}if(!dojo._hasResource["dojo.store.Memory"]){dojo._hasResource["dojo.store.Memory"]=true;dojo.provide("dojo.store.Memory");dojo.declare("dojo.store.Memory",null,{constructor:function(_71){this.index={};dojo.mixin(this,_71);this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:dojo.store.util.SimpleQueryEngine,get:function(id){return this.index[id];},getIdentity:function(_72){return _72[this.idProperty];},put:function(_73,_74){var id=_74&&_74.id||_73[this.idProperty]||Math.random();this.index[id]=_73;var _75=this.data,_76=this.idProperty;for(var i=0,l=_75.length;i<l;i++){if(_75[i][_76]==id){_75[i]=_73;return id;}}this.data.push(_73);return id;},add:function(_77,_78){if(this.index[_78&&_78.id||_77[this.idProperty]]){throw new Error("Object already exists");}return this.put(_77,_78);},remove:function(id){delete this.index[id];var _79=this.data,_7a=this.idProperty;for(var i=0,l=_79.length;i<l;i++){if(_79[i][_7a]==id){_79.splice(i,1);return;}}},query:function(_7b,_7c){return dojo.store.util.QueryResults(this.queryEngine(_7b,_7c)(this.data));},setData:function(_7d){if(_7d.items){this.idProperty=_7d.identifier;_7d=this.data=_7d.items;}else{this.data=_7d;}for(var i=0,l=_7d.length;i<l;i++){var _7e=_7d[i];this.index[_7e[this.idProperty]]=_7e;}}});}if(!dojo._hasResource["dojo.store.DataStore"]){dojo._hasResource["dojo.store.DataStore"]=true;dojo.provide("dojo.store.DataStore");dojo.declare("dojo.store.DataStore",null,{target:"",constructor:function(_7f){dojo.mixin(this,_7f);},_objectConverter:function(_80){var _81=this.store;return function(_82){var _83={};var _84=_81.getAttributes(_82);for(var i=0;i<_84.length;i++){_83[_84[i]]=_81.getValue(_82,_84[i]);}return _80(_83);};},get:function(id,_85){var _86,_87;var _88=new dojo.Deferred();this.store.fetchItemByIdentity({identity:id,onItem:this._objectConverter(function(_89){_88.resolve(_86=_89);}),onError:function(_8a){_88.reject(_87=_8a);}});if(_86){return _86;}if(_87){throw _87;}return _88.promise;},put:function(_8b,_8c){var id=_8c&&typeof _8c.id!="undefined"||this.getIdentity(_8b);var _8d=this.store;if(typeof id=="undefined"){_8d.newItem(_8b);}else{_8d.fetchItemByIdentity({identity:id,onItem:function(_8e){if(_8e){for(var i in _8b){if(_8d.getValue(_8e,i)!=_8b[i]){_8d.setValue(_8e,i,_8b[i]);}}}else{_8d.newItem(_8b);}}});}},remove:function(id){var _8f=this.store;this.store.fetchItemByIdentity({identity:id,onItem:function(_90){_8f.deleteItem(_90);}});},query:function(_91,_92){var _93,_94;var _95=new dojo.Deferred();_95.total=new dojo.Deferred();var _96=this._objectConverter(function(_97){return _97;});this.store.fetch(dojo.mixin({query:_91,onBegin:function(_98){_95.total.resolve(_98);},onComplete:function(_99){_95.resolve(dojo.map(_99,_96));},onError:function(_9a){_95.reject(_9a);}},_92));return dojo.store.util.QueryResults(_95);},getIdentity:function(_9b){return _9b[this.idProperty||this.store.getIdentityAttributes()[0]];}});}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,_9c){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_9c&&_9c.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_9d){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_9d);};dojo.regexp.group=function(_9e,_9f){return "("+(_9f?"?:":"")+_9e+")";};}if(!dojo._hasResource["dojo.data.ObjectStore"]){dojo._hasResource["dojo.data.ObjectStore"]=true;dojo.provide("dojo.data.ObjectStore");dojo.declare("dojo.data.ObjectStore",null,{objectStore:null,constructor:function(_a0){dojo.mixin(this,_a0);},labelProperty:"label",getValue:function(_a1,_a2,_a3){return typeof _a1.get==="function"?_a1.get(_a2):_a2 in _a1?_a1[_a2]:_a3;},getValues:function(_a4,_a5){var val=this.getValue(_a4,_a5);return val instanceof Array?val:val===undefined?[]:[val];},getAttributes:function(_a6){var res=[];for(var i in _a6){if(_a6.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){res.push(i);}}return res;},hasAttribute:function(_a7,_a8){return _a8 in _a7;},containsValue:function(_a9,_aa,_ab){return dojo.indexOf(this.getValues(_a9,_aa),_ab)>-1;},isItem:function(_ac){return (typeof _ac=="object")&&_ac&&!(_ac instanceof Date);},isItemLoaded:function(_ad){return _ad&&typeof _ad.load!=="function";},loadItem:function(_ae){var _af;if(typeof _ae.item.load==="function"){dojo.when(_ae.item.load(),function(_b0){_af=_b0;var _b1=_b0 instanceof Error?_ae.onError:_ae.onItem;if(_b1){_b1.call(_ae.scope,_b0);}});}else{if(_ae.onItem){_ae.onItem.call(_ae.scope,_ae.item);}}return _af;},close:function(_b2){return _b2&&_b2.abort&&_b2.abort();},fetch:function(_b3){_b3=_b3||{};var _b4=this;var _b5=_b3.scope||_b4;var _b6=_b3.query;if(typeof _b6=="object"){_b6=dojo.delegate(_b6);for(var i in _b6){var _b7=_b6[i];if(typeof _b7=="string"){_b6[i]=RegExp("^"+dojo.regexp.escapeString(_b7,"*?").replace(/\*/g,".*").replace(/\?/g,".")+"$",_b3.queryOptions&&_b3.queryOptions.ignoreCase?"mi":"m");_b6[i].toString=(function(_b8){return function(){return _b8;};})(_b7);}}}var _b9=this.objectStore.query(_b6,_b3);dojo.when(_b9.total,function(_ba){dojo.when(_b9,function(_bb){if(_b3.onBegin){_b3.onBegin.call(_b5,_ba||_bb.length,_b3);}if(_b3.onItem){for(var i=0;i<_bb.length;i++){_b3.onItem.call(_b5,_bb[i],_b3);}}if(_b3.onComplete){_b3.onComplete.call(_b5,_b3.onItem?null:_bb,_b3);}return _bb;},_bc);},_bc);function _bc(_bd){if(_b3.onError){_b3.onError.call(_b5,_bd,_b3);}};_b3.abort=function(){if(_b9.cancel){_b9.cancel();}};_b3.store=this;return _b3;},getFeatures:function(){return {"dojo.data.api.Read":!!this.objectStore.get,"dojo.data.api.Identity":true,"dojo.data.api.Write":!!this.objectStore.put,"dojo.data.api.Notification":true};},getLabel:function(_be){if(this.isItem(_be)){return this.getValue(_be,this.labelProperty);}return undefined;},getLabelAttributes:function(_bf){return [this.labelProperty];},getIdentity:function(_c0){return _c0.getId?_c0.getId():_c0[this.objectStore.idProperty||"id"];},getIdentityAttributes:function(_c1){return [this.objectStore.idProperty];},fetchItemByIdentity:function(_c2){var _c3;dojo.when(this.objectStore.get(_c2.identity),function(_c4){_c3=_c4;_c2.onItem.call(_c2.scope,_c4);},function(_c5){_c2.onError.call(_c2.scope,_c5);});return _c3;},newItem:function(_c6,_c7){if(_c7){var _c8=this.getValue(_c7.parent,_c7.attribute,[]);_c8=_c8.concat([_c6]);_c6.__parent=_c8;this.setValue(_c7.parent,_c7.attribute,_c8);}this._dirtyObjects.push({object:_c6,save:true});this.onNew(_c6);return _c6;},deleteItem:function(_c9){this.changing(_c9,true);this.onDelete(_c9);},setValue:function(_ca,_cb,_cc){var old=_ca[_cb];this.changing(_ca);_ca[_cb]=_cc;this.onSet(_ca,_cb,old,_cc);},setValues:function(_cd,_ce,_cf){if(!dojo.isArray(_cf)){throw new Error("setValues expects to be passed an Array object as its value");}this.setValue(_cd,_ce,_cf);},unsetAttribute:function(_d0,_d1){this.changing(_d0);var old=_d0[_d1];delete _d0[_d1];this.onSet(_d0,_d1,old,undefined);},_dirtyObjects:[],changing:function(_d2,_d3){_d2.__isDirty=true;for(var i=0;i<this._dirtyObjects.length;i++){var _d4=this._dirtyObjects[i];if(_d2==_d4.object){if(_d3){_d4.object=false;if(!this._saveNotNeeded){_d4.save=true;}}return;}}var old=_d2 instanceof Array?[]:{};for(i in _d2){if(_d2.hasOwnProperty(i)){old[i]=_d2[i];}}this._dirtyObjects.push({object:!_d3&&_d2,old:old,save:!this._saveNotNeeded});},save:function(_d5){_d5=_d5||{};var _d6,_d7=[];var _d8={};var _d9=[];var _da;var _db=this._dirtyObjects;var _dc=_db.length;try{dojo.connect(_d5,"onError",function(){if(_d5.revertOnError!==false){var _dd=_db;_db=_d9;var _de=0;jr.revert();_da._dirtyObjects=_dd;}else{_da._dirtyObjects=dirtyObject.concat(_d9);}});if(this.objectStore.transaction){var _df=this.objectStore.transaction();}for(var i=0;i<_db.length;i++){var _e0=_db[i];var _e1=_e0.object;var old=_e0.old;delete _e1.__isDirty;if(_e1){_d6=this.objectStore.put(_e1,{overwrite:!!old});}else{_d6=this.objectStore.remove(this.getIdentity(old));}_d9.push(_e0);_db.splice(i--,1);dojo.when(_d6,function(_e2){if(!(--_dc)){if(_d5.onComplete){_d5.onComplete.call(_d5.scope,_d7);}}},function(_e3){_dc=-1;_d5.onError.call(_d5.scope,_e3);});}if(_df){_df.commit();}}catch(e){_d5.onError.call(_d5.scope,value);}},revert:function(_e4){var _e5=this._dirtyObjects;for(var i=_e5.length;i>0;){i--;var _e6=_e5[i];var _e7=_e6.object;var old=_e6.old;if(_e7&&old){for(var j in old){if(old.hasOwnProperty(j)&&_e7[j]!==old[j]){this.onSet(_e7,j,_e7[j],old[j]);_e7[j]=old[j];}}for(j in _e7){if(!old.hasOwnProperty(j)){this.onSet(_e7,j,_e7[j]);delete _e7[j];}}}else{if(!old){this.onDelete(_e7);}else{this.onNew(old);}}delete (_e7||old).__isDirty;_e5.splice(i,1);}},isDirty:function(_e8){if(!_e8){return !!this._dirtyObjects.length;}return _e8.__isDirty;},onSet:function(){},onNew:function(){},onDelete:function(){}});}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.getObject("window",true,dojo);dojo.window.getBox=function(){var _e9=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _ea=dojo._docScroll();return {w:_e9.clientWidth,h:_e9.clientHeight,l:_ea.x,t:_ea.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(_eb,pos){try{_eb=dojo.byId(_eb);var doc=_eb.ownerDocument||dojo.doc,_ec=doc.body||dojo.body(),_ed=doc.documentElement||_ec.parentNode,_ee=dojo.isIE,_ef=dojo.isWebKit;if((!(dojo.isMoz||_ee||_ef||dojo.isOpera)||_eb==_ec||_eb==_ed)&&(typeof _eb.scrollIntoView!="undefined")){_eb.scrollIntoView(false);return;}var _f0=doc.compatMode=="BackCompat",_f1=(_ee>=9&&_eb.ownerDocument.parentWindow.frameElement)?((_ed.clientHeight>0&&_ed.clientWidth>0&&(_ec.clientHeight==0||_ec.clientWidth==0||_ec.clientHeight>_ed.clientHeight||_ec.clientWidth>_ed.clientWidth))?_ed:_ec):(_f0?_ec:_ed),_f2=_ef?_ec:_f1,_f3=_f1.clientWidth,_f4=_f1.clientHeight,rtl=!dojo._isBodyLtr(),_f5=pos||dojo.position(_eb),el=_eb.parentNode,_f6=function(el){return ((_ee<=6||(_ee&&_f0))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_f6(_eb)){return;}while(el){if(el==_ec){el=_f2;}var _f7=dojo.position(el),_f8=_f6(el);if(el==_f2){_f7.w=_f3;_f7.h=_f4;if(_f2==_ed&&_ee&&rtl){_f7.x+=_f2.offsetWidth-_f7.w;}if(_f7.x<0||!_ee){_f7.x=0;}if(_f7.y<0||!_ee){_f7.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_f7.w-=pb.w;_f7.h-=pb.h;_f7.x+=pb.l;_f7.y+=pb.t;var _f9=el.clientWidth,_fa=_f7.w-_f9;if(_f9>0&&_fa>0){_f7.w=_f9;_f7.x+=(rtl&&(_ee||el.clientLeft>pb.l))?_fa:0;}_f9=el.clientHeight;_fa=_f7.h-_f9;if(_f9>0&&_fa>0){_f7.h=_f9;}}if(_f8){if(_f7.y<0){_f7.h+=_f7.y;_f7.y=0;}if(_f7.x<0){_f7.w+=_f7.x;_f7.x=0;}if(_f7.y+_f7.h>_f4){_f7.h=_f4-_f7.y;}if(_f7.x+_f7.w>_f3){_f7.w=_f3-_f7.x;}}var l=_f5.x-_f7.x,t=_f5.y-Math.max(_f7.y,0),r=l+_f5.w-_f7.w,bot=t+_f5.h-_f7.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((_ee==8&&!_f0)||_ee>=9)){s=-s;}_f5.x+=el.scrollLeft;el.scrollLeft+=s;_f5.x-=el.scrollLeft;}if(bot*t>0){_f5.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_f5.y-=el.scrollTop;}el=(el!=_f2)&&!_f8&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);_eb.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_fb){if(this._hash[_fb.id]){throw new Error("Tried to register widget with id=="+_fb.id+" but that id is already registered");}this._hash[_fb.id]=_fb;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(_fc,_fd){_fd=_fd||dojo.global;var i=0,id;for(id in this._hash){_fc.call(_fd,this._hash[id],i++,this._hash);}return this;},filter:function(_fe,_ff){_ff=_ff||dojo.global;var res=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_fe.call(_ff,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new dijit.WidgetSet(),id,_100;for(id in this._hash){_100=this._hash[id];if(_100.declaredClass==cls){res.add(_100);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_101){return dojo.map(this.toArray(),func,_101);},every:function(func,_102){_102=_102||dojo.global;var x=0,i;for(i in this._hash){if(!func.call(_102,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_103){_103=_103||dojo.global;var x=0,i;for(i in this._hash){if(func.call(_103,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var hash=dijit.registry._hash,attr=dojo.attr,_104=dojo.hasAttr,_105=dojo.style;dijit.byId=function(id){return typeof id=="string"?hash[id]:id;};var _106={};dijit.getUniqueId=function(_107){var id;do{id=_107+"_"+(_107 in _106?++_106[_107]:_106[_107]=0);}while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(root){var _108=[];function _109(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _10a=node.getAttribute("widgetId");if(_10a){var _10b=hash[_10a];if(_10b){_108.push(_10b);}}else{_109(node);}}}};_109(root);return _108;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_10c){if(!_10c._destroyed){if(_10c.destroyRecursive){_10c.destroyRecursive();}else{if(_10c.destroy){_10c.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(node){return hash[node.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;};var _10d=(dijit._isElementShown=function(elem){var s=_105(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(attr(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _104(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _10e=elem.contentDocument;if("designMode" in _10e&&_10e.designMode=="on"){return true;}body=_10e.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true");default:return elem.contentEditable=="true";}};var _10f=(dijit.isTabNavigable=function(elem){if(attr(elem,"disabled")){return false;}else{if(_104(elem,"tabIndex")){return attr(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var _110,last,_111,_112,_113,_114,_115={};function _116(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _117=function(_118){dojo.query("> *",_118).forEach(function(_119){if((dojo.isIE&&_119.scopeName!=="HTML")||!_10d(_119)){return;}if(_10f(_119)){var _11a=attr(_119,"tabIndex");if(!_104(_119,"tabIndex")||_11a==0){if(!_110){_110=_119;}last=_119;}else{if(_11a>0){if(!_111||_11a<_112){_112=_11a;_111=_119;}if(!_113||_11a>=_114){_114=_11a;_113=_119;}}}var rn=_116(_119);if(dojo.attr(_119,"checked")&&rn){_115[rn]=_119;}}if(_119.nodeName.toUpperCase()!="SELECT"){_117(_119);}});};if(_10d(root)){_117(root);}function rs(node){return _115[_116(node)]||node;};return {first:rs(_110),last:rs(last),lowest:rs(_111),highest:rs(_113)};};dijit.getFirstInTabbingOrder=function(root){var _11b=dijit._getTabNavigable(dojo.byId(root));return _11b.lowest?_11b.lowest:_11b.first;};dijit.getLastInTabbingOrder=function(root){var _11c=dijit._getTabNavigable(dojo.byId(root));return _11c.last?_11c.last:_11c.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_11d){var _11e=dojo.doc,mark=_11d.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_11e.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_11e.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_11e.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_11f){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_11f||dojo.global,dijit.getBookmark),openedForWindow:_11f};},focus:function(_120){if(!_120){return;}var node="node" in _120?_120.node:_120,_121=_120.bookmark,_122=_120.openedForWindow,_123=_121?_121.isCollapsed:false;if(node){var _124=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_124&&_124.focus){try{_124.focus();}catch(e){}}dijit._onFocusNode(node);}if(_121&&dojo.withGlobal(_122||dojo.global,dijit.isCollapsed)&&!_123){if(_122){_122.focus();}try{dojo.withGlobal(_122||dojo.global,dijit.moveToBookmark,null,[_121]);}catch(e2){}}},_activeStack:[],registerIframe:function(_125){return dijit.registerWin(_125.contentWindow,_125);},unregisterIframe:function(_126){dijit.unregisterWin(_126);},registerWin:function(_127,_128){var _129=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_128||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_127.document.documentElement:_127.document;if(doc){if(dojo.isIE){_127.document.body.attachEvent("onmousedown",_129);var _12a=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_128||evt.srcElement);}else{dijit._onTouchNode(_128||evt.srcElement);}};doc.attachEvent("onactivate",_12a);var _12b=function(evt){dijit._onBlurNode(_128||evt.srcElement);};doc.attachEvent("ondeactivate",_12b);return function(){_127.document.detachEvent("onmousedown",_129);doc.detachEvent("onactivate",_12a);doc.detachEvent("ondeactivate",_12b);doc=null;};}else{doc.body.addEventListener("mousedown",_129,true);var _12c=function(evt){dijit._onFocusNode(_128||evt.target);};doc.addEventListener("focus",_12c,true);var _12d=function(evt){dijit._onBlurNode(_128||evt.target);};doc.addEventListener("blur",_12d,true);return function(){doc.body.removeEventListener("mousedown",_129,true);doc.removeEventListener("focus",_12c,true);doc.removeEventListener("blur",_12d,true);doc=null;};}}},unregisterWin:function(_12e){_12e&&_12e();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _12f=[];try{while(node){var _130=dojo.attr(node,"dijitPopupParent");if(_130){node=dijit.byId(_130).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_131=id&&dijit.byId(id);if(_131&&!(by=="mouse"&&_131.get("disabled"))){_12f.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_12f,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_132,by){var _133=dijit._activeStack;dijit._activeStack=_132;for(var _134=0;_134<Math.min(_133.length,_132.length);_134++){if(_133[_134]!=_132[_134]){break;}}var _135;for(var i=_133.length-1;i>=_134;i--){_135=dijit.byId(_133[i]);if(_135){_135._focused=false;_135.set("focused",false);_135._hasBeenBlurred=true;if(_135._onBlur){_135._onBlur(by);}dojo.publish("widgetBlur",[_135,by]);}}for(i=_134;i<_132.length;i++){_135=dijit.byId(_132[i]);if(_135){_135._focused=true;_135.set("focused",true);if(_135._onFocus){_135._onFocus(by);}dojo.publish("widgetFocus",[_135,by]);}}}});dojo.addOnLoad(function(){var _136=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_136);_136=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_137){this.pairs=[];this.returnWrappers=_137||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_138,wrap,_139,_13a){this.pairs[((_13a)?"unshift":"push")]([name,_138,wrap,_139]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_13b,_13c){var _13d=dojo.map(_13b,function(_13e){var c={corner:_13e,pos:{x:pos.x,y:pos.y}};if(_13c){c.pos.x+=_13e.charAt(1)=="L"?_13c.x:-_13c.x;c.pos.y+=_13e.charAt(0)=="T"?_13c.y:-_13c.y;}return c;});return dijit._place(node,_13d);};dijit._place=function(node,_13f,_140,_141){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_13f,function(_142){var _143=_142.corner;var pos=_142.pos;var _144=0;var _145={w:_143.charAt(1)=="L"?(view.l+view.w)-pos.x:pos.x-view.l,h:_143.charAt(1)=="T"?(view.t+view.h)-pos.y:pos.y-view.t};if(_140){var res=_140(node,_142.aroundCorner,_143,_145,_141);_144=typeof res=="undefined"?0:res;}var _146=node.style;var _147=_146.display;var _148=_146.visibility;_146.visibility="hidden";_146.display="";var mb=dojo.marginBox(node);_146.display=_147;_146.visibility=_148;var _149=Math.max(view.l,_143.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_14a=Math.max(view.t,_143.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_143.charAt(1)=="L"?(_149+mb.w):pos.x),endY=Math.min(view.t+view.h,_143.charAt(0)=="T"?(_14a+mb.h):pos.y),_14b=endX-_149,_14c=endY-_14a;_144+=(mb.w-_14b)+(mb.h-_14c);if(best==null||_144<best.overflow){best={corner:_143,aroundCorner:_142.aroundCorner,x:_149,y:_14a,w:_14b,h:_14c,overflow:_144,spaceAvailable:_145};}return !_144;});if(best.overflow&&_140){_140(node,best.aroundCorner,best.corner,best.spaceAvailable,_141);}var l=dojo._isBodyLtr(),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";return best;};dijit.placeOnScreenAroundNode=function(node,_14d,_14e,_14f){_14d=dojo.byId(_14d);var _150=dojo.position(_14d,true);return dijit._placeOnScreenAroundRect(node,_150.x,_150.y,_150.w,_150.h,_14e,_14f);};dijit.placeOnScreenAroundRectangle=function(node,_151,_152,_153){return dijit._placeOnScreenAroundRect(node,_151.x,_151.y,_151.width,_151.height,_152,_153);};dijit._placeOnScreenAroundRect=function(node,x,y,_154,_155,_156,_157){var _158=[];for(var _159 in _156){_158.push({aroundCorner:_159,corner:_156[_159],pos:{x:x+(_159.charAt(1)=="L"?0:_154),y:y+(_159.charAt(0)=="T"?0:_155)}});}return dijit._place(node,_158,_157,{w:_154,h:_155});};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_15a,_15b,_15c){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_15d,_15e){var _15f={};dojo.forEach(_15d,function(pos){switch(pos){case "after":_15f[_15e?"BR":"BL"]=_15e?"BL":"BR";break;case "before":_15f[_15e?"BL":"BR"]=_15e?"BR":"BL";break;case "below-alt":_15e=!_15e;case "below":_15f[_15e?"BL":"BR"]=_15e?"TL":"TR";_15f[_15e?"BR":"BL"]=_15e?"TR":"TL";break;case "above-alt":_15e=!_15e;case "above":default:_15f[_15e?"TL":"TR"]=_15e?"BL":"BR";_15f[_15e?"TR":"TL"]=_15e?"BR":"BL";break;}});return _15f;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_160){var _161=_160.declaredClass?_160._popupWrapper:(_160.parentNode&&dojo.hasClass(_160.parentNode,"dijitPopup")),node=_160.domNode||_160;if(!_161){_161=dojo.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},dojo.body());_161.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";if(_160.declaredClass){_160._popupWrapper=_161;dojo.connect(_160,"destroy",function(){dojo.destroy(_161);delete _160._popupWrapper;});}}return _161;},moveOffScreen:function(_162){var _163=this._createWrapper(_162);dojo.style(_163,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_164){var _165=this._createWrapper(_164);dojo.style(_165,"display","none");},getTopPopup:function(){var _166=this._stack;for(var pi=_166.length-1;pi>0&&_166[pi].parent===_166[pi-1].widget;pi--){}return _166[pi];},open:function(args){var _167=this._stack,_168=args.popup,_169=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_16a=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_167.length&&(!args.parent||!dojo.isDescendant(args.parent.domNode,_167[_167.length-1].widget.domNode))){dijit.popup.close(_167[_167.length-1].widget);}var _16b=this._createWrapper(_168);dojo.attr(_16b,{id:id,style:{zIndex:this._beginZIndex+_167.length},"class":"dijitPopup "+(_168.baseClass||_168["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){if(!_168.bgIframe){_168.bgIframe=new dijit.BackgroundIframe(_16b);}}var best=_16a?dijit.placeOnScreenAroundElement(_16b,_16a,_169,_168.orient?dojo.hitch(_168,"orient"):null):dijit.placeOnScreen(_16b,args,_169=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_16b.style.display="";_16b.style.visibility="visible";_168.domNode.style.visibility="visible";var _16c=[];_16c.push(dojo.connect(_16b,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _16d=this.getTopPopup();if(_16d&&_16d.onCancel){_16d.onCancel();}}}}));if(_168.onCancel){_16c.push(dojo.connect(_168,"onCancel",args.onCancel));}_16c.push(dojo.connect(_168,_168.onExecute?"onExecute":"onChange",this,function(){var _16e=this.getTopPopup();if(_16e&&_16e.onExecute){_16e.onExecute();}}));_167.push({widget:_168,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_16c});if(_168.onOpen){_168.onOpen(best);}return best;},close:function(_16f){var _170=this._stack;while((_16f&&dojo.some(_170,function(elem){return elem.widget==_16f;}))||(!_16f&&_170.length)){var top=_170.pop(),_171=top.widget,_172=top.onClose;if(_171.onClose){_171.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_171&&_171.domNode){this.hide(_171);}if(_172){_172();}}}};dijit._frames=new function(){var _173=[];this.pop=function(){var _174;if(_173.length){_174=_173.pop();_174.style.display="";}else{if(dojo.isIE<9){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_174=dojo.doc.createElement(html);}else{_174=dojo.create("iframe");_174.src="javascript:\"\"";_174.className="dijitBackgroundIframe";dojo.style(_174,"opacity",0.1);}_174.tabIndex=-1;dijit.setWaiRole(_174,"presentation");}return _174;};this.push=function(_175){_175.style.display="none";_173.push(_175);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _176=(this.iframe=dijit._frames.pop());node.appendChild(_176);if(dojo.isIE<7||dojo.isQuirks){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_176,{width:"100%",height:"100%"});}}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_177=d.isOpera,maj=Math.floor,ff=d.isFF,_178=d.boxModel.replace(/-/,""),_179={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_ie9:maj(ie)==9,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_177,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_179["dj_"+_178]=true;var _17a="";for(var clz in _179){if(_179[clz]){_17a+=clz+" ";}}html.className=d.trim(html.className+" "+_17a);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _17b="dj_rtl dijitRtl "+_17a.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_17b);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_17c,node,_17d,obj,_17e,_17f,_180){if(obj!=this._obj){this.stop();this._initialDelay=_17f||500;this._subsequentDelay=_17e||0.9;this._minDelay=_180||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_17c,_17d);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_181,_182,_183,_184,_185,_186){if(_181.keyCode){_181.charOrCode=_181.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_181.charCode){_181.charOrCode=String.fromCharCode(_181.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_181.charOrCode&&(_181.ctrlKey===undefined||_181.ctrlKey==evt.ctrlKey)&&(_181.altKey===undefined||_181.altKey==evt.altKey)&&(_181.metaKey===undefined||_181.metaKey==(evt.metaKey||false))&&(_181.shiftKey===undefined||_181.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_182,node,_183,_181,_184,_185,_186);}else{if(dijit.typematic._obj==_181){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_181){dijit.typematic.stop();}})];},addMouseListener:function(node,_187,_188,_189,_18a,_18b){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_187,node,_188,node,_189,_18a,_18b);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_187,node,_188,node,_189,_18a,_18b);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_18c,_18d,_18e,_18f,_190,_191,_192,_193){return this.addKeyListener(_18d,_18e,_18f,_190,_191,_192,_193).concat(this.addMouseListener(_18c,_18f,_190,_191,_192,_193));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _194=cs.backgroundImage;var _195=(cs.borderTopColor==cs.borderRightColor)||(_194!=null&&(_194=="none"||_194=="url(invalid-url:)"));dojo[_195?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{hasWaiRole:function(elem,role){var _196=this.getWaiRole(elem);return role?(_196.indexOf(role)>-1):(_196.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){dojo.attr(elem,"role",role);},removeWaiRole:function(elem,role){var _197=dojo.attr(elem,"role");if(!_197){return;}if(role){var t=dojo.trim((" "+_197+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_198){return elem.hasAttribute?elem.hasAttribute("aria-"+_198):!!elem.getAttribute("aria-"+_198);},getWaiState:function(elem,_199){return elem.getAttribute("aria-"+_199)||"";},setWaiState:function(elem,_19a,_19b){elem.setAttribute("aria-"+_19a,_19b);},removeWaiState:function(elem,_19c){elem.removeAttribute("aria-"+_19c);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dojo.Stateful"]){dojo._hasResource["dojo.Stateful"]=true;dojo.provide("dojo.Stateful");dojo.declare("dojo.Stateful",null,{postscript:function(_19d){if(_19d){dojo.mixin(this,_19d);}},get:function(name){return this[name];},set:function(name,_19e){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _19f=this[name];this[name]=_19e;if(this._watchCallbacks){this._watchCallbacks(name,_19f,_19e);}return this;},watch:function(name,_1a0){var _1a1=this._watchCallbacks;if(!_1a1){var self=this;_1a1=this._watchCallbacks=function(name,_1a2,_1a3,_1a4){var _1a5=function(_1a6){if(_1a6){_1a6=_1a6.slice();for(var i=0,l=_1a6.length;i<l;i++){try{_1a6[i].call(self,name,_1a2,_1a3);}catch(e){console.error(e);}}}};_1a5(_1a1["_"+name]);if(!_1a4){_1a5(_1a1["*"]);}};}if(!_1a0&&typeof name==="function"){_1a0=name;name="*";}else{name="_"+name;}var _1a7=_1a1[name];if(typeof _1a7!=="object"){_1a7=_1a1[name]=[];}_1a7.push(_1a0);return {unwatch:function(){_1a7.splice(dojo.indexOf(_1a7,_1a0),1);}};}});}if(!dojo._hasResource["dijit._WidgetBase"]){dojo._hasResource["dijit._WidgetBase"]=true;dojo.provide("dijit._WidgetBase");(function(){dojo.declare("dijit._WidgetBase",dojo.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_1a8,_1a9){this.create(_1a8,_1a9);},create:function(_1aa,_1ab){this.srcNodeRef=dojo.byId(_1ab);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_1aa){this.params=_1aa;dojo._mixin(this,_1aa);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _1ac=this.srcNodeRef;if(_1ac&&_1ac.parentNode&&this.domNode!==_1ac){_1ac.parentNode.replaceChild(this.domNode,_1ac);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _1ad=function(attr,_1ae){if((_1ae.params&&attr in _1ae.params)||_1ae[attr]){_1ae.set(attr,_1ae[attr]);}};for(var attr in this.attributeMap){_1ad(attr,this);}dojo.forEach(this._getSetterAttributes(),function(a){if(!(a in this.attributeMap)){_1ad(a,this);}},this);},_getSetterAttributes:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var r=(ctor._setterAttrs=[]),_1af,_1b0=ctor.prototype;for(var _1b1 in _1b0){if(dojo.isFunction(_1b0[_1b1])&&(_1af=_1b1.match(/^_set([a-zA-Z]*)Attr$/))&&_1af[1]){r.push(_1af[1].charAt(0).toLowerCase()+_1af[1].substr(1));}}}return ctor._setterAttrs;},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||dojo.create("div");}if(this.baseClass){var _1b2=this.baseClass.split(" ");if(!this.isLeftToRight()){_1b2=_1b2.concat(dojo.map(_1b2,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_1b2);}},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_1b3){this._beingDestroyed=true;this.destroyDescendants(_1b3);this.destroy(_1b3);},destroy:function(_1b4){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_1b5){dfe(_1b5,d.disconnect);});dfe(this._subscribes,function(_1b6){dun(_1b6);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_1b4);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_1b7){if(this.bgIframe){this.bgIframe.destroy(_1b7);delete this.bgIframe;}if(this.domNode){if(_1b7){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_1b7){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_1b8){dojo.forEach(this.getChildren(),function(_1b9){if(_1b9.destroyRecursive){_1b9.destroyRecursive(_1b8);}});},uninitialize:function(){return false;},_setClassAttr:function(_1ba){var _1bb=this[this.attributeMap["class"]||"domNode"];dojo.replaceClass(_1bb,_1ba,this["class"]);this._set("class",_1ba);},_setStyleAttr:function(_1bc){var _1bd=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_1bc)){dojo.style(_1bd,_1bc);}else{if(_1bd.style.cssText){_1bd.style.cssText+="; "+_1bc;}else{_1bd.style.cssText=_1bc;}}this._set("style",_1bc);},_attrToDom:function(attr,_1be){var _1bf=this.attributeMap[attr];dojo.forEach(dojo.isArray(_1bf)?_1bf:[_1bf],function(_1c0){var _1c1=this[_1c0.node||_1c0||"domNode"];var type=_1c0.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_1be)){_1be=dojo.hitch(this,_1be);}var _1c2=_1c0.attribute?_1c0.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_1c1,_1c2,_1be);break;case "innerText":_1c1.innerHTML="";_1c1.appendChild(dojo.doc.createTextNode(_1be));break;case "innerHTML":_1c1.innerHTML=_1be;break;case "class":dojo.replaceClass(_1c1,_1be,this[attr]);break;}},this);},get:function(name){var _1c3=this._getAttrNames(name);return this[_1c3.g]?this[_1c3.g]():this[name];},set:function(name,_1c4){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _1c5=this._getAttrNames(name);if(this[_1c5.s]){var _1c6=this[_1c5.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_1c4);}this._set(name,_1c4);}return _1c6||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_1c7){var _1c8=this[name];this[name]=_1c7;if(this._watchCallbacks&&this._created&&_1c7!==_1c8){this._watchCallbacks(name,_1c8,_1c7);}},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},connect:function(obj,_1c9,_1ca){var _1cb=[dojo._connect(obj,_1c9,this,_1ca)];this._connects.push(_1cb);return _1cb;},disconnect:function(_1cc){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_1cc){dojo.forEach(_1cc,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_1cd,_1ce){var _1cf=dojo.subscribe(_1cd,this,_1ce);this._subscribes.push(_1cf);return _1cf;},unsubscribe:function(_1d0){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_1d0){dojo.unsubscribe(_1d0);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},placeAt:function(_1d1,_1d2){if(_1d1.declaredClass&&_1d1.addChild){_1d1.addChild(this,_1d2);}else{dojo.place(this.domNode,_1d1,_1d2);}return this;}});})();}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.connect(dojo,"_connect",function(_1d3,_1d4){if(_1d3&&dojo.isFunction(_1d3._onConnect)){_1d3._onConnect(_1d4);}});dijit._connectOnUseEventHandler=function(_1d5){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _1d6=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_1d6);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_1d6);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){dojo.declare("dijit._Widget",dijit._WidgetBase,{_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,create:function(_1d7,_1d8){this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}this.inherited(arguments);if(this.domNode){for(attr in this.params){this._onConnect(attr);}}},_onConnect:function(_1d9){if(_1d9 in this._deferredConnects){var _1da=this[this._deferredConnects[_1d9]||"domNode"];this.connect(_1da,_1d9.toLowerCase(),_1d9);delete this._deferredConnects[_1d9];}},focused:false,isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},setAttribute:function(attr,_1db){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_1db);},attr:function(name,_1dc){if(dojo.config.isDebug){var _1dd=arguments.callee._ach||(arguments.callee._ach={}),_1de=(arguments.callee.caller||"unknown caller").toString();if(!_1dd[_1de]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_1de,"","2.0");_1dd[_1de]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},nodesWithKeyClick:["input","button"],connect:function(obj,_1df,_1e0){var d=dojo,dc=d._connect,_1e1=this.inherited(arguments,[obj,_1df=="ondijitclick"?"onclick":_1df,_1e0]);if(_1df=="ondijitclick"){if(d.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_1e0);_1e1.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;if(!("openDropDown" in this&&obj==this._buttonNode)){e.preventDefault();}}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target==dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}}return _1e1;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_1e2,map,_1e3,_1e4){_1e4=_1e4||dojo.global;_1e3=_1e3?dojo.hitch(_1e4,_1e3):function(v){return v;};return _1e2.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_1e5,key,_1e6){var _1e7=dojo.getObject(key,false,map);if(_1e6){_1e7=dojo.getObject(_1e6,false,_1e4).call(_1e4,_1e7,key);}return _1e3(_1e7,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");var cache={};dojo.cache=function(_1e8,url,_1e9){if(typeof _1e8=="string"){var _1ea=dojo.moduleUrl(_1e8,url);}else{_1ea=_1e8;_1e9=url;}var key=_1ea.toString();var val=_1e9;if(_1e9!=undefined&&!dojo.isString(_1e9)){val=("value" in _1e9?_1e9.value:undefined);}var _1eb=_1e9&&_1e9.sanitize?true:false;if(typeof val=="string"){val=cache[key]=_1eb?dojo.cache._sanitize(val):val;}else{if(val===null){delete cache[key];}else{if(!(key in cache)){val=dojo._getText(key);cache[key]=_1eb?dojo.cache._sanitize(val):val;}val=cache[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _1ec=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_1ec){val=_1ec[1];}}else{val="";}return val;};}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _1ed=this.declaredClass,_1ee=this;return dojo.string.substitute(tmpl,this,function(_1ef,key){if(key.charAt(0)=="!"){_1ef=dojo.getObject(key.substr(1),false,_1ee);}if(typeof _1ef=="undefined"){throw new Error(_1ed+" template:"+key);}if(_1ef==null){return "";}return key.charAt(0)=="!"?_1ef:_1ef.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _1f0=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_1f0)){node=dojo._toDom(this._stringRepl(_1f0));if(node.nodeType!=1){throw new Error("Invalid template: "+_1f0);}}else{node=_1f0.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}));this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_1f1){var dest=this.containerNode;if(_1f1&&dest){while(_1f1.hasChildNodes()){dest.appendChild(_1f1.firstChild);}}},_attachTemplateNodes:function(_1f2,_1f3){_1f3=_1f3||function(n,p){return n.getAttribute(p);};var _1f4=dojo.isArray(_1f2)?_1f2:(_1f2.all||_1f2.getElementsByTagName("*"));var x=dojo.isArray(_1f2)?0:-1;for(;x<_1f4.length;x++){var _1f5=(x==-1)?_1f2:_1f4[x];if(this.widgetsInTemplate&&(_1f3(_1f5,"dojoType")||_1f3(_1f5,"data-dojo-type"))){continue;}var _1f6=_1f3(_1f5,"dojoAttachPoint")||_1f3(_1f5,"data-dojo-attach-point");if(_1f6){var _1f7,_1f8=_1f6.split(/\s*,\s*/);while((_1f7=_1f8.shift())){if(dojo.isArray(this[_1f7])){this[_1f7].push(_1f5);}else{this[_1f7]=_1f5;}this._attachPoints.push(_1f7);}}var _1f9=_1f3(_1f5,"dojoAttachEvent")||_1f3(_1f5,"data-dojo-attach-event");if(_1f9){var _1fa,_1fb=_1f9.split(/\s*,\s*/);var trim=dojo.trim;while((_1fa=_1fb.shift())){if(_1fa){var _1fc=null;if(_1fa.indexOf(":")!=-1){var _1fd=_1fa.split(":");_1fa=trim(_1fd[0]);_1fc=trim(_1fd[1]);}else{_1fa=trim(_1fa);}if(!_1fc){_1fc=_1fa;}this._attachEvents.push(this.connect(_1f5,_1fa,_1fc));}}}var role=_1f3(_1f5,"waiRole");if(role){dijit.setWaiRole(_1f5,role);}var _1fe=_1f3(_1f5,"waiState");if(_1fe){dojo.forEach(_1fe.split(/\s*,\s*/),function(_1ff){if(_1ff.indexOf("-")!=-1){var pair=_1ff.split("-");dijit.setWaiState(_1f5,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_200){delete this[_200];},this);this._attachPoints=[];dojo.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_201,_202,_203){var _204=dijit._Templated._templateCache;var key=_202||_201;var _205=_204[key];if(_205){try{if(!_205.ownerDocument||_205.ownerDocument==dojo.doc){return _205;}}catch(e){}dojo.destroy(_205);}if(!_202){_202=dojo.cache(_201,{sanitize:true});}_202=dojo.string.trim(_202);if(_203||_202.match(/\$\{([^\}]+)\}/g)){return (_204[key]=_202);}else{var node=dojo._toDom(_202);if(node.nodeType!=1){throw new Error("Invalid template: "+_202);}return (_204[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _206=dijit._Templated._templateCache;for(var key in _206){var _207=_206[key];if(typeof _207=="object"){dojo.destroy(_207);}delete _206[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_208,_209){var _20a=this.containerNode;if(_209&&typeof _209=="number"){var _20b=this.getChildren();if(_20b&&_20b.length>=_209){_20a=_20b[_209-1].domNode;_209="after";}}dojo.place(_208.domNode,_20a,_209);if(this._started&&!_208._started){_208.startup();}},removeChild:function(_20c){if(typeof _20c=="number"){_20c=this.getChildren()[_20c];}if(_20c){var node=_20c.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},destroyDescendants:function(_20d){dojo.forEach(this.getChildren(),function(_20e){_20e.destroyRecursive(_20d);});},_getSiblingOfChild:function(_20f,dir){var node=_20f.domNode,_210=(dir>0?"nextSibling":"previousSibling");do{node=node[_210];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node);},getIndexOfChild:function(_211){return dojo.indexOf(this.getChildren(),_211);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_212){_212.startup();});this.inherited(arguments);}});}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var _213=dijit.getEnclosingWidget(this.domNode.parentNode);return _213&&_213.isContainer?_213:null;},_getSibling:function(_214){var node=this.domNode;do{node=node[_214+"Sibling"];}while(node&&node.nodeType!=1);return node&&dijit.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _215=this.getParent&&this.getParent();if(!(_215&&_215.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize();});}},resize:function(_216,_217){var node=this.domNode;if(_216){dojo.marginBox(node,_216);if(_216.t){node.style.top=_216.t+"px";}if(_216.l){node.style.left=_216.l+"px";}}var mb=_217||{};dojo.mixin(mb,_216||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(node),mb);}var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var be=dojo._getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=dojo._getPadExtents(node,cs);this._contentBox={l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_218){var cls=this.baseClass+"-child "+(_218.baseClass?this.baseClass+"-"+_218.baseClass:"");dojo.addClass(_218.domNode,cls);},addChild:function(_219,_21a){this.inherited(arguments);if(this._started){this._setupChild(_219);}},removeChild:function(_21b){var cls=this.baseClass+"-child"+(_21b.baseClass?" "+this.baseClass+"-"+_21b.baseClass:"");dojo.removeClass(_21b.domNode,cls);this.inherited(arguments);}});dijit.layout.marginBox2contentBox=function(node,mb){var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var pb=dojo._getPadBorderExtents(node,cs);return {l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _21c=function(word){return word.substring(0,1).toUpperCase()+word.substring(1);};var size=function(_21d,dim){var _21e=_21d.resize?_21d.resize(dim):dojo.marginBox(_21d.domNode,dim);if(_21e){dojo.mixin(_21d,_21e);}else{dojo.mixin(_21d,dojo.marginBox(_21d.domNode));dojo.mixin(_21d,dim);}};dijit.layout.layoutChildren=function(_21f,dim,_220,_221,_222){dim=dojo.mixin({},dim);dojo.addClass(_21f,"dijitLayoutContainer");_220=dojo.filter(_220,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(dojo.filter(_220,function(item){return item.region=="center"||item.layoutAlign=="client";}));dojo.forEach(_220,function(_223){var elm=_223.domNode,pos=(_223.region||_223.layoutAlign);var _224=elm.style;_224.left=dim.l+"px";_224.top=dim.t+"px";_224.position="absolute";dojo.addClass(elm,"dijitAlign"+_21c(pos));var _225={};if(_221&&_221==_223.id){_225[_223.region=="top"||_223.region=="bottom"?"h":"w"]=_222;}if(pos=="top"||pos=="bottom"){_225.w=dim.w;size(_223,_225);dim.h-=_223.h;if(pos=="top"){dim.t+=_223.h;}else{_224.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_225.h=dim.h;size(_223,_225);dim.w-=_223.w;if(pos=="left"){dim.l+=_223.w;}else{_224.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(_223,dim);}}}});};})();}if(!dojo._hasResource["dijit._CssStateMixin"]){dojo._hasResource["dijit._CssStateMixin"]=true;dojo.provide("dijit._CssStateMixin");dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(e){this.connect(this.domNode,e,"_cssMouseEvent");},this);dojo.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active"],function(attr){this.watch(attr,dojo.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._setStateClass();},_cssMouseEvent:function(_226){if(!this.disabled){switch(_226.type){case "mouseenter":case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseleave":case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":this._set("active",true);this._mouseDown=true;var _227=this.connect(dojo.body(),"onmouseup",function(){this._mouseDown=false;this._set("active",false);this.disconnect(_227);});break;}}},_setStateClass:function(){var _228=this.baseClass.split(" ");function _229(_22a){_228=_228.concat(dojo.map(_228,function(c){return c+_22a;}),"dijit"+_22a);};if(!this.isLeftToRight()){_229("Rtl");}if(this.checked){_229("Checked");}if(this.state){_229(this.state);}if(this.selected){_229("Selected");}if(this.disabled){_229("Disabled");}else{if(this.readOnly){_229("ReadOnly");}else{if(this.active){_229("Active");}else{if(this.hovering){_229("Hover");}}}}if(this._focused){_229("Focused");}var tn=this.stateNode||this.domNode,_22b={};dojo.forEach(tn.className.split(" "),function(c){_22b[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _22b[c];});}dojo.forEach(_228,function(c){_22b[c]=true;});var _22c=[];for(var c in _22b){_22c.push(c);}tn.className=_22c.join(" ");this._stateClasses=_228;},_trackMouseState:function(node,_22d){var _22e=false,_22f=false,_230=false;var self=this,cn=dojo.hitch(this,"connect",node);function _231(){var _232=("disabled" in self&&self.disabled)||("readonly" in self&&self.readonly);dojo.toggleClass(node,_22d+"Hover",_22e&&!_22f&&!_232);dojo.toggleClass(node,_22d+"Active",_22f&&!_232);dojo.toggleClass(node,_22d+"Focused",_230&&!_232);};cn("onmouseenter",function(){_22e=true;_231();});cn("onmouseleave",function(){_22e=false;_22f=false;_231();});cn("onmousedown",function(){_22f=true;_231();});cn("onmouseup",function(){_22f=false;_231();});cn("onfocus",function(){_230=true;_231();});cn("onblur",function(){_230=false;_231();});this.watch("disabled",_231);this.watch("readOnly",_231);}});}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/'/g,"&quot;")+"\""):"";this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown");},_setDisabledAttr:function(_233){this._set("disabled",_233);dojo.attr(this.focusNode,"disabled",_233);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_233);}dijit.setWaiState(this.focusNode,"disabled",_233);if(_233){this._set("hovering",false);this._set("active",false);var _234="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:"focusNode";dojo.forEach(dojo.isArray(_234)?_234:[_234],function(_235){var node=this[_235];if(dojo.isWebKit||dijit.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.focusNode.setAttribute("tabIndex",this.tabIndex);}}},setDisabled:function(_236){dojo.deprecated("setDisabled("+_236+") is deprecated. Use set('disabled',"+_236+") instead.","","2.0");this.set("disabled",_236);},_onFocus:function(e){if(this.scrollOnFocus){dojo.window.scrollIntoView(this.domNode);}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){if(!this.disabled){dijit.focus(this.focusNode);}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_237){},_onChangeActive:false,_handleOnChange:function(_238,_239){if(this._lastValueReported==undefined&&(_239===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_238;}this._pendingOnChange=this._pendingOnChange||(typeof _238!=typeof this._lastValueReported)||(this.compare(_238,this._lastValueReported)!=0);if((this.intermediateChanges||_239||_239===undefined)&&this._pendingOnChange){this._lastValueReported=_238;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_238);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_23a){dojo.deprecated("dijit.form._FormWidget:setValue("+_23a+") is deprecated.  Use set('value',"+_23a+") instead.","","2.0");this.set("value",_23a);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_onMouseDown:function(e){if(!e.ctrlKey&&dojo.mouseButtons.isLeft(e)&&this.isFocusable()){var _23b=this.connect(dojo.body(),"onmouseup",function(){if(this.isFocusable()){this.focus();}this.disconnect(_23b);});}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_23c){dojo.attr(this.focusNode,"readOnly",_23c);dijit.setWaiState(this.focusNode,"readonly",_23c);this._set("readOnly",_23c);},postCreate:function(){this.inherited(arguments);if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_23d,_23e){this._handleOnChange(_23d,_23e);},_handleOnChange:function(_23f,_240){this._set("value",_23f);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function(){if(dojo.isIE==7){var _241=this.domNode;var _242=_241.parentNode;var _243=_241.firstChild||_241;var _244=_243.style.filter;var _245=this;while(_242&&_242.clientHeight==0){(function ping(){var _246=_245.connect(_242,"onscroll",function(e){_245.disconnect(_246);_243.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_243.style.filter=_244;},0);});})();_242=_242.parentNode;}}}});}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit");}if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");dojo.getObject("colors",true,dojo);(function(){var _247=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=function(_248,obj){var m=_248.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=dojo.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}return dojo.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_247(m1,m2,H+1/3)*256,_247(m1,m2,H)*256,_247(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}}return null;};var _249=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};dojo.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_249(t.r,0,255));t.g=Math.round(_249(t.g,0,255));t.b=Math.round(_249(t.b,0,255));t.a=_249(t.a,0,1);return this;};})();dojo.colors.makeGrey=function(g,a){return dojo.colorFromArray([g,g,g,a]);};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.getObject("i18n",true,dojo);dojo.i18n.getLocalization=dojo.i18n.getLocalization||function(_24a,_24b,_24c){_24c=dojo.i18n.normalizeLocale(_24c);var _24d=_24c.split("-");var _24e=[_24a,"nls",_24b].join(".");var _24f=dojo._loadedModules[_24e];if(_24f){var _250;for(var i=_24d.length;i>0;i--){var loc=_24d.slice(0,i).join("_");if(_24f[loc]){_250=_24f[loc];break;}}if(!_250){_250=_24f.ROOT;}if(_250){var _251=function(){};_251.prototype=_250;return new _251();}}throw new Error("Bundle not found: "+_24b+" in "+_24a+" , locale="+_24c);};dojo.i18n.normalizeLocale=function(_252){var _253=_252?_252.toLowerCase():dojo.locale;if(_253=="root"){_253="ROOT";}return _253;};dojo.i18n._requireLocalization=function(_254,_255,_256,_257){var _258=dojo.i18n.normalizeLocale(_256);var _259=[_254,"nls",_255].join(".");var _25a="";if(_257){var _25b=_257.split(",");for(var i=0;i<_25b.length;i++){if(_258["indexOf"](_25b[i])==0){if(_25b[i].length>_25a.length){_25a=_25b[i];}}}if(!_25a){_25a="ROOT";}}var _25c=_257?_25a:_258;var _25d=dojo._loadedModules[_259];var _25e=null;if(_25d){if(dojo.config.localizationComplete&&_25d._built){return;}var _25f=_25c.replace(/-/g,"_");var _260=_259+"."+_25f;_25e=dojo._loadedModules[_260];}if(!_25e){_25d=dojo["provide"](_259);var syms=dojo._getModuleSymbols(_254);var _261=syms.concat("nls").join("/");var _262;dojo.i18n._searchLocalePath(_25c,_257,function(loc){var _263=loc.replace(/-/g,"_");var _264=_259+"."+_263;var _265=false;if(!dojo._loadedModules[_264]){dojo["provide"](_264);var _266=[_261];if(loc!="ROOT"){_266.push(loc);}_266.push(_255);var _267=_266.join("/")+".js";_265=dojo._loadPath(_267,null,function(hash){hash=hash.root||hash;var _268=function(){};_268.prototype=_262;_25d[_263]=new _268();for(var j in hash){_25d[_263][j]=hash[j];}});}else{_265=true;}if(_265&&_25d[_263]){_262=_25d[_263];}else{_25d[_263]=_262;}if(_257){return true;}});}if(_257&&_258!=_25a){_25d[_258.replace(/-/g,"_")]=_25d[_25a.replace(/-/g,"_")];}};(function(){var _269=dojo.config.extraLocale;if(_269){if(!_269 instanceof Array){_269=[_269];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_26a,_26b){req(m,b,_26a,_26b);if(_26a){return;}for(var i=0;i<_269.length;i++){req(m,b,_269[i],_26b);}};}})();dojo.i18n._searchLocalePath=function(_26c,down,_26d){_26c=dojo.i18n.normalizeLocale(_26c);var _26e=_26c.split("-");var _26f=[];for(var i=_26e.length;i>0;i--){_26f.push(_26e.slice(0,i).join("-"));}_26f.push(false);if(down){_26f.reverse();}for(var j=_26f.length-1;j>=0;j--){var loc=_26f[j]||"ROOT";var stop=_26d(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_270,_271){function _272(_273){_273=dojo.i18n.normalizeLocale(_273);dojo.i18n._searchLocalePath(_273,true,function(loc){for(var i=0;i<_271.length;i++){if(_271[i]==loc){dojo["require"](_270+"_"+loc);return true;}}return false;});};_272();var _274=dojo.config.extraLocale||[];for(var i=0;i<_274.length;i++){_272(_274[i]);}};}if(!dojo._hasResource["dijit._PaletteMixin"]){dojo._hasResource["dijit._PaletteMixin"]=true;dojo.provide("dijit._PaletteMixin");dojo.declare("dijit._PaletteMixin",[dijit._CssStateMixin],{defaultTimeout:500,timeoutChangeRate:0.9,value:null,_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",_preparePalette:function(_275,_276,_277){this._cells=[];var url=this._blankGif;_277=_277||dojo.getObject(this.dyeClass);for(var row=0;row<_275.length;row++){var _278=dojo.create("tr",{tabIndex:"-1"},this.gridNode);for(var col=0;col<_275[row].length;col++){var _279=_275[row][col];if(_279){var _27a=new _277(_279,row,col);var _27b=dojo.create("td",{"class":this.cellClass,tabIndex:"-1",title:_276[_279]});_27a.fillCell(_27b,url);this.connect(_27b,"ondijitclick","_onCellClick");this._trackMouseState(_27b,this.cellClass);dojo.place(_27b,_278);_27b.index=this._cells.length;this._cells.push({node:_27b,dye:_27a});}}}this._xDim=_275[0].length;this._yDim=_275.length;var _27c={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _27c){this._connects.push(dijit.typematic.addKeyListener(this.domNode,{charOrCode:dojo.keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _27d=_27c[key];return function(_27e){this._navigateByKey(_27d,_27e);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){dijit.focus(this._currentFocus);},_onCellClick:function(evt){var _27f=evt.currentTarget,_280=this._getDye(_27f).getValue();this._setCurrent(_27f);setTimeout(dojo.hitch(this,function(){dijit.focus(_27f);this._setValueAttr(_280,true);}));dojo.removeClass(_27f,"dijitPaletteCellHover");dojo.stopEvent(evt);},_setCurrent:function(node){if("_currentFocus" in this){dojo.attr(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){dojo.attr(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_281,_282){if(this._selectedCell>=0){dojo.removeClass(this._cells[this._selectedCell].node,"dijitPaletteCellSelected");}this._selectedCell=-1;if(_281){for(var i=0;i<this._cells.length;i++){if(_281==this._cells[i].dye.getValue()){this._selectedCell=i;dojo.addClass(this._cells[i].node,"dijitPaletteCellSelected");break;}}}this._set("value",this._selectedCell>=0?_281:null);if(_282||_282===undefined){this.onChange(_281);}},onChange:function(_283){},_navigateByKey:function(_284,_285){if(_285==-1){return;}var _286=this._currentFocus.index+_284;if(_286<this._cells.length&&_286>-1){var _287=this._cells[_286].node;this._setCurrent(_287);setTimeout(dojo.hitch(dijit,"focus",_287),0);}},_getDye:function(cell){return this._cells[cell.index].dye;}});}if(!dojo._hasResource["dijit.ColorPalette"]){dojo._hasResource["dijit.ColorPalette"]=true;dojo.provide("dijit.ColorPalette");dojo.declare("dijit.ColorPalette",[dijit._Widget,dijit._Templated,dijit._PaletteMixin],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:dojo.cache("dijit","templates/ColorPalette.html","<div class=\"dijitInline dijitColorPalette\">\n\t<table class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\">\n\t\t<tbody dojoAttachPoint=\"gridNode\"></tbody>\n\t</table>\n</div>\n"),baseClass:"dijitColorPalette",buildRendering:function(){this.inherited(arguments);this._preparePalette(this._palettes[this.palette],dojo.i18n.getLocalization("dojo","colors",this.lang),dojo.declare(dijit._Color,{hc:dojo.hasClass(dojo.body(),"dijit_a11y"),palette:this.palette}));}});dojo.declare("dijit._Color",dojo.Color,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":dojo.moduleUrl("dijit.themes","a11y/colors7x10.png"),"3x4":dojo.moduleUrl("dijit.themes","a11y/colors3x4.png")},constructor:function(_288,row,col){this._alias=_288;this._row=row;this._col=col;this.setColor(dojo.Color.named[_288]);},getValue:function(){return this.toHex();},fillCell:function(cell,_289){var html=dojo.string.substitute(this.hc?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_289,alt:this._alias,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});dojo.place(html,cell);}});}if(!dojo._hasResource["dijit.Declaration"]){dojo._hasResource["dijit.Declaration"]=true;dojo.provide("dijit.Declaration");dojo.declare("dijit.Declaration",dijit._Widget,{_noScript:true,stopParser:true,widgetClass:"",defaults:null,mixins:[],buildRendering:function(){var src=this.srcNodeRef.parentNode.removeChild(this.srcNodeRef),_28a=dojo.query("> script[type^='dojo/method']",src).orphan(),_28b=dojo.query("> script[type^='dojo/connect']",src).orphan(),_28c=src.nodeName;var _28d=this.defaults||{};dojo.forEach(_28a,function(s){var evt=s.getAttribute("event")||s.getAttribute("data-dojo-event"),func=dojo.parser._functionFromScript(s);if(evt){_28d[evt]=func;}else{_28b.push(s);}});this.mixins=this.mixins.length?dojo.map(this.mixins,function(name){return dojo.getObject(name);}):[dijit._Widget,dijit._Templated];_28d.widgetsInTemplate=true;_28d._skipNodeCache=true;_28d.templateString="<"+_28c+" class='"+src.className+"' dojoAttachPoint='"+(src.getAttribute("dojoAttachPoint")||"")+"' dojoAttachEvent='"+(src.getAttribute("dojoAttachEvent")||"")+"' >"+src.innerHTML.replace(/\%7B/g,"{").replace(/\%7D/g,"}")+"</"+_28c+">";dojo.query("[dojoType]",src).forEach(function(node){node.removeAttribute("dojoType");});var wc=dojo.declare(this.widgetClass,this.mixins,_28d);dojo.forEach(_28b,function(s){var evt=s.getAttribute("event")||s.getAttribute("data-dojo-event")||"postscript",func=dojo.parser._functionFromScript(s);dojo.connect(wc.prototype,evt,func);});}});}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.getObject("dnd",true,dojo);dojo.dnd.getCopyKeyState=dojo.isCopyKey;dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId);}while(dojo.byId(id));return id;};dojo.dnd._empty={};dojo.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.getObject("dnd",true,dojo);dojo.dnd.getViewport=dojo.window.getBox;dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.window.getBox(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=-dojo.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=dojo.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=-dojo.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=dojo.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft;ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _28e=n.scrollLeft,_28f=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_28e!=n.scrollLeft||_28f!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(node,e,host){this.node=dojo.byId(node);var pos=e.touches?e.touches[0]:e;this.marginBox={l:pos.pageX,t:pos.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[dojo.connect(d,"onmousemove",this,"onFirstMove"),dojo.connect(d,"ontouchmove",this,"onFirstMove"),dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"ontouchmove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ontouchend",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent)];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,pos=e.touches?e.touches[0]:e;this.host.onMove(this,{l:m.l+pos.pageX,t:m.t+pos.pageY},e);dojo.stopEvent(e);},onMouseUp:function(e){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}dojo.stopEvent(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}dojo.disconnect(this.events.shift());dojo.disconnect(this.events.shift());},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,_290){this.node=dojo.byId(node);if(!_290){_290={};}this.handle=_290.handle?dojo.byId(_290.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_290.delay>0?_290.delay:0;this.skip=_290.skip;this.mover=_290.mover?_290.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ontouchstart",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_291,node){return new dojo.dnd.Moveable(node,_291);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"ontouchmove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"),dojo.connect(this.handle,"ontouchend",this,"onMouseUp"));var pos=e.touches?e.touches[0]:e;this._lastX=pos.pageX;this._lastY=pos.pageY;}else{this.onDragDetected(e);}dojo.stopEvent(e);},onMouseMove:function(e){var pos=e.touches?e.touches[0]:e;if(Math.abs(pos.pageX-this._lastX)>this.delay||Math.abs(pos.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}dojo.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){dojo.disconnect(this.events.pop());}dojo.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_292){dojo.publish("/dnd/move/start",[_292]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_293){dojo.publish("/dnd/move/stop",[_293]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_294,e){},onMove:function(_295,_296,e){this.onMoving(_295,_296);var s=_295.node.style;s.left=_296.l+"px";s.top=_296.t+"px";this.onMoved(_295,_296);},onMoving:function(_297,_298){},onMoved:function(_299,_29a){}});}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_29b,node){return new dojo.dnd.move.constrainedMoveable(node,_29b);},constructor:function(node,_29c){if(!_29c){_29c={};}this.constraints=_29c.constraints;this.within=_29c.within;},onFirstMove:function(_29d){var c=this.constraintBox=this.constraints.call(this,_29d);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo._getMarginSize(_29d.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_29e,_29f){var c=this.constraintBox,s=_29e.node.style;this.onMoving(_29e,_29f);_29f.l=_29f.l<c.l?c.l:c.r<_29f.l?c.r:_29f.l;_29f.t=_29f.t<c.t?c.t:c.b<_29f.t?c.b:_29f.t;s.left=_29f.l+"px";s.top=_29f.t+"px";this.onMoved(_29e,_29f);}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_2a0,node){return new dojo.dnd.move.boxConstrainedMoveable(node,_2a0);},constructor:function(node,_2a1){var box=_2a1&&_2a1.box;this.constraints=function(){return box;};}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_2a2,node){return new dojo.dnd.move.parentConstrainedMoveable(node,_2a2);},constructor:function(node,_2a3){var area=_2a3&&_2a3.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var _2a4=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(node,_2a5){if(!_2a5){_2a5={};}if(_2a5.timeout&&typeof _2a5.timeout=="number"&&_2a5.timeout>=0){this.timeout=_2a5.timeout;}},markupFactory:function(_2a6,node){return new dojo.dnd.TimedMoveable(node,_2a6);},onMoveStop:function(_2a7){if(_2a7._timer){clearTimeout(_2a7._timer);_2a4.call(this,_2a7,_2a7._leftTop);}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_2a8,_2a9){_2a8._leftTop=_2a9;if(!_2a8._timer){var _2aa=this;_2a8._timer=setTimeout(function(){_2a8._timer=null;_2a4.call(_2aa,_2a8,_2a8._leftTop);},this.timeout);}}});})();}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _2ab=this;dojo.mixin(_2ab,args);_2ab.node=args.node;_2ab._showArgs=dojo.mixin({},args);_2ab._showArgs.node=_2ab.node;_2ab._showArgs.duration=_2ab.showDuration;_2ab.showAnim=_2ab.showFunc(_2ab._showArgs);_2ab._hideArgs=dojo.mixin({},args);_2ab._hideArgs.node=_2ab.node;_2ab._hideArgs.duration=_2ab.hideDuration;_2ab.hideAnim=_2ab.hideFunc(_2ab._hideArgs);dojo.connect(_2ab.showAnim,"beforeBegin",dojo.hitch(_2ab.hideAnim,"stop",true));dojo.connect(_2ab.hideAnim,"beforeBegin",dojo.hitch(_2ab.showAnim,"stop",true));},show:function(_2ac){return this.showAnim.play(_2ac||0);},hide:function(_2ad){return this.hideAnim.play(_2ad||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_2ae={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _2af=function(_2b0){this._index=-1;this._animations=_2b0||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_2af,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_2b1,_2b2){if(!this._current){this._current=this._animations[this._index=0];}if(!_2b2&&this._current.status()=="playing"){return this;}var _2b3=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_2b4=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_2b5=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_2b3);d.disconnect(_2b4);d.disconnect(_2b5);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_2b6,_2b7){this.pause();var _2b8=this.duration*_2b6;this._current=null;d.some(this._animations,function(a){if(a.duration<=_2b8){this._current=a;return true;}_2b8-=a.duration;return false;});if(this._current){this._current.gotoPercent(_2b8/this._current.duration,_2b7);}return this;},stop:function(_2b9){if(this._current){if(_2b9){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_2af,_2ae);dojo.fx.chain=function(_2ba){return new _2af(_2ba);};var _2bb=function(_2bc){this._animations=_2bc||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_2bc,function(a){var _2bd=a.duration;if(a.delay){_2bd+=a.delay;}if(this.duration<_2bd){this.duration=_2bd;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_2bb,{_doAction:function(_2be,args){d.forEach(this._animations,function(a){a[_2be].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_2bf,args){var t=this._pseudoAnimation;t[_2bf].apply(t,args);},play:function(_2c0,_2c1){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_2c2,_2c3){var ms=this.duration*_2c2;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_2c3);});this._call("gotoPercent",arguments);return this;},stop:function(_2c4){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_2bb,_2ae);dojo.fx.combine=function(_2c5){return new _2bb(_2c5);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _2c6=d.style(node,"height");return Math.max(_2c6,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{state:"",reset:function(){dojo.forEach(this.getDescendants(),function(_2c7){if(_2c7.reset){_2c7.reset();}});},validate:function(){var _2c8=false;return dojo.every(dojo.map(this.getDescendants(),function(_2c9){_2c9._hasBeenBlurred=true;var _2ca=_2c9.disabled||!_2c9.validate||_2c9.validate();if(!_2ca&&!_2c8){dojo.window.scrollIntoView(_2c9.containerNode||_2c9.domNode);_2c9.focus();_2c8=true;}return _2ca;}),function(item){return item;});},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_2cb){if(!_2cb.name){return;}var _2cc=map[_2cb.name]||(map[_2cb.name]=[]);_2cc.push(_2cb);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _2cd=map[name],_2ce=dojo.getObject(name,false,obj);if(_2ce===undefined){continue;}if(!dojo.isArray(_2ce)){_2ce=[_2ce];}if(typeof _2cd[0].checked=="boolean"){dojo.forEach(_2cd,function(w,i){w.set("value",dojo.indexOf(_2ce,w.value)!=-1);});}else{if(_2cd[0].multiple){_2cd[0].set("value",_2ce);}else{dojo.forEach(_2cd,function(w,i){w.set("value",_2ce[i]);});}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(_2cf){var name=_2cf.name;if(!name||_2cf.disabled){return;}var _2d0=_2cf.get("value");if(typeof _2cf.checked=="boolean"){if(/Radio/.test(_2cf.declaredClass)){if(_2d0!==false){dojo.setObject(name,_2d0,obj);}else{_2d0=dojo.getObject(name,false,obj);if(_2d0===undefined){dojo.setObject(name,null,obj);}}}else{var ary=dojo.getObject(name,false,obj);if(!ary){ary=[];dojo.setObject(name,ary,obj);}if(_2d0!==false){ary.push(_2d0);}}}else{var prev=dojo.getObject(name,false,obj);if(typeof prev!="undefined"){if(dojo.isArray(prev)){prev.push(_2d0);}else{dojo.setObject(name,[prev,_2d0],obj);}}else{dojo.setObject(name,_2d0,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(_2d1){},_getState:function(){var _2d2=dojo.map(this._descendants,function(w){return w.get("state")||"";});return dojo.indexOf(_2d2,"Error")>=0?"Error":dojo.indexOf(_2d2,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){dojo.forEach(this._childConnections||[],dojo.hitch(this,"disconnect"));dojo.forEach(this._childWatches||[],function(w){w.unwatch();});},connectChildren:function(_2d3){var _2d4=this;this.disconnectChildren();this._descendants=this.getDescendants();var set=_2d3?function(name,val){_2d4[name]=val;}:dojo.hitch(this,"_set");set("value",this.get("value"));set("state",this._getState());var _2d5=(this._childConnections=[]),_2d6=(this._childWatches=[]);dojo.forEach(dojo.filter(this._descendants,function(item){return item.validate;}),function(_2d7){dojo.forEach(["state","disabled"],function(attr){_2d6.push(_2d7.watch(attr,function(attr,_2d8,_2d9){_2d4.set("state",_2d4._getState());}));});});var _2da=function(){if(_2d4._onChangeDelayTimer){clearTimeout(_2d4._onChangeDelayTimer);}_2d4._onChangeDelayTimer=setTimeout(function(){delete _2d4._onChangeDelayTimer;_2d4._set("value",_2d4.get("value"));},10);};dojo.forEach(dojo.filter(this._descendants,function(item){return item.onChange;}),function(_2db){_2d5.push(_2d4.connect(_2db,"onChange",_2da));_2d6.push(_2db.watch("disabled",_2da));});},startup:function(){this.inherited(arguments);this.connectChildren(true);this.watch("state",function(attr,_2dc,_2dd){this.onValidStateChange(_2dd=="");});},destroy:function(){this.disconnectChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(_2de){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var _2df=dijit._getTabNavigable(this.containerNode);this._firstFocusItem=_2df.lowest||_2df.first||this.closeButtonNode||this.domNode;this._lastFocusItem=_2df.last||_2df.highest||this._firstFocusItem;}});}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_2e0){this.node.className="dijitDialogUnderlay "+_2e0;this._set("class",_2e0);},postCreate:function(){dojo.body().appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _2e1=dojo.window.getBox();os.top=_2e1.t+"px";os.left=_2e1.l+"px";is.width=_2e1.w+"px";is.height=_2e1.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode);},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";}});}if(!dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]){dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]=true;dojo.provide("dijit.layout._ContentPaneResizeMixin");dojo.declare("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isContainer:true,isLayoutContainer:true,_startChildren:function(){dojo.forEach(this.getChildren(),function(_2e2){_2e2.startup();_2e2._started=true;});},startup:function(){if(this._started){return;}var _2e3=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=_2e3&&_2e3.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._startChildren();if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this._needLayout=!this._childOfLayoutWidget;this.resize();});}},_checkIfSingleChild:function(){var _2e4=dojo.query("> *",this.containerNode).filter(function(node){return node.tagName!=="SCRIPT";}),_2e5=_2e4.filter(function(node){return dojo.hasAttr(node,"data-dojo-type")||dojo.hasAttr(node,"dojoType")||dojo.hasAttr(node,"widgetId");}),_2e6=dojo.filter(_2e5.map(dijit.byNode),function(_2e7){return _2e7&&_2e7.domNode&&_2e7.resize;});if(_2e4.length==_2e5.length&&_2e6.length==1){this._singleChild=_2e6[0];}else{delete this._singleChild;}dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_2e8,_2e9){if(!this._wasShown&&this.open!==false){this._onShow();}this._resizeCalled=true;this._scheduleLayout(_2e8,_2e9);},_scheduleLayout:function(_2ea,_2eb){if(this._isShown()){this._layout(_2ea,_2eb);}else{this._needLayout=true;this._changeSize=_2ea;this._resultSize=_2eb;}},_layout:function(_2ec,_2ed){if(_2ec){dojo.marginBox(this.domNode,_2ec);}var cn=this.containerNode;if(cn===this.domNode){var mb=_2ed||{};dojo.mixin(mb,_2ec||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(cn),mb);}this._contentBox=dijit.layout.marginBox2contentBox(cn,mb);}else{this._contentBox=dojo.contentBox(cn);}this._layoutChildren();delete this._needLayout;},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{dojo.forEach(this.getChildren(),function(_2ee){if(_2ee.resize){_2ee.resize();}});}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_2ef=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!dojo.hasClass(node,"dijitHidden")&&_2ef&&_2ef.style&&(_2ef.style.display!="none");}}},_onShow:function(){if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);this._wasShown=true;}});}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");dojo.getObject("html",true,dojo);(function(){var _2f0=0,d=dojo;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string"){cont=d._toDom(cont,node.ownerDocument);}if(!cont.nodeType&&d.isArrayLike(cont)){for(var _2f1=cont.length,i=0;i<cont.length;i=_2f1==cont.length?i+1:0){d.place(cont[i],node,"last");}}else{d.place(cont,node,"last");}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:dojo._scopeName,startup:true,constructor:function(_2f2,node){dojo.mixin(this,_2f2||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_2f0++].join("_");}},set:function(cont,_2f3){if(undefined!==cont){this.content=cont;}if(_2f3){this._mixin(_2f3);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _2f4=this.onContentError(e);try{node.innerHTML=_2f4;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _2f5=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_2f5){cont=_2f5[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_2f6){var _2f7={},key;for(key in _2f6){if(key in _2f7){continue;}this[key]=_2f6[key];}},_parse:function(){var _2f8=this.node;try{var _2f9={};dojo.forEach(["dir","lang","textDir"],function(name){if(this[name]){_2f9[name]=this[name];}},this);this.parseResults=dojo.parser.parse({rootNode:_2f8,noStart:!this.startup,inherited:_2f9,scope:this.parserScope});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_2fa){var _2fb=this["on"+type+"Error"].call(this,err);if(_2fa){console.error(_2fa,err);}else{if(_2fb){dojo.html._setNodeContent(this.node,_2fb,true);}}}});dojo.html.set=function(node,cont,_2fc){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_2fc){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_2fc,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",[dijit._Widget,dijit.layout._ContentPaneResizeMixin],{href:"",extractContent:false,parseOnLoad:true,parserScope:dojo._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),stopParser:true,template:false,create:function(_2fd,_2fe){if((!_2fd||!_2fd.template)&&_2fe&&!("href" in _2fd)&&!("content" in _2fd)){var df=dojo.doc.createDocumentFragment();_2fe=dojo.byId(_2fe);while(_2fe.firstChild){df.appendChild(_2fe.firstChild);}_2fd=dojo.delegate(_2fd,{content:df});}this.inherited(arguments,[_2fd,_2fe]);},postMixInProperties:function(){this.inherited(arguments);var _2ff=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_2ff);this.errorMessage=dojo.string.substitute(this.errorMessage,_2ff);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group");}},_startChildren:function(){this.inherited(arguments);if(this._contentSetter){dojo.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&dojo.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}this.inherited(arguments);},destroyRecursive:function(_300){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _301={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_301,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_301));hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.callback(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var _302=this._contentSetter;dojo.forEach(this.getChildren(),function(_303){if(_303.destroyRecursive){_303.destroyRecursive();}});if(_302){dojo.forEach(_302.parseResults,function(_304){if(_304.destroyRecursive&&_304.domNode&&_304.domNode.parentNode==dojo.body()){_304.destroyRecursive();}});delete _302.parseResults;}dojo.html._emptyNode(this.containerNode);delete this._singleChild;},_setContent:function(cont,_305){this.destroyDescendants();var _306=this._contentSetter;if(!(_306&&_306 instanceof dojo.html._ContentSetter)){_306=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _307=this.onContentError(e);try{this.containerNode.innerHTML=_307;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _308=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang},this._contentSetterParams||{});_306.set((dojo.isObject(cont)&&cont.domNode)?cont.domNode:cont,_308);delete this._contentSetterParams;if(this.doLayout){this._checkIfSingleChild();}if(!_305){if(this._started){this._startChildren();this._scheduleLayout();}this._onLoadHandler(cont);}},_onError:function(type,err,_309){this.onLoadDeferred.errback(err);var _30a=this["on"+type+"Error"].call(this,err);if(_309){console.error(_309,err);}else{if(_30a){this._setContent(_30a,true);}}},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_30b){},onDownloadError:function(_30c){return this.errorMessage;},onDownloadEnd:function(){}});}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html","<div role=\"presentation\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" role=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\"></div>\n</div>\n"),_setTitleAttr:function(_30d){this.containerNode.title=_30d;this._set("title",_30d);},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");},orient:function(node,_30e,_30f){var newC="dijitTooltipAB"+(_30f.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_30f.charAt(0)=="T"?"Below":"Above");dojo.replaceClass(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC;},focus:function(){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem);},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow();},onClose:function(){this.onHide();},_onKey:function(evt){var node=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _310=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_310){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_310){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Dialog.html","<div class=\"dijitDialog pentaho-dialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar Caption\">\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t</span>\n\t</div>\n\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"),baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _311=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,_311);this.inherited(arguments);},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){this._relativePosition=dojo.position(e.node);}},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(node,{handle:this.titleBar}):new dojo.dnd.Moveable(node,{handle:this.titleBar,timeout:0});this._dndListener=dojo.subscribe("/dnd/move/stop",this,"_endDrag");}else{dojo.addClass(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;}delete this._singleChildOriginalStyle;}else{dojo.style(this.containerNode,{width:"auto",height:"auto"});}var mb=dojo._getMarginSize(this.domNode);var _312=dojo.window.getBox();if(mb.w>=_312.w||mb.h>=_312.h){var w=Math.min(mb.w,Math.floor(_312.w*0.75)),h=Math.min(mb.h,Math.floor(_312.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h});}else{dojo.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var node=this.domNode,_313=dojo.window.getBox(),p=this._relativePosition,bb=p?null:dojo._getBorderBox(node),l=Math.floor(_313.l+(p?p.x:(_313.w-bb.w)/2)),t=Math.floor(_313.t+(p?p.y:(_313.h-bb.h)/2));dojo.style(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _314=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_314){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_314){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var _315=dojo.window.getBox();if(!this._oldViewport||_315.h!=this._oldViewport.h||_315.w!=this._oldViewport.w){this.layout();this._oldViewport=_315;}}));this._modalconnects.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var _316;this._fadeInDeferred=new dojo.Deferred(dojo.hitch(this,function(){_316.stop();delete this._fadeInDeferred;}));_316=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){dijit._DialogLevelManager.show(this,this.underlayAttrs);}),onEnd:dojo.hitch(this,function(){if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}this._fadeInDeferred.callback(true);delete this._fadeInDeferred;})}).play();return this._fadeInDeferred;},hide:function(){if(!this._alreadyInitialized){return;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _317;this._fadeOutDeferred=new dojo.Deferred(dojo.hitch(this,function(){_317.stop();delete this._fadeOutDeferred;}));_317=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";dijit._DialogLevelManager.hide(this);this.onHide();this._fadeOutDeferred.callback(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return this._fadeOutDeferred;},layout:function(){if(this.domNode.style.display!="none"){if(dijit._underlay){dijit._underlay.layout();}this._position();}},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}if(this._dndListener){dojo.unsubscribe(this._dndListener);}dojo.forEach(this._modalconnects,dojo.disconnect);dijit._DialogLevelManager.hide(this);this.inherited(arguments);}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._DialogLevelManager={show:function(_318,_319){var ds=dijit._dialogStack;ds[ds.length-1].focus=dijit.getFocus(_318);var _31a=dijit._underlay;if(!_31a||_31a._destroyed){_31a=dijit._underlay=new dijit.DialogUnderlay(_319);}else{_31a.set(_318.underlayAttrs);}var _31b=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:950;if(ds.length==1){_31a.show();}dojo.style(dijit._underlay.domNode,"zIndex",_31b-1);dojo.style(_318.domNode,"zIndex",_31b);ds.push({dialog:_318,underlayAttrs:_319,zIndex:_31b});},hide:function(_31c){var ds=dijit._dialogStack;if(ds[ds.length-1].dialog==_31c){ds.pop();var pd=ds[ds.length-1];if(ds.length==1){if(!dijit._underlay._destroyed){dijit._underlay.hide();}}else{dojo.style(dijit._underlay.domNode,"zIndex",pd.zIndex-1);dijit._underlay.set(pd.underlayAttrs);}if(_31c.refocus){var _31d=pd.focus;if(!_31d||(pd.dialog&&!dojo.isDescendant(_31d.node,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);_31d=pd.dialog._firstFocusItem;}try{dijit.focus(_31d);}catch(e){}}}else{var idx=dojo.indexOf(dojo.map(ds,function(elem){return elem.dialog;}),_31c);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_31e){var ds=dijit._dialogStack;return ds[ds.length-1].dialog==_31e;}};dijit._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.getObject("_editor.selection",true,dijit);dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.isIE<9){return dojo.doc.selection.type.toLowerCase();}else{var _31f="text";var oSel;try{oSel=dojo.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _320=oSel.getRangeAt(0);if((_320.startContainer==_320.endContainer)&&((_320.endOffset-_320.startOffset)==1)&&(_320.startContainer.nodeType!=3)){_31f="control";}}return _31f;}},getSelectedText:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().text;}else{var _321=dojo.global.getSelection();if(_321){return _321.toString();}}return "";},getSelectedHtml:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().htmlText;}else{var _322=dojo.global.getSelection();if(_322&&_322.rangeCount){var i;var html="";for(i=0;i<_322.rangeCount;i++){var frag=_322.getRangeAt(i).cloneContents();var div=dojo.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(dojo.isIE<9){var _323=dojo.doc.selection.createRange();if(_323&&_323.item){return dojo.doc.selection.createRange().item(0);}}else{var _324=dojo.global.getSelection();return _324.anchorNode.childNodes[_324.anchorOffset];}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(dojo.isIE<9){var r=dojo.doc.selection.createRange();r.collapse(true);return r.parentElement();}else{var _325=dojo.global.getSelection();if(_325){var node=_325.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}}return null;},hasAncestorElement:function(_326){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_327){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _328=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _329=String(tags[i]).toLowerCase();if(_328==_329){return _329;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_32a){if(window.getSelection){var _32b=dojo.global.getSelection();if(_32b.removeAllRanges){if(_32a){_32b.collapseToStart();}else{_32b.collapseToEnd();}}else{_32b.collapse(_32a);}}else{if(dojo.isIE){var _32c=dojo.doc.selection.createRange();_32c.collapse(_32a);_32c.select();}}},remove:function(){var sel=dojo.doc.selection;if(dojo.isIE<9){if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}else{sel=dojo.global.getSelection();sel.deleteFromDocument();return sel;}},selectElementChildren:function(_32d,_32e){var win=dojo.global;var doc=dojo.doc;var _32f;_32d=dojo.byId(_32d);if(doc.selection&&dojo.isIE<9&&dojo.body().createTextRange){_32f=_32d.ownerDocument.body.createTextRange();_32f.moveToElementText(_32d);if(!_32e){try{_32f.select();}catch(e){}}}else{if(win.getSelection){var _330=dojo.global.getSelection();if(dojo.isOpera){if(_330.rangeCount){_32f=_330.getRangeAt(0);}else{_32f=doc.createRange();}_32f.setStart(_32d,0);_32f.setEnd(_32d,(_32d.nodeType==3)?_32d.length:_32d.childNodes.length);_330.addRange(_32f);}else{_330.selectAllChildren(_32d);}}}},selectElement:function(_331,_332){var _333;var doc=dojo.doc;var win=dojo.global;_331=dojo.byId(_331);if(dojo.isIE<9&&dojo.body().createTextRange){try{var tg=_331.tagName?_331.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_333=dojo.body().createControlRange();}else{_333=dojo.body().createRange();}_333.addElement(_331);if(!_332){_333.select();}}catch(e){this.selectElementChildren(_331,_332);}}else{if(dojo.global.getSelection){var _334=win.getSelection();_333=doc.createRange();if(_334.removeAllRanges){if(dojo.isOpera){if(_334.getRangeAt(0)){_333=_334.getRangeAt(0);}}_333.selectNode(_331);_334.removeAllRanges();_334.addRange(_333);}}}},inSelection:function(node){if(node){var _335;var doc=dojo.doc;var _336;if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.rangeCount>0){_336=sel.getRangeAt(0);}if(_336&&_336.compareBoundaryPoints&&doc.createRange){try{_335=doc.createRange();_335.setStart(node,0);if(_336.compareBoundaryPoints(_336.START_TO_END,_335)===1){return true;}}catch(e){}}}else{if(doc.selection){_336=doc.selection.createRange();try{_335=node.ownerDocument.body.createControlRange();if(_335){_335.addElement(node);}}catch(e1){try{_335=node.ownerDocument.body.createTextRange();_335.moveToElementText(node);}catch(e2){}}if(_336&&_335){if(_336.compareEndPoints("EndToStart",_335)===1){return true;}}}}}return false;}});}if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(node,_337){var ret=[],retR=[];var stop=_337;var _338=node;var _339,n;while(node!=stop){var i=0;_339=node.parentNode;while((n=_339.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_339.childNodes.length);node=_339;}if(ret.length>0&&_338.nodeType==3){n=_338.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_338.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(_33a,_33b){if(!dojo.isArray(_33a)||_33a.length==0){return _33b;}var node=_33b;dojo.every(_33a,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _33c=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_33c(n1);var n2as=_33c(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,_33d,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_33d.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,_33e,root){root=root||node.ownerDocument.body;_33e=_33e||dijit.range.BlockTagNames;var _33f=null,_340;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_33f&&_33e.test(name)){_33f=node;}if(!_340&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_340=node;}node=node.parentNode;}return {blockNode:_33f,blockContainer:_340||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_341,node,_342){var _343=false;var _344=(_342==0);if(!_344&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_342))){_344=true;}}if(_344){var _345=node;_343=true;while(_345&&_345!==_341){if(_345.previousSibling){_343=false;break;}_345=_345.parentNode;}}return _343;};dijit.range.atEndOfContainer=function(_346,node,_347){var _348=false;var _349=(_347==(node.length||node.childNodes.length));if(!_349&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_347))){_349=true;}}if(_349){var _34a=node;_348=true;while(_34a&&_34a!==_346){if(_34a.nextSibling){_348=false;break;}_34a=_34a.parentNode;}}return _348;};dijit.range.adjacentNoneTextNode=function(_34b,next){var node=_34b;var len=(0-_34b.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range._w3c=Boolean(window["getSelection"]);dijit.range.create=function(win){if(dijit.range._w3c){return (win||dojo.global).document.createRange();}else{return new dijit.range.W3CRange;}};dijit.range.getSelection=function(win,_34c){if(dijit.range._w3c){return win.getSelection();}else{var s=new dijit.range.ie.selection(win);if(!_34c){s._getCurrentSelection();}return s;}};if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(win){this._ranges=[];this.addRange=function(r,_34d){this._ranges.push(r);if(!_34d){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _34e=function(){var r=win.document.selection.createRange();var type=win.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_34e();if(r){this.addRange(r,true);}};},decomposeControlRange:function(_34f){var _350=_34f.item(0),_351=_34f.item(_34f.length-1);var _352=_350.parentNode,_353=_351.parentNode;var _354=dijit.range.getIndex(_350,_352).o;var _355=dijit.range.getIndex(_351,_353).o+1;return [_352,_354,_353,_355];},getEndPoint:function(_356,end){var _357=_356.duplicate();_357.collapse(!end);var _358="EndTo"+(end?"End":"Start");var _359=_357.parentElement();var _35a,_35b,_35c;if(_359.childNodes.length>0){dojo.every(_359.childNodes,function(node,i){var _35d;if(node.nodeType!=3){_357.moveToElementText(node);if(_357.compareEndPoints(_358,_356)>0){if(_35c&&_35c.nodeType==3){_35a=_35c;_35d=true;}else{_35a=_359;_35b=i;return false;}}else{if(i==_359.childNodes.length-1){_35a=_359;_35b=_359.childNodes.length;return false;}}}else{if(i==_359.childNodes.length-1){_35a=node;_35d=true;}}if(_35d&&_35a){var _35e=dijit.range.adjacentNoneTextNode(_35a)[0];if(_35e){_35a=_35e.nextSibling;}else{_35a=_359.firstChild;}var _35f=dijit.range.adjacentNoneTextNode(_35a);_35e=_35f[0];var _360=_35f[1];if(_35e){_357.moveToElementText(_35e);_357.collapse(false);}else{_357.moveToElementText(_359);}_357.setEndPoint(_358,_356);_35b=_357.text.length-_360;return false;}_35c=node;return true;});}else{_35a=_359;_35b=0;}if(!end&&_35a.nodeType==1&&_35b==_35a.childNodes.length){var _361=_35a.nextSibling;if(_361&&_361.nodeType==3){_35a=_361;_35b=0;}}return [_35a,_35b];},setEndPoint:function(_362,_363,_364){var _365=_362.duplicate(),node,len;if(_363.nodeType!=3){if(_364>0){node=_363.childNodes[_364-1];if(node){if(node.nodeType==3){_363=node;_364=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_363=node.nextSibling;_364=0;}else{_365.moveToElementText(node.nextSibling?node:_363);var _366=node.parentNode;var _367=_366.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_365.collapse(false);_366.removeChild(_367);}}}}else{_365.moveToElementText(_363);_365.collapse(true);}}if(_363.nodeType==3){var _368=dijit.range.adjacentNoneTextNode(_363);var _369=_368[0];len=_368[1];if(_369){_365.moveToElementText(_369);_365.collapse(false);if(_369.contentEditable!="inherit"){len++;}}else{_365.moveToElementText(_363.parentNode);_365.collapse(true);}_364+=len;if(_364>0){if(_365.move("character",_364)!=_364){console.error("Error when moving!");}}}return _365;},decomposeTextRange:function(_36a){var _36b=dijit.range.ie.getEndPoint(_36a);var _36c=_36b[0],_36d=_36b[1];var _36e=_36b[0],_36f=_36b[1];if(_36a.htmlText.length){if(_36a.htmlText==_36a.text){_36f=_36d+_36a.text.length;}else{_36b=dijit.range.ie.getEndPoint(_36a,true);_36e=_36b[0],_36f=_36b[1];}}return [_36c,_36d,_36e,_36f];},setRange:function(_370,_371,_372,_373,_374,_375){var _376=dijit.range.ie.setEndPoint(_370,_371,_372);_370.setEndPoint("StartToStart",_376);if(!_375){var end=dijit.range.ie.setEndPoint(_370,_373,_374);}_370.setEndPoint("EndToEnd",end||_376);return _370;}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_377){_377=parseInt(_377);if(this.startContainer===node&&this.startOffset==_377){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_377;if(!this.endContainer){this.setEnd(node,_377);}else{this._updateInternal();}},setEnd:function(node,_378){_378=parseInt(_378);if(this.endContainer===node&&this.endOffset==_378){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_378;if(!this.startContainer){this.setStart(node,_378);}else{this._updateInternal();}},setStartAfter:function(node,_379){this._setPoint("setStart",node,_379,1);},setStartBefore:function(node,_37a){this._setPoint("setStart",node,_37a,0);},setEndAfter:function(node,_37b){this._setPoint("setEnd",node,_37b,1);},setEndBefore:function(node,_37c){this._setPoint("setEnd",node,_37c,0);},_setPoint:function(what,node,_37d,ext){var _37e=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_37e.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(body){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var r=this._getIERange();r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dojo.getObject("_editor",true,dijit);dijit._editor.escapeXml=function(str,_37f){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_37f){str=str.replace(/'/gm,"&#39;");}return str;};dijit._editor.getNodeHtml=function(node){var _380;switch(node.nodeType){case 1:var _381=node.nodeName.toLowerCase();if(!_381||_381.charAt(0)=="/"){return "";}_380="<"+_381;var _382=[];var attr;if(dojo.isIE&&node.outerHTML){var s=node.outerHTML;s=s.substr(0,s.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var reg=/(\b\w+)\s?=/g;var m,key;while((m=reg.exec(s))){key=m[1];if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_382.push([key,node.getAttribute("_djrealurl")]);continue;}}var val,_383;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_381==="img"){_383=/width=(\S+)/i.exec(s);if(_383){val=_383[1];}break;}case "height":if(_381==="img"){_383=/height=(\S+)/i.exec(s);if(_383){val=_383[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_382.push([key,val.toString()]);}}}}else{var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!="_dj"){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}_382.push([n,v]);}}}_382.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_382[j++])){_380+=" "+attr[0]+"=\""+(dojo.isString(attr[1])?dijit._editor.escapeXml(attr[1],true):attr[1])+"\"";}if(_381==="script"){_380+=">"+node.innerHTML+"</"+_381+">";}else{if(node.childNodes.length){_380+=">"+dijit._editor.getChildrenHtml(node)+"</"+_381+">";}else{switch(_381){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_380+=" />";break;default:_380+="></"+_381+">";}}}break;case 4:case 3:_380=dijit._editor.escapeXml(node.nodeValue,true);break;case 8:_380="<!--"+dijit._editor.escapeXml(node.nodeValue,true)+"-->";break;default:_380="<!-- Element not recognized - Type: "+node.nodeType+" Name: "+node.nodeName+"-->";}return _380;};dijit._editor.getChildrenHtml=function(dom){var out="";if(!dom){return out;}var _384=dom["childNodes"]||dom;var _385=!dojo.isIE||_384!==dom;var node,i=0;while((node=_384[i++])){if(!_385||node.parentNode==dom){out+=dijit._editor.getNodeHtml(node);}}return out;};}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"]){if(dojo._postLoad){(function(){var _386=dojo.doc.createElement("textarea");_386.id=dijit._scopeName+"._editor.RichText.value";dojo.style(_386,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(_386);})();}else{try{dojo.doc.write("<textarea id=\""+dijit._scopeName+"._editor.RichText.value\" "+"style=\"display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;\"></textarea>");}catch(e){}}}dojo.declare("dijit._editor.RichText",[dijit._Widget,dijit._CssStateMixin],{constructor:function(_387){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_387&&dojo.isString(_387.value)){this.value=_387.value;}this.onLoadDeferred=new dojo.Deferred();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"==this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[dojo.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(dojo.isMoz){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(dojo.isWebKit){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(dojo.isIE){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);}this.inherited(arguments);dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=dojo.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _388={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!dojo.isIE){_388.Z=exec("redo");}for(var key in _388){this.addKeyHandler(key,true,false,_388[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(dijit._editor._editorCommandsLocalized){this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;return;}dijit._editor._editorCommandsLocalized=true;dijit._editor._local2NativeFormatNames={};dijit._editor._native2LocalFormatNames={};this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;var _389=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _38a="",_38b,i=0;while((_38b=_389[i++])){if(_38b.charAt(1)!=="l"){_38a+="<"+_38b+"><span>content</span></"+_38b+"><br/>";}else{_38a+="<"+_38b+"><li>content</li></"+_38b+"><br/>";}}var _38c={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=dojo.create("div",{style:_38c,innerHTML:_38a});dojo.body().appendChild(div);var _38d=dojo.hitch(this,function(){var node=div.firstChild;while(node){try{dijit._editor.selection.selectElement(node.firstChild);var _38e=node.tagName.toLowerCase();this._local2NativeFormatNames[_38e]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_38e]]=_38e;node=node.nextSibling.nextSibling;}catch(e){}}div.parentNode.removeChild(div);div.innerHTML="";});setTimeout(_38d,0);},open:function(_38f){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new dojo.Deferred();}if(!this.isClosed){this.close();}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);if(arguments.length==1&&_38f.nodeName){this.domNode=_38f;}var dn=this.domNode;var html;if(dojo.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=dojo.doc.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;dojo.place(dn,ta,"before");var _390=dojo.hitch(this,function(){dojo.style(ta,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(dojo.isIE){setTimeout(_390,10);}else{_390();}if(ta.form){var _391=ta.value;this.reset=function(){var _392=this.getValue();if(_392!=_391){this.replaceValue(_391);}};dojo.connect(ta.form,"onsubmit",this,function(){dojo.attr(ta,"disabled",this.disabled);ta.value=this.getValue();});}}else{html=dijit._editor.getChildrenHtml(dn);dn.innerHTML="";}}var _393=dojo.contentBox(dn);this._oldHeight=_393.h;this._oldWidth=_393.w;this.value=html;if(dn.nodeName&&dn.nodeName=="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"])){var _394=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_394&&_394.value!==""){var _395=_394.value.split(this._SEPARATOR),i=0,dat;while((dat=_395[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]==this.name){html=data[1];_395=_395.splice(i,1);_394.value=_395.join(this._SEPARATOR);break;}}}if(!dijit._editor._globalSaveHandler){dijit._editor._globalSaveHandler={};dojo.addOnUnload(function(){var id;for(id in dijit._editor._globalSaveHandler){var f=dijit._editor._globalSaveHandler[id];if(dojo.isFunction(f)){f();}}});}dijit._editor._globalSaveHandler[this.id]=dojo.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=dojo.doc.createElement("iframe"));ifr.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(dojo.isIE>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=dojo.hitch(this,function(win){this.window=win;this.document=this.window.document;if(dojo.isIE){this._localizeEditorCommands();}this.onLoad(html);});var s="javascript:parent."+dijit._scopeName+".byId(\""+this.id+"\")._iframeSrc";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(dojo.isSafari<=4){var src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")==-1){setTimeout(function(){ifr.setAttribute("src",s);},0);}}if(dn.nodeName=="LI"){dn.lastChild.style.marginTop="-1.2em";}dojo.addClass(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _396=dojo.getComputedStyle(this.domNode);var html="";var _397=true;if(dojo.isIE||dojo.isWebKit||(!this.height&&!dojo.isMoz)){html="<div id='dijitEditorBody'></div>";_397=false;}else{if(dojo.isMoz){this._cursorToStart=true;html="&nbsp;";}}var font=[_396.fontWeight,_396.fontSize,_396.fontFamily].join(" ");var _398=_396.lineHeight;if(_398.indexOf("px")>=0){_398=parseFloat(_398)/parseFloat(_396.fontSize);}else{if(_398.indexOf("em")>=0){_398=parseFloat(_398);}else{_398="normal";}}var _399="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_39a){_39a=_39a.replace(/^;/ig,"")+";";var s=_39a.split(":")[0];if(s){s=dojo.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}dojo.style(self.domNode,sC,"");}_399+=_39a+";";});var _39b=dojo.query("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(dojo.isMoz&&_39b.length?"<title>"+_39b[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((dojo.isWebKit)?"\t\twidth: 100%;\n":""),((dojo.isWebKit)?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||dojo.isOpera)?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_398,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_397&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!dojo.isIE?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_397?"id='dijitEditorBody' ":""),"onload='frameElement._loadFunc(window,document)' style='"+_399+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _39c=[];if(this.styleSheets){_39c=this.styleSheets.split(";");this.styleSheets="";}_39c=_39c.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_39c[i++])){var _39d=(new dojo._Url(dojo.global.location,url)).toString();this.editingAreaStyleSheets.push(_39d);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_39d+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}if(dojo.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.addCallback(dojo.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _39e=this.document.createElement("link");_39e.rel="stylesheet";_39e.type="text/css";_39e.href=url;head.appendChild(_39e);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}var _39f=dojo.indexOf(this.editingAreaStyleSheets,url);if(_39f==-1){return;}delete this.editingAreaStyleSheets[_39f];dojo.withGlobal(this.window,"query",dojo,["link:[href=\""+url+"\"]"]).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_3a0){_3a0=!!_3a0;this._set("disabled",_3a0);if(!this.isLoaded){return;}if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var _3a1=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(_3a1){this.editNode.unselectable="on";}this.editNode.contentEditable=!_3a0;if(_3a1){var _3a2=this;setTimeout(function(){_3a2.editNode.unselectable="off";},0);}}else{try{this.document.designMode=(_3a0?"off":"on");}catch(e){return;}if(!_3a0&&this._mozSettingProps){var ps=this._mozSettingProps;for(var n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=dijit.registerIframe(this.iframe);}if(!dojo.isIE&&!dojo.isWebKit&&(this.height||dojo.isMoz)){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _3a3=this;if(dojo.isIE){this.tabStop=dojo.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_3a3.editNode.setActive();};}}this.focusNode=this.editNode;var _3a4=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;dojo.forEach(_3a4,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(dojo.isIE){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(dojo.isWebKit){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}});}if(dojo.isIE){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _3a5=dojo.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.callback(true);}this.onDisplayChanged();if(this.focusOnLoad){dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval);}));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.addCallback(_3a5);}else{_3a5();}},onKeyDown:function(e){if(e.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(dojo.isIE){if(e.keyCode==dojo.keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}return true;},onKeyUp:function(e){return;},setDisabled:function(_3a6){dojo.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_3a6);},_setValueAttr:function(_3a7){this.setValue(_3a7);},_setDisableSpellCheckAttr:function(_3a8){if(this.document){dojo.attr(this.document.body,"spellcheck",!_3a8);}else{this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!_3a8);}));}this._set("disableSpellCheck",_3a8);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_3a9=this._keyHandlers[c],args=arguments;if(_3a9&&!e.altKey){dojo.some(_3a9,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=dojo.hitch(this,"onKeyPressed");}setTimeout(this._onKeyHitch,1);return true;},addKeyHandler:function(key,ctrl,_3aa,_3ab){if(!dojo.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_3aa||false,ctrl:ctrl||false,handler:_3ab});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(e){if(!this._focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _3ac=this.getValue(true);if(_3ac!=this.value){this.onChange(_3ac);}this._set("value",_3ac);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(dojo.doc.body.focus){dojo.doc.body.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!dojo.isIE){dijit.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(e){if(this._updateTimer){clearTimeout(this._updateTimer);}if(!this._updateHandler){this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");}this._updateTimer=setTimeout(this._updateHandler,this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(_3ad){},_normalizeCommand:function(cmd,_3ae){var _3af=cmd.toLowerCase();if(_3af=="formatblock"){if(dojo.isSafari&&_3ae===undefined){_3af="heading";}}else{if(_3af=="hilitecolor"&&!dojo.isMoz){_3af="backcolor";}}return _3af;},_qcaCache:{},queryCommandAvailable:function(_3b0){var ca=this._qcaCache[_3b0];if(ca!==undefined){return ca;}return (this._qcaCache[_3b0]=this._queryCommandAvailable(_3b0));},_queryCommandAvailable:function(_3b1){var ie=1;var _3b2=1<<1;var _3b3=1<<2;var _3b4=1<<3;function _3b5(_3b6){return {ie:Boolean(_3b6&ie),mozilla:Boolean(_3b6&_3b2),webkit:Boolean(_3b6&_3b3),opera:Boolean(_3b6&_3b4)};};var _3b7=null;switch(_3b1.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_3b7=_3b5(_3b2|ie|_3b3|_3b4);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_3b7=_3b5(_3b2|ie|_3b4|_3b3);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_3b7=_3b5(ie);break;case "cut":case "copy":case "paste":_3b7=_3b5(ie|_3b2|_3b3);break;case "inserttable":_3b7=_3b5(_3b2|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_3b7=_3b5(ie|_3b2);break;default:return false;}return (dojo.isIE&&_3b7.ie)||(dojo.isMoz&&_3b7.mozilla)||(dojo.isWebKit&&_3b7.webkit)||(dojo.isOpera&&_3b7.opera);},execCommand:function(_3b8,_3b9){var _3ba;this.focus();_3b8=this._normalizeCommand(_3b8,_3b9);if(_3b9!==undefined){if(_3b8=="heading"){throw new Error("unimplemented");}else{if((_3b8=="formatblock")&&dojo.isIE){_3b9="<"+_3b9+">";}}}var _3bb="_"+_3b8+"Impl";if(this[_3bb]){_3ba=this[_3bb](_3b9);}else{_3b9=arguments.length>1?_3b9:null;if(_3b9||_3b8!="createlink"){_3ba=this.document.execCommand(_3b8,false,_3b9);}}this.onDisplayChanged();return _3ba;},queryCommandEnabled:function(_3bc){if(this.disabled||!this._disabledOK){return false;}_3bc=this._normalizeCommand(_3bc);if(dojo.isMoz||dojo.isWebKit){if(_3bc=="unlink"){return this._sCall("hasAncestorElement",["a"]);}else{if(_3bc=="inserttable"){return true;}}}if(dojo.isWebKit){if(_3bc=="cut"||_3bc=="copy"){var sel=this.window.getSelection();if(sel){sel=sel.toString();}return !!sel;}else{if(_3bc=="paste"){return true;}}}var elem=dojo.isIE?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_3bc);}catch(e){return false;}},queryCommandState:function(_3bd){if(this.disabled||!this._disabledOK){return false;}_3bd=this._normalizeCommand(_3bd);try{return this.document.queryCommandState(_3bd);}catch(e){return false;}},queryCommandValue:function(_3be){if(this.disabled||!this._disabledOK){return false;}var r;_3be=this._normalizeCommand(_3be);if(dojo.isIE&&_3be=="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_3be)];}else{if(dojo.isMoz&&_3be==="hilitecolor"){var _3bf;try{_3bf=this.document.queryCommandValue("styleWithCSS");}catch(e){_3bf=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_3be);this.document.execCommand("styleWithCSS",false,_3bf);}else{r=this.document.queryCommandValue(_3be);}}return r;},_sCall:function(name,args){return dojo.withGlobal(this.window,name,dijit._editor.selection,args);},placeCursorAtStart:function(){this.focus();var _3c0=false;if(dojo.isMoz){var _3c1=this.editNode.firstChild;while(_3c1){if(_3c1.nodeType==3){if(_3c1.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_3c0=true;this._sCall("selectElement",[_3c1]);break;}}else{if(_3c1.nodeType==1){_3c0=true;var tg=_3c1.tagName?_3c1.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_3c1]);}else{this._sCall("selectElementChildren",[_3c1]);}break;}}_3c1=_3c1.nextSibling;}}else{_3c0=true;this._sCall("selectElementChildren",[this.editNode]);}if(_3c0){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _3c2=false;if(dojo.isMoz){var last=this.editNode.lastChild;while(last){if(last.nodeType==3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_3c2=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType==1){_3c2=true;if(last.lastChild){this._sCall("selectElement",[last.lastChild]);}else{this._sCall("selectElement",[last]);}break;}}last=last.previousSibling;}}else{_3c2=true;this._sCall("selectElementChildren",[this.editNode]);}if(_3c2){this._sCall("collapse",[false]);}},getValue:function(_3c3){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_3c3);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&dojo.isMoz&&html.toLowerCase()=="<p></p>"){html="<p>&nbsp;</p>";}if(!html&&dojo.isWebKit){html="&nbsp;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&nbsp;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;dojo.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;dojo.forEach(this.contentDomPreFilters,function(ef){if(ef&&dojo.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_3c4){var ec;if(!dojo.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_3c4){dom=dojo.clone(dom);}dojo.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=dijit._editor.getChildrenHtml(dom);}else{ec=dom;}if(!dojo.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}dojo.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(e){var _3c5=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_3c5.value){_3c5.value+=this._SEPARATOR;}_3c5.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);},escapeXml:function(str,_3c6){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_3c6){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(node);},getNodeChildrenHtml:function(dom){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(dojo.isIE){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){dijit.unregisterIframe(this._iframeRegHandle);delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(dojo.isIE){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;dojo.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;dojo.removeClass(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}this.inherited(arguments);if(dijit._editor._globalSaveHandler){delete dijit._editor._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_inserthorizontalruleImpl:function(_3c7){if(dojo.isIE){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_3c7);},_unlinkImpl:function(_3c8){if((this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isWebKit)){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_3c8);},_hilitecolorImpl:function(_3c9){var _3ca;if(dojo.isMoz){this.document.execCommand("styleWithCSS",false,true);_3ca=this.document.execCommand("hilitecolor",false,_3c9);this.document.execCommand("styleWithCSS",false,false);}else{_3ca=this.document.execCommand("hilitecolor",false,_3c9);}return _3ca;},_backcolorImpl:function(_3cb){if(dojo.isIE){_3cb=_3cb?_3cb:null;}return this.document.execCommand("backcolor",false,_3cb);},_forecolorImpl:function(_3cc){if(dojo.isIE){_3cc=_3cc?_3cc:null;}return this.document.execCommand("forecolor",false,_3cc);},_inserthtmlImpl:function(_3cd){_3cd=this._preFilterContent(_3cd);var rv=true;if(dojo.isIE){var _3ce=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var n=_3ce.item(0);while(_3ce.length){_3ce.remove(_3ce.item(0));}n.outerHTML=_3cd;}else{_3ce.pasteHTML(_3cd);}_3ce.select();}else{if(dojo.isMoz&&!_3cd.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_3cd);}}return rv;},_boldImpl:function(_3cf){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("bold",false,_3cf);},_italicImpl:function(_3d0){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("italic",false,_3d0);},_underlineImpl:function(_3d1){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("underline",false,_3d1);},_strikethroughImpl:function(_3d2){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("strikethrough",false,_3d2);},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=dojo.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_3d3){if(node.nodeType==1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_3d3);}return true;}else{if(node.nodeType==3){return (node.nodeValue.substring(_3d3)=="");}}return false;},_removeStartingRangeFromRange:function(node,_3d4){if(node.nextSibling){_3d4.setStart(node.nextSibling,0);}else{var _3d5=node.parentNode;while(_3d5&&_3d5.nextSibling==null){_3d5=_3d5.parentNode;}if(_3d5){_3d4.setStart(_3d5.nextSibling,0);}}return _3d4;},_adaptIESelection:function(){var _3d6=dijit.range.getSelection(this.window);if(_3d6&&_3d6.rangeCount&&!_3d6.isCollapsed){var _3d7=_3d6.getRangeAt(0);var _3d8=_3d7.startContainer;var _3d9=_3d7.startOffset;while(_3d8.nodeType==3&&_3d9>=_3d8.length&&_3d8.nextSibling){_3d9=_3d9-_3d8.length;_3d8=_3d8.nextSibling;}var _3da=null;while(this._isNodeEmpty(_3d8,_3d9)&&_3d8!=_3da){_3da=_3d8;_3d7=this._removeStartingRangeFromRange(_3d8,_3d7);_3d8=_3d7.startContainer;_3d9=0;}_3d6.removeAllRanges();_3d6.addRange(_3d7);}}});}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_3db,_3dc){var _3dd=(this._keyNavCodes={});var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_3db,function(code){_3dd[code]=prev;});dojo.forEach(_3dc,function(code){_3dd[code]=next;});_3dd[dojo.keys.HOME]=dojo.hitch(this,"focusFirstChild");_3dd[dojo.keys.END]=dojo.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_3de,_3df){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_3de);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){var _3e0=this._getFirstFocusableChild();if(_3e0){this.focusChild(_3e0);}},focusLastChild:function(){var _3e1=this._getLastFocusableChild();if(_3e1){this.focusChild(_3e1);}},focusNext:function(){var _3e2=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(_3e2);},focusPrev:function(){var _3e3=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(_3e3,true);},focusChild:function(_3e4,last){if(this.focusedChild&&_3e4!==this.focusedChild){this._onChildBlur(this.focusedChild);}_3e4.set("tabIndex",this.tabIndex);_3e4.focus(last?"end":"start");this._set("focusedChild",_3e4);},_startupChild:function(_3e5){_3e5.set("tabIndex","-1");this.connect(_3e5,"_onFocus",function(){_3e5.set("tabIndex",this.tabIndex);});this.connect(_3e5,"_onBlur",function(){_3e5.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onChildBlur:function(_3e6){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_3e7,dir){if(_3e7){_3e7=this._getSiblingOfChild(_3e7,dir);}var _3e8=this.getChildren();for(var i=0;i<_3e8.length;i++){if(!_3e7){_3e7=_3e8[(dir>0)?0:(_3e8.length-1)];}if(_3e7.isFocusable()){return _3e7;}_3e7=this._getSiblingOfChild(_3e7,dir);}return null;}});}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" dojoAttachPoint=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);},startup:function(){if(this._started){return;}this.startupKeyNavChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}dojo.stopEvent(e);this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _3e9=this.dropDown,_3ea=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_3ea){if(dojo.hasClass(t,"dijitPopup")){_3ea=true;}else{t=t.parentNode;}}if(_3ea){t=e.target;if(_3e9.onItemClick){var _3eb;while(t&&!(_3eb=dijit.byNode(t))){t=t.parentNode;}if(_3eb&&_3eb.onClick&&_3eb.getParent){_3eb.getParent().onItemClick(_3eb,e);}}return;}}}if(this._opened&&_3e9.focus&&_3e9.autoFocus!==false){window.setTimeout(dojo.hitch(_3e9,"focus"),1);}},_onDropDownClick:function(e){if(this._stopClickEvents){dojo.stopEvent(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _3ec={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+_3ec+"ArrowButton");},postCreate:function(){this.inherited(arguments);this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this.focusNode,"onkeypress","_onKey");this.connect(this.focusNode,"onkeyup","_onKeyUp");},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_3ed=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){dojo.stopEvent(e);return;}}if(d&&this._opened&&e.charOrCode==dojo.keys.ESCAPE){this.closeDropDown();dojo.stopEvent(e);}else{if(!this._opened&&(e.charOrCode==dojo.keys.DOWN_ARROW||((e.charOrCode==dojo.keys.ENTER||e.charOrCode==" ")&&((_3ed.tagName||"").toLowerCase()!=="input"||(_3ed.type&&_3ed.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;dojo.stopEvent(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){setTimeout(dojo.hitch(d,"focus"),1);}}},_onBlur:function(){var _3ee=dijit._curFocus&&this.dropDown&&dojo.isDescendant(dijit._curFocus,this.dropDown.domNode);this.closeDropDown(_3ee);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_3ef){_3ef();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _3f0=this.dropDown,_3f1=_3f0.domNode,_3f2=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_3f1.style.width){this._explicitDDWidth=true;}if(_3f1.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _3f3={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_3f3.width="";}if(!this._explicitDDHeight){_3f3.height="";}dojo.style(_3f1,_3f3);var _3f4=this.maxHeight;if(_3f4==-1){var _3f5=dojo.window.getBox(),_3f6=dojo.position(_3f2,false);_3f4=Math.floor(Math.max(_3f6.y,_3f5.h-(_3f6.y+_3f6.h)));}if(_3f0.startup&&!_3f0._started){_3f0.startup();}dijit.popup.moveOffScreen(_3f0);var mb=dojo._getMarginSize(_3f1);var _3f7=(_3f4&&mb.h>_3f4);dojo.style(_3f1,{overflowX:"hidden",overflowY:_3f7?"auto":"hidden"});if(_3f7){mb.h=_3f4;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_3f2.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_3f2.offsetWidth);}else{delete mb.w;}}if(dojo.isFunction(_3f0.resize)){_3f0.resize(mb);}else{dojo.marginBox(_3f1,mb);}}var _3f8=dijit.popup.open({parent:this,popup:_3f0,around:_3f2,orient:dijit.getPopupAroundAlignment((this.dropDownPosition&&this.dropDownPosition.length)?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){dojo.attr(self._popupStateNode,"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false;}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;return _3f8;},closeDropDown:function(_3f9){if(this._opened){if(_3f9){this.focus();}dijit.popup.close(this.dropDown);this._opened=false;}}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html","<span class=\"dijit dijitReset dijitInline\">\n  <span class=\"dijitReset dijitInline dijitButtonNode pentaho-button\"\n           dojoAttachEvent=\"ondijitclick:_onButtonClick\"><span class=\"dijitReset dijitStretch dijitButtonContents\"\n           dojoAttachPoint=\"titleNode,focusNode\"\n           role=\"button\" aria-labelledby=\"${id}_label\">\n    <span class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\"></span>\n    <span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span>\n    <span class=\"dijitReset dijitInline dijitButtonText\"\n           id=\"${id}_label\"\n           dojoAttachPoint=\"containerNode\">\n\n           </span></span></span>\n    <input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\" dojoAttachPoint=\"valueNode\"/>\n</span>\n"),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"valueNode"}),_onClick:function(e){if(this.disabled){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _3fa=dijit.byNode(node);if(_3fa&&typeof _3fa._onSubmit=="function"){_3fa._onSubmit(e);break;}}}else{if(this.valueNode){this.valueNode.click();e.preventDefault();}}}},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,false);},_fillContent:function(_3fb){if(_3fb&&(!this.params||!("label" in this.params))){this.set("label",_3fb.innerHTML);}},_setShowLabelAttr:function(val){if(this.containerNode){dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_3fc){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_3fc);},_setLabelAttr:function(_3fd){this._set("label",_3fd);this.containerNode.innerHTML=_3fd;if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},_setIconClassAttr:function(val){var _3fe=this.iconClass||"dijitNoIcon",_3ff=val||"dijitNoIcon";dojo.replaceClass(this.iconNode,_3ff,_3fe);this._set("iconClass",val);}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\" dojoAttachPoint=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdojoAttachPoint=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),_fillContent:function(){if(this.srcNodeRef){var _400=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_400[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _401=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_401);delete this.dropDownContainer;}if(this.dropDown){dijit.popup.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _402=this.dropDown;return (!!_402&&(!_402.href||_402.isLoaded));},loadDropDown:function(){var _403=this.dropDown;if(!_403){return;}if(!this.isLoaded()){var _404=dojo.connect(_403,"onLoad",this,function(){dojo.disconnect(_404);this.openDropDown();});_403.refresh();}else{this.openDropDown();}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html","<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" dojoAttachPoint=\"buttonNode\" dojoAttachEvent=\"ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdojoAttachPoint=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdojoAttachEvent=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" dojoAttachPoint=\"valueNode\"\n\t\t/></td></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt);}},focus:function(_405){if(!this.disabled){dijit.focus(_405=="start"?this.titleNode:this._popupStateNode);}}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.set("checked",!this.checked);},_setCheckedAttr:function(_406,_407){this._set("checked",_406);dojo.attr(this.focusNode||this.domNode,"checked",_406);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_406);this._handleOnChange(_406,_407);},setChecked:function(_408){dojo.deprecated("setChecked("+_408+") is deprecated. Use set('checked',"+_408+") instead.","","2.0");this.set("checked",_408);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(args,node){this.params=args||{};dojo.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:dijit.form.Button,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _409=this.getLabel(this.command),_40a=this.editor,_40b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _40c=dojo.mixin({label:_409,dir:_40a.dir,lang:_40a.lang,showLabel:false,iconClass:_40b,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_40c);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(dojo.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_40d,_40e;if(!e||!e.isLoaded||!c.length){return;}var _40f=this.get("disabled");if(this.button){try{_40e=!_40f&&e.queryCommandEnabled(c);if(this.enabled!==_40e){this.enabled=_40e;this.button.set("disabled",!_40e);}if(typeof this.button.checked=="boolean"){_40d=e.queryCommandState(c);if(this.checked!==_40d){this.checked=_40d;this.button.set("checked",e.queryCommandState(c));}}}catch(e){console.log(e);}}},setEditor:function(_410){this.editor=_410;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_411){if(this.button){_411.addChild(this.button);}},set:function(name,_412){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _413=this._getAttrNames(name);if(this[_413.s]){var _414=this[_413.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_412);}return _414||this;},get:function(name){var _415=this._getAttrNames(name);return this[_415.g]?this[_415.g]():this[name];},_setDisabledAttr:function(_416){this.disabled=_416;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_417){var _418=this[name];this[name]=_417;}});}if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}dojo.mixin(this,args);}},setEditor:function(_419){if(this.editor===_419){return;}this.editor=_419;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_419.onLoadDeferred.addCallback(dojo.hitch(this,function(d){this.connect(_419.document,"onkeypress",function(e){if(e.charOrCode==dojo.keys.ENTER){var ne=dojo.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){dojo.stopEvent(e);}}});return d;}));}else{if(this.blockNodeForEnter){var h=dojo.hitch(this,this.handleEnterKey);_419.addKeyHandler(13,0,0,h);_419.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(e){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,"isCollapsed",dijit)){var _41a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(!_41a){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _41b=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]);if(_41b){_41b.innerHTML=this.bogusHtmlContent;if(dojo.isIE){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(dojo.isMoz){if(_41a.parentNode.parentNode.nodeName=="LI"){_41a=_41a.parentNode.parentNode;}}var fc=_41a.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_41a.insertBefore(fc.ownerDocument.createTextNode(" "),fc);var _41c=dijit.range.create(this.editor.window);_41c.setStart(_41a.firstChild,0);var _41d=dijit.range.getSelection(this.editor.window,true);_41d.removeAllRanges();_41d.addRange(_41c);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _41e,_41f,_420,_421,_422,_423,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _424=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var _425=dijit.range.getAncestor(_424,this.blockNodes);if(_425){if(_425.tagName=="LI"){return true;}_41e=dijit.range.getSelection(this.editor.window);_41f=_41e.getRangeAt(0);if(!_41f.collapsed){_41f.deleteContents();_41e=dijit.range.getSelection(this.editor.window);_41f=_41e.getRangeAt(0);}if(dijit.range.atBeginningOfContainer(_425,_41f.startContainer,_41f.startOffset)){br=doc.createElement("br");_420=dijit.range.create(this.editor.window);_425.insertBefore(br,_425.firstChild);_420.setStartBefore(br.nextSibling);_41e.removeAllRanges();_41e.addRange(_420);}else{if(dijit.range.atEndOfContainer(_425,_41f.startContainer,_41f.startOffset)){_420=dijit.range.create(this.editor.window);br=doc.createElement("br");_425.appendChild(br);_425.appendChild(doc.createTextNode(" "));_420.setStart(_425.lastChild,0);_41e.removeAllRanges();_41e.addRange(_420);}else{rs=_41f.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;dojo.withGlobal(this.editor.window,function(){_421=doc.createTextNode(txt.substring(0,_41f.startOffset));_422=doc.createTextNode(txt.substring(_41f.startOffset));_423=doc.createElement("br");if(_422.nodeValue==""&&dojo.isWebKit){_422=doc.createTextNode(" ");}dojo.place(_421,rs,"after");dojo.place(_423,_421,"after");dojo.place(_422,_423,"after");dojo.destroy(rs);_420=dijit.range.create(dojo.gobal);_420.setStart(_422,0);_41e.removeAllRanges();_41e.addRange(_420);});return false;}return true;}}}else{_41e=dijit.range.getSelection(this.editor.window);if(_41e.rangeCount){_41f=_41e.getRangeAt(0);if(_41f&&_41f.startContainer){if(!_41f.collapsed){_41f.deleteContents();_41e=dijit.range.getSelection(this.editor.window);_41f=_41e.getRangeAt(0);}rs=_41f.startContainer;if(rs&&rs.nodeType==3){dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _426=false;var _427=_41f.startOffset;if(rs.length<_427){ret=this._adjustNodeAndOffset(rs,_427);rs=ret.node;_427=ret.offset;}txt=rs.nodeValue;_421=doc.createTextNode(txt.substring(0,_427));_422=doc.createTextNode(txt.substring(_427));_423=doc.createElement("br");if(!_422.length){_422=doc.createTextNode(" ");_426=true;}if(_421.length){dojo.place(_421,rs,"after");}else{_421=rs;}dojo.place(_423,_421,"after");dojo.place(_422,_423,"after");dojo.destroy(rs);_420=dijit.range.create(dojo.gobal);_420.setStart(_422,0);_420.setEnd(_422,_422.length);_41e.removeAllRanges();_41e.addRange(_420);if(_426&&!dojo.isWebKit){dijit._editor.selection.remove();}else{dijit._editor.selection.collapse(true);}}));}else{dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _428=doc.createElement("br");rs.appendChild(_428);var _429=doc.createTextNode(" ");rs.appendChild(_429);_420=dijit.range.create(dojo.global);_420.setStart(_429,0);_420.setEnd(_429,_429.length);_41e.removeAllRanges();_41e.addRange(_420);dijit._editor.selection.collapse(true);}));}}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _42a=true;_41e=dijit.range.getSelection(this.editor.window);_41f=_41e.getRangeAt(0);if(!_41f.collapsed){_41f.deleteContents();_41e=dijit.range.getSelection(this.editor.window);_41f=_41e.getRangeAt(0);}var _42b=dijit.range.getBlockAncestor(_41f.endContainer,null,this.editor.editNode);var _42c=_42b.blockNode;if((this._checkListLater=(_42c&&(_42c.nodeName=="LI"||_42c.parentNode.nodeName=="LI")))){if(dojo.isMoz){this._pressedEnterInBlock=_42c;}if(/^(\s|&nbsp;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|\xA0)<\/span>)?(<br>)?$/.test(_42c.innerHTML)){_42c.innerHTML="";if(dojo.isWebKit){_420=dijit.range.create(this.editor.window);_420.setStart(_42c,0);_41e.removeAllRanges();_41e.addRange(_420);}this._checkListLater=false;}return true;}if(!_42b.blockNode||_42b.blockNode===this.editor.editNode){try{dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_42b={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_42b.blockNode){if(_42b.blockNode!=this.editor.editNode&&(!(_42b.blockNode.textContent||_42b.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_42b.blockNode);return false;}}else{_42b.blockNode=this.editor.editNode;}_41e=dijit.range.getSelection(this.editor.window);_41f=_41e.getRangeAt(0);}var _42d=doc.createElement(this.blockNodeForEnter);_42d.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_42b.blockNode);var _42e=_41f.endOffset;var node=_41f.endContainer;if(node.length<_42e){var ret=this._adjustNodeAndOffset(node,_42e);node=ret.node;_42e=ret.offset;}if(dijit.range.atEndOfContainer(_42b.blockNode,node,_42e)){if(_42b.blockNode===_42b.blockContainer){_42b.blockNode.appendChild(_42d);}else{dojo.place(_42d,_42b.blockNode,"after");}_42a=false;_420=dijit.range.create(this.editor.window);_420.setStart(_42d,0);_41e.removeAllRanges();_41e.addRange(_420);if(this.editor.height){dojo.window.scrollIntoView(_42d);}}else{if(dijit.range.atBeginningOfContainer(_42b.blockNode,_41f.startContainer,_41f.startOffset)){dojo.place(_42d,_42b.blockNode,_42b.blockNode===_42b.blockContainer?"first":"before");if(_42d.nextSibling&&this.editor.height){_420=dijit.range.create(this.editor.window);_420.setStart(_42d.nextSibling,0);_41e.removeAllRanges();_41e.addRange(_420);dojo.window.scrollIntoView(_42d.nextSibling);}_42a=false;}else{if(_42b.blockNode===_42b.blockContainer){_42b.blockNode.appendChild(_42d);}else{dojo.place(_42d,_42b.blockNode,"after");}_42a=false;if(_42b.blockNode.style){if(_42d.style){if(_42b.blockNode.style.cssText){_42d.style.cssText=_42b.blockNode.style.cssText;}}}rs=_41f.startContainer;var _42f;if(rs&&rs.nodeType==3){var _430,_431;_42e=_41f.endOffset;if(rs.length<_42e){ret=this._adjustNodeAndOffset(rs,_42e);rs=ret.node;_42e=ret.offset;}txt=rs.nodeValue;_421=doc.createTextNode(txt.substring(0,_42e));_422=doc.createTextNode(txt.substring(_42e,txt.length));dojo.place(_421,rs,"before");dojo.place(_422,rs,"after");dojo.destroy(rs);var _432=_421.parentNode;while(_432!==_42b.blockNode){var tg=_432.tagName;var _433=doc.createElement(tg);if(_432.style){if(_433.style){if(_432.style.cssText){_433.style.cssText=_432.style.cssText;}}}if(_432.tagName==="FONT"){if(_432.color){_433.color=_432.color;}if(_432.face){_433.face=_432.face;}if(_432.size){_433.size=_432.size;}}_430=_422;while(_430){_431=_430.nextSibling;_433.appendChild(_430);_430=_431;}dojo.place(_433,_432,"after");_421=_432;_422=_433;_432=_432.parentNode;}_430=_422;if(_430.nodeType==1||(_430.nodeType==3&&_430.nodeValue)){_42d.innerHTML="";}_42f=_430;while(_430){_431=_430.nextSibling;_42d.appendChild(_430);_430=_431;}}_420=dijit.range.create(this.editor.window);var _434;var _435=_42f;if(this.blockNodeForEnter!=="BR"){while(_435){_434=_435;_431=_435.firstChild;_435=_431;}if(_434&&_434.parentNode){_42d=_434.parentNode;_420.setStart(_42d,0);_41e.removeAllRanges();_41e.addRange(_420);if(this.editor.height){dijit.scrollIntoView(_42d);}if(dojo.isMoz){this._pressedEnterInBlock=_42b.blockNode;}}else{_42a=true;}}else{_420.setStart(_42d,0);_41e.removeAllRanges();_41e.addRange(_420);if(this.editor.height){dijit.scrollIntoView(_42d);}if(dojo.isMoz){this._pressedEnterInBlock=_42b.blockNode;}}}}return _42a;},_adjustNodeAndOffset:function(node,_436){while(node.length<_436&&node.nextSibling&&node.nextSibling.nodeType==3){_436=_436-node.length;node=node.nextSibling;}var ret={"node":node,"offset":_436};return ret;},removeTrailingBr:function(_437){var para=/P|DIV|LI/i.test(_437.tagName)?_437:dijit._editor.selection.getParentOfType(_437,["P","DIV","LI"]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){dojo.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","dijit._editor.plugins.EnterKeyHandling"];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(dojo.isIE){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}dojo.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.callback(true);dojo.addClass(this.iframe.parentNode,"dijitEditorIFrameContainer");dojo.addClass(this.iframe,"dijitEditorIFrame");dojo.attr(this.iframe,"allowTransparency",true);if(dojo.isWebKit){dojo.style(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){dojo.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_438,_439){var args=dojo.isString(_438)?{name:_438}:_438;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[o]);if(!o.plugin){var pc=dojo.getObject(args.name);if(pc){o.plugin=new pc(args);}}if(!o.plugin){console.warn("Cannot find plugin",_438);return;}_438=o.plugin;}if(arguments.length>1){this._plugins[_439]=_438;}else{this._plugins.push(_438);}_438.setEditor(this);if(dojo.isFunction(_438.setToolbar)){_438.setToolbar(this.toolbar);}},startup:function(){},resize:function(size){if(size){dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments);}},layout:function(){var _43a=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+dojo._getPadBorderExtents(this.iframe.parentNode).h+dojo._getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_43a+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _43b;var b=this.document.body;var _43c=b.clientWidth;var _43d=b.clientHeight;var _43e=b.clientLeft;var _43f=b.offsetWidth;var _440=b.offsetHeight;var _441=b.offsetLeft;bodyDir=b.dir?b.dir.toLowerCase():"";if(bodyDir!="rtl"){if(_43c<_43f&&e.x>_43c&&e.x<_43f){_43b=true;}}else{if(e.x<_43e&&e.x>_441){_43b=true;}}if(!_43b){if(_43d<_440&&e.y>_43d&&e.y<_440){_43b=true;}}if(!_43b){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}this.inherited(arguments);}},onBeforeActivate:function(e){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer);}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r;var _442=/copy|cut|paste/.test(cmd);try{r=this.inherited(arguments);if(dojo.isWebKit&&_442&&!r){throw {code:1011};}}catch(e){if(e.code==1011&&_442){var sub=dojo.string.substitute,_443={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[dojo.isMac?"appleKey":"ctrlKey"],[_443[cmd]])]));}r=false;}if(this.customUndo){this._endEditing();}return r;}},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _444=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_445,_446,sel;if(mark){if(dojo.isIE<9){if(dojo.isArray(mark)){_444=[];dojo.forEach(mark,function(n){_444.push(dijit.range.getNode(n,this.editNode));},this);dojo.withGlobal(this.window,"moveToBookmark",dijit,[{mark:_444,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_445=dijit.range.getNode(mark.startContainer,this.editNode);_446=dijit.range.getNode(mark.endContainer,this.editNode);if(_445&&_446){r.setStart(_445,mark.startOffset);r.setEnd(_446,mark.endOffset);sel.addRange(r);}}}}}else{sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_445=dijit.range.getNode(mark.startContainer,this.editNode);_446=dijit.range.getNode(mark.endContainer,this.editNode);if(_445&&_446){r.setStart(_445,mark.startOffset);r.setEnd(_446,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_447){if(this._editTimer){clearTimeout(this._editTimer);}if(this._inEditing){this._endEditing(_447);this._inEditing=false;}},_getBookmark:function(){var b=dojo.withGlobal(this.window,dijit.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(dojo.isIE<9){var sel=dijit.range.getSelection(this.window);if(!dojo.isArray(mark)){if(sel){var _448;if(sel.rangeCount){_448=sel.getRangeAt(0);}if(_448){b.mark=_448.cloneRange();}else{b.mark=dojo.withGlobal(this.window,dijit.getBookmark);}}}else{dojo.forEach(b.mark,function(n){tmp.push(dijit.range.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=dijit.range.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:dijit.range.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(cmd){if(this._steps.length===0){this._steps.push({"text":dijit._editor.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(_449){var v=dijit._editor.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!dojo.isIE&&!this.iframe&&e.keyCode==dojo.keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode,ks=dojo.keys;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){dojo.stopEvent(e);this.undo();return;}else{if(k==89||k==121){dojo.stopEvent(e);this.redo();return;}}}this.inherited(arguments);switch(k){case ks.ENTER:case ks.BACKSPACE:case ks.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1);}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);}break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<dojo.keys.F1||e.keyCode>dojo.keys.F15)){this.beginEditing();break;}case ks.ALT:this.endEditing();break;case ks.UP_ARROW:case ks.DOWN_ARROW:case ks.LEFT_ARROW:case ks.RIGHT_ARROW:case ks.HOME:case ks.END:case ks.PAGE_UP:case ks.PAGE_DOWN:this.endEditing(true);break;case ks.CTRL:case ks.SHIFT:case ks.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(dojo.withGlobal(this.window,"isCollapsed",dijit)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&nbsp;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_44a){var _44b=dojo.hitch(this,function(){if((!this.disabled&&_44a)||(!this._buttonEnabledPlugins&&_44a)){dojo.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_44a){dojo.forEach(this._plugins,function(p){p.set("disabled",false);});}}});this.setValueDeferred.addCallback(_44b);this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){dojo.style(this.document.body,"color",dojo.style(this.iframe,"color"));}}catch(e){}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var args=o.args,p;var _44c=dijit._editor._Plugin;var name=args.name;switch(name){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":p=new _44c({command:name});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":p=new _44c({buttonClass:dijit.form.ToggleButton,command:name});break;case "|":p=new _44c({button:new dijit.ToolbarSeparator(),setEditor:function(_44d){this.editor=_44d;}});}o.plugin=p;});}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.getObject("data.util.sorter",true,dojo);dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_44e,_44f){var _450=[];function _451(attr,dir,comp,s){return function(_452,_453){var a=s.getValue(_452,attr);var b=s.getValue(_453,attr);return dir*comp(a,b);};};var _454;var map=_44f.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_44e.length;i++){_454=_44e[i];var attr=_454.attribute;if(attr){var dir=(_454.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_450.push(_451(attr,dir,comp,_44f));}}return function(rowA,rowB){var i=0;while(i<_450.length){var ret=_450[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.getObject("data.util.simpleFetch",true,dojo);dojo.data.util.simpleFetch.fetch=function(_455){_455=_455||{};if(!_455.store){_455.store=this;}var self=this;var _456=function(_457,_458){if(_458.onError){var _459=_458.scope||dojo.global;_458.onError.call(_459,_457,_458);}};var _45a=function(_45b,_45c){var _45d=_45c.abort||null;var _45e=false;var _45f=_45c.start?_45c.start:0;var _460=(_45c.count&&(_45c.count!==Infinity))?(_45f+_45c.count):_45b.length;_45c.abort=function(){_45e=true;if(_45d){_45d.call(_45c);}};var _461=_45c.scope||dojo.global;if(!_45c.store){_45c.store=self;}if(_45c.onBegin){_45c.onBegin.call(_461,_45b.length,_45c);}if(_45c.sort){_45b.sort(dojo.data.util.sorter.createSortFunction(_45c.sort,self));}if(_45c.onItem){for(var i=_45f;(i<_45b.length)&&(i<_460);++i){var item=_45b[i];if(!_45e){_45c.onItem.call(_461,item,_45c);}}}if(_45c.onComplete&&!_45e){var _462=null;if(!_45c.onItem){_462=_45b.slice(_45f,_460);}_45c.onComplete.call(_461,_462,_45c);}};this._fetchItems(_455,_45a,_456);return _455;};}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.getObject("data.util.filter",true,dojo);dojo.data.util.filter.patternToRegExp=function(_463,_464){var rxp="^";var c=null;for(var i=0;i<_463.length;i++){c=_463.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_463.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_464){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html","<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" dojoAttachPoint=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==dijit.form.TextBox.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this._focused&&!this.textbox.value)?"":"none";}},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_465,_466,_467){var _468;if(_465!==undefined){_468=this.filter(_465);if(typeof _467!="string"){if(_468!==null&&((typeof _468!="number")||!isNaN(_468))){_467=this.filter(this.format(_468,this.constraints));}else{_467="";}}}if(_467!=null&&_467!=undefined&&((typeof _467)!="number"||!isNaN(_467))&&this.textbox.value!=_467){this.textbox.value=_467;this._set("displayedValue",this.get("displayedValue"));}this._updatePlaceHolder();this.inherited(arguments,[_468,_466]);},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_469){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_469);},_setDisplayedValueAttr:function(_46a){if(_46a===null||_46a===undefined){_46a="";}else{if(typeof _46a!="string"){_46a=String(_46a);}}this.textbox.value=_46a;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));},format:function(_46b,_46c){return ((_46b==null||_46b==undefined)?"":(_46b.toString?_46b.toString():_46b));},parse:function(_46d,_46e){return _46d;},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode){switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return;}}if(this.intermediateChanges){var _46f=this;setTimeout(function(){_46f._handleOnChange(_46f.get("value"),false);},0);}this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){if(dojo.isIE){setTimeout(dojo.hitch(this,function(){var s=dojo.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _470=this.domNode.getElementsByTagName("INPUT");if(_470){for(var i=0;i<_470.length;i++){_470[i].style.fontFamily=ff;}}}}}),0);}this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput","_onInput");}else{this.connect(this.textbox,"onkeydown","_onInput");this.connect(this.textbox,"onkeyup","_onInput");this.connect(this.textbox,"onpaste","_onInput");this.connect(this.textbox,"oncut","_onInput");}},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=dojo.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}if(this.selectOnClick&&dojo.isMoz){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}this._updatePlaceHolder();},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var _471;if(dojo.isIE){var _472=dojo.doc.selection.createRange();var _473=_472.parentElement();_471=_473==this.textbox&&_472.text.length==0;}else{_471=this.textbox.selectionStart==this.textbox.selectionEnd;}if(_471){dijit.selectInputText(this.textbox);}});}this._updatePlaceHolder();this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);}});dijit.selectInputText=function(_474,_475,stop){var _476=dojo.global;var _477=dojo.doc;_474=dojo.byId(_474);if(isNaN(_475)){_475=0;}if(isNaN(stop)){stop=_474.value?_474.value.length:0;}dijit.focus(_474);if(_477["selection"]&&dojo.body()["createTextRange"]){if(_474.createTextRange){var r=_474.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_475);r.moveEnd("character",stop-_475);r.select();}}else{if(_476["getSelection"]){if(_474.setSelectionRange){_474.setSelectionRange(_475,stop);}}}};}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer pentaho-tooltip-contents\" dojoAttachPoint=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" dojoAttachPoint=\"connectorNode\"></div\n></div>\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_478,_479,_47a,rtl){if(this.aroundNode&&this.aroundNode===_479){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_478;var pos=dijit.placeOnScreenAroundElement(this.domNode,_479,dijit.getPopupAroundAlignment((_47a&&_47a.length)?_47a:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_479;},orient:function(node,_47b,_47c,_47d,_47e){this.connectorNode.style.top="";var _47f=_47d.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_47b+"-"+_47c];this.domNode.style.width="auto";var size=dojo.contentBox(this.domNode);var _480=Math.min((Math.max(_47f,1)),size.w);var _481=_480<size.w;this.domNode.style.width=_480+"px";if(_481){this.containerNode.style.overflow="auto";var _482=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_482>_480){_482=_482+dojo.style(this.domNode,"paddingLeft")+dojo.style(this.domNode,"paddingRight");this.domNode.style.width=_482+"px";}}if(_47c.charAt(0)=="B"&&_47b.charAt(0)=="B"){var mb=dojo.marginBox(node);var _483=this.connectorNode.offsetHeight;if(mb.h>_47d.h){var _484=_47d.h-(_47e.h/2)-(_483/2);this.connectorNode.style.top=_484+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_47e.h/2-_483/2,0),mb.h-_483)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_47f);},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_485){if(this._onDeck&&this._onDeck[1]==_485){this._onDeck=null;}else{if(this.aroundNode===_485){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_486,_487,_488,rtl){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_486,_487,_488,rtl);};dijit.hideTooltip=function(_489){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_489);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_48a){dojo.forEach(this._connections||[],function(_48b){dojo.forEach(_48b,dojo.hitch(this,"disconnect"));},this);var ary=dojo.isArrayLike(_48a)?_48a:(_48a?[_48a]:[]);this._connections=dojo.map(ary,function(id){var node=dojo.byId(id);return node?[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")]:[];},this);this._set("connectId",_48a);this._connectIds=ary;},addTarget:function(node){var id=node.id||node;if(dojo.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=dojo.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _48c=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_48c);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_48d){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_48d,this.position,!this.isLeftToRight());this._connectNode=_48d;this.onShow(_48d,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_48e,_48f){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitValidationTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},regExp:".*",regExpGen:function(_490){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_491,_492){return (new RegExp("^(?:"+this.regExpGen(_492)+")"+(this.required?"":"?")+"$")).test(_491)&&(!this.required||!this._isEmpty(_491))&&(this._isEmpty(_491)||this.parse(_491,_492)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_493){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_494){return (this.trim?/^\s*$/:/^$/).test(_494);},getErrorMessage:function(_495){return (this.required&&this._isEmpty(this.textbox.value))?this.missingMessage:this.invalidMessage;},getPromptMessage:function(_496){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_497){var _498="";var _499=this.disabled||this.isValid(_497);if(_499){this._maskValidSubsetError=true;}var _49a=this._isEmpty(this.textbox.value);var _49b=!_499&&_497&&this._isValidSubset();this._set("state",_499?"":(((((!this._hasBeenBlurred||_497)&&_49a)||_49b)&&this._maskValidSubsetError)?"Incomplete":"Error"));dijit.setWaiState(this.focusNode,"invalid",_499?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_497&&_49b;_498=this.getErrorMessage(_497);}else{if(this.state=="Incomplete"){_498=this.getPromptMessage(_497);this._maskValidSubsetError=!this._hasBeenBlurred||_497;}else{if(_49a){_498=this.getPromptMessage(_497);}}}this.set("message",_498);return _499;},displayMessage:function(_49c){dijit.hideTooltip(this.domNode);if(_49c&&this._focused){dijit.showTooltip(_49c,this.domNode,this.tooltipPosition,!this.isLeftToRight());}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments);},constructor:function(){this.constraints={};},_setConstraintsAttr:function(_49d){if(!_49d.locale&&this.lang){_49d.locale=this.lang;}this._set("constraints",_49d);this._computePartialRE();},_computePartialRE:function(){var p=this.regExpGen(this.constraints);this.regExp=p;var _49e="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_49e+=re;break;case ")":_49e+="|$)";break;default:_49e+="(?:"+re+"|$)";break;}});}try{"".search(_49e);}catch(e){_49e=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp);}this._partialre="^(?:"+_49e+")$";},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}if(!this.invalidMessage){this.invalidMessage=this.promptMessage;}if(this.missingMessage=="$_unset_$"){this.missingMessage=this.messages.missingMessage;}if(!this.missingMessage){this.missingMessage=this.invalidMessage;}this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_49f){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_4a0){this._set("required",_4a0);dijit.setWaiState(this.focusNode,"required",_4a0);this._refreshState();},_setMessageAttr:function(_4a1){this._set("message",_4a1);this.displayMessage(_4a1);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},serialize:function(val,_4a2){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name.replace(/'/g,"&quot;")+"'":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_4a3,_4a4){return ("min" in _4a4?(this.compare(_4a3,_4a4.min)>=0):true)&&("max" in _4a4?(this.compare(_4a3,_4a4.max)<=0):true);},isInRange:function(_4a5){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");var _4a6=false;var _4a7=false;if("min" in this.constraints){var min=this.constraints.min;min=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_4a6=(typeof min=="number")&&min<0;}if("max" in this.constraints){var max=this.constraints.max;max=this.compare(val,((typeof max!="number")||max>0)?max:0);_4a7=(typeof max=="number")&&max>0;}return _4a6||_4a7;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_4a8){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_4a8));},getErrorMessage:function(_4a9){var v=this.get("value");if(v!==null&&v!==""&&v!==undefined&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_4a9)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},_setConstraintsAttr:function(_4aa){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);}else{dijit.removeWaiState(this.focusNode,"valuemin");}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);}else{dijit.removeWaiState(this.focusNode,"valuemax");}}},_setValueAttr:function(_4ab,_4ac){dijit.setWaiState(this.focusNode,"valuenow",_4ab);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",dijit._HasDropDown,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitComboBox",dropDownClass:"dijit.form._ComboBoxMenu",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_4ad){var pos=0;if(typeof (_4ad.selectionStart)=="number"){pos=_4ad.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_4ad.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_4ae,_4af){_4af=parseInt(_4af);dijit.selectInputText(_4ae,_4af,_4af);},_setDisabledAttr:function(_4b0){this.inherited(arguments);dijit.setWaiState(this.domNode,"disabled",_4b0);},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null;}if(this._fetchHandle){if(this._fetchHandle.abort){this._fetchHandle.abort();}this._fetchHandle=null;}},_onInput:function(evt){if(!this.searchTimer&&(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value){this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKey({charOrCode:229});}),100);}this.inherited(arguments);},_onKey:function(evt){var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==dojo.keys.SHIFT){return;}var _4b1=false;var pw=this.dropDown;var dk=dojo.keys;var _4b2=null;this._prev_key_backspace=false;this._abortQuery();this.inherited(arguments);if(this._opened){_4b2=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(this._opened){this._announceOption(_4b2);}dojo.stopEvent(evt);break;case dk.ENTER:if(_4b2){if(_4b2==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_4b2==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}if(this._opened||this._fetchHandle){evt.preventDefault();}case dk.TAB:var _4b3=this.get("displayedValue");if(pw&&(_4b3==pw._messages["previousMessage"]||_4b3==pw._messages["nextMessage"])){break;}if(_4b2){this._selectOption();}if(this._opened){this._lastQuery=null;this.closeDropDown();}break;case " ":if(_4b2){dojo.stopEvent(evt);this._selectOption();this.closeDropDown();}else{_4b1=true;}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;_4b1=true;break;default:_4b1=typeof key=="string"||key==229;}if(_4b1){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,"_startSearchFromInput"),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _4b4=this.ignoreCase?"toLowerCase":"substr";if(text[_4b4](0).indexOf(this.focusNode.value[_4b4](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_4b5,_4b6){this._fetchHandle=null;if(this.disabled||this.readOnly||(_4b6.query[this.searchAttr]!=this._lastQuery)){return;}var _4b7=this.dropDown._highlighted_option&&dojo.hasClass(this.dropDown._highlighted_option,"dijitMenuItemSelected");this.dropDown.clearResultList();if(!_4b5.length&&!this._maxOptions){this.closeDropDown();return;}_4b6._maxOptions=this._maxOptions;var _4b8=this.dropDown.createOptions(_4b5,_4b6,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_4b6.direction){if(1==_4b6.direction){this.dropDown.highlightFirstOption();}else{if(-1==_4b6.direction){this.dropDown.highlightLastOption();}}if(_4b7){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_4b6.query[this.searchAttr])){this._announceOption(_4b8[1]);}}},_showResultList:function(){this.closeDropDown(true);this.displayMessage("");this.openDropDown();dijit.setWaiState(this.domNode,"expanded","true");},loadDropDown:function(_4b9){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);dijit.setWaiState(this.domNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _4ba=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_4ba==pw._messages["previousMessage"]||_4ba==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_4ba);}else{if(this.value!=this._lastValueReported){dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);}this._refreshState();}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},_setItemAttr:function(item,_4bb,_4bc){if(!_4bc){_4bc=this.store.getValue(item,this.searchAttr);}var _4bd=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_4bc;this._set("item",item);dijit.form.ComboBox.superclass._setValueAttr.call(this,_4bd,_4bb,_4bc);},_announceOption:function(node){if(!node){return;}var _4be;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_4be=node.innerHTML;this.item=undefined;this.value="";}else{_4be=this.store.getValue(node.item,this.searchAttr).toString();this.set("item",node.item,false,_4be);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_4be);},_selectOption:function(evt){if(evt){this._announceOption(evt.target);}this.closeDropDown();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this.dropDown){var _4bf=this.id+"_popup",_4c0=dojo.getObject(this.dropDownClass,false);this.dropDown=new _4c0({onChange:dojo.hitch(this,this._selectOption),id:_4bf,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_4bf);}var _4c1=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_4c1[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_4c2,_4c3){this.searchTimer=null;var _4c4={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_4c2,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_4c5){_4c3._fetchHandle=null;console.error("dijit.form.ComboBox: "+_4c5);_4c3.closeDropDown();},start:0,count:this.pageSize};dojo.mixin(_4c4,_4c3.fetchProperties);this._fetchHandle=_4c3.store.fetch(_4c4);var _4c6=function(_4c7,_4c8){_4c7.start+=_4c7.count*_4c8;_4c7.direction=_4c8;this._fetchHandle=this.store.fetch(_4c7);this.focus();};this._nextSearch=this.dropDown.onPage=dojo.hitch(this,_4c6,this._fetchHandle);},_4c1,this),this.searchDelay);},_setMaxOptions:function(size,_4c9){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _4ca=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_4ca);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _4cb=this._getValueField();this.value=this.store.getValue(item,_4cb);}}}this.inherited(arguments);},postCreate:function(){var _4cc=dojo.query("label[for=\""+this.id+"\"]");if(_4cc.length){_4cc[0].id=(this.id+"_label");dijit.setWaiState(this.domNode,"labelledby",_4cc[0].id);}this.inherited(arguments);},_setHasDownArrowAttr:function(val){this.hasDownArrow=val;this._buttonNode.style.display=val?"":"none";},_getMenuLabelFromItem:function(item){var _4cd=this.labelFunc(item,this.store),_4ce=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_4cd=this.doHighlight(_4cd,this._escapeHtml(this._lastInput));_4ce="html";}return {html:_4ce=="html",label:_4cd};},doHighlight:function(_4cf,find){var _4d0=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=dojo.regexp.escapeString(find);return this._escapeHtml(_4cf).replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_4d0),"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_4d1){return _4d1.getValue(item,this.labelAttr||this.searchAttr).toString();}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this.inherited(arguments);this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_4d2){this.value=_4d2;this.onChange(_4d2);},onChange:function(_4d3){},onPage:function(_4d4){},onClose:function(){this._blurOptionNode();},_createOption:function(item,_4d5){var _4d6=dojo.create("li",{"class":"dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),role:"option"});var _4d7=_4d5(item);if(_4d7.html){_4d6.innerHTML=_4d7.label;}else{_4d6.appendChild(dojo.doc.createTextNode(_4d7.label));}if(_4d6.innerHTML==""){_4d6.innerHTML="&nbsp;";}_4d6.item=item;return _4d6;},createOptions:function(_4d8,_4d9,_4da){this.previousButton.style.display=(_4d9.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_4d8,function(item,i){var _4db=this._createOption(item,_4da);dojo.attr(_4db,"id",this.id+i);this.domNode.insertBefore(_4db,this.nextButton);},this);var _4dc=false;if(_4d9._maxOptions&&_4d9._maxOptions!=-1){if((_4d9.start+_4d9.count)<_4d9._maxOptions){_4dc=true;}else{if((_4d9.start+_4d9.count)>_4d9._maxOptions&&_4d9.count==_4d8.length){_4dc=true;}}}else{if(_4d9.count==_4d8.length){_4dc=true;}}this.nextButton.style.display=_4dc?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes;},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}this._blurOptionNode();},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option){return;}else{if(evt.target==this.previousButton){this._blurOptionNode();this.onPage(-1);}else{if(evt.target==this.nextButton){this._blurOptionNode();this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}else{this.highlightFirstOption();}}dojo.window.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){var _4dd=this.domNode.firstChild;var _4de=_4dd.nextSibling;this._focusOptionNode(_4de.style.display=="none"?_4dd:_4de);dojo.window.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}else{this.highlightLastOption();}}dojo.window.scrollIntoView(this._highlighted_option);},_page:function(up){var _4df=0;var _4e0=this.domNode.scrollTop;var _4e1=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_4df<_4e1){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _4e2=this.domNode.scrollTop;_4df+=(_4e2-_4e0)*(up?-1:1);_4e0=_4e2;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(evt){switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();return false;case dojo.keys.PAGE_DOWN:this.pageDown();return false;case dojo.keys.UP_ARROW:this._highlightPrevOption();return false;case dojo.keys.PAGE_UP:this.pageUp();return false;default:return true;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_4e3,_4e4,_4e5){this._set("item",null);if(!_4e3){_4e3="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_4e3,_4e4,_4e5);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0){root=root[0];}else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild;}this.root=root;}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_4e6,_4e7){return (_4e6=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_4e8){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_4e9,_4ea){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _4eb=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_4ec=dojo.query("> option",this.root).filter(function(_4ed){return (_4ed.innerText||_4ed.textContent||"").match(_4eb);});if(args.sort){_4ec.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_4e9(_4ec,args);},close:function(_4ee){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null;}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_4ef,_4f0,_4f1){if((_4f0&&_4f0.query[this.searchAttr]!=this._lastQuery)||(!_4f0&&_4ef.length&&this.store.getIdentity(_4ef[0])!=this._lastQuery)){return;}if(!_4ef.length){this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",_4f1||(_4f1===undefined&&!this._focused));this._set("item",null);this.validate(this._focused);}else{this.set("item",_4ef[0],_4f1);}},_openResultList:function(_4f2,_4f3){if(_4f3.query[this.searchAttr]!=this._lastQuery){return;}dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_4f4,_4f5){if(!this._onChangeActive){_4f5=null;}this._lastQuery=_4f4;if(_4f4===null||_4f4===""){this._setDisplayedValueAttr("",_4f5);return;}var self=this;this.store.fetchItemByIdentity({identity:_4f4,onItem:function(item){self._callbackSetLabel(item?[item]:[],undefined,_4f5);}});},_setItemAttr:function(item,_4f6,_4f7){this.inherited(arguments);this.valueNode.value=this.value;this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_4f8,_4f9){if(_4f8==null){_4f8="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_4f9=false;}if(this.store){this.closeDropDown();var _4fa=dojo.clone(this.query);this._lastQuery=_4fa[this.searchAttr]=this._getDisplayQueryString(_4f8);this.textbox.value=_4f8;this._lastDisplayedValue=_4f8;this._set("displayedValue",_4f8);var _4fb=this;var _4fc={query:_4fa,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(_4fd,_4fe){_4fb._fetchHandle=null;dojo.hitch(_4fb,"_callbackSetLabel")(_4fd,_4fe,_4f9);},onError:function(_4ff){_4fb._fetchHandle=null;console.error("dijit.form.FilteringSelect: "+_4ff);dojo.hitch(_4fb,"_callbackSetLabel")([],undefined,false);}};dojo.mixin(_4fc,this.fetchProperties);this._fetchHandle=this.store.fetch(_4fc);}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_500){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_500.url;this._ccUrl=_500.url;this.url=_500.url;this._jsonData=_500.data;this.data=null;this._datatypeMap=_500.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_501){return dojo.date.stamp.fromISOString(_501);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_500.urlPreventCache!==undefined){this.urlPreventCache=_500.urlPreventCache?true:false;}if(_500.hierarchical!==undefined){this.hierarchical=_500.hierarchical?true:false;}if(_500.clearOnClose){this.clearOnClose=true;}if("failOk" in _500){this.failOk=_500.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_502){if(typeof _502!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_503,_504){var _505=this.getValues(item,_503);return (_505.length>0)?_505[0]:_504;},getValues:function(item,_506){this._assertIsItem(item);this._assertIsAttribute(_506);return (item[_506]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _507=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_507.push(key);}}return _507;},hasAttribute:function(item,_508){this._assertIsItem(item);this._assertIsAttribute(_508);return (_508 in item);},containsValue:function(item,_509,_50a){var _50b=undefined;if(typeof _50a==="string"){_50b=dojo.data.util.filter.patternToRegExp(_50a,false);}return this._containsValue(item,_509,_50a,_50b);},_containsValue:function(item,_50c,_50d,_50e){return dojo.some(this.getValues(item,_50c),function(_50f){if(_50f!==null&&!dojo.isObject(_50f)&&_50e){if(_50f.toString().match(_50e)){return true;}}else{if(_50d===_50f){return true;}}});},isItem:function(_510){if(_510&&_510[this._storeRefPropName]===this){if(this._arrayOfAllItems[_510[this._itemNumPropName]]===_510){return true;}}return false;},isItemLoaded:function(_511){return this.isItem(_511);},loadItem:function(_512){this._assertIsItem(_512.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_513,_514,_515){var self=this,_516=function(_517,_518){var _519=[],i,key;if(_517.query){var _51a,_51b=_517.queryOptions?_517.queryOptions.ignoreCase:false;var _51c={};for(key in _517.query){_51a=_517.query[key];if(typeof _51a==="string"){_51c[key]=dojo.data.util.filter.patternToRegExp(_51a,_51b);}else{if(_51a instanceof RegExp){_51c[key]=_51a;}}}for(i=0;i<_518.length;++i){var _51d=true;var _51e=_518[i];if(_51e===null){_51d=false;}else{for(key in _517.query){_51a=_517.query[key];if(!self._containsValue(_51e,key,_51a,_51c[key])){_51d=false;}}}if(_51d){_519.push(_51e);}}_514(_519,_517);}else{for(i=0;i<_518.length;++i){var item=_518[i];if(item!==null){_519.push(item);}}_514(_519,_517);}};if(this._loadFinished){_516(_513,this._getItemsArray(_513.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_513,filter:_516});}else{this._loadInProgress=true;var _51f={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _520=dojo.xhrGet(_51f);_520.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_516(_513,self._getItemsArray(_513.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_515(e,_513);}});_520.addErrback(function(_521){self._loadInProgress=false;_515(_521,_513);});var _522=null;if(_513.abort){_522=_513.abort;}_513.abort=function(){var df=_520;if(df&&df.fired===-1){df.cancel();df=null;}if(_522){_522.call(_513);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_516(_513,this._getItemsArray(_513.queryOptions));}catch(e){_515(e,_513);}}else{_515(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_513);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _523=this._queuedFetches[i],_524=_523.args,_525=_523.filter;if(_525){_525(_524,this._getItemsArray(_524.queryOptions));}else{this.fetchItemByIdentity(_524);}}this._queuedFetches=[];}},_getItemsArray:function(_526){if(_526&&_526.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_527){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug("dojo.data.ItemFileReadStore: WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_528){var _529=false,self=this;function _52a(_52b){var _52c=((_52b!==null)&&(typeof _52b==="object")&&(!dojo.isArray(_52b)||_529)&&(!dojo.isFunction(_52b))&&(_52b.constructor==Object||dojo.isArray(_52b))&&(typeof _52b._reference==="undefined")&&(typeof _52b._type==="undefined")&&(typeof _52b._value==="undefined")&&self.hierarchical);return _52c;};function _52d(_52e){self._arrayOfAllItems.push(_52e);for(var _52f in _52e){var _530=_52e[_52f];if(_530){if(dojo.isArray(_530)){var _531=_530;for(var k=0;k<_531.length;++k){var _532=_531[k];if(_52a(_532)){_52d(_532);}}}else{if(_52a(_530)){_52d(_530);}}}}};this._labelAttr=_528.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_528.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_529=true;}_52d(item);item[this._rootItemPropName]=true;}var _533={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _534=item[key];if(_534!==null){if(!dojo.isArray(_534)){item[key]=[_534];}}else{item[key]=[null];}}_533[key]=key;}}while(_533[this._storeRefPropName]){this._storeRefPropName+="_";}while(_533[this._itemNumPropName]){this._itemNumPropName+="_";}while(_533[this._reverseRefMap]){this._reverseRefMap+="_";}var _535;var _536=_528.identifier;if(_536){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_536;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_535=item[_536];var _537=_535[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_537)){this._itemsByIdentity[_537]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_536+"].  Value collided: ["+_537+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_536+"].  Value collided: ["+_537+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_535=item[key];for(var j=0;j<_535.length;++j){_534=_535[j];if(_534!==null&&typeof _534=="object"){if(("_type" in _534)&&("_value" in _534)){var type=_534._type;var _538=this._datatypeMap[type];if(!_538){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_538)){_535[j]=new _538(_534._value);}else{if(dojo.isFunction(_538.deserialize)){_535[j]=_538.deserialize(_534._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_534._reference){var _539=_534._reference;if(!dojo.isObject(_539)){_535[j]=this._getItemByIdentity(_539);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _53a=this._arrayOfAllItems[k],_53b=true;for(var _53c in _539){if(_53a[_53c]!=_539[_53c]){_53b=false;}}if(_53b){_535[j]=_53a;}}}if(this.referenceIntegrity){var _53d=_535[j];if(this.isItem(_53d)){this._addReferenceToMap(_53d,item,key);}}}else{if(this.isItem(_534)){if(this.referenceIntegrity){this._addReferenceToMap(_534,item,key);}}}}}}}},_addReferenceToMap:function(_53e,_53f,_540){},getIdentity:function(item){var _541=this._features["dojo.data.api.Identity"];if(_541===Number){return item[this._itemNumPropName];}else{var _542=item[_541];if(_542){return _542[0];}}return null;},fetchItemByIdentity:function(_543){var item,_544;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_543});}else{this._loadInProgress=true;var _545={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _546=dojo.xhrGet(_545);_546.addCallback(function(data){var _547=_543.scope?_543.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_543.identity);if(_543.onItem){_543.onItem.call(_547,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_543.onError){_543.onError.call(_547,error);}}});_546.addErrback(function(_548){self._loadInProgress=false;if(_543.onError){var _549=_543.scope?_543.scope:dojo.global;_543.onError.call(_549,_548);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_543.identity);if(_543.onItem){_544=_543.scope?_543.scope:dojo.global;_543.onItem.call(_544,item);}}}}else{item=this._getItemByIdentity(_543.identity);if(_543.onItem){_544=_543.scope?_543.scope:dojo.global;_543.onItem.call(_544,item);}}},_getItemByIdentity:function(_54a){var item=null;if(this._itemsByIdentity&&Object.hasOwnProperty.call(this._itemsByIdentity,_54a)){item=this._itemsByIdentity[_54a];}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_54a)){item=this._arrayOfAllItems[_54a];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _54b=this._features["dojo.data.api.Identity"];if(_54b===Number){return null;}else{return [_54b];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _54c={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _54d=dojo.xhrGet(_54c);_54d.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_54d.addErrback(function(_54e){throw _54e;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dijit._editor.plugins.FontChoice"]){dojo._hasResource["dijit._editor.plugins.FontChoice"]=true;dojo.provide("dijit._editor.plugins.FontChoice");dojo.declare("dijit._editor.plugins._FontDropDown",[dijit._Widget,dijit._Templated],{label:"",widgetsInTemplate:true,plainText:false,templateString:"<span style='white-space: nowrap' class='dijit dijitReset dijitInline'>"+"<label class='dijitLeft dijitInline' for='${selectId}'>${label}</label>"+"<input dojoType='dijit.form.FilteringSelect' required='false' labelType='html' labelAttr='label' searchAttr='name' "+"tabIndex='-1' id='${selectId}' dojoAttachPoint='select' value=''/>"+"</span>",postMixInProperties:function(){this.inherited(arguments);this.strings=dojo.i18n.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments);},postCreate:function(){var _54f=dojo.map(this.values,function(_550){var name=this.strings[_550]||_550;return {label:this.getLabel(_550,name),name:name,value:_550};},this);this.select.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",items:_54f}});this.select.set("value","",false);this.disabled=this.select.get("disabled");},_setValueAttr:function(_551,_552){_552=_552!==false?true:false;this.select.set("value",dojo.indexOf(this.values,_551)<0?"":_551,_552);if(!_552){this.select._lastValueReported=null;}},_getValueAttr:function(){return this.select.get("value");},focus:function(){this.select.focus();},_setDisabledAttr:function(_553){this.disabled=_553;this.select.set("disabled",_553);}});dojo.declare("dijit._editor.plugins._FontNameDropDown",dijit._editor.plugins._FontDropDown,{generic:false,command:"fontName",postMixInProperties:function(){if(!this.values){this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"];}this.inherited(arguments);},getLabel:function(_554,name){if(this.plainText){return name;}else{return "<div style='font-family: "+_554+"'>"+name+"</div>";}},_setValueAttr:function(_555,_556){_556=_556!==false?true:false;if(this.generic){var map={"Arial":"sans-serif","Helvetica":"sans-serif","Myriad":"sans-serif","Times":"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive","Courier":"monospace","Courier New":"monospace","Papyrus":"fantasy"};_555=map[_555]||_555;}this.inherited(arguments,[_555,_556]);}});dojo.declare("dijit._editor.plugins._FontSizeDropDown",dijit._editor.plugins._FontDropDown,{command:"fontSize",values:[1,2,3,4,5,6,7],getLabel:function(_557,name){if(this.plainText){return name;}else{return "<font size="+_557+"'>"+name+"</font>";}},_setValueAttr:function(_558,_559){_559=_559!==false?true:false;if(_558.indexOf&&_558.indexOf("px")!=-1){var _55a=parseInt(_558,10);_558={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[_55a]||_558;}this.inherited(arguments,[_558,_559]);}});dojo.declare("dijit._editor.plugins._FormatBlockDropDown",dijit._editor.plugins._FontDropDown,{command:"formatBlock",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments);this.set("value","noFormat",false);},getLabel:function(_55b,name){if(this.plainText||_55b=="noFormat"){return name;}else{return "<"+_55b+">"+name+"</"+_55b+">";}},_execCommand:function(_55c,_55d,_55e){if(_55e==="noFormat"){var _55f;var end;var sel=dijit.range.getSelection(_55c.window);if(sel&&sel.rangeCount>0){var _560=sel.getRangeAt(0);var node,tag;if(_560){_55f=_560.startContainer;end=_560.endContainer;while(_55f&&_55f!==_55c.editNode&&_55f!==_55c.document.body&&_55f.nodeType!==1){_55f=_55f.parentNode;}while(end&&end!==_55c.editNode&&end!==_55c.document.body&&end.nodeType!==1){end=end.parentNode;}var _561=dojo.hitch(this,function(node,_562){if(node.childNodes&&node.childNodes.length){var i;for(i=0;i<node.childNodes.length;i++){var c=node.childNodes[i];if(c.nodeType==1){if(dojo.withGlobal(_55c.window,"inSelection",dijit._editor.selection,[c])){var tag=c.tagName?c.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_562.push(c);}_561(c,_562);}}}}});var _563=dojo.hitch(this,function(_564){if(_564&&_564.length){_55c.beginEditing();while(_564.length){this._removeFormat(_55c,_564.pop());}_55c.endEditing();}});var _565=[];if(_55f==end){var _566;node=_55f;while(node&&node!==_55c.editNode&&node!==_55c.document.body){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_566=node;break;}}node=node.parentNode;}_561(_55f,_565);if(_566){_565=[_566].concat(_565);}_563(_565);}else{node=_55f;while(dojo.withGlobal(_55c.window,"inSelection",dijit._editor.selection,[node])){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_565.push(node);}_561(node,_565);}node=node.nextSibling;}_563(_565);}_55c.onDisplayChanged();}}}else{_55c.execCommand(_55d,_55e);}},_removeFormat:function(_567,node){if(_567.customUndo){while(node.firstChild){dojo.place(node.firstChild,node,"before");}node.parentNode.removeChild(node);}else{dojo.withGlobal(_567.window,"selectElementChildren",dijit._editor.selection,[node]);var html=dojo.withGlobal(_567.window,"getSelectedHtml",dijit._editor.selection,[null]);dojo.withGlobal(_567.window,"selectElement",dijit._editor.selection,[node]);_567.execCommand("inserthtml",html||"");}}});dojo.declare("dijit._editor.plugins.FontChoice",dijit._editor._Plugin,{useDefaultCommand:false,_initButton:function(){var _568={fontName:dijit._editor.plugins._FontNameDropDown,fontSize:dijit._editor.plugins._FontSizeDropDown,formatBlock:dijit._editor.plugins._FormatBlockDropDown}[this.command],_569=this.params;if(this.params.custom){_569.values=this.params.custom;}var _56a=this.editor;this.button=new _568(dojo.delegate({dir:_56a.dir,lang:_56a.lang},_569));this.connect(this.button.select,"onChange",function(_56b){this.editor.focus();if(this.command=="fontName"&&_56b.indexOf(" ")!=-1){_56b="'"+_56b+"'";}if(this.button._execCommand){this.button._execCommand(this.editor,this.command,_56b);}else{this.editor.execCommand(this.command,_56b);}});},updateState:function(){var _56c=this.editor;var _56d=this.command;if(!_56c||!_56c.isLoaded||!_56d.length){return;}if(this.button){var _56e=this.get("disabled");this.button.set("disabled",_56e);if(_56e){return;}var _56f;try{_56f=_56c.queryCommandValue(_56d)||"";}catch(e){_56f="";}var _570=dojo.isString(_56f)&&_56f.match(/'([^']*)'/);if(_570){_56f=_570[1];}if(_56d==="formatBlock"){if(!_56f||_56f=="p"){_56f=null;var elem;var sel=dijit.range.getSelection(this.editor.window);if(sel&&sel.rangeCount>0){var _571=sel.getRangeAt(0);if(_571){elem=_571.endContainer;}}while(elem&&elem!==_56c.editNode&&elem!==_56c.document){var tg=elem.tagName?elem.tagName.toLowerCase():"";if(tg&&dojo.indexOf(this.button.values,tg)>-1){_56f=tg;break;}elem=elem.parentNode;}if(!_56f){_56f="noFormat";}}else{if(dojo.indexOf(this.button.values,_56f)<0){_56f="noFormat";}}}if(_56f!==this.button.get("value")){this.button.set("value",_56f,false);}}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}switch(o.args.name){case "fontName":case "fontSize":case "formatBlock":o.plugin=new dijit._editor.plugins.FontChoice({command:o.args.name,plainText:o.args.plainText?o.args.plainText:false});}});}if(!dojo._hasResource["dijit.form.DropDownButton"]){dojo._hasResource["dijit.form.DropDownButton"]=true;dojo.provide("dijit.form.DropDownButton");}if(!dojo._hasResource["dijit.form._FormSelectWidget"]){dojo._hasResource["dijit.form._FormSelectWidget"]=true;dojo.provide("dijit.form._FormSelectWidget");dojo.declare("dijit.form._FormSelectWidget",dijit.form._FormValueWidget,{multiple:false,options:null,store:null,query:null,queryOptions:null,onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,getOptions:function(_572){var _573=_572,opts=this.options||[],l=opts.length;if(_573===undefined){return opts;}if(dojo.isArray(_573)){return dojo.map(_573,"return this.getOptions(item);",this);}if(dojo.isObject(_572)){if(!dojo.some(this.options,function(o,idx){if(o===_573||(o.value&&o.value===_573.value)){_573=idx;return true;}return false;})){_573=-1;}}if(typeof _573=="string"){for(var i=0;i<l;i++){if(opts[i].value===_573){_573=i;break;}}}if(typeof _573=="number"&&_573>=0&&_573<l){return this.options[_573];}return null;},addOption:function(_574){if(!dojo.isArray(_574)){_574=[_574];}dojo.forEach(_574,function(i){if(i&&dojo.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_575){if(!dojo.isArray(_575)){_575=[_575];}var _576=this.getOptions(_575);dojo.forEach(_576,function(i){if(i){this.options=dojo.filter(this.options,function(node,idx){return (node.value!==i.value||node.label!==i.label);});this._removeOptionItem(i);}},this);this._loadChildren();},updateOption:function(_577){if(!dojo.isArray(_577)){_577=[_577];}dojo.forEach(_577,function(i){var _578=this.getOptions(i),k;if(_578){for(k in i){_578[k]=i[k];}}},this);this._loadChildren();},setStore:function(_579,_57a,_57b){var _57c=this.store;_57b=_57b||{};if(_57c!==_579){dojo.forEach(this._notifyConnections||[],dojo.disconnect);delete this._notifyConnections;if(_579&&_579.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[dojo.connect(_579,"onNew",this,"_onNewItem"),dojo.connect(_579,"onDelete",this,"_onDeleteItem"),dojo.connect(_579,"onSet",this,"_onSetItem")];}this._set("store",_579);}this._onChangeActive=false;if(this.options&&this.options.length){this.removeOption(this.options);}if(_579){this._loadingStore=true;_579.fetch(dojo.delegate(_57b,{onComplete:function(_57d,opts){if(this.sortByLabel&&!_57b.sort&&_57d.length){_57d.sort(dojo.data.util.sorter.createSortFunction([{attribute:_579.getLabelAttributes(_57d[0])[0]}],_579));}if(_57b.onFetch){_57d=_57b.onFetch.call(this,_57d,opts);}dojo.forEach(_57d,function(i){this._addOptionForItem(i);},this);this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_57a);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_57d);}this._fetchedWith=opts;this._lastValueReported=this.multiple?[]:null;this._onChangeActive=true;this.onSetStore();this._handleOnChange(this.value);},scope:this}));}else{delete this._fetchedWith;}return _57c;},_setValueAttr:function(_57e,_57f){if(this._loadingStore){this._pendingValue=_57e;return;}var opts=this.getOptions()||[];if(!dojo.isArray(_57e)){_57e=[_57e];}dojo.forEach(_57e,function(i,idx){if(!dojo.isObject(i)){i=i+"";}if(typeof i==="string"){_57e[idx]=dojo.filter(opts,function(node){return node.value===i;})[0]||{value:"",label:""};}},this);_57e=dojo.filter(_57e,function(i){return i&&i.value;});if(!this.multiple&&(!_57e[0]||!_57e[0].value)&&opts.length){_57e[0]=opts[0];}dojo.forEach(opts,function(i){i.selected=dojo.some(_57e,function(v){return v.value===i.value;});});var val=dojo.map(_57e,function(i){return i.value;}),disp=dojo.map(_57e,function(i){return i.label;});this._set("value",this.multiple?val:val[0]);this._setDisplay(this.multiple?disp:disp[0]);this._updateSelection();this._handleOnChange(this.value,_57f);},_getDisplayedValueAttr:function(){var val=this.get("value");if(!dojo.isArray(val)){val=[val];}var ret=dojo.map(this.getOptions(val),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_loadChildren:function(){if(this._loadingStore){return;}dojo.forEach(this._getChildren(),function(_580){_580.destroyRecursive();});dojo.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this._set("value",this._getValueFromOpts());var val=this.value;if(!dojo.isArray(val)){val=[val];}if(val&&val[0]){dojo.forEach(this._getChildren(),function(_581){var _582=dojo.some(val,function(v){return _581.option&&(v===_581.option.value);});dojo.toggleClass(_581.domNode,this.baseClass+"SelectedOption",_582);dijit.setWaiState(_581.domNode,"selected",_582);},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=dojo.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return dojo.map(dojo.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_583){if(!_583||!_583.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _584=this.store;this.removeOption(_584.getIdentity(item));},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _585=this.store,_586=_585.getLabel(item),_587=(_586?_585.getIdentity(item):null);return {value:_587,label:_586,item:item};},_addOptionForItem:function(item){var _588=this.store;if(!_588.isItemLoaded(item)){_588.loadItem({item:item,onComplete:function(i){this._addOptionForItem(item);},scope:this});return;}var _589=this._getOptionObjForItem(item);this.addOption(_589);},constructor:function(_58a){this._oValue=(_58a||{}).value||null;},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,false);},_fillContent:function(){var opts=this.options;if(!opts){opts=this.options=this.srcNodeRef?dojo.query(">",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+dojo._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this_set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);this.connect(this,"onChange","_updateSelection");this.connect(this,"startup","_loadChildren");this._setValueAttr(this.value,null);},startup:function(){this.inherited(arguments);var _58b=this.store,_58c={};dojo.forEach(["query","queryOptions","onFetch"],function(i){if(this[i]){_58c[i]=this[i];}delete this[i];},this);if(_58b&&_58b.getFeatures()["dojo.data.api.Identity"]){this.store=null;this.setStore(_58b,this._oValue,_58c);}},destroy:function(){dojo.forEach(this._notifyConnections||[],dojo.disconnect);this.inherited(arguments);},_addOptionItem:function(_58d){},_removeOptionItem:function(_58e){},_setDisplay:function(_58f){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"));},_pseudoLoadChildren:function(_590){},onSetStore:function(){}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem pentaho-menuitem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\" dojoAttachPoint=\"arrowIconNode\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_591){if(_591&&!("label" in this.params)){this.set("label",_591.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _592=this.id+"_text";dojo.attr(this.containerNode,"id",_592);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_592+=" "+this.id+"_accel";}dijit.setWaiState(this.domNode,"labelledby",_592);dojo.setSelectable(this.domNode,false);},_onHover:function(){this.getParent().onItemHover(this);},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_593){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_593);},setLabel:function(_594){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_594);},setDisabled:function(_595){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_595);},_setDisabledAttr:function(_596){dijit.setWaiState(this.focusNode,"disabled",_596?"true":"false");this._set("disabled",_596);},_setAccelKeyAttr:function(_597){this.accelKeyNode.style.display=_597?"":"none";this.accelKeyNode.innerHTML=_597;dojo.attr(this.containerNode,"colSpan",_597?"1":"2");this._set("accelKey",_597);}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _598=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_598[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&nbsp;</td>\n</tr>\n"),checked:false,_setCheckedAttr:function(_599){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_599);dijit.setWaiState(this.domNode,"checked",_599);this._set("checked",_599);},onChange:function(_59a){},_onClick:function(e){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n"),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_59b){_59b.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_59c){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _59d=this._getTopMenu();if(_59d&&_59d._isMenuBar){_59d.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _59e=this.currentPopup.parentMenu;if(_59e.focusedChild){_59e.focusedChild._setSelected(false);}_59e.focusedChild=this.currentPopup.from_item;_59e.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _59f=item.popup;if(_59f){this._stopPendingCloseTimer(_59f);_59f._pendingClose_timer=setTimeout(function(){_59f._pendingClose_timer=null;if(_59f.parentMenu){_59f.parentMenu.currentPopup=null;}dijit.popup.close(_59f);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_5a0){if(_5a0._pendingClose_timer){clearTimeout(_5a0._pendingClose_timer);_5a0._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup();}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _5a1=this.focusedChild;if(!_5a1){return;}var _5a2=_5a1.popup;if(_5a2.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_5a2.parentMenu=this;_5a2.from_item=_5a1;var self=this;dijit.popup.open({parent:this,popup:_5a2,around:_5a1.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){self.focusChild(_5a1);self._cleanUp();_5a1._setSelected(true);self.focusedChild=_5a1;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_5a2;_5a2.connect(_5a2.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(_5a2.focus){_5a2._focus_timer=setTimeout(dojo.hitch(_5a2,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();var _5a3=this.focusedChild&&this.focusedChild.from_item;if(this.currentPopup){if(dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode)){this.focusedChild.focusNode.focus();}dijit.popup.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n"),baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_5a4){var win=dojo.window.get(this._iframeContentDocument(_5a4))||this._iframeContentDocument(_5a4)["__parent__"]||(_5a4.name&&dojo.doc.frames[_5a4.name])||null;return win;},_iframeContentDocument:function(_5a5){var doc=_5a5.contentDocument||(_5a5.contentWindow&&_5a5.contentWindow.document)||(_5a5.name&&dojo.doc.frames[_5a5.name]&&dojo.doc.frames[_5a5.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var _5a6=node,win=this._iframeContentWindow(_5a6);cn=dojo.withGlobal(win,dojo.body);}else{cn=(node==dojo.body()?dojo.doc.documentElement:node);}var _5a7={node:node,iframe:_5a6};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(_5a7));var _5a8=dojo.hitch(this,function(cn){return [dojo.connect(cn,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(evt){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_5a6,{x:evt.pageX,y:evt.pageY});}),dojo.connect(cn,"onkeydown",this,function(evt){if(evt.shiftKey&&evt.keyCode==dojo.keys.F10){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_5a6);}})];});_5a7.connects=cn?_5a8(cn):[];if(_5a6){_5a7.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_5a6);cn=dojo.withGlobal(win,dojo.body);_5a7.connects=_5a8(cn);});if(_5a6.addEventListener){_5a6.addEventListener("load",_5a7.onloadHandler,false);}else{_5a6.attachEvent("onload",_5a7.onloadHandler);}}},unBindDomNode:function(_5a9){var node;try{node=dojo.byId(_5a9);}catch(e){return;}var _5aa="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,_5aa)){var bid=dojo.attr(node,_5aa)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _5ab=b.iframe;if(_5ab){if(_5ab.removeEventListener){_5ab.removeEventListener("load",b.onloadHandler,false);}else{_5ab.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(node,_5aa);delete this._bindings[bid];}},_scheduleOpen:function(_5ac,_5ad,_5ae){if(!this._openTimer){this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:_5ac,iframe:_5ad,coords:_5ae});}),1);}},_openMyself:function(args){var _5af=args.target,_5b0=args.iframe,_5b1=args.coords;if(_5b1){if(_5b0){var od=_5af.ownerDocument,ifc=dojo.position(_5b0,true),win=this._iframeContentWindow(_5b0),_5b2=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_5b0),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_5b0,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_5b0,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_5b0,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_5b0,cs.borderTopWidth):0);_5b1.x+=ifc.x+left-_5b2.x;_5b1.y+=ifc.y+top-_5b2.y;}}else{_5b1=dojo.position(_5af,true);_5b1.x+=10;_5b1.y+=10;}var self=this;var _5b3=dijit.getFocus(this);function _5b4(){if(self.refocus){dijit.focus(_5b3);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:_5b1.x,y:_5b1.y,onExecute:_5b4,onCancel:_5b4,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.Select"]){dojo._hasResource["dijit.form.Select"]=true;dojo.provide("dijit.form.Select");dojo.declare("dijit.form._SelectMenu",dijit.Menu,{buildRendering:function(){this.inherited(arguments);var o=(this.menuTableNode=this.domNode);var n=(this.domNode=dojo.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}}));if(o.parentNode){o.parentNode.replaceChild(n,o);}dojo.removeClass(o,"dijitMenuTable");n.className=o.className+" dijitSelectMenu";o.className="dijitReset dijitMenuTable";dijit.setWaiRole(o,"listbox");dijit.setWaiRole(n,"presentation");n.appendChild(o);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent);},resize:function(mb){if(mb){dojo.marginBox(this.domNode,mb);if("w" in mb){this.menuTableNode.style.width="100%";}}}});dojo.declare("dijit.form.Select",[dijit.form._FormSelectWidget,dijit._HasDropDown],{baseClass:"dijitSelect",templateString:dojo.cache("dijit.form","templates/Select.html","<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdojoAttachPoint=\"_buttonNode,tableNode,focusNode\" cellspacing='0' cellpadding='0'\n\trole=\"combobox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents dijitButtonNode\" role=\"presentation\"\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"  dojoAttachPoint=\"containerNode,_popupStateNode\"></span\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} dojoAttachPoint=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\t\tdojoAttachPoint=\"titleNode\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&nbsp;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this.value=this.options[si>=0?si:0].value;}this.dropDown=new dijit.form._SelectMenu({id:this.id+"_menu"});dojo.addClass(this.dropDown.domNode,this.baseClass+"Menu");},_getMenuItemForOption:function(_5b5){if(!_5b5.value&&!_5b5.label){return new dijit.MenuSeparator();}else{var _5b6=dojo.hitch(this,"_setValueAttr",_5b5);var item=new dijit.MenuItem({option:_5b5,label:_5b5.label||this.emptyLabel,onClick:_5b6,disabled:_5b5.disabled||false});dijit.setWaiRole(item.focusNode,"listitem");return item;}},_addOptionItem:function(_5b7){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_5b7));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},_loadChildren:function(_5b8){if(_5b8===true){if(this.dropDown){delete this.dropDown.focusedChild;}if(this.options.length){this.inherited(arguments);}else{dojo.forEach(this._getChildren(),function(_5b9){_5b9.destroyRecursive();});var item=new dijit.MenuItem({label:"&nbsp;"});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value);}},_setValueAttr:function(_5ba){this.inherited(arguments);dojo.attr(this.valueNode,"value",this.get("value"));},_setDisplay:function(_5bb){var lbl=_5bb||this.emptyLabel;this.containerNode.innerHTML="<span class=\"dijitReset dijitInline "+this.baseClass+"Label\">"+lbl+"</span>";dijit.setWaiState(this.focusNode,"valuetext",lbl);},validate:function(_5bc){var _5bd=this.isValid(_5bc);this._set("state",_5bd?"":"Error");dijit.setWaiState(this.focusNode,"invalid",_5bd?"false":"true");var _5be=_5bd?"":this._missingMsg;if(this.message!==_5be){this._set("message",_5be);dijit.hideTooltip(this.domNode);if(_5be){dijit.showTooltip(_5be,this.domNode,this.tooltipPosition,!this.isLeftToRight());}}return _5bd;},isValid:function(_5bf){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);dijit.hideTooltip(this.domNode);this._set("state","");this._set("message","");},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=dojo.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent);},_setStyleAttr:function(_5c0){this.inherited(arguments);dojo.toggleClass(this.domNode,this.baseClass+"FixedWidth",!!this.tableNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_5c1){this._loadChildren(true);this._isLoaded=true;_5c1();},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode){this.dropDown.menuTableNode.style.width="";}},uninitialize:function(_5c2){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_5c2);delete this.dropDown;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit._editor.plugins.LinkDialog"]){dojo._hasResource["dijit._editor.plugins.LinkDialog"]=true;dojo.provide("dijit._editor.plugins.LinkDialog");dojo.declare("dijit._editor.plugins.LinkDialog",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_userAtRxp:new RegExp("^([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@","i"),linkDialogTemplate:["<table><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' intermediateChanges='true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' intermediateChanges='true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' dojoType='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button dojoType='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button dojoType='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){var _5c3=this;this.tag=this.command=="insertImage"?"img":"a";var _5c4=dojo.mixin(dojo.i18n.getLocalization("dijit","common",this.lang),dojo.i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _5c5=(this.dropDown=new dijit.TooltipDialog({title:_5c4[this.command+"Title"],execute:dojo.hitch(this,"setValue"),onOpen:function(){_5c3._onOpenDialog();dijit.TooltipDialog.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(dojo.hitch(_5c3,"_onCloseDialog"),0);}}));_5c4.urlRegExp=this.urlRegExp;_5c4.id=dijit.getUniqueId(this.editor.id);this._uniqueId=_5c4.id;this._setContent(_5c5.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+dojo.string.substitute(this.linkDialogTemplate,_5c4));_5c5.startup();this._urlInput=dijit.byId(this._uniqueId+"_urlInput");this._textInput=dijit.byId(this._uniqueId+"_textInput");this._setButton=dijit.byId(this._uniqueId+"_setButton");this.connect(dijit.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=dojo.hitch(this,function(){var _5c6=this._urlInput.get("value");return this._urlRegExp.test(_5c6)||this._emailRegExp.test(_5c6);});this._connectTagEvents();this.inherited(arguments);},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _5c7=function(url){var _5c8=false;var _5c9=false;if(url&&url.length>1){url=dojo.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")!==0){if(self._hostRxp.test(url)){_5c8=true;}}}}else{if(self._userAtRxp.test(url)){_5c9=true;}}}}if(_5c8){self._urlInput.set("value","http://"+url);}if(_5c9){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_5c7(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_5ca){this.dropDown.set({parserScope:"dojo",content:_5ca});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(dojo.isIE<9){var sel=dijit.range.getSelection(this.editor.window);var _5cb=sel.getRangeAt(0);var a=_5cb.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=dojo.withGlobal(this.editor.window,"getSelectedElement",dijit._editor.selection,[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){dojo.withGlobal(this.editor.window,"selectElementChildren",dijit._editor.selection,[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",dojo.string.substitute(this.htmlTemplate,args));},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_5cc;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_5cc=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[a,true]);}else{text=dojo.withGlobal(this.editor.window,dijit._editor.selection.getSelectedText);}return {urlInput:url||"",textInput:text||"",targetSelect:_5cc||""};},_onOpenDialog:function(){var a;if(dojo.isIE<9){var sel=dijit.range.getSelection(this.editor.window);var _5cd=sel.getRangeAt(0);a=_5cd.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=dojo.withGlobal(this.editor.window,"getSelectedElement",dijit._editor.selection,[this.tag]);}}else{a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&dojo.attr(t,"href")){dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[t]);this.editor.onDisplayChanged();setTimeout(dojo.hitch(this,function(){this.button.set("disabled",false);this.button.openDropDown();}),10);}}}});dojo.declare("dijit._editor.plugins.ImgLinkDialog",[dijit._editor.plugins.LinkDialog],{linkDialogTemplate:["<table><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' intermediateChanges='true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' intermediateChanges='true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button dojoType='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button dojoType='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[img,true]);}else{text=dojo.withGlobal(this.editor.window,dijit._editor.selection.getSelectedText);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&dojo.attr(t,"src")){dojo.withGlobal(this.editor.window,"selectElement",dijit._editor.selection,[t]);this.editor.onDisplayChanged();setTimeout(dojo.hitch(this,function(){this.button.set("disabled",false);this.button.openDropDown();}),10);}}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}switch(o.args.name){case "createLink":o.plugin=new dijit._editor.plugins.LinkDialog({command:o.args.name});break;case "insertImage":o.plugin=new dijit._editor.plugins.ImgLinkDialog({command:o.args.name});break;}});}if(!dojo._hasResource["dijit.MenuBar"]){dojo._hasResource["dijit.MenuBar"]=true;dojo.provide("dijit.MenuBar");dojo.declare("dijit.MenuBar",dijit._MenuBase,{templateString:dojo.cache("dijit","templates/MenuBar.html","<div class=\"dijitMenuBar dijitMenuPassive\" dojoAttachPoint=\"containerNode\"  role=\"menubar\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress: _onKeyPress\"></div>\n"),baseClass:"dijitMenuBar",_isMenuBar:true,postCreate:function(){var k=dojo.keys,l=this.isLeftToRight();this.connectKeyNavHandlers(l?[k.LEFT_ARROW]:[k.RIGHT_ARROW],l?[k.RIGHT_ARROW]:[k.LEFT_ARROW]);this._orient=this.isLeftToRight()?{BL:"TL"}:{BR:"TR"};},focusChild:function(item){var _5ce=this.focusedChild,_5cf=_5ce&&_5ce.popup&&_5ce.popup.isShowingNow;this.inherited(arguments);if(_5cf&&item.popup&&!item.disabled){this._openPopup();}},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._moveToPopup(evt);dojo.stopEvent(evt);}},onItemClick:function(item,evt){if(item.popup&&item.popup.isShowingNow){item.popup.onCancel();}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dijit.MenuBarItem"]){dojo._hasResource["dijit.MenuBarItem"]=true;dojo.provide("dijit.MenuBarItem");dojo.declare("dijit._MenuBarItemMixin",null,{templateString:dojo.cache("dijit","templates/MenuBarItem.html","<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<span dojoAttachPoint=\"containerNode\"></span>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"}})});dojo.declare("dijit.MenuBarItem",[dijit.MenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["dijit.PopupMenuBarItem"]){dojo._hasResource["dijit.PopupMenuBarItem"]=true;dojo.provide("dijit.PopupMenuBarItem");dojo.declare("dijit.PopupMenuBarItem",[dijit.PopupMenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.getObject("number",true,dojo);dojo.number.format=function(_5d0,_5d1){_5d1=dojo.mixin({},_5d1||{});var _5d2=dojo.i18n.normalizeLocale(_5d1.locale),_5d3=dojo.i18n.getLocalization("dojo.cldr","number",_5d2);_5d1.customs=_5d3;var _5d4=_5d1.pattern||_5d3[(_5d1.type||"decimal")+"Format"];if(isNaN(_5d0)||Math.abs(_5d0)==Infinity){return null;}return dojo.number._applyPattern(_5d0,_5d4,_5d1);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_5d5,_5d6,_5d7){_5d7=_5d7||{};var _5d8=_5d7.customs.group,_5d9=_5d7.customs.decimal,_5da=_5d6.split(";"),_5db=_5da[0];_5d6=_5da[(_5d5<0)?1:0]||("-"+_5db);if(_5d6.indexOf("%")!=-1){_5d5*=100;}else{if(_5d6.indexOf("‰")!=-1){_5d5*=1000;}else{if(_5d6.indexOf("¤")!=-1){_5d8=_5d7.customs.currencyGroup||_5d8;_5d9=_5d7.customs.currencyDecimal||_5d9;_5d6=_5d6.replace(/\u00a4{1,3}/,function(_5dc){var prop=["symbol","currency","displayName"][_5dc.length-1];return _5d7[prop]||_5d7.currency||"";});}else{if(_5d6.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _5dd=dojo.number._numberPatternRE;var _5de=_5db.match(_5dd);if(!_5de){throw new Error("unable to find a number expression in pattern: "+_5d6);}if(_5d7.fractional===false){_5d7.places=0;}return _5d6.replace(_5dd,dojo.number._formatAbsolute(_5d5,_5de[0],{decimal:_5d9,group:_5d8,places:_5d7.places,round:_5d7.round}));};dojo.number.round=function(_5df,_5e0,_5e1){var _5e2=10/(_5e1||10);return (_5e2*+_5df).toFixed(_5e0)/_5e2;};if((0.9).toFixed()==0){(function(){var _5e3=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _5e3(v,p,m)+(v>0?d:-d);};})();}dojo.number._formatAbsolute=function(_5e4,_5e5,_5e6){_5e6=_5e6||{};if(_5e6.places===true){_5e6.places=0;}if(_5e6.places===Infinity){_5e6.places=6;}var _5e7=_5e5.split("."),_5e8=typeof _5e6.places=="string"&&_5e6.places.indexOf(","),_5e9=_5e6.places;if(_5e8){_5e9=_5e6.places.substring(_5e8+1);}else{if(!(_5e9>=0)){_5e9=(_5e7[1]||[]).length;}}if(!(_5e6.round<0)){_5e4=dojo.number.round(_5e4,_5e9,_5e6.round);}var _5ea=String(Math.abs(_5e4)).split("."),_5eb=_5ea[1]||"";if(_5e7[1]||_5e6.places){if(_5e8){_5e6.places=_5e6.places.substring(0,_5e8);}var pad=_5e6.places!==undefined?_5e6.places:(_5e7[1]&&_5e7[1].lastIndexOf("0")+1);if(pad>_5eb.length){_5ea[1]=dojo.string.pad(_5eb,pad,"0",true);}if(_5e9<_5eb.length){_5ea[1]=_5eb.substr(0,_5e9);}}else{if(_5ea[1]){_5ea.pop();}}var _5ec=_5e7[0].replace(",","");pad=_5ec.indexOf("0");if(pad!=-1){pad=_5ec.length-pad;if(pad>_5ea[0].length){_5ea[0]=dojo.string.pad(_5ea[0],pad);}if(_5ec.indexOf("#")==-1){_5ea[0]=_5ea[0].substr(_5ea[0].length-pad);}}var _5ed=_5e7[0].lastIndexOf(","),_5ee,_5ef;if(_5ed!=-1){_5ee=_5e7[0].length-_5ed-1;var _5f0=_5e7[0].substr(0,_5ed);_5ed=_5f0.lastIndexOf(",");if(_5ed!=-1){_5ef=_5f0.length-_5ed-1;}}var _5f1=[];for(var _5f2=_5ea[0];_5f2;){var off=_5f2.length-_5ee;_5f1.push((off>0)?_5f2.substr(off):_5f2);_5f2=(off>0)?_5f2.slice(0,off):"";if(_5ef){_5ee=_5ef;delete _5ef;}}_5ea[0]=_5f1.reverse().join(_5e6.group||",");return _5ea.join(_5e6.decimal||".");};dojo.number.regexp=function(_5f3){return dojo.number._parseInfo(_5f3).regexp;};dojo.number._parseInfo=function(_5f4){_5f4=_5f4||{};var _5f5=dojo.i18n.normalizeLocale(_5f4.locale),_5f6=dojo.i18n.getLocalization("dojo.cldr","number",_5f5),_5f7=_5f4.pattern||_5f6[(_5f4.type||"decimal")+"Format"],_5f8=_5f6.group,_5f9=_5f6.decimal,_5fa=1;if(_5f7.indexOf("%")!=-1){_5fa/=100;}else{if(_5f7.indexOf("‰")!=-1){_5fa/=1000;}else{var _5fb=_5f7.indexOf("¤")!=-1;if(_5fb){_5f8=_5f6.currencyGroup||_5f8;_5f9=_5f6.currencyDecimal||_5f9;}}}var _5fc=_5f7.split(";");if(_5fc.length==1){_5fc.push("-"+_5fc[0]);}var re=dojo.regexp.buildGroupRE(_5fc,function(_5fd){_5fd="(?:"+dojo.regexp.escapeString(_5fd,".")+")";return _5fd.replace(dojo.number._numberPatternRE,function(_5fe){var _5ff={signed:false,separator:_5f4.strict?_5f8:[_5f8,""],fractional:_5f4.fractional,decimal:_5f9,exponent:false},_600=_5fe.split("."),_601=_5f4.places;if(_600.length==1&&_5fa!=1){_600[1]="###";}if(_600.length==1||_601===0){_5ff.fractional=false;}else{if(_601===undefined){_601=_5f4.pattern?_600[1].lastIndexOf("0")+1:Infinity;}if(_601&&_5f4.fractional==undefined){_5ff.fractional=true;}if(!_5f4.places&&(_601<_600[1].length)){_601+=","+_600[1].length;}_5ff.places=_601;}var _602=_600[0].split(",");if(_602.length>1){_5ff.groupSize=_602.pop().length;if(_602.length>1){_5ff.groupSize2=_602.pop().length;}}return "("+dojo.number._realNumberRegexp(_5ff)+")";});},true);if(_5fb){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_603,_604,_605,_606){var prop=["symbol","currency","displayName"][_605.length-1],_607=dojo.regexp.escapeString(_5f4[prop]||_5f4.currency||"");_604=_604?"[\\s\\xa0]":"";_606=_606?"[\\s\\xa0]":"";if(!_5f4.strict){if(_604){_604+="*";}if(_606){_606+="*";}return "(?:"+_604+_607+_606+")?";}return _604+_607+_606;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_5f8,decimal:_5f9,factor:_5fa};};dojo.number.parse=function(_608,_609){var info=dojo.number._parseInfo(_609),_60a=(new RegExp("^"+info.regexp+"$")).exec(_608);if(!_60a){return NaN;}var _60b=_60a[1];if(!_60a[1]){if(!_60a[2]){return NaN;}_60b=_60a[2];info.factor*=-1;}_60b=_60b.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _60b*info.factor;};dojo.number._realNumberRegexp=function(_60c){_60c=_60c||{};if(!("places" in _60c)){_60c.places=Infinity;}if(typeof _60c.decimal!="string"){_60c.decimal=".";}if(!("fractional" in _60c)||/^0/.test(_60c.places)){_60c.fractional=[true,false];}if(!("exponent" in _60c)){_60c.exponent=[true,false];}if(!("eSigned" in _60c)){_60c.eSigned=[true,false];}var _60d=dojo.number._integerRegexp(_60c),_60e=dojo.regexp.buildGroupRE(_60c.fractional,function(q){var re="";if(q&&(_60c.places!==0)){re="\\"+_60c.decimal;if(_60c.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_60c.places+"}";}}return re;},true);var _60f=dojo.regexp.buildGroupRE(_60c.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_60c.eSigned})+")";}return "";});var _610=_60d+_60e;if(_60e){_610="(?:(?:"+_610+")|(?:"+_60e+"))";}return _610+_60f;};dojo.number._integerRegexp=function(_611){_611=_611||{};if(!("signed" in _611)){_611.signed=[true,false];}if(!("separator" in _611)){_611.separator="";}else{if(!("groupSize" in _611)){_611.groupSize=3;}}var _612=dojo.regexp.buildGroupRE(_611.signed,function(q){return q?"[-+]":"";},true);var _613=dojo.regexp.buildGroupRE(_611.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=dojo.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_611.groupSize,grp2=_611.groupSize2;if(grp2){var _614="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_614+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_614;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _612+_613;};}if(!dojo._hasResource["dijit.ProgressBar"]){dojo._hasResource["dijit.ProgressBar"]=true;dojo.provide("dijit.ProgressBar");dojo.declare("dijit.ProgressBar",[dijit._Widget,dijit._Templated],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:dojo.cache("dijit","templates/ProgressBar.html","<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  dojoAttachPoint=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&nbsp;</span\n\t></div\n\t><div dojoAttachPoint=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img dojoAttachPoint=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n"),_indeterminateHighContrastImagePath:dojo.moduleUrl("dijit","themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!("value" in this.params)){this.value=this.indeterminate?Infinity:this.progress;}},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update();},update:function(_615){dojo.mixin(this,_615||{});var tip=this.internalProgress,ap=this.domNode;var _616=1;if(this.indeterminate){dijit.removeWaiState(ap,"valuenow");dijit.removeWaiState(ap,"valuemin");dijit.removeWaiState(ap,"valuemax");}else{if(String(this.progress).indexOf("%")!=-1){_616=Math.min(parseFloat(this.progress)/100,1);this.progress=_616*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_616=this.progress/this.maximum;}dijit.setWaiState(ap,"describedby",this.labelNode.id);dijit.setWaiState(ap,"valuenow",this.progress);dijit.setWaiState(ap,"valuemin",0);dijit.setWaiState(ap,"valuemax",this.maximum);}this.labelNode.innerHTML=this.report(_616);dojo.toggleClass(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);tip.style.width=(_616*100)+"%";this.onChange();},_setValueAttr:function(v){this._set("value",v);if(v==Infinity){this.update({indeterminate:true});}else{this.update({indeterminate:false,progress:v});}},_setLabelAttr:function(_617){this._set("label",_617);this.update();},_setIndeterminateAttr:function(_618){this.indeterminate=_618;this.update();},report:function(_619){return this.label?this.label:(this.indeterminate?"&nbsp;":dojo.number.format(_619,{type:"percent",places:this.places,locale:this.lang}));},onChange:function(){}});}if(!dojo._hasResource["dijit.TitlePane"]){dojo._hasResource["dijit.TitlePane"]=true;dojo.provide("dijit.TitlePane");dojo.declare("dijit.TitlePane",[dijit.layout.ContentPane,dijit._Templated,dijit._CssStateMixin],{title:"",open:true,toggleable:true,tabIndex:"0",duration:dijit.defaultDuration,baseClass:"dijitTitlePane",templateString:dojo.cache("dijit","templates/TitlePane.html","<div>\n\t<div dojoAttachEvent=\"onclick:_onTitleClick, onkeypress:_onTitleKey\"\n\t\t\tclass=\"pentaho-titled-toolbar section-header-inner pentaho-padding-sm\" dojoAttachPoint=\"titleBarNode\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" dojoAttachPoint=\"focusNode\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" role=\"presentation\"\n\t\t\t/><span dojoAttachPoint=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span\n\t\t\t><span dojoAttachPoint=\"titleNode\" class=\"dijitTitlePaneTextNode\"></span>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" dojoAttachPoint=\"hideNode\" role=\"presentation\">\n\t\t<div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\" role=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\" role=\"region\" id=\"${id}_pane\">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn't work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"),attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"},tooltip:{node:"focusNode",type:"attribute",attribute:"title"},id:""}),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.titleNode,false);},postCreate:function(){this.inherited(arguments);if(this.toggleable){this._trackMouseState(this.titleBarNode,"dijitTitlePaneTitle");}var _61a=this.hideNode,_61b=this.wipeNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){_61a.style.display="";}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){_61a.style.display="none";}});},_setOpenAttr:function(open,_61c){dojo.forEach([this._wipeIn,this._wipeOut],function(_61d){if(_61d&&_61d.status()=="playing"){_61d.stop();}});if(_61c){var anim=this[open?"_wipeIn":"_wipeOut"];anim.play();}else{this.hideNode.style.display=this.wipeNode.style.display=open?"":"none";}if(this._started){if(open){this._onShow();}else{this.onHide();}}this.arrowNodeInner.innerHTML=open?"-":"+";dijit.setWaiState(this.containerNode,"hidden",open?"false":"true");dijit.setWaiState(this.focusNode,"pressed",open?"true":"false");this._set("open",open);this._setCss();},_setToggleableAttr:function(_61e){dijit.setWaiRole(this.focusNode,_61e?"button":"heading");if(_61e){dijit.setWaiState(this.focusNode,"controls",this.id+"_pane");dojo.attr(this.focusNode,"tabIndex",this.tabIndex);}else{dojo.removeAttr(this.focusNode,"tabIndex");}this._set("toggleable",_61e);this._setCss();},_setContentAttr:function(_61f){if(!this.open||!this._wipeOut||this._wipeOut.status()=="playing"){this.inherited(arguments);}else{if(this._wipeIn&&this._wipeIn.status()=="playing"){this._wipeIn.stop();}dojo.marginBox(this.wipeNode,{h:dojo.marginBox(this.wipeNode).h});this.inherited(arguments);if(this._wipeIn){this._wipeIn.play();}else{this.hideNode.style.display="";}}},toggle:function(){this._setOpenAttr(!this.open,true);},_setCss:function(){var node=this.titleBarNode||this.focusNode;var _620=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");dojo.replaceClass(node,this._titleBarClass,_620||"");this.arrowNodeInner.innerHTML=this.open?"-":"+";},_onTitleKey:function(e){if(e.charOrCode==dojo.keys.ENTER||e.charOrCode==" "){if(this.toggleable){this.toggle();}dojo.stopEvent(e);}else{if(e.charOrCode==dojo.keys.DOWN_ARROW&&this.open){this.containerNode.focus();e.preventDefault();}}},_onTitleClick:function(){if(this.toggleable){this.toggle();}},setTitle:function(_621){dojo.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",_621);}});}if(!dojo._hasResource["dojo.DeferredList"]){dojo._hasResource["dojo.DeferredList"]=true;dojo.provide("dojo.DeferredList");dojo.DeferredList=function(list,_622,_623,_624,_625){var _626=[];dojo.Deferred.call(this);var self=this;if(list.length===0&&!_622){this.resolve([0,[]]);}var _627=0;dojo.forEach(list,function(item,i){item.then(function(_628){if(_622){self.resolve([i,_628]);}else{_629(true,_628);}},function(_62a){if(_623){self.reject(_62a);}else{_629(false,_62a);}if(_624){return null;}throw _62a;});function _629(_62b,_62c){_626[i]=[_62b,_62c];_627++;if(_627===list.length){self.resolve(_626);}};});};dojo.DeferredList.prototype=new dojo.Deferred();dojo.DeferredList.prototype.gatherResults=function(_62d){var d=new dojo.DeferredList(_62d,false,true,false);d.addCallback(function(_62e){var ret=[];dojo.forEach(_62e,function(_62f){ret.push(_62f[1]);});return ret;});return d;};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,_630,_631){var c=document.cookie;if(arguments.length==1){var _632=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return _632?decodeURIComponent(_632[1]):undefined;}else{_631=_631||{};var exp=_631.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_631.expires=d;}if(exp&&exp.toUTCString){_631.expires=exp.toUTCString();}_630=encodeURIComponent(_630);var _633=name+"="+_630,_634;for(_634 in _631){_633+="; "+_634;var _635=_631[_634];if(_635!==true){_633+="="+_635;}}document.cookie=_633;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){dojo.mixin(this,args);this.connects=[];var _636=this.store;if(!_636.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity");}if(_636.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([dojo.connect(_636,"onNew",this,"onNewItem"),dojo.connect(_636,"onDelete",this,"onDeleteItem"),dojo.connect(_636,"onSet",this,"onSetItem")]);}},destroy:function(){dojo.forEach(this.connects,dojo.disconnect);},getRoot:function(_637,_638){if(this.root){_637(this.root);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_639){if(_639.length!=1){throw new Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+_639.length+" items, but must return exactly one item");}this.root=_639[0];_637(this.root);}),onError:_638});}},mayHaveChildren:function(item){return dojo.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_63a,_63b,_63c){var _63d=this.store;if(!_63d.isItemLoaded(_63a)){var _63e=dojo.hitch(this,arguments.callee);_63d.loadItem({item:_63a,onItem:function(_63f){_63e(_63f,_63b,_63c);},onError:_63c});return;}var _640=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=_63d.getValues(_63a,this.childrenAttrs[i]);_640=_640.concat(vals);}var _641=0;if(!this.deferItemLoadingUntilExpand){dojo.forEach(_640,function(item){if(!_63d.isItemLoaded(item)){_641++;}});}if(_641==0){_63b(_640);}else{dojo.forEach(_640,function(item,idx){if(!_63d.isItemLoaded(item)){_63d.loadItem({item:item,onItem:function(item){_640[idx]=item;if(--_641==0){_63b(_640);}},onError:_63c});}});}},isItem:function(_642){return this.store.isItem(_642);},fetchItemByIdentity:function(_643){this.store.fetchItemByIdentity(_643);},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_644,_645){var _646={parent:_644,attribute:this.childrenAttrs[0]},_647;if(this.newItemIdAttr&&args[this.newItemIdAttr]){this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){if(item){this.pasteItem(item,null,_644,true,_645);}else{_647=this.store.newItem(args,_646);if(_647&&(_645!=undefined)){this.pasteItem(_647,_644,_644,false,_645);}}}});}else{_647=this.store.newItem(args,_646);if(_647&&(_645!=undefined)){this.pasteItem(_647,_644,_644,false,_645);}}},pasteItem:function(_648,_649,_64a,_64b,_64c){var _64d=this.store,_64e=this.childrenAttrs[0];if(_649){dojo.forEach(this.childrenAttrs,function(attr){if(_64d.containsValue(_649,attr,_648)){if(!_64b){var _64f=dojo.filter(_64d.getValues(_649,attr),function(x){return x!=_648;});_64d.setValues(_649,attr,_64f);}_64e=attr;}});}if(_64a){if(typeof _64c=="number"){var _650=_64d.getValues(_64a,_64e).slice();_650.splice(_64c,0,_648);_64d.setValues(_64a,_64e,_650);}else{_64d.setValues(_64a,_64e,_64d.getValues(_64a,_64e).concat(_648));}}},onChange:function(item){},onChildrenChange:function(_651,_652){},onDelete:function(_653,_654){},onNewItem:function(item,_655){if(!_655){return;}this.getChildren(_655.item,dojo.hitch(this,function(_656){this.onChildrenChange(_655.item,_656);}));},onDeleteItem:function(item){this.onDelete(item);},onSetItem:function(item,_657,_658,_659){if(dojo.indexOf(this.childrenAttrs,_657)!=-1){this.getChildren(item,dojo.hitch(this,function(_65a){this.onChildrenChange(item,_65a);}));}else{this.onChange(item);}}});}if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_65b){this.root={store:this,root:true,id:_65b.rootId,label:_65b.rootLabel,children:_65b.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_65c,_65d,_65e){if(_65c===this.root){if(this.root.children){_65d(this.root.children);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_65f){this.root.children=_65f;_65d(_65f);}),onError:_65e});}}else{this.inherited(arguments);}},isItem:function(_660){return (_660===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_661){if(_661.identity==this.root.id){var _662=_661.scope?_661.scope:dojo.global;if(_661.onItem){_661.onItem.call(_662,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_663,_664){if(_663===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(args){},pasteItem:function(_665,_666,_667,_668,_669){if(_666===this.root){if(!_668){this.onLeaveRoot(_665);}}dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,_665,_666===this.root?null:_666,_667===this.root?null:_667,_668,_669);if(_667===this.root){this.onAddToRoot(_665);}},onAddToRoot:function(item){console.log(this,": item ",item," added to root");},onLeaveRoot:function(item){console.log(this,": item ",item," removed from root");},_requeryTop:function(){var _66a=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_66b){this.root.children=_66b;if(_66a.length!=_66b.length||dojo.some(_66a,function(item,idx){return _66b[idx]!=item;})){this.onChildrenChange(this.root,_66b);}})});},onNewItem:function(item,_66c){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(dojo.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_66d,_66e,_66f){this._requeryTop();this.inherited(arguments);}});}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,_670){this.node=dojo.byId(node);if(!_670){_670={};}this.creator=_670.creator||null;this.skipForm=_670.skipForm;this.parent=_670.dropParent&&dojo.byId(_670.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(_670&&_670._skipStartup)){this.startup();}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dojo.dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_671,_672){if(!this.parent.firstChild){_672=null;}else{if(_671){if(!_672){_672=this.parent.firstChild;}}else{if(_672){_672=_672.nextSibling;}}}if(_672){for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.insertBefore(t.node,_672);}}else{for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_673,node){_673._skipStartup=true;return new dojo.dnd.Container(node,_673);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_674){var _675="dojoDnd"+type;var _676=type.toLowerCase()+"State";dojo.replaceClass(this.node,_675+_674,_675+this[_676]);this[_676]=_674;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _677=node.parentNode;_677;node=_677,_677=node.parentNode){if(_677==this.parent&&dojo.hasClass(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dojo.dnd.getUniqueId();}dojo.addClass(t.node,"dojoDndItem");return t;}});dojo.dnd._createNode=function(tag){if(!tag){return dojo.dnd._createSpan;}return function(text){return dojo.create(tag,{innerHTML:text});};};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr;};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text});};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var _678=item&&dojo.isObject(item),data,type,n;if(_678&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_678&&item.data)?item.data:item;type=(_678&&item.type)?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data));}if(!n.id){n.id=dojo.dnd.getUniqueId();}return {node:n,data:data,type:type};};};}if(!dojo._hasResource["dijit.tree._dndContainer"]){dojo._hasResource["dijit.tree._dndContainer"]=true;dojo.provide("dijit.tree._dndContainer");dojo.getObject("tree",true,dojo);dijit.tree._compareNodes=function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}};dojo.declare("dijit.tree._dndContainer",null,{constructor:function(tree,_679){this.tree=tree;this.node=tree.domNode;dojo.mixin(this,_679);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");this.events=[dojo.connect(this.node,"onmouseenter",this,"onOverEvent"),dojo.connect(this.node,"onmouseleave",this,"onOutEvent"),dojo.connect(this.tree,"_onNodeMouseEnter",this,"onMouseOver"),dojo.connect(this.tree,"_onNodeMouseLeave",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",dojo,"stopEvent"),dojo.connect(this.node,"onselectstart",dojo,"stopEvent")];},getItem:function(key){var _67a=this.selection[key],ret={data:_67a,type:["treeNode"]};return ret;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.node=this.parent=null;},onMouseOver:function(_67b,evt){this.current=_67b;},onMouseOut:function(_67c,evt){this.current=null;},_changeState:function(type,_67d){var _67e="dojoDnd"+type;var _67f=type.toLowerCase()+"State";dojo.replaceClass(this.node,_67e+_67d,_67e+this[_67f]);this[_67f]=_67d;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});}if(!dojo._hasResource["dijit.tree._dndSelector"]){dojo._hasResource["dijit.tree._dndSelector"]=true;dojo.provide("dijit.tree._dndSelector");dojo.declare("dijit.tree._dndSelector",dijit.tree._dndContainer,{constructor:function(tree,_680){this.selection={};this.anchor=null;dijit.setWaiState(this.tree.domNode,"multiselect",!this.singular);this.events.push(dojo.connect(this.tree.domNode,"onmousedown",this,"onMouseDown"),dojo.connect(this.tree.domNode,"onmouseup",this,"onMouseUp"),dojo.connect(this.tree.domNode,"onmousemove",this,"onMouseMove"));},singular:false,getSelectedTreeNodes:function(){var _681=[],sel=this.selection;for(var i in sel){_681.push(sel[i]);}return _681;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_682){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_682){this.anchor=node;}return node;},removeTreeNode:function(node){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[node]));return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_683){var _684=this.getSelectedTreeNodes();dojo.forEach(this._setDifference(_684,_683),dojo.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));dojo.forEach(this._setDifference(_683,_684),dojo.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){dojo.forEach(ys,function(y){y.__exclude__=true;});var ret=dojo.filter(xs,function(x){return !x.__exclude__;});dojo.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _685=this.getSelectedTreeNodes();var _686=[],_687=[];dojo.forEach(_685,function(node){_687.push(node);_686.push(node.getTreePath());});var _688=dojo.map(_687,function(node){return node.item;});this.tree._set("paths",_686);this.tree._set("path",_686[0]||[]);this.tree._set("selectedNodes",_687);this.tree._set("selectedNode",_687[0]||null);this.tree._set("selectedItems",_688);this.tree._set("selectedItem",_688[0]||null);},onMouseDown:function(e){if(!this.current||this.tree.isExpandoNode(e.target,this.current)){return;}if(e.button==dojo.mouseButtons.RIGHT){return;}dojo.stopEvent(e);var _689=this.current,copy=dojo.isCopyKey(e),id=_689.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_689,copy,e.shiftKey);},onMouseUp:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(this.current,dojo.isCopyKey(e),e.shiftKey);},onMouseMove:function(e){this._doDeselect=false;},userSelect:function(node,_68a,_68b){if(this.singular){if(this.anchor==node&&_68a){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_68b&&this.anchor){var cr=dijit.tree._compareNodes(this.anchor.rowNode,node.rowNode),_68c,end,_68d=this.anchor;if(cr<0){_68c=_68d;end=node;}else{_68c=node;end=_68d;}nodes=[];while(_68c!=end){nodes.push(_68c);_68c=this.tree._getNextNode(_68c);}nodes.push(end);this.setSelection(nodes);}else{if(this.selection[node.id]&&_68a){this.removeTreeNode(node);}else{if(_68a){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},forInSelectedItems:function(f,o){o=o||dojo.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});}if(!dojo._hasResource["dijit.Tree"]){dojo._hasResource["dijit.Tree"]=true;dojo.provide("dijit.Tree");dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained,dijit._CssStateMixin],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:dojo.cache("dijit","templates/TreeNode.html","<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div dojoAttachPoint=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\" dojoAttachEvent=\"onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick\"\n\t\t><img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"\n\t\t/><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"\n\t\t></span\n\t\t><span dojoAttachPoint=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"\n\t\t\t/><span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\" dojoAttachEvent=\"onfocus:_onLabelFocus\"></span>\n\t\t</span\n\t></div>\n\t<div dojoAttachPoint=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n"),baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow",labelNode:"dijitTreeLabel"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"labelNode",type:"innerText"},tooltip:{node:"rowNode",type:"attribute",attribute:"title"}}),buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){dijit.setWaiState(this.labelNode,"expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_68e){var _68f=(Math.max(_68e,0)*this.tree._nodePixelIndent)+"px";dojo.style(this.domNode,"backgroundPosition",_68f+" 0px");dojo.style(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_68f);dojo.forEach(this.getChildren(),function(_690){_690.set("indent",_68e+1);});this._set("indent",_68e);},markProcessing:function(){this.state="LOADING";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_691=tree.model;if(tree._v10Compat&&item===_691.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");},_applyClassAndStyle:function(item,_692,_693){var _694="_"+_692+"Class";var _695=_692+"Node";var _696=this[_694];this[_694]=this.tree["get"+_693+"Class"](item,this.isExpanded);dojo.replaceClass(this[_695],this[_694]||"",_696||"");dojo.style(this[_695],this.tree["get"+_693+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _697=this.getParent();if(!_697||_697.rowNode.style.display=="none"){dojo.addClass(this.domNode,"dijitTreeIsRoot");}else{dojo.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_698){var _699=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_69a=["*","-","+","*"],idx=_698?0:(this.isExpandable?(this.isExpanded?1:2):3);dojo.replaceClass(this.expandoNode,_699[idx],_699);this.expandoNodeText.innerHTML=_69a[idx];},expand:function(){if(this._expandDeferred){return this._expandDeferred;}this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;dijit.setWaiState(this.labelNode,"expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){dijit.setWaiRole(this.containerNode,"group");}dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","true");}var def,_69b=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration,onEnd:function(){def.callback(true);}});def=(this._expandDeferred=new dojo.Deferred(function(){_69b.stop();}));_69b.play();return def;},collapse:function(){if(!this.isExpanded){return;}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;dijit.setWaiState(this.labelNode,"expanded","false");if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","false");}dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut){this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration});}this._wipeOut.play();},indent:0,setChildItems:function(_69c){var tree=this.tree,_69d=tree.model,defs=[];dojo.forEach(this.getChildren(),function(_69e){dijit._Container.prototype.removeChild.call(this,_69e);},this);this.state="LOADED";if(_69c&&_69c.length>0){this.isExpandable=true;dojo.forEach(_69c,function(item){var id=_69d.getIdentity(item),_69f=tree._itemNodesMap[id],node;if(_69f){for(var i=0;i<_69f.length;i++){if(_69f[i]&&!_69f[i].getParent()){node=_69f[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:_69d.mayHaveChildren(item),label:tree.getLabel(item),tooltip:tree.getTooltip(item),dir:tree.dir,lang:tree.lang,indent:this.indent+1});if(_69f){_69f.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(item)){defs.push(tree._expandNode(node));}},this);dojo.forEach(this.getChildren(),function(_6a0,idx){_6a0._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);if(this==tree.rootNode){var fc=this.tree.showRoot?this:this.getChildren()[0];if(fc){fc.setFocusable(true);tree.lastFocused=fc;}else{tree.domNode.setAttribute("tabIndex","0");}}return new dojo.DeferredList(defs);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _6a1=this.getChildren();if(_6a1.length==0){this.isExpandable=false;this.collapse();}dojo.forEach(_6a1,function(_6a2){_6a2._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},_onLabelFocus:function(evt){this.tree._onNodeFocus(this);},setSelected:function(_6a3){dijit.setWaiState(this.labelNode,"selected",_6a3);dojo.toggleClass(this.rowNode,"dijitTreeRowSelected",_6a3);},setFocusable:function(_6a4){this.labelNode.setAttribute("tabIndex",_6a4?"0":"-1");},_onClick:function(evt){this.tree._onClick(this,evt);},_onDblClick:function(evt){this.tree._onDblClick(this,evt);},_onMouseEnter:function(evt){this.tree._onNodeMouseEnter(this,evt);},_onMouseLeave:function(evt){this.tree._onNodeMouseLeave(this,evt);}});dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:dojo.cache("dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" role=\"tree\"\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\n</div>\n"),persist:true,autoExpand:false,dndController:"dijit.tree._dndSelector",dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_6a5,_6a6){dojo.publish(this.id,[dojo.mixin({tree:this,event:_6a5},_6a6||{})]);},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName){this.cookieName=this.id+"SaveStateCookie";}this._loadDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._initState();if(!this.model){this._store2model();}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController)){this.dndController=dojo.getObject(this.dndController);}var _6a7={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_6a7[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_6a7);}},_store2model:function(){this._v10Compat=true;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _6a8={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_6a8.mayHaveChildren=dojo.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_6a8.getChildren=dojo.hitch(this,function(item,_6a9,_6aa){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_6a9,_6aa);});}this.model=new dijit.tree.ForestStoreModel(_6a8);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(dojo.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";dijit.setWaiRole(this.domNode,"presentation");dijit.setWaiRole(rn.labelNode,"presentation");dijit.setWaiRole(rn.containerNode,"tree");}this.domNode.appendChild(rn.domNode);var _6ab=this.model.getIdentity(item);if(this._itemNodesMap[_6ab]){this._itemNodesMap[_6ab].push(rn);}else{this._itemNodesMap[_6ab]=[rn];}rn._updateLayout();this._expandNode(rn).addCallback(dojo.hitch(this,function(){this._loadDeferred.callback(true);this.onLoad();}));}),function(err){console.error(this,": error loading root: ",err);});},getNodesByItem:function(item){if(!item){return [];}var _6ac=dojo.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_6ac]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(_6ad){var tree=this;this._loadDeferred.addCallback(dojo.hitch(this,function(){var _6ae=dojo.map(_6ad,function(item){return (!item||dojo.isString(item))?item:tree.model.getIdentity(item);});var _6af=[];dojo.forEach(_6ae,function(id){_6af=_6af.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",_6af);}));},_setPathAttr:function(path){if(path.length){return this.set("paths",[path]);}else{return this.set("paths",[]);}},_setPathsAttr:function(_6b0){var tree=this;return new dojo.DeferredList(dojo.map(_6b0,function(path){var d=new dojo.Deferred();path=dojo.map(path,function(item){return dojo.isString(item)?item:tree.model.getIdentity(item);});if(path.length){tree._loadDeferred.addCallback(function(){_6b1(path,[tree.rootNode],d);});}else{d.errback("Empty path");}return d;})).addCallback(_6b2);function _6b1(path,_6b3,def){var _6b4=path.shift();var _6b5=dojo.filter(_6b3,function(node){return node.getIdentity()==_6b4;})[0];if(!!_6b5){if(path.length){tree._expandNode(_6b5).addCallback(function(){_6b1(path,_6b5.getChildren(),def);});}else{def.callback(_6b5);}}else{def.errback("Could not expand path at "+_6b4);}};function _6b2(_6b6){tree.set("selectedNodes",dojo.map(dojo.filter(_6b6,function(x){return x[0];}),function(x){return x[1];}));};},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(_6b7){this._loadDeferred.addCallback(dojo.hitch(this,function(){this.dndController.setSelection(_6b7);}));},mayHaveChildren:function(item){},getItemChildren:function(_6b8,_6b9){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_6ba){return (!item||this.model.mayHaveChildren(item))?(_6ba?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(item,_6bb){},getRowClass:function(item,_6bc){},getIconStyle:function(item,_6bd){},getLabelStyle:function(item,_6be){},getRowStyle:function(item,_6bf){},getTooltip:function(item){return "";},_onKeyPress:function(e){if(e.altKey){return;}var dk=dojo.keys;var _6c0=dijit.getEnclosingWidget(e.target);if(!_6c0){return;}var key=e.charOrCode;if(typeof key=="string"&&key!=" "){if(!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey){this._onLetterKeyNav({node:_6c0,key:key.toLowerCase()});dojo.stopEvent(e);}}else{if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch;}var map=this._keyHandlerMap;if(!map){map={};map[dk.ENTER]="_onEnterKey";map[dk.SPACE]=map[" "]="_onEnterKey";map[this.isLeftToRight()?dk.LEFT_ARROW:dk.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?dk.RIGHT_ARROW:dk.LEFT_ARROW]="_onRightArrow";map[dk.UP_ARROW]="_onUpArrow";map[dk.DOWN_ARROW]="_onDownArrow";map[dk.HOME]="_onHomeKey";map[dk.END]="_onEndKey";this._keyHandlerMap=map;}if(this._keyHandlerMap[key]){this[this._keyHandlerMap[key]]({node:_6c0,item:_6c0.item,evt:e});dojo.stopEvent(e);}}},_onEnterKey:function(_6c1){this._publish("execute",{item:_6c1.item,node:_6c1.node});this.dndController.userSelect(_6c1.node,dojo.isCopyKey(_6c1.evt),_6c1.evt.shiftKey);this.onClick(_6c1.item,_6c1.node,_6c1.evt);},_onDownArrow:function(_6c2){var node=this._getNextNode(_6c2.node);if(node&&node.isTreeNode){this.focusNode(node);}},_onUpArrow:function(_6c3){var node=_6c3.node;var _6c4=node.getPreviousSibling();if(_6c4){node=_6c4;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _6c5=node.getChildren();node=_6c5[_6c5.length-1];}}else{var _6c6=node.getParent();if(!(!this.showRoot&&_6c6===this.rootNode)){node=_6c6;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(_6c7){var node=_6c7.node;if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(_6c8){var node=_6c8.node;if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _6c9=node.getParent();if(_6c9&&_6c9.isTreeNode&&!(!this.showRoot&&_6c9===this.rootNode)){this.focusNode(_6c9);}}},_onHomeKey:function(){var node=this._getRootOrFirstNode();if(node){this.focusNode(node);}},_onEndKey:function(_6ca){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();node=c[c.length-1];}if(node&&node.isTreeNode){this.focusNode(node);}},multiCharSearchDuration:250,_onLetterKeyNav:function(_6cb){var cs=this._curSearch;if(cs){cs.pattern=cs.pattern+_6cb.key;clearTimeout(cs.timer);}else{cs=this._curSearch={pattern:_6cb.key,startNode:_6cb.node};}var self=this;cs.timer=setTimeout(function(){delete self._curSearch;},this.multiCharSearchDuration);var node=cs.startNode;do{node=this._getNextNode(node);if(!node){node=this._getRootOrFirstNode();}}while(node!==cs.startNode&&(node.label.toLowerCase().substr(0,cs.pattern.length)!=cs.pattern));if(node&&node.isTreeNode){if(node!==cs.startNode){this.focusNode(node);}}},isExpandoNode:function(node,_6cc){return dojo.isDescendant(node,_6cc.expandoNode);},_onClick:function(_6cd,e){var _6ce=e.target,_6cf=this.isExpandoNode(_6ce,_6cd);if((this.openOnClick&&_6cd.isExpandable)||_6cf){if(_6cd.isExpandable){this._onExpandoClick({node:_6cd});}}else{this._publish("execute",{item:_6cd.item,node:_6cd,evt:e});this.onClick(_6cd.item,_6cd,e);this.focusNode(_6cd);}dojo.stopEvent(e);},_onDblClick:function(_6d0,e){var _6d1=e.target,_6d2=(_6d1==_6d0.expandoNode||_6d1==_6d0.expandoNodeText);if((this.openOnDblClick&&_6d0.isExpandable)||_6d2){if(_6d0.isExpandable){this._onExpandoClick({node:_6d0});}}else{this._publish("execute",{item:_6d0.item,node:_6d0,evt:e});this.onDblClick(_6d0.item,_6d0,e);this.focusNode(_6d0);}dojo.stopEvent(e);},_onExpandoClick:function(_6d3){var node=_6d3.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(item,node,evt){},onDblClick:function(item,node,evt){},onOpen:function(item,node){},onClose:function(item,node){},_getNextNode:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _6d4=node.getNextSibling();if(_6d4){return _6d4;}node=node.getParent();}return null;}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.isExpandable){if(node.state=="LOADING"){return;}node.collapse();this.onClose(node.item,node);if(node.item){this._state(node.item,false);this._saveState();}}},_expandNode:function(node,_6d5){if(node._expandNodeDeferred&&!_6d5){return node._expandNodeDeferred;}var _6d6=this.model,item=node.item,_6d7=this;switch(node.state){case "UNCHECKED":node.markProcessing();var def=(node._expandNodeDeferred=new dojo.Deferred());_6d6.getChildren(item,function(_6d8){node.unmarkProcessing();var scid=node.setChildItems(_6d8);var ed=_6d7._expandNode(node,true);scid.addCallback(function(){ed.addCallback(function(){def.callback();});});},function(err){console.error(_6d7,": error loading root children: ",err);});break;default:def=(node._expandNodeDeferred=node.expand());this.onOpen(node.item,node);if(item){this._state(item,true);this._saveState();}}return def;},focusNode:function(node){dijit.focus(node.labelNode);},_onNodeFocus:function(node){if(node&&node!=this.lastFocused){if(this.lastFocused&&!this.lastFocused._destroyed){this.lastFocused.setFocusable(false);}node.setFocusable(true);this.lastFocused=node;}},_onNodeMouseEnter:function(node){},_onNodeMouseLeave:function(node){},_onItemChange:function(item){var _6d9=this.model,_6da=_6d9.getIdentity(item),_6db=this._itemNodesMap[_6da];if(_6db){var _6dc=this.getLabel(item),_6dd=this.getTooltip(item);dojo.forEach(_6db,function(node){node.set({item:item,label:_6dc,tooltip:_6dd});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_6de,_6df){var _6e0=this.model,_6e1=_6e0.getIdentity(_6de),_6e2=this._itemNodesMap[_6e1];if(_6e2){dojo.forEach(_6e2,function(_6e3){_6e3.setChildItems(_6df);});}},_onItemDelete:function(item){var _6e4=this.model,_6e5=_6e4.getIdentity(item),_6e6=this._itemNodesMap[_6e5];if(_6e6){dojo.forEach(_6e6,function(node){this.dndController.removeTreeNode(node);var _6e7=node.getParent();if(_6e7){_6e7.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_6e5];}},_initState:function(){if(this.persist){var _6e8=dojo.cookie(this.cookieName);this._openedItemIds={};if(_6e8){dojo.forEach(_6e8.split(","),function(item){this._openedItemIds[item]=true;},this);}}},_state:function(item,_6e9){if(!this.persist){return false;}var id=this.model.getIdentity(item);if(arguments.length===1){return this._openedItemIds[id];}if(_6e9){this._openedItemIds[id]=true;}else{delete this._openedItemIds[id];}},_saveState:function(){if(!this.persist){return;}var ary=[];for(var id in this._openedItemIds){ary.push(id);}dojo.cookie(this.cookieName,ary.join(","),{expires:365});},destroy:function(){if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!dojo.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_6ea){if(_6ea){dojo.marginBox(this.domNode,_6ea);}this._nodePixelIndent=dojo._getMarginSize(this.tree.indentDetector).w;if(this.tree.rootNode){this.tree.rootNode.set("indent",this.showRoot?0:-1);}},_createTreeNode:function(args){return new dijit._TreeNode(args);}});}if(!dojo._hasResource["dijit.InlineEditBox"]){dojo._hasResource["dijit.InlineEditBox"]=true;dojo.provide("dijit.InlineEditBox");dojo.declare("dijit.InlineEditBox",dijit._Widget,{editing:false,autoSave:true,buttonSave:"",buttonCancel:"",renderAsHtml:false,editor:"dijit.form.TextBox",editorWrapper:"dijit._InlineEditor",editorParams:{},disabled:false,onChange:function(_6eb){},onCancel:function(){},width:"100%",value:"",noValueIndicator:dojo.isIE<=6?"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>":"<span style='text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",constructor:function(){this.editorParams={};},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;var _6ec={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var name in _6ec){this.connect(this.displayNode,name,_6ec[name]);}dijit.setWaiRole(this.displayNode,"button");if(!this.displayNode.getAttribute("tabIndex")){this.displayNode.setAttribute("tabIndex",0);}if(!this.value&&!("value" in this.params)){this.value=dojo.trim(this.renderAsHtml?this.displayNode.innerHTML:(this.displayNode.innerText||this.displayNode.textContent||""));}if(!this.value){this.displayNode.innerHTML=this.noValueIndicator;}dojo.addClass(this.displayNode,"dijitInlineEditBoxDisplayMode");},setDisabled:function(_6ed){dojo.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_6ed);},_setDisabledAttr:function(_6ee){dijit.setWaiState(this.domNode,"disabled",_6ee);if(_6ee){this.displayNode.removeAttribute("tabIndex");}else{this.displayNode.setAttribute("tabIndex",0);}dojo.toggleClass(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",_6ee);this._set("disabled",_6ee);},_onMouseOver:function(){if(!this.disabled){dojo.addClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover");}},_onMouseOut:function(){dojo.removeClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover");},_onClick:function(e){if(this.disabled){return;}if(e){dojo.stopEvent(e);}this._onMouseOut();setTimeout(dojo.hitch(this,"edit"),0);},edit:function(){if(this.disabled||this.editing){return;}this.editing=true;this._savedPosition=dojo.style(this.displayNode,"position")||"static";this._savedOpacity=dojo.style(this.displayNode,"opacity")||"1";this._savedTabIndex=dojo.attr(this.displayNode,"tabIndex")||"0";if(this.wrapperWidget){var ew=this.wrapperWidget.editWidget;ew.set("displayedValue" in ew?"displayedValue":"value",this.value);}else{var _6ef=dojo.create("span",null,this.domNode,"before");var ewc=typeof this.editorWrapper=="string"?dojo.getObject(this.editorWrapper):this.editorWrapper;this.wrapperWidget=new ewc({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:dojo.getComputedStyle(this.displayNode),save:dojo.hitch(this,"save"),cancel:dojo.hitch(this,"cancel")},_6ef);if(!this._started){this.startup();}}var ww=this.wrapperWidget;if(dojo.isIE){dijit.focus(dijit.getFocus());}dojo.style(this.displayNode,{position:"absolute",opacity:"0",display:"none"});dojo.style(ww.domNode,{position:this._savedPosition,visibility:"visible",opacity:"1"});dojo.attr(this.displayNode,"tabIndex","-1");setTimeout(dojo.hitch(this,function(){ww.focus();ww._resetValue=ww.getValue();}),0);},_onBlur:function(){this.inherited(arguments);if(!this.editing){}},destroy:function(){if(this.wrapperWidget&&!this.wrapperWidget._destroyed){this.wrapperWidget.destroy();delete this.wrapperWidget;}this.inherited(arguments);},_showText:function(_6f0){var ww=this.wrapperWidget;dojo.style(ww.domNode,{position:"absolute",visibility:"hidden",opacity:"0"});dojo.style(this.displayNode,{position:this._savedPosition,opacity:this._savedOpacity,display:""});dojo.attr(this.displayNode,"tabIndex",this._savedTabIndex);if(_6f0){dijit.focus(this.displayNode);}},save:function(_6f1){if(this.disabled||!this.editing){return;}this.editing=false;var ww=this.wrapperWidget;var _6f2=ww.getValue();this.set("value",_6f2);this._showText(_6f1);},setValue:function(val){dojo.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(val){val=dojo.trim(val);var _6f3=this.renderAsHtml?val:val.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>");this.displayNode.innerHTML=_6f3||this.noValueIndicator;this._set("value",val);if(this._started){setTimeout(dojo.hitch(this,"onChange",val),0);}},getValue:function(){dojo.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value");},cancel:function(_6f4){if(this.disabled||!this.editing){return;}this.editing=false;setTimeout(dojo.hitch(this,"onCancel"),0);this._showText(_6f4);}});dojo.declare("dijit._InlineEditor",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("dijit","templates/InlineEditBox.html","<span data-dojo-attach-point=\"editNode\" role=\"presentation\" style=\"position: absolute; visibility:hidden\" class=\"dijitReset dijitInline\"\n\tdata-dojo-attach-event=\"onkeypress: _onKeyPress\"\n\t><span data-dojo-attach-point=\"editorPlaceholder\"></span\n\t><span data-dojo-attach-point=\"buttonContainer\"\n\t\t><button data-dojo-type=\"dijit.form.Button\" data-dojo-props=\"label: '${buttonSave}', 'class': 'saveButton'\"\n\t\t\tdata-dojo-attach-point=\"saveButton\" data-dojo-attach-event=\"onClick:save\"></button\n\t\t><button data-dojo-type=\"dijit.form.Button\"  data-dojo-props=\"label: '${buttonCancel}', 'class': 'cancelButton'\"\n\t\t\tdata-dojo-attach-point=\"cancelButton\" data-dojo-attach-event=\"onClick:cancel\"></button\n\t></span\n></span>\n"),widgetsInTemplate:true,postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit","common",this.lang);dojo.forEach(["buttonSave","buttonCancel"],function(prop){if(!this[prop]){this[prop]=this.messages[prop];}},this);},buildRendering:function(){this.inherited(arguments);var cls=typeof this.editor=="string"?dojo.getObject(this.editor):this.editor;var _6f5=this.sourceStyle,_6f6="line-height:"+_6f5.lineHeight+";",_6f7=dojo.getComputedStyle(this.domNode);dojo.forEach(["Weight","Family","Size","Style"],function(prop){var _6f8=_6f5["font"+prop],_6f9=_6f7["font"+prop];if(_6f9!=_6f8){_6f6+="font-"+prop+":"+_6f5["font"+prop]+";";}},this);dojo.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(prop){this.domNode.style[prop]=_6f5[prop];},this);var _6fa=this.inlineEditBox.width;if(_6fa=="100%"){_6f6+="width:100%;";this.domNode.style.display="block";}else{_6f6+="width:"+(_6fa+(Number(_6fa)==_6fa?"px":""))+";";}var _6fb=dojo.delegate(this.inlineEditBox.editorParams,{style:_6f6,dir:this.dir,lang:this.lang});_6fb["displayedValue" in cls.prototype?"displayedValue":"value"]=this.value;this.editWidget=new cls(_6fb,this.editorPlaceholder);if(this.inlineEditBox.autoSave){dojo.destroy(this.buttonContainer);}},postCreate:function(){this.inherited(arguments);var ew=this.editWidget;if(this.inlineEditBox.autoSave){this.connect(ew,"onChange","_onChange");this.connect(ew,"onKeyPress","_onKeyPress");}else{if("intermediateChanges" in ew){ew.set("intermediateChanges",true);this.connect(ew,"onChange","_onIntermediateChange");this.saveButton.set("disabled",true);}}},_onIntermediateChange:function(val){this.saveButton.set("disabled",(this.getValue()==this._resetValue)||!this.enableSave());},destroy:function(){this.editWidget.destroy(true);this.inherited(arguments);},getValue:function(){var ew=this.editWidget;return String(ew.get("displayedValue" in ew?"displayedValue":"value"));},_onKeyPress:function(e){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(e.altKey||e.ctrlKey){return;}if(e.charOrCode==dojo.keys.ESCAPE){dojo.stopEvent(e);this.cancel(true);}else{if(e.charOrCode==dojo.keys.ENTER&&e.target.tagName=="INPUT"){dojo.stopEvent(e);this._onChange();}}}},_onBlur:function(){this.inherited(arguments);if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(this.getValue()==this._resetValue){this.cancel(false);}else{if(this.enableSave()){this.save(false);}}}},_onChange:function(){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave()){dojo.style(this.inlineEditBox.displayNode,{display:""});dijit.focus(this.inlineEditBox.displayNode);}},enableSave:function(){return (this.editWidget.isValid?this.editWidget.isValid():true);},focus:function(){this.editWidget.focus();setTimeout(dojo.hitch(this,function(){if(this.editWidget.focusNode&&this.editWidget.focusNode.tagName=="INPUT"){dijit.selectInputText(this.editWidget.focusNode);}}),0);}});}if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin,dijit.layout._ContentPaneResizeMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},execute:function(_6fc){},onExecute:function(){},_setEncTypeAttr:function(_6fd){this.encType=_6fd;dojo.attr(this.domNode,"encType",_6fd);if(dojo.isIE){this.domNode.encoding=_6fd;}},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var item=this.srcNodeRef.attributes.getNamedItem("encType");if(item&&!item.specified&&(typeof item.value=="string")){this.set("encType",item.value);}}this.inherited(arguments);},reset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};if(!(this.onReset(faux)===false)&&faux.returnValue){this.inherited(arguments,[]);}},onReset:function(e){return true;},_onReset:function(e){this.reset(e);dojo.stopEvent(e);return false;},_onSubmit:function(e){var fp=dijit.form.Form.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){dojo.stopEvent(e);}},onSubmit:function(e){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});}if(!dojo._hasResource["dijit.form.ComboButton"]){dojo._hasResource["dijit.form.ComboButton"]=true;dojo.provide("dijit.form.ComboButton");}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:dojo.cache("dijit.form","templates/CheckBox.html","<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdojoAttachPoint=\"focusNode\"\n\t \tdojoAttachEvent=\"onclick:_onClick\"\n/></div>\n"),baseClass:"dijitCheckBox",type:"checkbox",value:"on",readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{readOnly:"focusNode"}),_setReadOnlyAttr:function(_6fe){this._set("readOnly",_6fe);dojo.attr(this.focusNode,"readOnly",_6fe);dijit.setWaiState(this.focusNode,"readonly",_6fe);},_setValueAttr:function(_6ff,_700){if(typeof _6ff=="string"){this._set("value",_6ff);dojo.attr(this.focusNode,"value",_6ff);_6ff=true;}if(this._created){this.set("checked",_6ff,_700);}},_getValueAttr:function(){return (this.checked?this.value:false);},_setLabelAttr:undefined,postMixInProperties:function(){if(this.value==""){this.value="on";}this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments);},_fillContent:function(_701){},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);this._set("value",this.params.value||"on");dojo.attr(this.focusNode,"value",this.value);},_onFocus:function(){if(this.id){dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);},_onClick:function(e){if(this.readOnly){dojo.stopEvent(e);return false;}return this.inherited(arguments);}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(_702){this.inherited(arguments);if(!this._created){return;}if(_702){var _703=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(_704){if(_704.name==_703.name&&_704!=_703.focusNode&&_704.form==_703.focusNode.form){var _705=dijit.getEnclosingWidget(_704);if(_705&&_705.checked){_705.set("checked",false);}}});}},_clicked:function(e){if(!this.checked){this.set("checked",true);}}});}if(!dojo._hasResource["dijit.form.RadioButton"]){dojo._hasResource["dijit.form.RadioButton"]=true;dojo.provide("dijit.form.RadioButton");}if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.getObject("cldr.monetary",true,dojo);dojo.cldr.monetary.getData=function(code){var _706={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};var _707={CHF:5};var _708=_706[code],_709=_707[code];if(typeof _708=="undefined"){_708=2;}if(typeof _709=="undefined"){_709=0;}return {places:_708,round:_709};};}if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.getObject("currency",true,dojo);dojo.currency._mixInDefaults=function(_70a){_70a=_70a||{};_70a.type="currency";var _70b=dojo.i18n.getLocalization("dojo.cldr","currency",_70a.locale)||{};var iso=_70a.currency;var data=dojo.cldr.monetary.getData(iso);dojo.forEach(["displayName","symbol","group","decimal"],function(prop){data[prop]=_70b[iso+"_"+prop];});data.fractional=[true,false];return dojo.mixin(data,_70a);};dojo.currency.format=function(_70c,_70d){return dojo.number.format(_70c,dojo.currency._mixInDefaults(_70d));};dojo.currency.regexp=function(_70e){return dojo.number.regexp(dojo.currency._mixInDefaults(_70e));};dojo.currency.parse=function(_70f,_710){return dojo.number.parse(_70f,dojo.currency._mixInDefaults(_710));};}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,_setConstraintsAttr:function(_711){var _712=typeof _711.places=="number"?_711.places:0;if(_712){_712++;}if(typeof _711.max!="number"){_711.max=9*Math.pow(10,15-_712);}if(typeof _711.min!="number"){_711.min=-9*Math.pow(10,15-_712);}this.inherited(arguments,[_711]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _713=this.format(val,this.constraints);if(_713!==undefined){this.textbox.value=_713;}}this.inherited(arguments);},format:function(_714,_715){var _716=String(_714);if(typeof _714!="number"){return _716;}if(isNaN(_714)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_714,_715))&&_715.exponent!==false&&/\de[-+]?\d/i.test(_716)){return _716;}if(this.editOptions&&this._focused){_715=dojo.mixin({},_715,this.editOptions);}return this._formatter(_714,_715);},_parser:dojo.number.parse,parse:function(_717,_718){var v=this._parser(_717,dojo.mixin({},_718,(this.editOptions&&this._focused)?this.editOptions:{}));if(this.editOptions&&this._focused&&isNaN(v)){v=this._parser(_717,_718);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_719){return (_719===null||_719===""||_719===undefined)?NaN:this.inherited(arguments);},serialize:function(_71a,_71b){return (typeof _71a!="number"||isNaN(_71a))?"":this.inherited(arguments);},_setBlurValue:function(){var val=dojo.hitch(dojo.mixin({},this,{_focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_71c,_71d,_71e){if(_71c!==undefined&&_71e===undefined){_71e=String(_71c);if(typeof _71c=="number"){if(isNaN(_71c)){_71e="";}else{if(("rangeCheck" in this&&this.rangeCheck(_71c,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_71e)){_71e=undefined;}}}else{if(!_71c){_71e="";_71c=NaN;}else{_71c=undefined;}}}this.inherited(arguments,[_71c,_71d,_71e]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+dojo.number._realNumberRegexp(dojo.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_71f){if(!this._focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{baseClass:"dijitTextBox dijitNumberTextBox"});}if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",regExpGen:function(_720){return "("+(this._focused?this.inherited(arguments,[dojo.mixin({},_720,this.editOptions)])+"|":"")+dojo.currency.regexp(_720)+")";},_formatter:dojo.currency.format,_parser:dojo.currency.parse,parse:function(_721,_722){var v=this.inherited(arguments);if(isNaN(v)&&/\d+/.test(_721)){v=dojo.hitch(dojo.mixin({},this,{_parser:dijit.form.NumberTextBox.prototype._parser}),"inherited")(arguments);}return v;},_setConstraintsAttr:function(_723){if(!_723.currency&&this.currency){_723.currency=this.currency;}this.inherited(arguments,[dojo.currency._mixInDefaults(dojo.mixin(_723,{exponent:false}))]);}});}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_724){var _725={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _726=dojo.cldr.supplemental._region(_724);var dow=_725[_726];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_727){_727=dojo.i18n.normalizeLocale(_727);var tags=_727.split("-");var _728=tags[1];if(!_728){_728={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_728.length==4){_728=tags[2];}}return _728;};dojo.cldr.supplemental.getWeekend=function(_729){var _72a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _72b={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _72c=dojo.cldr.supplemental._region(_729);var _72d=_72a[_72c];var end=_72b[_72c];if(_72d===undefined){_72d=6;}if(end===undefined){end=0;}return {start:_72d,end:end};};}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_72e){var _72f=_72e.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_72f==1&&dojo.date.isLeapYear(_72e)){return 29;}return days[_72f];};dojo.date.isLeapYear=function(_730){var year=_730.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_731){var str=_731.toString();var tz="";var _732;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_732=str.match(pat))){tz=_732[1];}else{str=_731.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_732=str.match(pat))){tz=_732[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_733,_734,_735){_733=new Date(+_733);_734=new Date(+(_734||new Date()));if(_735=="date"){_733.setHours(0,0,0,0);_734.setHours(0,0,0,0);}else{if(_735=="time"){_733.setFullYear(0,0,0);_734.setFullYear(0,0,0);}}if(_733>_734){return 1;}if(_733<_734){return -1;}return 0;};dojo.date.add=function(date,_736,_737){var sum=new Date(+date);var _738=false;var _739="Date";switch(_736){case "day":break;case "weekday":var days,_73a;var mod=_737%5;if(!mod){days=(_737>0)?5:-5;_73a=(_737>0)?((_737-5)/5):((_737+5)/5);}else{days=mod;_73a=parseInt(_737/5);}var strt=date.getDay();var adj=0;if(strt==6&&_737>0){adj=1;}else{if(strt==0&&_737<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_737>0)?2:-2;}_737=(7*_73a)+days+adj;break;case "year":_739="FullYear";_738=true;break;case "week":_737*=7;break;case "quarter":_737*=3;case "month":_738=true;_739="Month";break;default:_739="UTC"+_736.charAt(0).toUpperCase()+_736.substring(1)+"s";}if(_739){sum["set"+_739](sum["get"+_739]()+_737);}if(_738&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_73b,_73c,_73d){_73c=_73c||new Date();_73d=_73d||"day";var _73e=_73c.getFullYear()-_73b.getFullYear();var _73f=1;switch(_73d){case "quarter":var m1=_73b.getMonth();var m2=_73c.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_73e*4);_73f=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_73b,_73c,"day"));var _740=parseInt(dojo.date.difference(_73b,_73c,"week"));var mod=days%7;if(mod==0){days=_740*5;}else{var adj=0;var aDay=_73b.getDay();var bDay=_73c.getDay();_740=parseInt(days/7);mod=days%7;var _741=new Date(_73b);_741.setDate(_741.getDate()+(_740*7));var _742=_741.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_742+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_742+mod)<0:adj=2;}}}days+=adj;days-=(_740*2);}_73f=days;break;case "year":_73f=_73e;break;case "month":_73f=(_73c.getMonth()-_73b.getMonth())+(_73e*12);break;case "week":_73f=parseInt(dojo.date.difference(_73b,_73c,"day")/7);break;case "day":_73f/=24;case "hour":_73f/=60;case "minute":_73f/=60;case "second":_73f/=1000;case "millisecond":_73f*=_73c.getTime()-_73b.getTime();}return Math.round(_73f);};}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.getObject("date.locale",true,dojo);(function(){function _743(_744,_745,_746,_747){return _747.replace(/([a-z])\1*/ig,function(_748){var s,pad,c=_748.charAt(0),l=_748.length,_749=["abbr","wide","narrow"];switch(c){case "G":s=_745[(l<4)?"eraAbbr":"eraNames"][_744.getFullYear()<0?0:1];break;case "y":s=_744.getFullYear();switch(l){case 1:break;case 2:if(!_746.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_744.getMonth()+1)/3);pad=true;break;case "M":var m=_744.getMonth();if(l<3){s=m+1;pad=true;}else{var _74a=["months","format",_749[l-3]].join("-");s=_745[_74a][m];}break;case "w":var _74b=0;s=dojo.date.locale._getWeekOfYear(_744,_74b);pad=true;break;case "d":s=_744.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_744);pad=true;break;case "E":var d=_744.getDay();if(l<3){s=d+1;pad=true;}else{var _74c=["days","format",_749[l-3]].join("-");s=_745[_74c][d];}break;case "a":var _74d=(_744.getHours()<12)?"am":"pm";s=_746[_74d]||_745["dayPeriods-format-wide-"+_74d];break;case "h":case "H":case "K":case "k":var h=_744.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_744.getMinutes();pad=true;break;case "s":s=_744.getSeconds();pad=true;break;case "S":s=Math.round(_744.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_744,true,_746);if(s){break;}l=4;case "Z":var _74e=dojo.date.locale._getZone(_744,false,_746);var tz=[(_74e<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_74e)/60),2),dojo.string.pad(Math.abs(_74e)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_747);}if(pad){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_74f,_750,_751){if(_750){return dojo.date.getTimezoneName(_74f);}else{return _74f.getTimezoneOffset();}};dojo.date.locale.format=function(_752,_753){_753=_753||{};var _754=dojo.i18n.normalizeLocale(_753.locale),_755=_753.formatLength||"short",_756=dojo.date.locale._getGregorianBundle(_754),str=[],_757=dojo.hitch(this,_743,_752,_756,_753);if(_753.selector=="year"){return _758(_756["dateFormatItem-yyyy"]||"yyyy",_757);}var _759;if(_753.selector!="date"){_759=_753.timePattern||_756["timeFormat-"+_755];if(_759){str.push(_758(_759,_757));}}if(_753.selector!="time"){_759=_753.datePattern||_756["dateFormat-"+_755];if(_759){str.push(_758(_759,_757));}}return str.length==1?str[0]:_756["dateTimeFormat-"+_755].replace(/\{(\d+)\}/g,function(_75a,key){return str[key];});};dojo.date.locale.regexp=function(_75b){return dojo.date.locale._parseInfo(_75b).regexp;};dojo.date.locale._parseInfo=function(_75c){_75c=_75c||{};var _75d=dojo.i18n.normalizeLocale(_75c.locale),_75e=dojo.date.locale._getGregorianBundle(_75d),_75f=_75c.formatLength||"short",_760=_75c.datePattern||_75e["dateFormat-"+_75f],_761=_75c.timePattern||_75e["timeFormat-"+_75f],_762;if(_75c.selector=="date"){_762=_760;}else{if(_75c.selector=="time"){_762=_761;}else{_762=_75e["dateTimeFormat-"+_75f].replace(/\{(\d+)\}/g,function(_763,key){return [_761,_760][key];});}}var _764=[],re=_758(_762,dojo.hitch(this,_765,_764,_75e,_75c));return {regexp:re,tokens:_764,bundle:_75e};};dojo.date.locale.parse=function(_766,_767){var _768=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(_767),_769=info.tokens,_76a=info.bundle,re=new RegExp("^"+info.regexp.replace(_768,"")+"$",info.strict?"":"i"),_76b=re.exec(_766&&_766.replace(_768,""));if(!_76b){return null;}var _76c=["abbr","wide","narrow"],_76d=[1970,0,1,0,0,0,0],amPm="",_76e=dojo.every(_76b,function(v,i){if(!i){return true;}var _76f=_769[i-1];var l=_76f.length;switch(_76f.charAt(0)){case "y":if(l!=2&&_767.strict){_76d[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_770=year.substring(0,2)*100,_771=Math.min(Number(year.substring(2,4))+20,99),num=(v<_771)?_770+v:_770-100+v;_76d[0]=num;}else{if(_767.strict){return false;}_76d[0]=v;}}break;case "M":if(l>2){var _772=_76a["months-format-"+_76c[l-3]].concat();if(!_767.strict){v=v.replace(".","").toLowerCase();_772=dojo.map(_772,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_772,v);if(v==-1){return false;}}else{v--;}_76d[1]=v;break;case "E":case "e":var days=_76a["days-format-"+_76c[l-3]].concat();if(!_767.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_76d[1]=0;case "d":_76d[2]=v;break;case "a":var am=_767.am||_76a["dayPeriods-format-wide-am"],pm=_767.pm||_76a["dayPeriods-format-wide-pm"];if(!_767.strict){var _773=/\./g;v=v.replace(_773,"").toLowerCase();am=am.replace(_773,"").toLowerCase();pm=pm.replace(_773,"").toLowerCase();}if(_767.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_76d[3]=v;break;case "m":_76d[4]=v;break;case "s":_76d[5]=v;break;case "S":_76d[6]=v;}return true;});var _774=+_76d[3];if(amPm==="p"&&_774<12){_76d[3]=_774+12;}else{if(amPm==="a"&&_774==12){_76d[3]=0;}}var _775=new Date(_76d[0],_76d[1],_76d[2],_76d[3],_76d[4],_76d[5],_76d[6]);if(_767.strict){_775.setFullYear(_76d[0]);}var _776=_769.join(""),_777=_776.indexOf("d")!=-1,_778=_776.indexOf("M")!=-1;if(!_76e||(_778&&_775.getMonth()>_76d[1])||(_777&&_775.getDate()>_76d[2])){return null;}if((_778&&_775.getMonth()<_76d[1])||(_777&&_775.getDate()<_76d[2])){_775=dojo.date.add(_775,"hour",1);}return _775;};function _758(_779,_77a,_77b,_77c){var _77d=function(x){return x;};_77a=_77a||_77d;_77b=_77b||_77d;_77c=_77c||_77d;var _77e=_779.match(/(''|[^'])+/g),_77f=_779.charAt(0)=="'";dojo.forEach(_77e,function(_780,i){if(!_780){_77e[i]="";}else{_77e[i]=(_77f?_77b:_77a)(_780.replace(/''/g,"'"));_77f=!_77f;}});return _77c(_77e.join(""));};function _765(_781,_782,_783,_784){_784=dojo.regexp.escapeString(_784);if(!_783.strict){_784=_784.replace(" a"," ?a");}return _784.replace(/([a-z])\1*/ig,function(_785){var s,c=_785.charAt(0),l=_785.length,p2="",p3="";if(_783.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p3+"[1-9][0-9]|"+p2+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_783.am||_782["dayPeriods-format-wide-am"],pm=_783.pm||_782["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_783.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_781){_781.push(_785);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _786=[];dojo.date.locale.addCustomFormats=function(_787,_788){_786.push({pkg:_787,name:_788});};dojo.date.locale._getGregorianBundle=function(_789){var _78a={};dojo.forEach(_786,function(desc){var _78b=dojo.i18n.getLocalization(desc.pkg,desc.name,_789);_78a=dojo.mixin(_78a,_78b);},this);return _78a;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_78c,_78d){var _78e,_78f=dojo.date.locale._getGregorianBundle(_78d),_790=[item,_78c,type];if(_78c=="standAlone"){var key=_790.join("-");_78e=_78f[key];if(_78e[0]==1){_78e=undefined;}}_790[1]="format";return (_78e||_78f[_790.join("-")]).concat();};dojo.date.locale.isWeekend=function(_791,_792){var _793=dojo.cldr.supplemental.getWeekend(_792),day=(_791||new Date()).getDay();if(_793.end<_793.start){_793.end+=7;if(day<_793.start){day+=7;}}return day>=_793.start&&day<=_793.end;};dojo.date.locale._getDayOfYear=function(_794){return dojo.date.difference(new Date(_794.getFullYear(),0,1,_794.getHours()),_794)+1;};dojo.date.locale._getWeekOfYear=function(_795,_796){if(arguments.length==1){_796=0;}var _797=new Date(_795.getFullYear(),0,1).getDay(),adj=(_797-_796+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(_795)+adj-1)/7);if(_797==_796){week++;}return week;};}if(!dojo._hasResource["dijit.Calendar"]){dojo._hasResource["dijit.Calendar"]=true;dojo.provide("dijit.Calendar");dojo.declare("dijit.Calendar",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),widgetsInTemplate:true,value:new Date(""),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},_isValidDate:function(_798){return _798&&!isNaN(_798)&&typeof _798=="object"&&_798.toString()!=this.constructor.prototype.value.toString();},setValue:function(_799){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_799);},_getValueAttr:function(){var _79a=new this.dateClassObj(this.value);_79a.setHours(0,0,0,0);if(_79a.getDate()<this.value.getDate()){_79a=this.dateFuncObj.add(_79a,"hour",1);}return _79a;},_setValueAttr:function(_79b,_79c){if(_79b){_79b=new this.dateClassObj(_79b);}if(this._isValidDate(_79b)){if(!this._isValidDate(this.value)||this.dateFuncObj.compare(_79b,this.value)){_79b.setHours(1,0,0,0);if(!this.isDisabledDate(_79b,this.lang)){this._set("value",_79b);this.set("currentFocus",_79b);if(_79c||typeof _79c=="undefined"){this.onChange(this.get("value"));this.onValueSelected(this.get("value"));}}}}else{this._set("value",null);this.set("currentFocus",this.currentFocus);}},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(dojo.doc.createTextNode(text));},_populateGrid:function(){var _79d=new this.dateClassObj(this.currentFocus);_79d.setDate(1);var _79e=_79d.getDay(),_79f=this.dateFuncObj.getDaysInMonth(_79d),_7a0=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(_79d,"month",-1)),_7a1=new this.dateClassObj(),_7a2=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_7a2>_79e){_7a2-=7;}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_7a3,i){i+=_7a2;var date=new this.dateClassObj(_79d),_7a4,_7a5="dijitCalendar",adj=0;if(i<_79e){_7a4=_7a0-_79e+i+1;adj=-1;_7a5+="Previous";}else{if(i>=(_79e+_79f)){_7a4=i-_79e-_79f+1;adj=1;_7a5+="Next";}else{_7a4=i-_79e+1;_7a5+="Current";}}if(adj){date=this.dateFuncObj.add(date,"month",adj);}date.setDate(_7a4);if(!this.dateFuncObj.compare(date,_7a1,"date")){_7a5="dijitCalendarCurrentDate "+_7a5;}if(this._isSelectedDate(date,this.lang)){_7a5="dijitCalendarSelectedDate "+_7a5;}if(this.isDisabledDate(date,this.lang)){_7a5="dijitCalendarDisabledDate "+_7a5;}var _7a6=this.getClassForDate(date,this.lang);if(_7a6){_7a5=_7a6+" "+_7a5;}_7a3.className=_7a5+"Month dijitCalendarDateTemplate";_7a3.dijitDateValue=date.valueOf();dojo.attr(_7a3,"dijitDateValue",date.valueOf());var _7a7=dojo.query(".dijitCalendarDateLabel",_7a3)[0],text=date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate();this._setText(_7a7,text);},this);var _7a8=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_79d);this.monthDropDownButton.dropDown.set("months",_7a8);this.monthDropDownButton.containerNode.innerHTML=(dojo.isIE==6?"":"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_7a8[_79d.getMonth()]+"</div>";var y=_79d.getFullYear()-1;var d=new this.dateClassObj();dojo.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(args){var _7a9=(args.datePackage&&(args.datePackage!="dojo.date"))?args.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_7a9,false);this.datePackage=args.datePackage||this.datePackage;this.dateFuncObj=dojo.getObject(this.datePackage,false);this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);},postMixInProperties:function(){if(isNaN(this.value)){delete this.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var _7aa=dojo.hitch(this,function(_7ab,n){var _7ac=dojo.query(_7ab,this.domNode)[0];for(var i=0;i<n;i++){_7ac.parentNode.appendChild(_7ac.cloneNode(true));}});_7aa(".dijitCalendarDayLabelTemplate",6);_7aa(".dijitCalendarDateTemplate",6);_7aa(".dijitCalendarWeekTemplate",5);var _7ad=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang);var _7ae=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(_7af,i){this._setText(_7af,_7ad[(i+_7ae)%7]);},this);var _7b0=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new dijit.Calendar._MonthDropDown({id:this.id+"_mdd",onChange:dojo.hitch(this,"_onMonthSelect")});this.set("currentFocus",_7b0,false);var _7b1=this;var _7b2=function(_7b3,_7b4,adj){_7b1._connects.push(dijit.typematic.addMouseListener(_7b1[_7b3],_7b1,function(_7b5){if(_7b5>=0){_7b1._adjustDisplay(_7b4,adj);}},0.8,500));};_7b2("incrementMonth","month",1);_7b2("decrementMonth","month",-1);_7b2("nextYearLabelNode","year",1);_7b2("previousYearLabelNode","year",-1);},_adjustDisplay:function(part,_7b6){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,part,_7b6));},_setCurrentFocusAttr:function(date,_7b7){var _7b8=this.currentFocus,_7b9=_7b8?dojo.query("[dijitDateValue="+_7b8.valueOf()+"]",this.domNode)[0]:null;date=new this.dateClassObj(date);date.setHours(1,0,0,0);this._set("currentFocus",date);this._populateGrid();var _7ba=dojo.query("[dijitDateValue="+date.valueOf()+"]",this.domNode)[0];_7ba.setAttribute("tabIndex",this.tabIndex);if(this._focused||_7b7){_7ba.focus();}if(_7b9&&_7b9!=_7ba){if(dojo.isWebKit){_7b9.setAttribute("tabIndex","-1");}else{_7b9.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onMonthSelect:function(_7bb){this.currentFocus=this.dateFuncObj.add(this.currentFocus,"month",_7bb-this.currentFocus.getMonth());this._populateGrid();},_onDayClick:function(evt){dojo.stopEvent(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!dojo.hasClass(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_onDayMouseOver:function(evt){var node=dojo.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&(node.dijitDateValue||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){dojo.addClass(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}dojo.removeClass(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){dojo.addClass(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){dojo.removeClass(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var dk=dojo.keys,_7bc=-1,_7bd,_7be=this.currentFocus;switch(evt.keyCode){case dk.RIGHT_ARROW:_7bc=1;case dk.LEFT_ARROW:_7bd="day";if(!this.isLeftToRight()){_7bc*=-1;}break;case dk.DOWN_ARROW:_7bc=1;case dk.UP_ARROW:_7bd="week";break;case dk.PAGE_DOWN:_7bc=1;case dk.PAGE_UP:_7bd=evt.ctrlKey||evt.altKey?"year":"month";break;case dk.END:_7be=this.dateFuncObj.add(_7be,"month",1);_7bd="day";case dk.HOME:_7be=new this.dateClassObj(_7be);_7be.setDate(1);break;case dk.ENTER:case dk.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_7bd){_7be=this.dateFuncObj.add(_7be,_7bd,_7bc);}this._setCurrentFocusAttr(_7be);return false;},_onKeyPress:function(evt){if(!this.handleKey(evt)){dojo.stopEvent(evt);}},onValueSelected:function(date){},onChange:function(date){},_isSelectedDate:function(_7bf,_7c0){return this._isValidDate(this.value)&&!this.dateFuncObj.compare(_7bf,this.value,"date");},isDisabledDate:function(_7c1,_7c2){},getClassForDate:function(_7c3,_7c4){}});dojo.declare("dijit.Calendar._MonthDropDown",[dijit._Widget,dijit._Templated],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_7c5){this.domNode.innerHTML=dojo.map(_7c5,function(_7c6,idx){return _7c6?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_7c6+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(dojo.attr(evt.target,"month"));},onChange:function(_7c7){},_onMenuHover:function(evt){dojo.toggleClass(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");new Date("X");dojo.declare("dijit.form._DateTimeTextBox",[dijit.form.RangeBoundTextBox,dijit._HasDropDown],{templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),hasDownArrow:true,openOnClick:true,regExpGen:dojo.date.locale.regexp,datePackage:"dojo.date",compare:function(val1,val2){var _7c8=this._isInvalidDate(val1);var _7c9=this._isInvalidDate(val2);return _7c8?(_7c9?0:-1):(_7c9?1:dojo.date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_7ca,_7cb){if(!_7ca){return "";}return this.dateLocaleModule.format(_7ca,_7cb);},"parse":function(_7cc,_7cd){return this.dateLocaleModule.parse(_7cc,_7cd)||(this._isEmpty(_7cc)?null:undefined);},serialize:function(val,_7ce){if(val.toGregorian){val=val.toGregorian();}return dojo.date.stamp.toISOString(val,_7ce);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(args){var _7cf=args.datePackage?args.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_7cf,false);this.value=new this.dateClassObj("");this.datePackage=args.datePackage||this.datePackage;this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp;this._invalidDate=dijit.form._DateTimeTextBox.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(this.openOnClick||!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_7d0){_7d0.selector=this._selector;_7d0.fullYear=true;var _7d1=dojo.date.stamp.fromISOString;if(typeof _7d0.min=="string"){_7d0.min=_7d1(_7d0.min);}if(typeof _7d0.max=="string"){_7d0.max=_7d1(_7d0.max);}this.inherited(arguments);},_isInvalidDate:function(_7d2){return !_7d2||isNaN(_7d2)||typeof _7d2!="object"||_7d2.toString()==this._invalidDate;},_setValueAttr:function(_7d3,_7d4,_7d5){if(_7d3!==undefined){if(typeof _7d3=="string"){_7d3=dojo.date.stamp.fromISOString(_7d3);}if(this._isInvalidDate(_7d3)){_7d3=null;}if(_7d3 instanceof Date&&!(this.dateClassObj instanceof Date)){_7d3=new this.dateClassObj(_7d3);}}this.inherited(arguments);if(this.dropDown){this.dropDown.set("value",_7d3,false);}},_set:function(attr,_7d6){if(attr=="value"&&this.value instanceof Date&&this.compare(_7d6,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_7d7){if(this.dropDown){this.dropDown.destroy();}var _7d8=dojo.getObject(this.popupClass,false),_7d9=this,_7da=this.get("value");this.dropDown=new _7d8({onChange:function(_7db){dijit.form._DateTimeTextBox.superclass._setValueAttr.call(_7d9,_7db,true);},id:this.id+"_popup",dir:_7d9.dir,lang:_7d9.lang,value:_7da,currentFocus:!this._isInvalidDate(_7da)?_7da:this.dropDownDefaultValue,constraints:_7d9.constraints,filterString:_7d9.filterString,datePackage:_7d9.datePackage,isDisabledDate:function(date){return !_7d9.rangeCheck(date,_7d9.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_7dc,_7dd){this._setValueAttr(this.parse(_7dc,this.constraints),_7dd,_7dc);}});}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:"dijit.Calendar",_selector:"date",value:new Date("")});}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:dojo.cache("dijit.form","templates/Spinner.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdojoAttachPoint=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' dojoAttachPoint=\"textbox,focusNode\" type=\"${type}\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val,_7de){return val;},_arrowPressed:function(_7df,_7e0,_7e1){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_7e0*_7e1),false);dijit.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(node){this._wheelTimer=null;if(this.disabled||this.readOnly){return;}},_typematicCallback:function(_7e2,node,evt){var inc=this.smallDelta;if(node==this.textbox){var k=dojo.keys;var key=evt.charOrCode;inc=(key==k.PAGE_UP||key==k.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==k.UP_ARROW||key==k.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_7e2==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){dojo.stopEvent(evt);var _7e3=evt.detail?(evt.detail*-1):(evt.wheelDelta/120);if(_7e3!==0){var node=this[(_7e3>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_7e3,this.smallDelta);if(!this._wheelTimer){clearTimeout(this._wheelTimer);}this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",node),50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{adjust:function(val,_7e4){var tc=this.constraints,v=isNaN(val),_7e5=!isNaN(tc.max),_7e6=!isNaN(tc.min);if(v&&_7e4!=0){val=(_7e4>0)?_7e6?tc.min:_7e5?tc.max:0:_7e5?this.constraints.max:_7e6?tc.min:0;}var _7e7=val+_7e4;if(v||isNaN(_7e7)){return val;}if(_7e5&&(_7e7>tc.max)){_7e7=tc.max;}if(_7e6&&(_7e7<tc.min)){_7e7=tc.min;}return _7e7;},_onKeyPress:function(e){if((e.charOrCode==dojo.keys.HOME||e.charOrCode==dojo.keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _7e8=this.constraints[(e.charOrCode==dojo.keys.HOME?"min":"max")];if(typeof _7e8=="number"){this._setValueAttr(_7e8,false);}dojo.stopEvent(e);}}});}if(!dojo._hasResource["dijit.form.MultiSelect"]){dojo._hasResource["dijit.form.MultiSelect"]=true;dojo.provide("dijit.form.MultiSelect");dojo.declare("dijit.form.MultiSelect",dijit.form._FormValueWidget,{size:7,templateString:"<select multiple='true' ${!nameAttrSetting} dojoAttachPoint='containerNode,focusNode' dojoAttachEvent='onchange: _onChange'></select>",attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{size:"focusNode"}),reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},addSelected:function(_7e9){_7e9.getSelected().forEach(function(n){this.containerNode.appendChild(n);this.domNode.scrollTop=this.domNode.offsetHeight;var _7ea=_7e9.domNode.scrollTop;_7e9.domNode.scrollTop=0;_7e9.domNode.scrollTop=_7ea;},this);},getSelected:function(){return dojo.query("option",this.containerNode).filter(function(n){return n.selected;});},_getValueAttr:function(){return this.getSelected().map(function(n){return n.value;});},multiple:true,_setValueAttr:function(_7eb){dojo.query("option",this.containerNode).forEach(function(n){n.selected=(dojo.indexOf(_7eb,n.value)!=-1);});},invertSelection:function(_7ec){dojo.query("option",this.containerNode).forEach(function(n){n.selected=!n.selected;});this._handleOnChange(this.get("value"),_7ec==true);},_onChange:function(e){this._handleOnChange(this.get("value"),true);},resize:function(size){if(size){dojo.marginBox(this.domNode,size);}},postCreate:function(){this._onChange();}});}if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html","<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" role=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n"),value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,false);break;case dojo.keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case (this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case (this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case (this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case (this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(e);break;default:return;}dojo.stopEvent(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!dojo.isIE){dijit.focus(this.sliderHandle);}dojo.stopEvent(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}dijit.focus(this.sliderHandle);dojo.stopEvent(e);var _7ed=dojo.position(this.sliderBarContainer,true);var _7ee=e[this._mousePixelCoord]-_7ed[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_7ed[this._pixelCount]-_7ee):_7ee,_7ed[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_7ef,_7f0,_7f1){if(this.disabled||this.readOnly){return;}_7ef=_7ef<0?0:_7f0<_7ef?_7f0:_7ef;var _7f2=this.discreteValues;if(_7f2<=1||_7f2==Infinity){_7f2=_7f0;}_7f2--;var _7f3=_7f0/_7f2;var _7f4=Math.round(_7ef/_7f3);this._setValueAttr((this.maximum-this.minimum)*_7f4/_7f2+this.minimum,_7f1);},_setValueAttr:function(_7f5,_7f6){this._set("value",_7f5);this.valueNode.value=_7f5;dijit.setWaiState(this.focusNode,"valuenow",_7f5);this.inherited(arguments);var _7f7=(_7f5-this.minimum)/(this.maximum-this.minimum);var _7f8=(this._descending===false)?this.remainingBar:this.progressBar;var _7f9=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_7f6&&this.slideDuration>0&&_7f8.style[this._progressPixelSize]){var _7fa=this;var _7fb={};var _7fc=parseFloat(_7f8.style[this._progressPixelSize]);var _7fd=this.slideDuration*(_7f7-_7fc/100);if(_7fd==0){return;}if(_7fd<0){_7fd=0-_7fd;}_7fb[this._progressPixelSize]={start:_7fc,end:_7f7*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:_7f8,duration:_7fd,onAnimate:function(v){_7f9.style[_7fa._progressPixelSize]=(100-parseFloat(v[_7fa._progressPixelSize]))+"%";},onEnd:function(){delete _7fa._inProgressAnim;},properties:_7fb});this._inProgressAnim.play();}else{_7f8.style[this._progressPixelSize]=(_7f7*100)+"%";_7f9.style[this._progressPixelSize]=((1-_7f7)*100)+"%";}},_bumpValue:function(_7fe,_7ff){if(this.disabled||this.readOnly){return;}var s=dojo.getComputedStyle(this.sliderBarContainer);var c=dojo._getContentBox(this.sliderBarContainer,s);var _800=this.discreteValues;if(_800<=1||_800==Infinity){_800=c[this._pixelCount];}_800--;var _801=(this.value-this.minimum)*_800/(this.maximum-this.minimum)+_7fe;if(_801<0){_801=0;}if(_801>_800){_801=_800;}_801=_801*(this.maximum-this.minimum)/_800+this.minimum;this._setValueAttr(_801,_7ff);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){dojo.stopEvent(evt);var _802=!dojo.isMozilla;var _803=evt[(_802?"wheelDelta":"detail")]*(_802?1:-1);this._bumpValue(_803<0?-1:1,true);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_804){if(this[_804.container]!=this.containerNode){this[_804.container].appendChild(_804.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_805,_806,e){if(_805==-1){this._setValueAttr(this.value,true);}else{this[(_806==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _807=dojo.query("label[for=\""+this.id+"\"]");if(_807.length){_807[0].id=(this.id+"_label");dijit.setWaiState(this.focusNode,"labelledby",_807[0].id);}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _808=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:_808});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments);}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(e){var _809=this.widget;var _80a=_809._abspos;if(!_80a){_80a=_809._abspos=dojo.position(_809.sliderBarContainer,true);_809._setPixelValue_=dojo.hitch(_809,"_setPixelValue");_809._isReversed_=_809._isReversed();}var _80b=e.touches?e.touches[0]:e,_80c=_80b[_809._mousePixelCoord]-_80a[_809._startingPixelCoord];_809._setPixelValue_(_809._isReversed_?(_80a[_809._pixelCount]-_80c):_80c,_80a[_809._pixelCount],false);},destroy:function(e){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var _80d=this.widget;_80d._abspos=null;_80d._setValueAttr(_80d.value,true);}});}if(!dojo._hasResource["dijit.form.VerticalSlider"]){dojo._hasResource["dijit.form.VerticalSlider"]=true;dojo.provide("dijit.form.VerticalSlider");dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:dojo.cache("dijit.form","templates/VerticalSlider.html","<table class=\"dijit dijitReset dijitSlider dijitSliderV\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderIncrementIconV\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV\"></td\n\t\t><td class=\"dijitReset dijitSliderDecorationC\" style=\"height:100%;\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><center class=\"dijitReset dijitSliderBarContainerV\" role=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" dojoAttachEvent=\"onmousedown:_onBarClick\"><!--#5629--></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableV\" style=\"vertical-align:top;\"\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleV\" dojoAttachEvent=\"onmousedown:_onHandleClick\" role=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderDecrementIconV\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></table>\n"),_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,_isReversed:function(){return this._descending;}});}if(!dojo._hasResource["dijit.form.HorizontalRule"]){dojo._hasResource["dijit.form.HorizontalRule"]=true;dojo.provide("dijit.form.HorizontalRule");dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH\"></div>",count:3,container:"containerNode",ruleStyle:"",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkH\" style=\"left:",_positionSuffix:"%;",_suffix:"\"></div>",_genHTML:function(pos,ndx){return this._positionPrefix+pos+this._positionSuffix+this.ruleStyle+this._suffix;},_isHorizontal:true,buildRendering:function(){this.inherited(arguments);var _80e;if(this.count==1){_80e=this._genHTML(50,0);}else{var i;var _80f=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){_80e=this._genHTML(0,0);for(i=1;i<this.count-1;i++){_80e+=this._genHTML(_80f*i,i);}_80e+=this._genHTML(100,this.count-1);}else{_80e=this._genHTML(100,0);for(i=1;i<this.count-1;i++){_80e+=this._genHTML(100-_80f*i,i);}_80e+=this._genHTML(0,this.count-1);}}this.domNode.innerHTML=_80e;}});}if(!dojo._hasResource["dijit.form.VerticalRule"]){dojo._hasResource["dijit.form.VerticalRule"]=true;dojo.provide("dijit.form.VerticalRule");dojo.declare("dijit.form.VerticalRule",dijit.form.HorizontalRule,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkV\" style=\"top:",_isHorizontal:false});}if(!dojo._hasResource["dijit.form.HorizontalRuleLabels"]){dojo._hasResource["dijit.form.HorizontalRuleLabels"]=true;dojo.provide("dijit.form.HorizontalRuleLabels");dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH\"></div>",labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerH\" style=\"left:",_labelPrefix:"\"><div class=\"dijitRuleLabel dijitRuleLabelH\">",_suffix:"</div></div>",_calcPosition:function(pos){return pos;},_genHTML:function(pos,ndx){return this._positionPrefix+this._calcPosition(pos)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[ndx]+this._suffix;},getLabels:function(){var _810=this.labels;if(!_810.length){_810=dojo.query("> li",this.srcNodeRef).map(function(node){return String(node.innerHTML);});}this.srcNodeRef.innerHTML="";if(!_810.length&&this.count>1){var _811=this.minimum;var inc=(this.maximum-_811)/(this.count-1);for(var i=0;i<this.count;i++){_810.push((i<this.numericMargin||i>=(this.count-this.numericMargin))?"":dojo.number.format(_811,this.constraints));_811+=inc;}}return _810;},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length;}});}if(!dojo._hasResource["dijit.form.VerticalRuleLabels"]){dojo._hasResource["dijit.form.VerticalRuleLabels"]=true;dojo.provide("dijit.form.VerticalRuleLabels");dojo.declare("dijit.form.VerticalRuleLabels",dijit.form.HorizontalRuleLabels,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerV\" style=\"top:",_labelPrefix:"\"><span class=\"dijitRuleLabel dijitRuleLabelV\">",_calcPosition:function(pos){return 100-pos;},_isHorizontal:false});}if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextBox dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(dojo.isIE&&this.cols){dojo.addClass(this.textbox,"dijitTextAreaCols");}},filter:function(_812){if(_812){_812=_812.replace(/\r/g,"");}return this.inherited(arguments);},_previousValue:"",_onInput:function(e){if(this.maxLength){var _813=parseInt(this.maxLength);var _814=this.textbox.value.replace(/\r/g,"");var _815=_814.length-_813;if(_815>0){if(e){dojo.stopEvent(e);}var _816=this.textbox;if(_816.selectionStart){var pos=_816.selectionStart;var cr=0;if(dojo.isOpera){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_814.substring(0,pos-_815-cr)+_814.substring(pos-cr);_816.setSelectionRange(pos-_815,pos-_815);}else{if(dojo.doc.selection){_816.focus();var _817=dojo.doc.selection.createRange();_817.moveStart("character",-_815);_817.text="";_817.select();}}}this._previousValue=this.textbox.value;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.Textarea"]){dojo._hasResource["dijit.form.Textarea"]=true;dojo.provide("dijit.form.Textarea");dojo.declare("dijit.form.Textarea",dijit.form.SimpleTextarea,{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",_previousNewlines:0,_strictMode:(dojo.doc.compatMode!="BackCompat"),_getHeight:function(_818){var newH=_818.scrollHeight;if(dojo.isIE){newH+=_818.offsetHeight-_818.clientHeight-((dojo.isIE<8&&this._strictMode)?dojo._getPadBorderExtents(_818).h:0);}else{if(dojo.isMoz){newH+=_818.offsetHeight-_818.clientHeight;}else{if(dojo.isWebKit){newH+=dojo._getBorderExtents(_818).h;}else{newH+=dojo._getPadBorderExtents(_818).h;}}}return newH;},_estimateHeight:function(_819){_819.style.maxHeight="";_819.style.height="auto";_819.rows=(_819.value.match(/\n/g)||[]).length+1;},_needsHelpShrinking:dojo.isMoz||dojo.isWebKit,_onInput:function(){this.inherited(arguments);if(this._busyResizing){return;}this._busyResizing=true;var _81a=this.textbox;if(_81a.scrollHeight&&_81a.offsetHeight&&_81a.clientHeight){var newH=this._getHeight(_81a)+"px";if(_81a.style.height!=newH){_81a.style.maxHeight=_81a.style.height=newH;}if(this._needsHelpShrinking){if(this._setTimeoutHandle){clearTimeout(this._setTimeoutHandle);}this._setTimeoutHandle=setTimeout(dojo.hitch(this,"_shrink"),0);}}else{this._estimateHeight(_81a);}this._busyResizing=false;},_busyResizing:false,_shrink:function(){this._setTimeoutHandle=null;if(this._needsHelpShrinking&&!this._busyResizing){this._busyResizing=true;var _81b=this.textbox;var _81c=false;if(_81b.value==""){_81b.value=" ";_81c=true;}var _81d=_81b.scrollHeight;if(!_81d){this._estimateHeight(_81b);}else{var _81e=_81b.style.paddingBottom;var _81f=dojo._getPadExtents(_81b);_81f=_81f.h-_81f.t;_81b.style.paddingBottom=_81f+1+"px";var newH=this._getHeight(_81b)-1+"px";if(_81b.style.maxHeight!=newH){_81b.style.paddingBottom=_81f+_81d+"px";_81b.scrollTop=0;_81b.style.maxHeight=this._getHeight(_81b)-_81d+"px";}_81b.style.paddingBottom=_81e;}if(_81c){_81b.value="";}this._busyResizing=false;}},resize:function(){this._onInput();},_setValueAttr:function(){this.inherited(arguments);this.resize();},buildRendering:function(){this.inherited(arguments);dojo.style(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});},postCreate:function(){this.inherited(arguments);this.connect(this.textbox,"onscroll","_onInput");this.connect(this.textbox,"onresize","_onInput");this.connect(this.textbox,"onfocus","_onInput");this._setTimeoutHandle=setTimeout(dojo.hitch(this,"resize"),0);},uninitialize:function(){if(this._setTimeoutHandle){clearTimeout(this._setTimeoutHandle);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span role='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",constructor:function(){this.pane2button={};this.pane2connects={};this.pane2watches={};},buildRendering:function(){this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist");},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(dijit.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_820){var cls=dojo.getObject(this.buttonWidget);var _821=new cls({id:this.id+"_"+page.id,label:page.title,dir:page.dir,lang:page.lang,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip});dijit.setWaiState(_821.focusNode,"selected","false");var _822=["title","showTitle","iconClass","closable","tooltip"],_823=["label","showLabel","iconClass","closeButton","title"];this.pane2watches[page.id]=dojo.map(_822,function(_824,idx){return page.watch(_824,function(name,_825,_826){_821.set(_823[idx],_826);});});this.pane2connects[page.id]=[this.connect(_821,"onClick",dojo.hitch(this,"onButtonClick",page)),this.connect(_821,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page))];this.addChild(_821,_820);this.pane2button[page.id]=_821;page.controlButton=_821;if(!this._currentChild){_821.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(_821.focusNode,"selected","true");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2connects[page.id],dojo.hitch(this,"disconnect"));delete this.pane2connects[page.id];dojo.forEach(this.pane2watches[page.id],function(w){w.unwatch();});delete this.pane2watches[page.id];var _827=this.pane2button[page.id];if(_827){this.removeChild(_827);delete this.pane2button[page.id];_827.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _828=this.pane2button[this._currentChild.id];_828.set("checked",false);dijit.setWaiState(_828.focusNode,"selected","false");_828.focusNode.setAttribute("tabIndex","-1");}var _829=this.pane2button[page.id];_829.set("checked",true);dijit.setWaiState(_829.focusNode,"selected","true");this._currentChild=page;_829.focusNode.setAttribute("tabIndex","0");var _82a=dijit.byId(this.containerId);dijit.setWaiState(_82a.containerNode,"labelledby",_829.id);},onButtonClick:function(page){var _82b=dijit.byId(this.containerId);_82b.selectChild(page);},onCloseButtonClick:function(page){var _82c=dijit.byId(this.containerId);_82c.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){dijit.focus(b.focusNode||b.domNode);}}},adjacent:function(_82d){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_82d=!_82d;}var _82e=this.getChildren();var _82f=dojo.indexOf(_82e,this.pane2button[this._currentChild.id]);var _830=_82d?1:_82e.length-1;return _82e[(_82f+_830)%_82e.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _831=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_831=false;}break;case k.PAGE_UP:if(e.ctrlKey){_831=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_831=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_831=true;}break;case k.HOME:case k.END:var _832=this.getChildren();if(_832&&_832.length){_832[e.charOrCode==k.HOME?0:_832.length-1].onClick();}dojo.stopEvent(e);break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_831!==null){this.adjacent(_831).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",buildRendering:function(evt){this.inherited(arguments);dijit.setWaiRole((this.focusNode||this.domNode),"tab");},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _833=this.getChildren();dojo.forEach(_833,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_833,function(_834){if(_834.selected){this.selectedChildWidget=_834;}return _834.selected;},this);}var _835=this.selectedChildWidget;if(!_835&&_833[0]){_835=this.selectedChildWidget=_833[0];_835.selected=true;}dojo.publish(this.id+"-startup",[{children:_833,selected:_835}]);this.inherited(arguments);},resize:function(){var _836=this.selectedChildWidget;if(_836&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(_836);}this.inherited(arguments);},_setupChild:function(_837){this.inherited(arguments);dojo.replaceClass(_837.domNode,"dijitHidden","dijitVisible");_837.domNode.title="";},addChild:function(_838,_839){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_838,_839]);this.layout();if(!this.selectedChildWidget){this.selectChild(_838);}}},removeChild:function(page){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-removeChild",[page]);}if(this._beingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _83a=this.getChildren();if(_83a.length){this.selectChild(_83a[0]);}}}if(this._started){this.layout();}},selectChild:function(page,_83b){page=dijit.byId(page);if(this.selectedChildWidget!=page){var d=this._transition(page,this.selectedChildWidget,_83b);this._set("selectedChildWidget",page);dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}return d;},_transition:function(_83c,_83d,_83e){if(_83d){this._hideChild(_83d);}var d=this._showChild(_83c);if(_83c.resize){if(this.doLayout){_83c.resize(this._containerContentBox||this._contentBox);}else{_83c.resize();}}return d;},_adjacent:function(_83f){var _840=this.getChildren();var _841=dojo.indexOf(_840,this.selectedChildWidget);_841+=_83f?1:_840.length-1;return _840[_841%_840.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox||this._contentBox);}},_showChild:function(page){var _842=this.getChildren();page.isFirstChild=(page==_842[0]);page.isLastChild=(page==_842[_842.length-1]);page._set("selected",true);dojo.replaceClass(page.domNode,"dijitVisible","dijitHidden");return page._onShow()||true;},_hideChild:function(page){page._set("selected",false);dojo.replaceClass(page.domNode,"dijitHidden","dijitVisible");page.onHide();},closeChild:function(page){var _843=page.onClose(this,page);if(_843){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_844){dojo.forEach(this.getChildren(),function(_845){this.removeChild(_845);_845.destroyRecursive(_844);},this);}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true});}if(!dojo._hasResource["dijit.layout.AccordionPane"]){dojo._hasResource["dijit.layout.AccordionPane"]=true;dojo.provide("dijit.layout.AccordionPane");dojo.declare("dijit.layout.AccordionPane",dijit.layout.ContentPane,{constructor:function(){dojo.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});}if(!dojo._hasResource["dijit.layout.AccordionContainer"]){dojo._hasResource["dijit.layout.AccordionContainer"]=true;dojo.provide("dijit.layout.AccordionContainer");dojo.declare("dijit.layout.AccordionContainer",dijit.layout.StackContainer,{duration:dijit.defaultDuration,buttonWidget:"dijit.layout._AccordionButton",baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";dijit.setWaiRole(this.domNode,"tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){var _846=this.selectedChildWidget.containerNode.style;_846.display="";_846.overflow="auto";this.selectedChildWidget._wrapperWidget.set("selected",true);}},layout:function(){var _847=this.selectedChildWidget;if(!_847){return;}var _848=_847._wrapperWidget.domNode,_849=dojo._getMarginExtents(_848),_84a=dojo._getPadBorderExtents(_848),_84b=_847._wrapperWidget.containerNode,_84c=dojo._getMarginExtents(_84b),_84d=dojo._getPadBorderExtents(_84b),_84e=this._contentBox;var _84f=0;dojo.forEach(this.getChildren(),function(_850){if(_850!=_847){_84f+=dojo._getMarginSize(_850._wrapperWidget.domNode).h;}});this._verticalSpace=_84e.h-_84f-_849.h-_84a.h-_84c.h-_84d.h-_847._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_849.w-_84a.w-_84c.w-_84d.w};if(_847){_847.resize(this._containerContentBox);}},_setupChild:function(_851){_851._wrapperWidget=new dijit.layout._AccordionInnerContainer({contentWidget:_851,buttonWidget:this.buttonWidget,id:_851.id+"_wrapper",dir:_851.dir,lang:_851.lang,parent:this});this.inherited(arguments);},addChild:function(_852,_853){if(this._started){dojo.place(_852.domNode,this.containerNode,_853);if(!_852._started){_852.startup();}this._setupChild(_852);dojo.publish(this.id+"-addChild",[_852,_853]);this.layout();if(!this.selectedChildWidget){this.selectChild(_852);}}else{this.inherited(arguments);}},removeChild:function(_854){if(_854._wrapperWidget){dojo.place(_854.domNode,_854._wrapperWidget.domNode,"after");_854._wrapperWidget.destroy();delete _854._wrapperWidget;}dojo.removeClass(_854.domNode,"dijitHidden");this.inherited(arguments);},getChildren:function(){return dojo.map(this.inherited(arguments),function(_855){return _855.declaredClass=="dijit.layout._AccordionInnerContainer"?_855.contentWidget:_855;},this);},destroy:function(){if(this._animation){this._animation.stop();}dojo.forEach(this.getChildren(),function(_856){if(_856._wrapperWidget){_856._wrapperWidget.destroy();}else{_856.destroyRecursive();}});this.inherited(arguments);},_showChild:function(_857){_857._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments);},_hideChild:function(_858){_858._wrapperWidget.containerNode.style.display="none";this.inherited(arguments);},_transition:function(_859,_85a,_85b){if(dojo.isIE<8){_85b=false;}if(this._animation){this._animation.stop(true);delete this._animation;}var self=this;if(_859){_859._wrapperWidget.set("selected",true);var d=this._showChild(_859);if(this.doLayout&&_859.resize){_859.resize(this._containerContentBox);}}if(_85a){_85a._wrapperWidget.set("selected",false);if(!_85b){this._hideChild(_85a);}}if(_85b){var _85c=_859._wrapperWidget.containerNode,_85d=_85a._wrapperWidget.containerNode;var _85e=_859._wrapperWidget.containerNode,_85f=dojo._getMarginExtents(_85e),_860=dojo._getPadBorderExtents(_85e),_861=_85f.h+_860.h;_85d.style.height=(self._verticalSpace-_861)+"px";this._animation=new dojo.Animation({node:_85c,duration:this.duration,curve:[1,this._verticalSpace-_861-1],onAnimate:function(_862){_862=Math.floor(_862);_85c.style.height=_862+"px";_85d.style.height=(self._verticalSpace-_861-_862)+"px";},onEnd:function(){delete self._animation;_85c.style.height="auto";_85a._wrapperWidget.containerNode.style.display="none";_85d.style.height="auto";self._hideChild(_85a);}});this._animation.onStop=this._animation.onEnd;this._animation.play();}return d;},_onKeyPress:function(e,_863){if(this.disabled||e.altKey||!(_863||e.ctrlKey)){return;}var k=dojo.keys,c=e.charOrCode;if((_863&&(c==k.LEFT_ARROW||c==k.UP_ARROW))||(e.ctrlKey&&c==k.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();dojo.stopEvent(e);}else{if((_863&&(c==k.RIGHT_ARROW||c==k.DOWN_ARROW))||(e.ctrlKey&&(c==k.PAGE_DOWN||c==k.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();dojo.stopEvent(e);}}}});dojo.declare("dijit.layout._AccordionInnerContainer",[dijit._Widget,dijit._CssStateMixin],{baseClass:"dijitAccordionInnerContainer",isContainer:true,isLayoutContainer:true,buildRendering:function(){this.domNode=dojo.place("<div class='"+this.baseClass+"'>",this.contentWidget.domNode,"after");var _864=this.contentWidget,cls=dojo.getObject(this.buttonWidget);this.button=_864._buttonWidget=(new cls({contentWidget:_864,label:_864.title,title:_864.tooltip,dir:_864.dir,lang:_864.lang,iconClass:_864.iconClass,id:_864.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=dojo.place("<div class='dijitAccordionChildWrapper' style='display:none'>",this.domNode);dojo.place(this.contentWidget.domNode,this.containerNode);},postCreate:function(){this.inherited(arguments);var _865=this.button;this._contentWidgetWatches=[this.contentWidget.watch("title",dojo.hitch(this,function(name,_866,_867){_865.set("label",_867);})),this.contentWidget.watch("tooltip",dojo.hitch(this,function(name,_868,_869){_865.set("title",_869);})),this.contentWidget.watch("iconClass",dojo.hitch(this,function(name,_86a,_86b){_865.set("iconClass",_86b);}))];},_setSelectedAttr:function(_86c){this._set("selected",_86c);this.button.set("selected",_86c);if(_86c){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}},startup:function(){this.contentWidget.startup();},destroy:function(){this.button.destroyRecursive();dojo.forEach(this._contentWidgetWatches||[],function(w){w.unwatch();});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments);},destroyDescendants:function(){this.contentWidget.destroyRecursive();}});dojo.declare("dijit.layout._AccordionButton",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit.layout","templates/AccordionButton.html","<div dojoAttachEvent='onclick:_onTitleClick' class='dijitAccordionTitle'>\n\t<div dojoAttachPoint='titleNode,focusNode' dojoAttachEvent='onkeypress:_onTitleKeyPress'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon\" dojoAttachPoint='iconNode' style=\"vertical-align: middle\" role=\"presentation\"/>\n\t\t<span role=\"presentation\" dojoAttachPoint='titleTextNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.layout.ContentPane.prototype.attributeMap),{label:{node:"titleTextNode",type:"innerHTML"},title:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},buildRendering:function(){this.inherited(arguments);var _86d=this.id.replace(" ","_");dojo.attr(this.titleTextNode,"id",_86d+"_title");dijit.setWaiState(this.focusNode,"labelledby",dojo.attr(this.titleTextNode,"id"));dojo.setSelectable(this.domNode,false);},getTitleHeight:function(){return dojo._getMarginSize(this.domNode).h;},_onTitleClick:function(){var _86e=this.getParent();_86e.selectChild(this.contentWidget,true);dijit.focus(this.focusNode);},_onTitleKeyPress:function(evt){return this.getParent()._onKeyPress(evt,this.contentWidget);},_setSelectedAttr:function(_86f){this._set("selected",_86f);dijit.setWaiState(this.focusNode,"expanded",_86f);dijit.setWaiState(this.focusNode,"selected",_86f);this.focusNode.setAttribute("tabIndex",_86f?"0":"-1");}});}if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){if(!this.gutters){this.baseClass+="NoGutter";}this.inherited(arguments);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments);},_setupChild:function(_870){var _871=_870.region;if(_871){this.inherited(arguments);dojo.addClass(_870.domNode,this.baseClass+"Pane");var ltr=this.isLeftToRight();if(_871=="leading"){_871=ltr?"left":"right";}if(_871=="trailing"){_871=ltr?"right":"left";}if(_871!="center"&&(_870.splitter||this.gutters)&&!_870._splitterWidget){var _872=dojo.getObject(_870.splitter?this._splitterClass:"dijit.layout._Gutter");var _873=new _872({id:_870.id+"_splitter",container:this,child:_870,region:_871,live:this.liveSplitters});_873.isSplitter=true;_870._splitterWidget=_873;dojo.place(_873.domNode,_870.domNode,"after");_873.startup();}_870.region=_871;}},layout:function(){this._layoutChildren();},addChild:function(_874,_875){this.inherited(arguments);if(this._started){this.layout();}},removeChild:function(_876){var _877=_876.region;var _878=_876._splitterWidget;if(_878){_878.destroy();delete _876._splitterWidget;}this.inherited(arguments);if(this._started){this._layoutChildren();}dojo.removeClass(_876.domNode,this.baseClass+"Pane");dojo.style(_876.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});dojo.style(_876.domNode,_877=="top"||_877=="bottom"?"width":"height","auto");},getChildren:function(){return dojo.filter(this.inherited(arguments),function(_879){return !_879.isSplitter;});},getSplitter:function(_87a){return dojo.filter(this.getChildren(),function(_87b){return _87b.region==_87a;})[0]._splitterWidget;},resize:function(_87c,_87d){if(!this.cs||!this.pe){var node=this.domNode;this.cs=dojo.getComputedStyle(node);this.pe=dojo._getPadExtents(node,this.cs);this.pe.r=dojo._toPixelValue(node,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(node,this.cs.paddingBottom);dojo.style(node,"padding","0px");}this.inherited(arguments);},_layoutChildren:function(_87e,_87f){if(!this._borderBox||!this._borderBox.h){return;}var _880=dojo.map(this.getChildren(),function(_881,idx){return {pane:_881,weight:[_881.region=="center"?Infinity:0,_881.layoutPriority,(this.design=="sidebar"?1:-1)*(/top|bottom/.test(_881.region)?1:-1),idx]};},this);_880.sort(function(a,b){var aw=a.weight,bw=b.weight;for(var i=0;i<aw.length;i++){if(aw[i]!=bw[i]){return aw[i]-bw[i];}}return 0;});var _882=[];dojo.forEach(_880,function(_883){var pane=_883.pane;_882.push(pane);if(pane._splitterWidget){_882.push(pane._splitterWidget);}});var dim={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};dijit.layout.layoutChildren(this.domNode,dim,_882,_87e,_87f);},destroyRecursive:function(){dojo.forEach(this.getChildren(),function(_884){var _885=_884._splitterWidget;if(_885){_885.destroy();}delete _884._splitterWidget;});this.inherited(arguments);}});dojo.extend(dijit._Widget,{region:"",layoutPriority:0,splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:"<div class=\"dijitSplitter\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse\" tabIndex=\"0\" role=\"separator\"><div class=\"dijitSplitterThumb\"></div></div>",postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region;},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var _886=dojo.cookie(this._cookieName);if(_886){this.child.domNode.style[this.horizontal?"height":"width"]=_886;}}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",_887=dojo.marginBox(this.child.domNode)[dim],_888=dojo.filter(this.container.getChildren(),function(_889){return _889.region=="center";})[0],_88a=dojo.marginBox(_888.domNode)[dim];return Math.min(this.child.maxSize,_887+_88a);},_startDrag:function(e){if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after");}dojo.addClass(this.cover,"dijitSplitterCoverActive");if(this.fake){dojo.destroy(this.fake);}if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after");}dojo.addClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake){dojo.removeClass(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");}var _88b=this._factor,_88c=this.horizontal,axis=_88c?"pageY":"pageX",_88d=e[axis],_88e=this.domNode.style,dim=_88c?"h":"w",_88f=dojo.marginBox(this.child.domNode)[dim],max=this._computeMaxSize(),min=this.child.minSize||20,_890=this.region,_891=_890=="top"||_890=="bottom"?"top":"left",_892=parseInt(_88e[_891],10),_893=this._resize,_894=dojo.hitch(this.container,"_layoutChildren",this.child.id),de=dojo.doc;this._handlers=(this._handlers||[]).concat([dojo.connect(de,"onmousemove",this._drag=function(e,_895){var _896=e[axis]-_88d,_897=_88b*_896+_88f,_898=Math.max(Math.min(_897,max),min);if(_893||_895){_894(_898);}_88e[_891]=_896+_892+_88b*(_898-_897)+"px";}),dojo.connect(de,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(de,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(e);},_onMouse:function(e){var o=(e.type=="mouseover"||e.type=="mouseenter");dojo.toggleClass(this.domNode,"dijitSplitterHover",o);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",o);},_stopDrag:function(e){try{if(this.cover){dojo.removeClass(this.cover,"dijitSplitterCoverActive");}if(this.fake){dojo.destroy(this.fake);}dojo.removeClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow");this._drag(e);this._drag(e,true);}finally{this._cleanupHandlers();delete this._drag;}if(this.container.persist){dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365});}},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers;},_onKeyPress:function(e){this._resize=true;var _899=this.horizontal;var tick=1;var dk=dojo.keys;switch(e.charOrCode){case _899?dk.UP_ARROW:dk.LEFT_ARROW:tick*=-1;case _899?dk.DOWN_ARROW:dk.RIGHT_ARROW:break;default:return;}var _89a=dojo._getMarginSize(this.child.domNode)[_899?"h":"w"]+this._factor*tick;this.container._layoutChildren(this.child.id,Math.max(Math.min(_89a,this._computeMaxSize()),this.child.minSize));dojo.stopEvent(e);},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments);}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitGutter\" role=\"presentation\"></div>",postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"));}});}if(!dojo._hasResource["dijit.layout.LayoutContainer"]){dojo._hasResource["dijit.layout.LayoutContainer"]=true;dojo.provide("dijit.layout.LayoutContainer");dojo.declare("dijit.layout.LayoutContainer",dijit.layout._LayoutWidget,{baseClass:"dijitLayoutContainer",constructor:function(){dojo.deprecated("dijit.layout.LayoutContainer is deprecated","use BorderContainer instead",2);},layout:function(){dijit.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren());},addChild:function(_89b,_89c){this.inherited(arguments);if(this._started){dijit.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren());}},removeChild:function(_89d){this.inherited(arguments);if(this._started){dijit.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren());}}});dojo.extend(dijit._Widget,{layoutAlign:"none"});}if(!dojo._hasResource["dijit.layout.LinkPane"]){dojo._hasResource["dijit.layout.LinkPane"]=true;dojo.provide("dijit.layout.LinkPane");dojo.declare("dijit.layout.LinkPane",[dijit.layout.ContentPane,dijit._Templated],{templateString:"<div class=\"dijitLinkPane\" dojoAttachPoint=\"containerNode\"></div>",postMixInProperties:function(){if(this.srcNodeRef){this.title+=this.srcNodeRef.innerHTML;}this.inherited(arguments);},_fillContent:function(_89e){}});}if(!dojo._hasResource["dijit.layout.SplitContainer"]){dojo._hasResource["dijit.layout.SplitContainer"]=true;dojo.provide("dijit.layout.SplitContainer");dojo.declare("dijit.layout.SplitContainer",dijit.layout._LayoutWidget,{constructor:function(){dojo.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",2);},activeSizing:false,sizerWidth:7,orientation:"horizontal",persist:true,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.isHorizontal=(this.orientation=="horizontal");},postCreate:function(){this.inherited(arguments);this.sizers=[];if(dojo.isMozilla){this.domNode.style.overflow="-moz-scrollbars-none";}if(typeof this.sizerWidth=="object"){try{this.sizerWidth=parseInt(this.sizerWidth.toString());}catch(e){this.sizerWidth=7;}}var _89f=dojo.doc.createElement("div");this.virtualSizer=_89f;_89f.style.position="relative";_89f.style.zIndex=10;_89f.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV";this.domNode.appendChild(_89f);dojo.setSelectable(_89f,false);},destroy:function(){delete this.virtualSizer;dojo.forEach(this._ownconnects,dojo.disconnect);this.inherited(arguments);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_8a0,i,_8a1){this._setupChild(_8a0);if(i<_8a1.length-1){this._addSizer();}},this);if(this.persist){this._restoreState();}this.inherited(arguments);},_setupChild:function(_8a2){this.inherited(arguments);_8a2.domNode.style.position="absolute";dojo.addClass(_8a2.domNode,"dijitSplitPane");},_onSizerMouseDown:function(e){if(e.target.id){for(var i=0;i<this.sizers.length;i++){if(this.sizers[i].id==e.target.id){break;}}if(i<this.sizers.length){this.beginSizing(e,i);}}},_addSizer:function(_8a3){_8a3=_8a3===undefined?this.sizers.length:_8a3;var _8a4=dojo.doc.createElement("div");_8a4.id=dijit.getUniqueId("dijit_layout_SplitterContainer_Splitter");this.sizers.splice(_8a3,0,_8a4);this.domNode.appendChild(_8a4);_8a4.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var _8a5=dojo.doc.createElement("div");_8a5.className="thumb";_8a4.appendChild(_8a5);this.connect(_8a4,"onmousedown","_onSizerMouseDown");dojo.setSelectable(_8a4,false);},removeChild:function(_8a6){if(this.sizers.length){var i=dojo.indexOf(this.getChildren(),_8a6);if(i!=-1){if(i==this.sizers.length){i--;}dojo.destroy(this.sizers[i]);this.sizers.splice(i,1);}}this.inherited(arguments);if(this._started){this.layout();}},addChild:function(_8a7,_8a8){this.inherited(arguments);if(this._started){var _8a9=this.getChildren();if(_8a9.length>1){this._addSizer(_8a8);}this.layout();}},layout:function(){this.paneWidth=this._contentBox.w;this.paneHeight=this._contentBox.h;var _8aa=this.getChildren();if(!_8aa.length){return;}var _8ab=this.isHorizontal?this.paneWidth:this.paneHeight;if(_8aa.length>1){_8ab-=this.sizerWidth*(_8aa.length-1);}var _8ac=0;dojo.forEach(_8aa,function(_8ad){_8ac+=_8ad.sizeShare;});var _8ae=_8ab/_8ac;var _8af=0;dojo.forEach(_8aa.slice(0,_8aa.length-1),function(_8b0){var size=Math.round(_8ae*_8b0.sizeShare);_8b0.sizeActual=size;_8af+=size;});_8aa[_8aa.length-1].sizeActual=_8ab-_8af;this._checkSizes();var pos=0;var size=_8aa[0].sizeActual;this._movePanel(_8aa[0],pos,size);_8aa[0].position=pos;pos+=size;if(!this.sizers){return;}dojo.some(_8aa.slice(1),function(_8b1,i){if(!this.sizers[i]){return true;}this._moveSlider(this.sizers[i],pos,this.sizerWidth);this.sizers[i].position=pos;pos+=this.sizerWidth;size=_8b1.sizeActual;this._movePanel(_8b1,pos,size);_8b1.position=pos;pos+=size;},this);},_movePanel:function(_8b2,pos,size){if(this.isHorizontal){_8b2.domNode.style.left=pos+"px";_8b2.domNode.style.top=0;var box={w:size,h:this.paneHeight};if(_8b2.resize){_8b2.resize(box);}else{dojo.marginBox(_8b2.domNode,box);}}else{_8b2.domNode.style.left=0;_8b2.domNode.style.top=pos+"px";var box={w:this.paneWidth,h:size};if(_8b2.resize){_8b2.resize(box);}else{dojo.marginBox(_8b2.domNode,box);}}},_moveSlider:function(_8b3,pos,size){if(this.isHorizontal){_8b3.style.left=pos+"px";_8b3.style.top=0;dojo.marginBox(_8b3,{w:size,h:this.paneHeight});}else{_8b3.style.left=0;_8b3.style.top=pos+"px";dojo.marginBox(_8b3,{w:this.paneWidth,h:size});}},_growPane:function(_8b4,pane){if(_8b4>0){if(pane.sizeActual>pane.sizeMin){if((pane.sizeActual-pane.sizeMin)>_8b4){pane.sizeActual=pane.sizeActual-_8b4;_8b4=0;}else{_8b4-=pane.sizeActual-pane.sizeMin;pane.sizeActual=pane.sizeMin;}}}return _8b4;},_checkSizes:function(){var _8b5=0;var _8b6=0;var _8b7=this.getChildren();dojo.forEach(_8b7,function(_8b8){_8b6+=_8b8.sizeActual;_8b5+=_8b8.sizeMin;});if(_8b5<=_8b6){var _8b9=0;dojo.forEach(_8b7,function(_8ba){if(_8ba.sizeActual<_8ba.sizeMin){_8b9+=_8ba.sizeMin-_8ba.sizeActual;_8ba.sizeActual=_8ba.sizeMin;}});if(_8b9>0){var list=this.isDraggingLeft?_8b7.reverse():_8b7;dojo.forEach(list,function(_8bb){_8b9=this._growPane(_8b9,_8bb);},this);}}else{dojo.forEach(_8b7,function(_8bc){_8bc.sizeActual=Math.round(_8b6*(_8bc.sizeMin/_8b5));});}},beginSizing:function(e,i){var _8bd=this.getChildren();this.paneBefore=_8bd[i];this.paneAfter=_8bd[i+1];this.isSizing=true;this.sizingSplitter=this.sizers[i];if(!this.cover){this.cover=dojo.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode);}else{this.cover.style.zIndex=5;}this.sizingSplitter.style.zIndex=6;this.originPos=dojo.position(_8bd[0].domNode,true);if(this.isHorizontal){var _8be=e.layerX||e.offsetX||0;var _8bf=e.pageX;this.originPos=this.originPos.x;}else{var _8be=e.layerY||e.offsetY||0;var _8bf=e.pageY;this.originPos=this.originPos.y;}this.startPoint=this.lastPoint=_8bf;this.screenToClientOffset=_8bf-_8be;this.dragOffset=this.lastPoint-this.paneBefore.sizeActual-this.originPos-this.paneBefore.position;if(!this.activeSizing){this._showSizingLine();}this._ownconnects=[];this._ownconnects.push(dojo.connect(dojo.doc.documentElement,"onmousemove",this,"changeSizing"));this._ownconnects.push(dojo.connect(dojo.doc.documentElement,"onmouseup",this,"endSizing"));dojo.stopEvent(e);},changeSizing:function(e){if(!this.isSizing){return;}this.lastPoint=this.isHorizontal?e.pageX:e.pageY;this.movePoint();if(this.activeSizing){this._updateSize();}else{this._moveSizingLine();}dojo.stopEvent(e);},endSizing:function(e){if(!this.isSizing){return;}if(this.cover){this.cover.style.zIndex=-1;}if(!this.activeSizing){this._hideSizingLine();}this._updateSize();this.isSizing=false;if(this.persist){this._saveState(this);}dojo.forEach(this._ownconnects,dojo.disconnect);},movePoint:function(){var p=this.lastPoint-this.screenToClientOffset;var a=p-this.dragOffset;a=this.legaliseSplitPoint(a);p=a+this.dragOffset;this.lastPoint=p+this.screenToClientOffset;},legaliseSplitPoint:function(a){a+=this.sizingSplitter.position;this.isDraggingLeft=!!(a>0);if(!this.activeSizing){var min=this.paneBefore.position+this.paneBefore.sizeMin;if(a<min){a=min;}var max=this.paneAfter.position+(this.paneAfter.sizeActual-(this.sizerWidth+this.paneAfter.sizeMin));if(a>max){a=max;}}a-=this.sizingSplitter.position;this._checkSizes();return a;},_updateSize:function(){var pos=this.lastPoint-this.dragOffset-this.originPos;var _8c0=this.paneBefore.position;var _8c1=this.paneAfter.position+this.paneAfter.sizeActual;this.paneBefore.sizeActual=pos-_8c0;this.paneAfter.position=pos+this.sizerWidth;this.paneAfter.sizeActual=_8c1-this.paneAfter.position;dojo.forEach(this.getChildren(),function(_8c2){_8c2.sizeShare=_8c2.sizeActual;});if(this._started){this.layout();}},_showSizingLine:function(){this._moveSizingLine();dojo.marginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth});this.virtualSizer.style.display="block";},_hideSizingLine:function(){this.virtualSizer.style.display="none";},_moveSizingLine:function(){var pos=(this.lastPoint-this.startPoint)+this.sizingSplitter.position;dojo.style(this.virtualSizer,(this.isHorizontal?"left":"top"),pos+"px");},_getCookieName:function(i){return this.id+"_"+i;},_restoreState:function(){dojo.forEach(this.getChildren(),function(_8c3,i){var _8c4=this._getCookieName(i);var _8c5=dojo.cookie(_8c4);if(_8c5){var pos=parseInt(_8c5);if(typeof pos=="number"){_8c3.sizeShare=pos;}}},this);},_saveState:function(){if(!this.persist){return;}dojo.forEach(this.getChildren(),function(_8c6,i){dojo.cookie(this._getCookieName(i),_8c6.sizeShare,{expires:365});},this);}});dojo.extend(dijit._Widget,{sizeMin:10,sizeShare:10});}if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html","<div class=\"dijitTabContainer\">\n  <div class=\"dijitTabListWrapper\" dojoAttachPoint=\"tablistNode\"></div>\n  <div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n  <div class=\"dijitTabPaneWrapper\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n"),postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}else{dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _8c7=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_8c7;var _8c8=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_8c7},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_8c8);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_8c8[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){var s=this.tablist.domNode.style;s.width="0";var _8c9=dojo.contentBox(this.domNode).w;s.width="";this.tablist.resize({w:_8c9});}if(sc&&sc.resize){sc.resize();}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _8ca=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_8ca=Math.max(_8ca,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_8ca+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div role=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick' class=\"pentaho-tabWidget\">\n  <div role=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n    <div role=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\n      <div role=\"presentation\" dojoAttachPoint='focusNode'>\n        <img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitTabButtonIcon\" dojoAttachPoint='iconNode' />\n        <span dojoAttachPoint='containerNode' class='pentaho-tabWidgetLabel'></span>\n\t\t        <span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" dojoAttachPoint='closeNode'\n                  dojoAttachEvent='onclick: onClickCloseButton' role=\"presentation\">\n\t\t            <span dojoAttachPoint='closeText' class='dijitTabCloseText'>[x]</span\n                    ></span>\n      </div>\n    </div>\n  </div>\n</div>\n"),scrollOnFocus:false,buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},startup:function(){this.inherited(arguments);var n=this.domNode;setTimeout(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this._set("closeButton",disp);dojo.toggleClass(this.innerDiv,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _8cb=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_8cb.itemClose);}var _8cb=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",dir:this.dir,lang:this.lang,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:_8cb.itemClose,dir:this.dir,lang:this.lang,onClick:dojo.hitch(this,"onClickCloseButton")}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},_setLabelAttr:function(_8cc){this.inherited(arguments);if(this.showLabel==false&&!this.params.title){this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html","<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerMenuButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_menuBtn\" containerId=\"${containerId}\" iconClass=\"dijitTabStripMenuIcon\"\n\t\t\tdropDownPosition=\"below-alt, above-alt\"\n\t\t\tdojoAttachPoint=\"_menuBtn\" showLabel=\"false\">&#9660;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_leftBtn\" iconClass=\"dijitTabStripSlideLeftIcon\"\n\t\t\tdojoAttachPoint=\"_leftBtn\" dojoAttachEvent=\"onClick: doSlideLeft\" showLabel=\"false\">&#9664;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_rightBtn\" iconClass=\"dijitTabStripSlideRightIcon\"\n\t\t\tdojoAttachPoint=\"_rightBtn\" dojoAttachEvent=\"onClick: doSlideRight\" showLabel=\"false\">&#9654;</div>\n\t<div class='dijitTabListWrapper' dojoAttachPoint='tablistWrapper'>\n\t\t<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'\n\t\t\t\tdojoAttachPoint='containerNode' class='nowrapTabStrip'></div>\n\t</div>\n</div>\n"),useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),buildRendering:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(n,"tabStrip-disabled");}dojo.addClass(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true;},onAddChild:function(page,_8cd){this.inherited(arguments);dojo.forEach(["label","iconClass"],function(attr){this.pane2watches[page.id].push(this.pane2button[page.id].watch(attr,dojo.hitch(this,function(name,_8ce,_8cf){if(this._postStartup&&this._dim){this.resize(this._dim);}})));},this);dojo.style(this.containerNode,"width",(dojo.style(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_8d0){var _8d1=this.pane2button[page.id];if(this._selectedTab===_8d1.domNode){this._selectedTab=null;}this.inherited(arguments);},_initButtons:function(){this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=dojo._getMarginSize(btn).w;return true;}else{dojo.style(btn,"display","none");return false;}},this);},_getTabsWidth:function(){var _8d2=this.getChildren();if(_8d2.length){var _8d3=_8d2[this.isLeftToRight()?0:_8d2.length-1].domNode,_8d4=_8d2[this.isLeftToRight()?_8d2.length-1:0].domNode;return _8d4.offsetLeft+dojo.style(_8d4,"width")-_8d3.offsetLeft;}else{return 0;}},_enableBtn:function(_8d5){var _8d6=this._getTabsWidth();_8d5=_8d5||dojo.style(this.scrollNode,"width");return _8d6>0&&_8d5<_8d6;},resize:function(dim){if(this.domNode.offsetWidth==0){return;}this._dim=dim;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:dim.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);var _8d7=this._enableBtn(this._contentBox.w);this._buttons.style("display",_8d7?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var w=this.scrollNode,sl=this._convertToScrollLeft(this._getScrollForSelectedTab());w.scrollLeft=sl;}this._setButtonClass(this._getScroll());this._postResize=true;return {h:this._contentBox.h,w:dim.w};},_getScroll:function(){var sl=(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit)?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return sl;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit){return val;}else{var _8d8=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return (dojo.isIE==8?-1:1)*(val-_8d8);}},onSelectChild:function(page){var tab=this.pane2button[page.id];if(!tab||!page){return;}var node=tab.domNode;if(this._postResize&&node!=this._selectedTab){this._selectedTab=node;var sl=this._getScroll();if(sl>node.offsetLeft||sl+dojo.style(this.scrollNode,"width")<node.offsetLeft+dojo.style(node,"width")){this.createSmoothScroll().play();}}this.inherited(arguments);},_getScrollBounds:function(){var _8d9=this.getChildren(),_8da=dojo.style(this.scrollNode,"width"),_8db=dojo.style(this.containerNode,"width"),_8dc=_8db-_8da,_8dd=this._getTabsWidth();if(_8d9.length&&_8dd>_8da){return {min:this.isLeftToRight()?0:_8d9[_8d9.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_8d9[_8d9.length-1].domNode.offsetLeft+dojo.style(_8d9[_8d9.length-1].domNode,"width"))-_8da:_8dc};}else{var _8de=this.isLeftToRight()?0:_8dc;return {min:_8de,max:_8de};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_8df=dojo.style(this.scrollNode,"width"),_8e0=this._getScrollBounds();var pos=(n.offsetLeft+dojo.style(n,"width")/2)-_8df/2;pos=Math.min(Math.max(pos,_8e0.min),_8e0.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _8e1=this._getScrollBounds();x=Math.min(Math.max(x,_8e1.min),_8e1.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new dojo._Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new dojo._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!dojo.hasClass(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_8e2,node){if(node&&dojo.hasClass(node,"dijitTabDisabled")){return;}var _8e3=dojo.style(this.scrollNode,"width");var d=(_8e3*0.75)*_8e2;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_8e4){var _8e5=this._getScrollBounds();this._leftBtn.set("disabled",_8e4<=_8e5.min);this._rightBtn.set("disabled",_8e4>=_8e5.max);}});dojo.declare("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html","<div dojoAttachEvent=\"onclick:_onButtonClick\">\n\t<div role=\"presentation\" class=\"dijitTabInnerDiv\" dojoattachpoint=\"innerDiv,focusNode\">\n\t\t<div role=\"presentation\" class=\"dijitTabContent dijitButtonContents\" dojoattachpoint=\"tabContent\">\n\t\t\t<img role=\"presentation\" alt=\"\" src=\"${_blankGif}\" class=\"dijitTabStripIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t\t<span dojoAttachPoint=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n\t\t</div>\n\t</div>\n</div>\n"),tabIndex:"",isFocusable:function(){return false;}});dojo.declare("dijit.layout._ScrollingTabControllerButton",[dijit.form.Button,dijit.layout._ScrollingTabControllerButtonMixin]);dojo.declare("dijit.layout._ScrollingTabControllerMenuButton",[dijit.form.Button,dijit._HasDropDown,dijit.layout._ScrollingTabControllerButtonMixin],{containerId:"",tabIndex:"-1",isLoaded:function(){return false;},loadDropDown:function(_8e6){this.dropDown=new dijit.Menu({id:this.containerId+"_menu",dir:this.dir,lang:this.lang});var _8e7=dijit.byId(this.containerId);dojo.forEach(_8e7.getChildren(),function(page){var _8e8=new dijit.MenuItem({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,dir:page.dir,lang:page.lang,onClick:function(){_8e7.selectChild(page);}});this.dropDown.addChild(_8e8);},this);_8e6();},closeDropDown:function(_8e9){this.inherited(arguments);if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}}});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_8ea){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_8eb=dojo.getObject(this.controllerWidget);return new _8eb({id:this.id+"_tablist",dir:this.dir,lang:this.lang,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_8ea);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController";}}});}if(!dojo._hasResource["dijit.dijit-all"]){dojo._hasResource["dijit.dijit-all"]=true;dojo.provide("dijit.dijit-all");console.warn("dijit-all may include much more code than your application actually requires. We strongly recommend that you investigate a custom build or the web build tool");}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,_8ec){if(!_8ec){_8ec={};}this.singular=_8ec.singular;this.autoSync=_8ec.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"));},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList();var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dojo.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dojo.byId(i);this.delItem(i);dojo.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}dojo.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_8ed,data,_8ee,_8ef){var _8f0=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_8f0.call(this,item,hint);if(_8ed){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};dojo.dnd.Selector.superclass.insertNodes.call(this,data,_8ee,_8ef);this._normalizedCreator=_8f0;return this;},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null;},markupFactory:function(_8f1,node){_8f1._skipStartup=true;return new dojo.dnd.Selector(node,_8f1);},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dojo.isCopyKey(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(e.button===dojo.mouseButtons.LEFT){dojo.stopEvent(e);}return;}if(!this.singular&&e.shiftKey){if(!dojo.isCopyKey(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.isCopyKey(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dojo.isCopyKey(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}dojo.stopEvent(e);},onMouseUp:function(e){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(e){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove");},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent;},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dojo.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(_8f2){this.manager=_8f2;this.construct();},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_8f3=this.manager.source,node,b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",null,tr),icon=this.isA11y?dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td):null,span=dojo.create("span",{innerHTML:_8f3.generateText?this._generateText():""},td),k=Math.min(5,this.manager.nodes.length),i=0;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_8f3.creator){node=_8f3._normalizedCreator(_8f3.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _8f4=dojo.create("table"),_8f5=dojo.create("tbody",null,_8f4);_8f5.appendChild(node);node=_8f4;}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){dojo.destroy(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var icon=dojo.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}dojo.query(("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":"")),this.node).forEach(function(node){node.innerHTML=this._generateText();},this);},_generateText:function(){return this.manager.nodes.length.toString();}});}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:16,OFFSET_Y:16,overSource:function(_8f6){if(this.avatar){this.target=(_8f6&&_8f6.targetState!="Disabled")?_8f6:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}dojo.publish("/dnd/source/over",[_8f6]);},outSource:function(_8f7){if(this.avatar){if(this.target==_8f7){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null]);}}else{dojo.publish("/dnd/source/over",[null]);}},startDrag:function(_8f8,_8f9,copy){this.source=_8f8;this.nodes=_8f9;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[_8f8,_8f9,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c);},canDrop:function(flag){var _8fa=Boolean(this.target&&flag);if(this.canDropFlag!=_8fa){this.canDropFlag=_8fa;this.avatar.update();}},stopDrag:function(){dojo.removeClass(dojo.body(),["dojoDndCopy","dojoDndMove"]);dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new dojo.dnd.Avatar(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dojo.isCopyKey(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.isCopyKey(e))),_8fb=[this.source,this.nodes,copy,this.target,e];dojo.publish("/dnd/drop/before",_8fb);dojo.publish("/dnd/drop",_8fb);}else{dojo.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case dojo.keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.replaceClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager();}return dojo.dnd._manager;};}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_8fc){dojo.mixin(this,dojo.mixin({},_8fc));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource");}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget");}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal");}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")];},checkAcceptance:function(_8fd,_8fe){if(this==_8fd){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_8fe.length;++i){var type=_8fd.getItem(_8fe[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_8ff,self){if(_8ff){return true;}if(arguments.length<2){self=this==dojo.dnd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null;},markupFactory:function(_900,node){_900._skipStartup=true;return new dojo.dnd.Source(node,_900);},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _901=this.getSelectedNodes();if(_901.length){m.startDrag(this,_901,this.copyState(dojo.isCopyKey(e),true));}}}if(this.isDragging){var _902=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=dojo.position(this.current,true);}if(this.horizontal){_902=(e.pageX-this.targetBox.x)<(this.targetBox.w/2);}else{_902=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_902!=this.before){this._markTargetAnchor(_902);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_903){if(this!=_903){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_904,_905,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_904?(copy?"Copied":"Moved"):"");}var _906=this.accept&&this.checkAcceptance(_904,_905);this._changeState("Target",_906?"":"Disabled");if(this==_904){dojo.dnd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_907,_908,copy,_909){if(this==_909){this.onDrop(_907,_908,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_90a,_90b,copy){if(this!=_90a){this.onDropExternal(_90a,_90b,copy);}else{this.onDropInternal(_90b,copy);}},onDropExternal:function(_90c,_90d,copy){var _90e=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _90e.call(this,_90c.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node,hint){var t=_90c.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node,hint){var t=_90c.getItem(node.id);_90c.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_90c.selectNone();}this.insertNodes(true,_90d,this.before,this.current);if(!copy&&this.creator){_90c.deleteSelectedNodes();}this._normalizedCreator=_90e;},onDropInternal:function(_90f,copy){var _910=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _910.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_90f,this.before,this.current);this._normalizedCreator=_910;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_911){if(this.current==this.targetAnchor&&this.before==_911){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_911;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(!dojo.mouseButtons.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle")){return true;}if(dojo.hasClass(node,"dojoDndItem")||dojo.hasClass(node,"dojoDndIgnore")){break;}}return false;}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,_912){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource");},markupFactory:function(_913,node){_913._skipStartup=true;return new dojo.dnd.Target(node,_913);}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,_914){this.autoSync=true;},markupFactory:function(_915,node){_915._skipStartup=true;return new dojo.dnd.AutoSource(node,_915);}});}if(!dojo._hasResource["dojox.html.entities"]){dojo._hasResource["dojox.html.entities"]=true;dojo.provide("dojox.html.entities");(function(){var _916=function(str,map){var _917,_918;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_917=map._encCache.mapper;_918=map._encCache.regexp;}else{_917={};_918=["["];var i;for(i=0;i<map.length;i++){_917[map[i][0]]="&"+map[i][1]+";";_918.push(map[i][0]);}_918.push("]");_918=new RegExp(_918.join(""),"g");map._encCache={mapper:_917,regexp:_918,length:map.length};}str=str.replace(_918,function(c){return _917[c];});return str;};var _919=function(str,map){var _91a,_91b;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_91a=map._decCache.mapper;_91b=map._decCache.regexp;}else{_91a={};_91b=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_91b.push("|");}_91a[e]=map[i][0];_91b.push(e);}_91b.push(")");_91b=new RegExp(_91b.join(""),"g");map._decCache={mapper:_91a,regexp:_91b,length:map.length};}str=str.replace(_91b,function(c){return _91a[c];});return str;};dojox.html.entities.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],[" ","nbsp"]];dojox.html.entities.latin=[["¡","iexcl"],["¢","cent"],["£","pound"],["€","euro"],["¤","curren"],["¥","yen"],["¦","brvbar"],["§","sect"],["¨","uml"],["©","copy"],["ª","ordf"],["«","laquo"],["¬","not"],["­","shy"],["®","reg"],["¯","macr"],["°","deg"],["±","plusmn"],["²","sup2"],["³","sup3"],["´","acute"],["µ","micro"],["¶","para"],["·","middot"],["¸","cedil"],["¹","sup1"],["º","ordm"],["»","raquo"],["¼","frac14"],["½","frac12"],["¾","frac34"],["¿","iquest"],["À","Agrave"],["Á","Aacute"],["Â","Acirc"],["Ã","Atilde"],["Ä","Auml"],["Å","Aring"],["Æ","AElig"],["Ç","Ccedil"],["È","Egrave"],["É","Eacute"],["Ê","Ecirc"],["Ë","Euml"],["Ì","Igrave"],["Í","Iacute"],["Î","Icirc"],["Ï","Iuml"],["Ð","ETH"],["Ñ","Ntilde"],["Ò","Ograve"],["Ó","Oacute"],["Ô","Ocirc"],["Õ","Otilde"],["Ö","Ouml"],["×","times"],["Ø","Oslash"],["Ù","Ugrave"],["Ú","Uacute"],["Û","Ucirc"],["Ü","Uuml"],["Ý","Yacute"],["Þ","THORN"],["ß","szlig"],["à","agrave"],["á","aacute"],["â","acirc"],["ã","atilde"],["ä","auml"],["å","aring"],["æ","aelig"],["ç","ccedil"],["è","egrave"],["é","eacute"],["ê","ecirc"],["ë","euml"],["ì","igrave"],["í","iacute"],["î","icirc"],["ï","iuml"],["ð","eth"],["ñ","ntilde"],["ò","ograve"],["ó","oacute"],["ô","ocirc"],["õ","otilde"],["ö","ouml"],["÷","divide"],["ø","oslash"],["ù","ugrave"],["ú","uacute"],["û","ucirc"],["ü","uuml"],["ý","yacute"],["þ","thorn"],["ÿ","yuml"],["ƒ","fnof"],["Α","Alpha"],["Β","Beta"],["Γ","Gamma"],["Δ","Delta"],["Ε","Epsilon"],["Ζ","Zeta"],["Η","Eta"],["Θ","Theta"],["Ι","Iota"],["Κ","Kappa"],["Λ","Lambda"],["Μ","Mu"],["Ν","Nu"],["Ξ","Xi"],["Ο","Omicron"],["Π","Pi"],["Ρ","Rho"],["Σ","Sigma"],["Τ","Tau"],["Υ","Upsilon"],["Φ","Phi"],["Χ","Chi"],["Ψ","Psi"],["Ω","Omega"],["α","alpha"],["β","beta"],["γ","gamma"],["δ","delta"],["ε","epsilon"],["ζ","zeta"],["η","eta"],["θ","theta"],["ι","iota"],["κ","kappa"],["λ","lambda"],["μ","mu"],["ν","nu"],["ξ","xi"],["ο","omicron"],["π","pi"],["ρ","rho"],["ς","sigmaf"],["σ","sigma"],["τ","tau"],["υ","upsilon"],["φ","phi"],["χ","chi"],["ψ","psi"],["ω","omega"],["ϑ","thetasym"],["ϒ","upsih"],["ϖ","piv"],["•","bull"],["…","hellip"],["′","prime"],["″","Prime"],["‾","oline"],["⁄","frasl"],["℘","weierp"],["ℑ","image"],["ℜ","real"],["™","trade"],["ℵ","alefsym"],["←","larr"],["↑","uarr"],["→","rarr"],["↓","darr"],["↔","harr"],["↵","crarr"],["⇐","lArr"],["⇑","uArr"],["⇒","rArr"],["⇓","dArr"],["⇔","hArr"],["∀","forall"],["∂","part"],["∃","exist"],["∅","empty"],["∇","nabla"],["∈","isin"],["∉","notin"],["∋","ni"],["∏","prod"],["∑","sum"],["−","minus"],["∗","lowast"],["√","radic"],["∝","prop"],["∞","infin"],["∠","ang"],["∧","and"],["∨","or"],["∩","cap"],["∪","cup"],["∫","int"],["∴","there4"],["∼","sim"],["≅","cong"],["≈","asymp"],["≠","ne"],["≡","equiv"],["≤","le"],["≥","ge"],["⊂","sub"],["⊃","sup"],["⊄","nsub"],["⊆","sube"],["⊇","supe"],["⊕","oplus"],["⊗","otimes"],["⊥","perp"],["⋅","sdot"],["⌈","lceil"],["⌉","rceil"],["⌊","lfloor"],["⌋","rfloor"],["〈","lang"],["〉","rang"],["◊","loz"],["♠","spades"],["♣","clubs"],["♥","hearts"],["♦","diams"],["Œ","Elig"],["œ","oelig"],["Š","Scaron"],["š","scaron"],["Ÿ","Yuml"],["ˆ","circ"],["˜","tilde"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["–","ndash"],["—","mdash"],["‘","lsquo"],["’","rsquo"],["‚","sbquo"],["“","ldquo"],["”","rdquo"],["„","bdquo"],["†","dagger"],["‡","Dagger"],["‰","permil"],["‹","lsaquo"],["›","rsaquo"]];dojox.html.entities.encode=function(str,m){if(str){if(!m){str=_916(str,dojox.html.entities.html);str=_916(str,dojox.html.entities.latin);}else{str=_916(str,m);}}return str;};dojox.html.entities.decode=function(str,m){if(str){if(!m){str=_919(str,dojox.html.entities.html);str=_919(str,dojox.html.entities.latin);}else{str=_919(str,m);}}return str;};})();}if(!dojo._hasResource["dojo.NodeList-fx"]){dojo._hasResource["dojo.NodeList-fx"]=true;dojo.provide("dojo.NodeList-fx");dojo.extend(dojo.NodeList,{_anim:function(obj,_91c,args){args=args||{};var a=dojo.fx.combine(this.map(function(item){var _91d={node:item};dojo.mixin(_91d,args);return obj[_91c](_91d);}));return args.auto?a.play()&&this:a;},wipeIn:function(args){return this._anim(dojo.fx,"wipeIn",args);},wipeOut:function(args){return this._anim(dojo.fx,"wipeOut",args);},slideTo:function(args){return this._anim(dojo.fx,"slideTo",args);},fadeIn:function(args){return this._anim(dojo,"fadeIn",args);},fadeOut:function(args){return this._anim(dojo,"fadeOut",args);},animateProperty:function(args){return this._anim(dojo,"animateProperty",args);},anim:function(_91e,_91f,_920,_921,_922){var _923=dojo.fx.combine(this.map(function(item){return dojo.animateProperty({node:item,properties:_91e,duration:_91f||350,easing:_920});}));if(_921){dojo.connect(_923,"onEnd",_921);}return _923.play(_922||0);}});}if(!dojo._hasResource["dojox.fx.Shadow"]){dojo._hasResource["dojox.fx.Shadow"]=true;dojo.provide("dojox.fx.Shadow");dojo.experimental("dojox.fx.Shadow");dojo.declare("dojox.fx.Shadow",dijit._Widget,{shadowPng:dojo.moduleUrl("dojox.fx","resources/shadow"),shadowThickness:7,shadowOffset:3,opacity:0.75,animate:false,node:null,startup:function(){this.inherited(arguments);this.node.style.position="relative";this.pieces={};var x1=-1*this.shadowThickness;var y0=this.shadowOffset;var y1=this.shadowOffset+this.shadowThickness;this._makePiece("tl","top",y0,"left",x1);this._makePiece("l","top",y1,"left",x1,"scale");this._makePiece("tr","top",y0,"left",0);this._makePiece("r","top",y1,"left",0,"scale");this._makePiece("bl","top",0,"left",x1);this._makePiece("b","top",0,"left",0,"crop");this._makePiece("br","top",0,"left",0);this.nodeList=dojo.query(".shadowPiece",this.node);this.setOpacity(this.opacity);this.resize();},_makePiece:function(name,_924,_925,_926,_927,_928){var img;var url=this.shadowPng+name.toUpperCase()+".png";if(dojo.isIE<7){img=dojo.create("div");img.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+url+"'"+(_928?", sizingMethod='"+_928+"'":"")+")";}else{img=dojo.create("img",{src:url});}img.style.position="absolute";img.style[_924]=_925+"px";img.style[_926]=_927+"px";img.style.width=this.shadowThickness+"px";img.style.height=this.shadowThickness+"px";dojo.addClass(img,"shadowPiece");this.pieces[name]=img;this.node.appendChild(img);},setOpacity:function(n,_929){if(dojo.isIE){return;}if(!_929){_929={};}if(this.animate){var _92a=[];this.nodeList.forEach(function(node){_92a.push(dojo._fade(dojo.mixin(_929,{node:node,end:n})));});dojo.fx.combine(_92a).play();}else{this.nodeList.style("opacity",n);}},setDisabled:function(_92b){if(_92b){if(this.disabled){return;}if(this.animate){this.nodeList.fadeOut().play();}else{this.nodeList.style("visibility","hidden");}this.disabled=true;}else{if(!this.disabled){return;}if(this.animate){this.nodeList.fadeIn().play();}else{this.nodeList.style("visibility","visible");}this.disabled=false;}},resize:function(args){var x;var y;if(args){x=args.x;y=args.y;}else{var co=dojo._getBorderBox(this.node);x=co.w;y=co.h;}var _92c=y-(this.shadowOffset+this.shadowThickness);if(_92c<0){_92c=0;}if(y<1){y=1;}if(x<1){x=1;}with(this.pieces){l.style.height=_92c+"px";r.style.height=_92c+"px";b.style.width=x+"px";bl.style.top=y+"px";b.style.top=y+"px";br.style.top=y+"px";tr.style.left=x+"px";r.style.left=x+"px";br.style.left=x+"px";}}});}if(!dojo._hasResource["dojox.color._base"]){dojo._hasResource["dojox.color._base"]=true;dojo.provide("dojox.color._base");dojox.color.Color=dojo.Color;dojox.color.blend=dojo.blendColors;dojox.color.fromRgb=dojo.colorFromRgb;dojox.color.fromHex=dojo.colorFromHex;dojox.color.fromArray=dojo.colorFromArray;dojox.color.fromString=dojo.colorFromString;dojox.color.greyscale=dojo.colors.makeGrey;dojo.mixin(dojox.color,{fromCmy:function(cyan,_92d,_92e){if(dojo.isArray(cyan)){_92d=cyan[1],_92e=cyan[2],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_92d=cyan.m,_92e=cyan.y,cyan=cyan.c;}}cyan/=100,_92d/=100,_92e/=100;var r=1-cyan,g=1-_92d,b=1-_92e;return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_92f,_930,_931){if(dojo.isArray(cyan)){_92f=cyan[1],_930=cyan[2],_931=cyan[3],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_92f=cyan.m,_930=cyan.y,_931=cyan.b,cyan=cyan.c;}}cyan/=100,_92f/=100,_930/=100,_931/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_931)+_931);g=1-Math.min(1,_92f*(1-_931)+_931);b=1-Math.min(1,_930*(1-_931)+_931);return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_932,_933){if(dojo.isArray(hue)){_932=hue[1],_933=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_932=hue.s,_933=hue.l,hue=hue.h;}}_932/=100;_933/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_932*Math.min(r,1)+(1-_932);g=2*_932*Math.min(g,1)+(1-_932);b=2*_932*Math.min(b,1)+(1-_932);if(_933<0.5){r*=_933,g*=_933,b*=_933;}else{r=(1-_933)*r+2*_933-1;g=(1-_933)*g+2*_933-1;b=(1-_933)*b+2*_933-1;}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsv:function(hue,_934,_935){if(dojo.isArray(hue)){_934=hue[1],_935=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_934=hue.s,_935=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_934/=100;_935/=100;var r,g,b;if(_934==0){r=_935,b=_935,g=_935;}else{var _936=hue/60,i=Math.floor(_936),f=_936-i;var p=_935*(1-_934);var q=_935*(1-(_934*f));var t=_935*(1-(_934*(1-f)));switch(i){case 0:r=_935,g=t,b=p;break;case 1:r=q,g=_935,b=p;break;case 2:r=p,g=_935,b=t;break;case 3:r=p,g=q,b=_935;break;case 4:r=t,g=p,b=_935;break;case 5:r=_935,g=p,b=q;break;}}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});dojo.extend(dojox.color.Color,{toCmy:function(){var cyan=1-(this.r/255),_937=1-(this.g/255),_938=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_937*100),y:Math.round(_938*100)};},toCmyk:function(){var cyan,_939,_93a,_93b;var r=this.r/255,g=this.g/255,b=this.b/255;_93b=Math.min(1-r,1-g,1-b);cyan=(1-r-_93b)/(1-_93b);_939=(1-g-_93b)/(1-_93b);_93a=(1-b-_93b)/(1-_93b);return {c:Math.round(cyan*100),m:Math.round(_939*100),y:Math.round(_93a*100),b:Math.round(_93b*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _93c=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_93c/((l<0.5)?(2*l):(2-2*l));}if(_93c>0){if(max==r&&max!=g){h+=(g-b)/_93c;}if(max==g&&max!=b){h+=(2+(b-r)/_93c);}if(max==b&&max!=r){h+=(4+(r-g)/_93c);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _93d=max-min;var h=null,s=(max==0)?0:(_93d/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_93d;}else{if(g==max){h=120+60*(b-r)/_93d;}else{h=240+60*(r-g)/_93d;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});}if(!dojo._hasResource["dojox.color"]){dojo._hasResource["dojox.color"]=true;dojo.provide("dojox.color");}if(!dojo._hasResource["dojox.widget.ColorPicker"]){dojo._hasResource["dojox.widget.ColorPicker"]=true;dojo.provide("dojox.widget.ColorPicker");dojo.experimental("dojox.widget.ColorPicker");(function(d){var _93e=function(hex){return hex;};dojo.declare("dojox.widget.ColorPicker",dijit.form._FormWidget,{showRgb:true,showHsv:true,showHex:true,webSafe:true,animatePoint:true,slideDuration:250,liveUpdate:false,PICKER_HUE_H:150,PICKER_SAT_VAL_H:150,PICKER_SAT_VAL_W:150,PICKER_HUE_SELECTOR_H:8,PICKER_SAT_SELECTOR_H:10,PICKER_SAT_SELECTOR_W:10,value:"#ffffff",_underlay:d.moduleUrl("dojox.widget","ColorPicker/images/underlay.png"),_hueUnderlay:d.moduleUrl("dojox.widget","ColorPicker/images/hue.png"),_pickerPointer:d.moduleUrl("dojox.widget","ColorPicker/images/pickerPointer.png"),_huePickerPointer:d.moduleUrl("dojox.widget","ColorPicker/images/hueHandle.png"),_huePickerPointerAlly:d.moduleUrl("dojox.widget","ColorPicker/images/hueHandleA11y.png"),templateString:dojo.cache("dojox.widget","ColorPicker/ColorPicker.html","<table class=\"dojoxColorPicker\" dojoAttachEvent=\"onkeypress: _handleKey\" cellpadding=\"0\" cellspacing=\"0\">\n\t<tr>\n\t\t<td valign=\"top\" class=\"dojoxColorPickerRightPad\">\n\t\t\t<div class=\"dojoxColorPickerBox\">\n\t\t\t\t<!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. -->\n\t\t\t\t<img role=\"status\" title=\"${saturationPickerTitle}\" alt=\"${saturationPickerTitle}\" class=\"dojoxColorPickerPoint\" src=\"${_pickerPointer}\" tabIndex=\"0\" dojoAttachPoint=\"cursorNode\" style=\"position: absolute; top: 0px; left: 0px;\">\n\t\t\t\t<img role=\"presentation\" alt=\"\" dojoAttachPoint=\"colorUnderlay\" dojoAttachEvent=\"onclick: _setPoint, onmousedown: _stopDrag\" class=\"dojoxColorPickerUnderlay\" src=\"${_underlay}\" ondragstart=\"return false\">\n\t\t\t</div>\n\t\t</td>\n\t\t<td valign=\"top\" class=\"dojoxColorPickerRightPad\">\n\t\t\t<div class=\"dojoxHuePicker\">\n\t\t\t\t<!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. -->\n\t\t\t\t<img role=\"status\" dojoAttachPoint=\"hueCursorNode\" tabIndex=\"0\" class=\"dojoxHuePickerPoint\" title=\"${huePickerTitle}\" alt=\"${huePickerTitle}\" src=\"${_huePickerPointer}\" style=\"position: absolute; top: 0px; left: 0px;\">\n\t\t\t\t<div class=\"dojoxHuePickerUnderlay\" dojoAttachPoint=\"hueNode\">\n\t\t\t\t    <img role=\"presentation\" alt=\"\" dojoAttachEvent=\"onclick: _setHuePoint, onmousedown: _stopDrag\" src=\"${_hueUnderlay}\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</td>\n\t\t<td valign=\"top\">\n\t\t\t<table cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign=\"top\" class=\"dojoxColorPickerPreviewContainer\">\n\t\t\t\t\t\t<table cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td valign=\"top\" class=\"dojoxColorPickerRightPad\">\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"previewNode\" class=\"dojoxColorPickerPreview\"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td valign=\"top\">\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"safePreviewNode\" class=\"dojoxColorPickerWebSafePreview\"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign=\"bottom\">\n\t\t\t\t\t\t<table class=\"dojoxColorPickerOptional\" cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"dijitInline dojoxColorPickerRgb\" dojoAttachPoint=\"rgbNode\">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding=\"1\" cellspacing=\"1\">\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_r\">${redLabel}</label></td><td><input id=\"${_uId}_r\" dojoAttachPoint=\"Rval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"></td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_g\">${greenLabel}</label></td><td><input id=\"${_uId}_g\" dojoAttachPoint=\"Gval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"></td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_b\">${blueLabel}</label></td><td><input id=\"${_uId}_b\" dojoAttachPoint=\"Bval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"></td></tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"dijitInline dojoxColorPickerHsv\" dojoAttachPoint=\"hsvNode\">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding=\"1\" cellspacing=\"1\">\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_h\">${hueLabel}</label></td><td><input id=\"${_uId}_h\" dojoAttachPoint=\"Hval\"size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"> ${degLabel}</td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_s\">${saturationLabel}</label></td><td><input id=\"${_uId}_s\" dojoAttachPoint=\"Sval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"> ${percentSign}</td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_v\">${valueLabel}</label></td><td><input id=\"${_uId}_v\" dojoAttachPoint=\"Vval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"> ${percentSign}</td></tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t<div class=\"dojoxColorPickerHex\" dojoAttachPoint=\"hexNode\" aria-live=\"polite\">\t\n\t\t\t\t\t\t\t\t\t\t<label for=\"${_uId}_hex\">&nbsp;${hexLabel}&nbsp;</label><input id=\"${_uId}_hex\" dojoAttachPoint=\"hexCode, focusNode, valueNode\" size=\"6\" class=\"dojoxColorPickerHexCode\" dojoAttachEvent=\"onchange: _colorInputChange\">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</td>\n\t</tr>\n</table>\n\n"),postMixInProperties:function(){if(dojo.hasClass(dojo.body(),"dijit_a11y")){this._huePickerPointer=this._huePickerPointerAlly;}this._uId=dijit.getUniqueId(this.id);dojo.mixin(this,dojo.i18n.getLocalization("dojox.widget","ColorPicker"));dojo.mixin(this,dojo.i18n.getLocalization("dojo.cldr","number"));this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(d.isIE<7){this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this._underlay+"', sizingMethod='scale')";this.colorUnderlay.src=this._blankGif.toString();}if(!this.showRgb){this.rgbNode.style.visibility="hidden";}if(!this.showHsv){this.hsvNode.style.visibility="hidden";}if(!this.showHex){this.hexNode.style.visibility="hidden";}if(!this.webSafe){this.safePreviewNode.style.visibility="hidden";}},startup:function(){if(this._started){return;}this._started=true;this.set("value",this.value);this._mover=new d.dnd.move.boxConstrainedMoveable(this.cursorNode,{box:{t:-(this.PICKER_SAT_SELECTOR_H/2),l:-(this.PICKER_SAT_SELECTOR_W/2),w:this.PICKER_SAT_VAL_W,h:this.PICKER_SAT_VAL_H}});this._hueMover=new d.dnd.move.boxConstrainedMoveable(this.hueCursorNode,{box:{t:-(this.PICKER_HUE_SELECTOR_H/2),l:0,w:0,h:this.PICKER_HUE_H}});this._subs=[];this._subs.push(d.subscribe("/dnd/move/stop",d.hitch(this,"_clearTimer")));this._subs.push(d.subscribe("/dnd/move/start",d.hitch(this,"_setTimer")));this._keyListeners=[];this._connects.push(dijit.typematic.addKeyListener(this.hueCursorNode,{charOrCode:dojo.keys.UP_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,dojo.hitch(this,this._updateHueCursorNode),25,25));this._connects.push(dijit.typematic.addKeyListener(this.hueCursorNode,{charOrCode:dojo.keys.DOWN_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,dojo.hitch(this,this._updateHueCursorNode),25,25));this._connects.push(dijit.typematic.addKeyListener(this.cursorNode,{charOrCode:dojo.keys.UP_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,dojo.hitch(this,this._updateCursorNode),25,25));this._connects.push(dijit.typematic.addKeyListener(this.cursorNode,{charOrCode:dojo.keys.DOWN_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,dojo.hitch(this,this._updateCursorNode),25,25));this._connects.push(dijit.typematic.addKeyListener(this.cursorNode,{charOrCode:dojo.keys.LEFT_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,dojo.hitch(this,this._updateCursorNode),25,25));this._connects.push(dijit.typematic.addKeyListener(this.cursorNode,{charOrCode:dojo.keys.RIGHT_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,dojo.hitch(this,this._updateCursorNode),25,25));},_setValueAttr:function(_93f){if(!this._started){return;}this.setColor(_93f,true);},setColor:function(_940,_941){var col=dojox.color.fromString(_940);this._updatePickerLocations(col);this._updateColorInputs(col);this._updateValue(col,_941);},_setTimer:function(_942){dijit.focus(_942.node);d.setSelectable(this.domNode,false);this._timer=setInterval(d.hitch(this,"_updateColor"),45);},_clearTimer:function(_943){clearInterval(this._timer);this._timer=null;this.onChange(this.value);d.setSelectable(this.domNode,true);},_setHue:function(h){d.style(this.colorUnderlay,"backgroundColor",dojox.color.fromHsv(h,100,100).toHex());},_updateHueCursorNode:function(_944,node,e){if(_944!==-1){var y=dojo.style(this.hueCursorNode,"top");var _945=(this.PICKER_HUE_SELECTOR_H/2);y+=_945;var _946=false;if(e.charOrCode==dojo.keys.UP_ARROW){if(y>0){y-=1;_946=true;}}else{if(e.charOrCode==dojo.keys.DOWN_ARROW){if(y<this.PICKER_HUE_H){y+=1;_946=true;}}}y-=_945;if(_946){dojo.style(this.hueCursorNode,"top",y+"px");}}else{this._updateColor(true);}},_updateCursorNode:function(_947,node,e){var _948=this.PICKER_SAT_SELECTOR_H/2;var _949=this.PICKER_SAT_SELECTOR_W/2;if(_947!==-1){var y=dojo.style(this.cursorNode,"top");var x=dojo.style(this.cursorNode,"left");y+=_948;x+=_949;var _94a=false;if(e.charOrCode==dojo.keys.UP_ARROW){if(y>0){y-=1;_94a=true;}}else{if(e.charOrCode==dojo.keys.DOWN_ARROW){if(y<this.PICKER_SAT_VAL_H){y+=1;_94a=true;}}else{if(e.charOrCode==dojo.keys.LEFT_ARROW){if(x>0){x-=1;_94a=true;}}else{if(e.charOrCode==dojo.keys.RIGHT_ARROW){if(x<this.PICKER_SAT_VAL_W){x+=1;_94a=true;}}}}}if(_94a){y-=_948;x-=_949;dojo.style(this.cursorNode,"top",y+"px");dojo.style(this.cursorNode,"left",x+"px");}}else{this._updateColor(true);}},_updateColor:function(){var _94b=this.PICKER_HUE_SELECTOR_H/2,_94c=this.PICKER_SAT_SELECTOR_H/2,_94d=this.PICKER_SAT_SELECTOR_W/2;var _94e=d.style(this.hueCursorNode,"top")+_94b,_94f=d.style(this.cursorNode,"top")+_94c,_950=d.style(this.cursorNode,"left")+_94d,h=Math.round(360-(_94e/this.PICKER_HUE_H*360)),col=dojox.color.fromHsv(h,_950/this.PICKER_SAT_VAL_W*100,100-(_94f/this.PICKER_SAT_VAL_H*100));this._updateColorInputs(col);this._updateValue(col,true);if(h!=this._hue){this._setHue(h);}},_colorInputChange:function(e){var col,_951=false;switch(e.target){case this.hexCode:col=dojox.color.fromString(e.target.value);_951=true;break;case this.Rval:case this.Gval:case this.Bval:col=dojox.color.fromArray([this.Rval.value,this.Gval.value,this.Bval.value]);_951=true;break;case this.Hval:case this.Sval:case this.Vval:col=dojox.color.fromHsv(this.Hval.value,this.Sval.value,this.Vval.value);_951=true;break;}if(_951){this._updatePickerLocations(col);this._updateColorInputs(col);this._updateValue(col,true);}},_updateValue:function(col,_952){var hex=col.toHex();this.value=this.valueNode.value=hex;if(_952&&(!this._timer||this.liveUpdate)){this.onChange(hex);}},_updatePickerLocations:function(col){var _953=this.PICKER_HUE_SELECTOR_H/2,_954=this.PICKER_SAT_SELECTOR_H/2,_955=this.PICKER_SAT_SELECTOR_W/2;var hsv=col.toHsv(),ypos=Math.round(this.PICKER_HUE_H-hsv.h/360*this.PICKER_HUE_H)-_953,_956=Math.round(hsv.s/100*this.PICKER_SAT_VAL_W)-_955,_957=Math.round(this.PICKER_SAT_VAL_H-hsv.v/100*this.PICKER_SAT_VAL_H)-_954;if(this.animatePoint){d.fx.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:ypos,left:0}).play();d.fx.slideTo({node:this.cursorNode,duration:this.slideDuration,top:_957,left:_956}).play();}else{d.style(this.hueCursorNode,"top",ypos+"px");d.style(this.cursorNode,{left:_956+"px",top:_957+"px"});}if(hsv.h!=this._hue){this._setHue(hsv.h);}},_updateColorInputs:function(col){var hex=col.toHex();if(this.showRgb){this.Rval.value=col.r;this.Gval.value=col.g;this.Bval.value=col.b;}if(this.showHsv){var hsv=col.toHsv();this.Hval.value=Math.round((hsv.h));this.Sval.value=Math.round(hsv.s);this.Vval.value=Math.round(hsv.v);}if(this.showHex){this.hexCode.value=hex;}this.previewNode.style.backgroundColor=hex;if(this.webSafe){this.safePreviewNode.style.backgroundColor=_93e(hex);}},_setHuePoint:function(evt){var _958=(this.PICKER_HUE_SELECTOR_H/2);var ypos=evt.layerY-_958;if(this.animatePoint){d.fx.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:ypos,left:0,onEnd:d.hitch(this,function(){this._updateColor(true);dijit.focus(this.hueCursorNode);})}).play();}else{d.style(this.hueCursorNode,"top",ypos+"px");this._updateColor(false);}},_setPoint:function(evt){var _959=this.PICKER_SAT_SELECTOR_H/2;var _95a=this.PICKER_SAT_SELECTOR_W/2;var _95b=evt.layerY-_959;var _95c=evt.layerX-_95a;if(evt){dijit.focus(evt.target);}if(this.animatePoint){d.fx.slideTo({node:this.cursorNode,duration:this.slideDuration,top:_95b,left:_95c,onEnd:d.hitch(this,function(){this._updateColor(true);dijit.focus(this.cursorNode);})}).play();}else{d.style(this.cursorNode,{left:_95c+"px",top:_95b+"px"});this._updateColor(false);}},_handleKey:function(e){},focus:function(){if(!this._focused){dijit.focus(this.focusNode);}},_stopDrag:function(e){dojo.stopEvent(e);},destroy:function(){this.inherited(arguments);dojo.forEach(this._subs,function(sub){dojo.unsubscribe(sub);});delete this._subs;}});})(dojo);}if(!dojo._hasResource["dojox.storage.Provider"]){dojo._hasResource["dojox.storage.Provider"]=true;dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){console.warn("dojox.storage.initialize not implemented");},isAvailable:function(){console.warn("dojox.storage.isAvailable not implemented");},put:function(key,_95d,_95e,_95f){console.warn("dojox.storage.put not implemented");},get:function(key,_960){console.warn("dojox.storage.get not implemented");},hasKey:function(key,_961){return !!this.get(key,_961);},getKeys:function(_962){console.warn("dojox.storage.getKeys not implemented");},clear:function(_963){console.warn("dojox.storage.clear not implemented");},remove:function(key,_964){console.warn("dojox.storage.remove not implemented");},getNamespaces:function(){console.warn("dojox.storage.getNamespaces not implemented");},isPermanent:function(){console.warn("dojox.storage.isPermanent not implemented");},getMaximumSize:function(){console.warn("dojox.storage.getMaximumSize not implemented");},putMultiple:function(keys,_965,_966,_967){for(var i=0;i<keys.length;i++){dojox.storage.put(keys[i],_965[i],_966,_967);}},getMultiple:function(keys,_968){var _969=[];for(var i=0;i<keys.length;i++){_969.push(dojox.storage.get(keys[i],_968));}return _969;},removeMultiple:function(keys,_96a){for(var i=0;i<keys.length;i++){dojox.storage.remove(keys[i],_96a);}},isValidKeyArray:function(keys){if(keys===null||keys===undefined||!dojo.isArray(keys)){return false;}return !dojo.some(keys,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){console.warn("dojox.storage.showSettingsUI not implemented");},hideSettingsUI:function(){console.warn("dojox.storage.hideSettingsUI not implemented");},isValidKey:function(_96b){if(_96b===null||_96b===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_96b);},getResourceList:function(){return [];}});}if(!dojo._hasResource["dojox.storage.manager"]){dojo._hasResource["dojox.storage.manager"]=true;dojo.provide("dojox.storage.manager");dojox.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(name,_96c){this.providers.push(_96c);this.providers[name]=_96c;};this.setProvider=function(_96d){};this.autodetect=function(){if(this._initialized){return;}var _96e=dojo.config["forceStorageProvider"]||false;var _96f;for(var i=0;i<this.providers.length;i++){_96f=this.providers[i];if(_96e&&_96e==_96f.declaredClass){_96f.isAvailable();break;}else{if(!_96e&&_96f.isAvailable()){break;}}}if(!_96f){this._initialized=true;this.available=false;this.currentProvider=null;console.warn("No storage provider found for this platform");this.loaded();return;}this.currentProvider=_96f;dojo.mixin(dojox.storage,this.currentProvider);dojox.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(func){this._onLoadListeners.push(func);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++){if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&dojox.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_970){try{var _971=eval("new "+_970+"()");var _972=_971.isAvailable();if(!_972){return false;}return _972;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){console.debug(e);}});};this.getResourceList=function(){var _973=[];dojo.forEach(dojox.storage.manager.providers,function(_974){_973=_973.concat(_974.getResourceList());});return _973;};};}if(!dojo._hasResource["dojox.storage.LocalStorageProvider"]){dojo._hasResource["dojox.storage.LocalStorageProvider"]=true;dojo.provide("dojox.storage.LocalStorageProvider");dojo.declare("dojox.storage.LocalStorageProvider",[dojox.storage.Provider],{store:null,initialize:function(){this.store=localStorage;this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return typeof localStorage!="undefined";},put:function(key,_975,_976,_977){this._assertIsValidKey(key);_977=_977||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_977);var _978=this.getFullKey(key,_977);_975=dojo.toJson(_975);try{this.store.setItem(_978,_975);if(_976){_976(this.SUCCESS,key,null,_977);}}catch(e){if(_976){_976(this.FAILED,key,e.toString(),_977);}}},get:function(key,_979){this._assertIsValidKey(key);_979=_979||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_979);key=this.getFullKey(key,_979);return dojo.fromJson(this.store.getItem(key));},getKeys:function(_97a){_97a=_97a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_97a);_97a="__"+_97a+"_";var keys=[];for(var i=0;i<this.store.length;i++){var _97b=this.store.key(i);if(this._beginsWith(_97b,_97a)){_97b=_97b.substring(_97a.length);keys.push(_97b);}}return keys;},clear:function(_97c){_97c=_97c||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_97c);_97c="__"+_97c+"_";var keys=[];for(var i=0;i<this.store.length;i++){if(this._beginsWith(this.store.key(i),_97c)){keys.push(this.store.key(i));}}dojo.forEach(keys,dojo.hitch(this.store,"removeItem"));},remove:function(key,_97d){_97d=_97d||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_97d);this.store.removeItem(this.getFullKey(key,_97d));},getNamespaces:function(){var _97e=[this.DEFAULT_NAMESPACE];var _97f={};_97f[this.DEFAULT_NAMESPACE]=true;var _980=/^__([^_]*)_/;for(var i=0;i<this.store.length;i++){var _981=this.store.key(i);if(_980.test(_981)==true){var _982=_981.match(_980)[1];if(typeof _97f[_982]=="undefined"){_97f[_982]=true;_97e.push(_982);}}}return _97e;},isPermanent:function(){return true;},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},isValidKey:function(_983){if(_983===null||_983===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_983);},isValidNamespace:function(_984){if(_984===null||_984===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_984);},getFullKey:function(key,_985){return "__"+_985+"_"+key;},_beginsWith:function(_986,_987){if(_987.length>_986.length){return false;}return _986.substring(0,_987.length)===_987;},_assertIsValidNamespace:function(_988){if(this.isValidNamespace(_988)===false){throw new Error("Invalid namespace given: "+_988);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});dojox.storage.manager.register("dojox.storage.LocalStorageProvider",new dojox.storage.LocalStorageProvider());}if(!dojo._hasResource["dojo.gears"]){dojo._hasResource["dojo.gears"]=true;dojo.provide("dojo.gears");dojo.getObject("gears",true,dojo);dojo.gears._gearsObject=function(){var _989;var _98a;var _98b=dojo.getObject("google.gears");if(_98b){return _98b;}if(typeof GearsFactory!="undefined"){_989=new GearsFactory();}else{if(dojo.isIE){try{_989=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_989=document.createElement("object");_989.setAttribute("type","application/x-googlegears");_989.setAttribute("width",0);_989.setAttribute("height",0);_989.style.display="none";document.documentElement.appendChild(_989);}}}if(!_989){return null;}dojo.setObject("google.gears.factory",_989);return dojo.getObject("google.gears");};dojo.gears.available=(!!dojo.gears._gearsObject())||0;}if(!dojo._hasResource["dojox.sql._crypto"]){dojo._hasResource["dojox.sql._crypto"]=true;dojo.provide("dojox.sql._crypto");dojo.mixin(dojox.sql._crypto,{_POOL_SIZE:100,encrypt:function(_98c,_98d,_98e){this._initWorkerPool();var msg={plaintext:_98c,password:_98d};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_98e);},decrypt:function(_98f,_990,_991){this._initWorkerPool();var msg={ciphertext:_98f,password:_990};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_991);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var self=this;this._manager.onmessage=function(msg,_992){var _993=self._employed["_"+_992];self._employed["_"+_992]=undefined;self._unemployed.push("_"+_992);if(self._handleMessage.length){var _994=self._handleMessage.shift();self._assignWork(_994.msg,_994.callback);}_993(msg);};var _995="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var code=_995+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(code));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_996){if(!this._handleMessage.length&&this._unemployed.length){var _997=this._unemployed.shift().substring(1);this._employed["_"+_997]=_996;this._manager.sendMessage(msg,parseInt(_997,10));}else{this._handleMessage={msg:msg,callback:_996};}},_workerHandler:function(msg,_998){var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _999(_99a,w){var Nb=4;var Nr=w.length/Nb-1;var _99b=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_99b[i%4][Math.floor(i/4)]=_99a[i];}_99b=_99c(_99b,w,0,Nb);for(var _99d=1;_99d<Nr;_99d++){_99b=_99e(_99b,Nb);_99b=_99f(_99b,Nb);_99b=_9a0(_99b,Nb);_99b=_99c(_99b,w,_99d,Nb);}_99b=_99e(_99b,Nb);_99b=_99f(_99b,Nb);_99b=_99c(_99b,w,Nr,Nb);var _9a1=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_9a1[i]=_99b[i%4][Math.floor(i/4)];}return _9a1;};function _99e(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=Sbox[s[r][c]];}}return s;};function _99f(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _9a0(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _99c(_9a2,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_9a2[r][c]^=w[rnd*4+c][r];}}return _9a2;};function _9a3(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){temp[t]=w[i-1][t];}if(i%Nk==0){temp=_9a4(_9a5(temp));for(var t=0;t<4;t++){temp[t]^=Rcon[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){temp=_9a4(temp);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^temp[t];}}return w;};function _9a4(w){for(var i=0;i<4;i++){w[i]=Sbox[w[i]];}return w;};function _9a5(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _9a6(_9a7,_9a8,_9a9){if(!(_9a9==128||_9a9==192||_9a9==256)){return "";}var _9aa=_9a9/8;var _9ab=new Array(_9aa);for(var i=0;i<_9aa;i++){_9ab[i]=_9a8.charCodeAt(i)&255;}var key=_999(_9ab,_9a3(_9ab));key=key.concat(key.slice(0,_9aa-16));var _9ac=16;var _9ad=new Array(_9ac);var _9ae=(new Date()).getTime();for(var i=0;i<4;i++){_9ad[i]=(_9ae>>>i*8)&255;}for(var i=0;i<4;i++){_9ad[i+4]=(_9ae/4294967296>>>i*8)&255;}var _9af=_9a3(key);var _9b0=Math.ceil(_9a7.length/_9ac);var _9b1=new Array(_9b0);for(var b=0;b<_9b0;b++){for(var c=0;c<4;c++){_9ad[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_9ad[15-c-4]=(b/4294967296>>>c*8);}var _9b2=_999(_9ad,_9af);var _9b3=b<_9b0-1?_9ac:(_9a7.length-1)%_9ac+1;var ct="";for(var i=0;i<_9b3;i++){var _9b4=_9a7.charCodeAt(b*_9ac+i);var _9b5=_9b4^_9b2[i];ct+=String.fromCharCode(_9b5);}_9b1[b]=_9b6(ct);}var _9b7="";for(var i=0;i<8;i++){_9b7+=String.fromCharCode(_9ad[i]);}_9b7=_9b6(_9b7);return _9b7+"-"+_9b1.join("-");};function _9b8(_9b9,_9ba,_9bb){if(!(_9bb==128||_9bb==192||_9bb==256)){return "";}var _9bc=_9bb/8;var _9bd=new Array(_9bc);for(var i=0;i<_9bc;i++){_9bd[i]=_9ba.charCodeAt(i)&255;}var _9be=_9a3(_9bd);var key=_999(_9bd,_9be);key=key.concat(key.slice(0,_9bc-16));var _9bf=_9a3(key);_9b9=_9b9.split("-");var _9c0=16;var _9c1=new Array(_9c0);var _9c2=_9c3(_9b9[0]);for(var i=0;i<8;i++){_9c1[i]=_9c2.charCodeAt(i);}var _9c4=new Array(_9b9.length-1);for(var b=1;b<_9b9.length;b++){for(var c=0;c<4;c++){_9c1[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_9c1[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _9c5=_999(_9c1,_9bf);_9b9[b]=_9c3(_9b9[b]);var pt="";for(var i=0;i<_9b9[b].length;i++){var _9c6=_9b9[b].charCodeAt(i);var _9c7=_9c6^_9c5[i];pt+=String.fromCharCode(_9c7);}_9c4[b-1]=pt;}return _9c4.join("");};function _9b6(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _9c3(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _9c8(_9c9,_9ca){return _9a6(_9c9,_9ca,256);};function _9cb(_9cc,_9cd){return _9b8(_9cc,_9cd,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _9ce=arg.plaintext;var _9cf=arg.password;var _9d0=_9c8(_9ce,_9cf);gearsWorkerPool.sendMessage(String(_9d0),_998);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _9d1=arg.ciphertext;var _9cf=arg.password;var _9d0=_9cb(_9d1,_9cf);gearsWorkerPool.sendMessage(String(_9d0),_998);}}}});}if(!dojo._hasResource["dojox.sql._base"]){dojo._hasResource["dojox.sql._base"]=true;dojo.provide("dojox.sql._base");dojo.mixin(dojox.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?dojox.sql.debug:false),open:function(_9d2){if(this._dbOpen&&(!_9d2||_9d2==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_9d2){_9d2=this.dbName;}try{this._initDb();this.db.open(_9d2);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_9d3){if(dojo.isIE){return;}if(!this._dbOpen&&(!_9d3||_9d3==this.dbName)){return;}if(!_9d3){_9d3=this.dbName;}try{this.db.close(_9d3);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_9d4){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _9d5=null;var _9d6=null;var args=dojo._toArray(_9d4);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_9d5=args.splice(args.length-1,1)[0];_9d6=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _9d7;if(this._needsEncrypt(sql)){_9d7=new dojox.sql._SQLCrypto("encrypt",sql,_9d6,args,_9d5);return null;}else{if(this._needsDecrypt(sql)){_9d7=new dojox.sql._SQLCrypto("decrypt",sql,_9d6,args,_9d5);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;console.debug("SQL Exception: "+exp);if(this._autoClose){try{this.close();}catch(e){console.debug("Error closing database: "+e.message||e);}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(dojox.off){dojox.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";console.debug(msg);},_normalizeResults:function(rs){var _9d8=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _9d9=rs.fieldName(i);var _9da=rs.field(i);row[_9d9]=_9da;}_9d8.push(row);rs.next();}rs.close();return _9d8;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_9db,sql,_9dc,args,_9dd){if(_9db=="encrypt"){this._execEncryptSQL(sql,_9dc,args,_9dd);}else{this._execDecryptSQL(sql,_9dc,args,_9dd);}},_execEncryptSQL:function(sql,_9de,args,_9df){var _9e0=this._stripCryptoSQL(sql);var _9e1=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_9e0,_9de,args,_9e1,function(_9e2){var _9e3=false;var _9e4=[];var exp=null;try{_9e4=dojox.sql.db.execute(_9e0,_9e2);}catch(execError){_9e3=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_9df(null,true,exp.toString());return;}_9e4=dojox.sql._normalizeResults(_9e4);if(dojox.sql._autoClose){dojox.sql.close();}if(dojox.sql._needsDecrypt(sql)){var _9e5=self._determineDecryptedColumns(sql);self._decrypt(_9e4,_9e5,_9de,function(_9e6){_9df(_9e6,false,null);});}else{_9df(_9e4,false,null);}});},_execDecryptSQL:function(sql,_9e7,args,_9e8){var _9e9=this._stripCryptoSQL(sql);var _9ea=this._determineDecryptedColumns(sql);var _9eb=false;var _9ec=[];var exp=null;try{_9ec=dojox.sql.db.execute(_9e9,args);}catch(execError){_9eb=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_9e8(_9ec,true,exp.toString());return;}_9ec=dojox.sql._normalizeResults(_9ec);if(dojox.sql._autoClose){dojox.sql.close();}this._decrypt(_9ec,_9ea,_9e7,function(_9ed){_9e8(_9ed,false,null);});},_encrypt:function(sql,_9ee,args,_9ef,_9f0){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_9ef[i]){var _9f1=args[i];var _9f2=i;this._totalCrypto++;dojox.sql._crypto.encrypt(_9f1,_9ee,dojo.hitch(this,function(_9f3){this._finalArgs[_9f2]=_9f3;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_9f0(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_9f4,_9f5,_9f6,_9f7){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_9f4;for(var i=0;i<_9f4.length;i++){var row=_9f4[i];for(var _9f8 in row){if(_9f5=="*"||_9f5[_9f8]){this._totalCrypto++;var _9f9=row[_9f8];this._decryptSingleColumn(_9f8,_9f9,_9f6,i,function(_9fa){_9f7(_9fa);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _9fb=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_9fb!=null){for(var i=0;i<_9fb.length;i++){var _9fc=_9fb[i];var _9fd=_9fc.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_9fc,_9fd);}}_9fb=sql.match(/DECRYPT\([^\)]*\)/ig);if(_9fb!=null){for(i=0;i<_9fb.length;i++){var _9fe=_9fb[i];var _9ff=_9fe.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_9fe,_9ff);}}return sql;},_flagEncryptedArgs:function(sql,args){var _a00=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _a01;var _a02=0;var _a03=[];while((_a01=_a00.exec(sql))!=null){var _a04=RegExp.lastMatch+"";if(/^[\"\']/.test(_a04)){continue;}var _a05=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_a05=true;}_a03[_a02]=_a05;_a02++;}return _a03;},_determineDecryptedColumns:function(sql){var _a06={};if(/DECRYPT\(\*\)/i.test(sql)){_a06="*";}else{var _a07=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _a08=_a07.exec(sql);while(_a08){var _a09=new String(RegExp.lastMatch);var _a0a=_a09.replace(/DECRYPT\(/i,"");_a0a=_a0a.replace(/\)/,"");_a0a=_a0a.split(/\s*,\s*/);dojo.forEach(_a0a,function(_a0b){if(/\s*\w* AS (\w*)/i.test(_a0b)){_a0b=_a0b.match(/\s*\w* AS (\w*)/i)[1];}_a06[_a0b]=true;});_a08=_a07.exec(sql);}}return _a06;},_decryptSingleColumn:function(_a0c,_a0d,_a0e,_a0f,_a10){dojox.sql._crypto.decrypt(_a0d,_a0e,dojo.hitch(this,function(_a11){this._finalResultSet[_a0f][_a0c]=_a11;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_a10(this._finalResultSet);}}));}});(function(){var _a12=dojox.sql;dojox.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(dojox.sql,_a12);})();}if(!dojo._hasResource["dojox.sql"]){dojo._hasResource["dojox.sql"]=true;dojo.provide("dojox.sql");}if(!dojo._hasResource["dojox.storage.GearsStorageProvider"]){dojo._hasResource["dojox.storage.GearsStorageProvider"]=true;dojo.provide("dojox.storage.GearsStorageProvider");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",dojox.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_a13,_a14,_a15){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_a15=_a15||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_a15)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_a13)){_a13="string:"+_a13;}else{_a13=dojo.toJson(_a13);}try{dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_a15,key);dojox.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_a15,key,_a13);}catch(e){console.debug("dojox.storage.GearsStorageProvider.put:",e);_a14(this.FAILED,key,e.toString(),_a15);return;}if(_a14){_a14(dojox.storage.SUCCESS,key,null,_a15);}},get:function(key,_a16){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_a16=_a16||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_a16)){throw new Error("Invalid namespace given: "+key);}var _a17=dojox.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_a16,key);if(!_a17.length){return null;}else{_a17=_a17[0].value;}if(dojo.isString(_a17)&&(/^string:/.test(_a17))){_a17=_a17.substring("string:".length);}else{_a17=dojo.fromJson(_a17);}return _a17;},getNamespaces:function(){this._initStorage();var _a18=[dojox.storage.DEFAULT_NAMESPACE];var rs=dojox.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=dojox.storage.DEFAULT_NAMESPACE){_a18.push(rs[i].namespace);}}return _a18;},getKeys:function(_a19){this._initStorage();_a19=_a19||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_a19)){throw new Error("Invalid namespace given: "+_a19);}var rs=dojox.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_a19);var _a1a=[];for(var i=0;i<rs.length;i++){_a1a.push(rs[i].key);}return _a1a;},clear:function(_a1b){this._initStorage();_a1b=_a1b||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_a1b)){throw new Error("Invalid namespace given: "+_a1b);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_a1b);},remove:function(key,_a1c){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_a1c=_a1c||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_a1c)){throw new Error("Invalid namespace given: "+key);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_a1c,key);},putMultiple:function(keys,_a1d,_a1e,_a1f){this._initStorage();if(!this.isValidKeyArray(keys)||!_a1d instanceof Array||keys.length!=_a1d.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_a1d+"]");}if(_a1f==null||typeof _a1f=="undefined"){_a1f=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a1f)){throw new Error("Invalid namespace given: "+_a1f);}this._statusHandler=_a1e;try{dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _a20="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _a21=_a1d[i];if(dojo.isString(_a21)){_a21="string:"+_a21;}else{_a21=dojo.toJson(_a21);}dojox.sql.db.execute(_a20,[_a1f,keys[i],_a21]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();}catch(e){console.debug("dojox.storage.GearsStorageProvider.putMultiple:",e);if(_a1e){_a1e(this.FAILED,keys,e.toString(),_a1f);}return;}if(_a1e){_a1e(dojox.storage.SUCCESS,keys,null,_a1f);}},getMultiple:function(keys,_a22){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_a22==null||typeof _a22=="undefined"){_a22=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a22)){throw new Error("Invalid namespace given: "+_a22);}var _a23="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _a24=[];for(var i=0;i<keys.length;i++){var _a25=dojox.sql(_a23,_a22,keys[i]);if(!_a25.length){_a24[i]=null;}else{_a25=_a25[0].value;if(dojo.isString(_a25)&&(/^string:/.test(_a25))){_a24[i]=_a25.substring("string:".length);}else{_a24[i]=dojo.fromJson(_a25);}}}return _a24;},removeMultiple:function(keys,_a26){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_a26==null||typeof _a26=="undefined"){_a26=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a26)){throw new Error("Invalid namespace given: "+_a26);}dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _a27="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){dojox.sql.db.execute(_a27,[_a26,keys[i]]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _a28=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _a29=google.gears.factory.getPermission(_a28,icon,msg);if(!_a29){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{dojox.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");dojox.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){console.debug("dojox.storage.GearsStorageProvider._createTables:",e);throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});dojox.storage.manager.register("dojox.storage.GearsStorageProvider",new dojox.storage.GearsStorageProvider());})();}}if(!dojo._hasResource["dojox.storage.WhatWGStorageProvider"]){dojo._hasResource["dojox.storage.WhatWGStorageProvider"]=true;dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.declare("dojox.storage.WhatWGStorageProvider",[dojox.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){try{var _a2a=globalStorage[location.hostname];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_a2b,_a2c,_a2d){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_a2d=_a2d||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_a2d);this._statusHandler=_a2c;if(dojo.isString(_a2b)){_a2b="string:"+_a2b;}else{_a2b=dojo.toJson(_a2b);}var _a2e=dojo.hitch(this,function(evt){window.removeEventListener("storage",_a2e,false);if(_a2c){_a2c.call(null,this.SUCCESS,key,null,_a2d);}});window.addEventListener("storage",_a2e,false);try{var _a2f=globalStorage[this._domain];_a2f.setItem(key,_a2b);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_a2d);}},get:function(key,_a30){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_a30=_a30||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_a30);var _a31=globalStorage[this._domain];var _a32=_a31.getItem(key);if(_a32==null||_a32==""){return null;}_a32=_a32.value;if(dojo.isString(_a32)&&(/^string:/.test(_a32))){_a32=_a32.substring("string:".length);}else{_a32=dojo.fromJson(_a32);}return _a32;},getNamespaces:function(){var _a33=[this.DEFAULT_NAMESPACE];var _a34={};var _a35=globalStorage[this._domain];var _a36=/^__([^_]*)_/;for(var i=0;i<_a35.length;i++){var _a37=_a35.key(i);if(_a36.test(_a37)==true){var _a38=_a37.match(_a36)[1];if(typeof _a34[_a38]=="undefined"){_a34[_a38]=true;_a33.push(_a38);}}}return _a33;},getKeys:function(_a39){_a39=_a39||this.DEFAULT_NAMESPACE;if(this.isValidKey(_a39)==false){throw new Error("Invalid namespace given: "+_a39);}var _a3a;if(_a39==this.DEFAULT_NAMESPACE){_a3a=new RegExp("^([^_]{2}.*)$");}else{_a3a=new RegExp("^__"+_a39+"_(.*)$");}var _a3b=globalStorage[this._domain];var _a3c=[];for(var i=0;i<_a3b.length;i++){var _a3d=_a3b.key(i);if(_a3a.test(_a3d)==true){_a3d=_a3d.match(_a3a)[1];_a3c.push(_a3d);}}return _a3c;},clear:function(_a3e){_a3e=_a3e||this.DEFAULT_NAMESPACE;if(this.isValidKey(_a3e)==false){throw new Error("Invalid namespace given: "+_a3e);}var _a3f;if(_a3e==this.DEFAULT_NAMESPACE){_a3f=new RegExp("^[^_]{2}");}else{_a3f=new RegExp("^__"+_a3e+"_");}var _a40=globalStorage[this._domain];var keys=[];for(var i=0;i<_a40.length;i++){if(_a3f.test(_a40.key(i))==true){keys[keys.length]=_a40.key(i);}}dojo.forEach(keys,dojo.hitch(_a40,"removeItem"));},remove:function(key,_a41){key=this.getFullKey(key,_a41);var _a42=globalStorage[this._domain];_a42.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_a43){_a43=_a43||this.DEFAULT_NAMESPACE;if(this.isValidKey(_a43)==false){throw new Error("Invalid namespace given: "+_a43);}if(_a43==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_a43+"_"+key;}}});dojox.storage.manager.register("dojox.storage.WhatWGStorageProvider",new dojox.storage.WhatWGStorageProvider());}if(!dojo._hasResource["dojox.flash._base"]){dojo._hasResource["dojox.flash._base"]=true;dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojox.flash=function(){};dojox.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_a44){this.url=url;this._visible=true;if(_a44!==null&&_a44!==undefined){this._visible=_a44;}this._initialize();},addLoadedListener:function(_a45){this._loadedListeners.push(_a45);},addInstallingListener:function(_a46){this._installingListeners.push(_a46);},loaded:function(){dojox.flash.ready=true;if(dojox.flash._loadedListeners.length){for(var i=0;i<dojox.flash._loadedListeners.length;i++){dojox.flash._loadedListeners[i].call(null);}}},installing:function(){if(dojox.flash._installingListeners.length){for(var i=0;i<dojox.flash._installingListeners.length;i++){dojox.flash._installingListeners[i].call(null);}}},_initialize:function(){var _a47=new dojox.flash.Install();dojox.flash.installer=_a47;if(_a47.needed()){_a47.install();}else{dojox.flash.obj=new dojox.flash.Embed(this._visible);dojox.flash.obj.write();dojox.flash.comm=new dojox.flash.Communicator();}}};dojox.flash.Info=function(){this._detectVersion();};dojox.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_a48,_a49,_a4a){_a4a=parseFloat("."+_a4a);if(this.versionMajor>=_a48&&this.versionMinor>=_a49&&this.versionRevision>=_a4a){return true;}else{return false;}},_detectVersion:function(){var _a4b;for(var _a4c=25;_a4c>0;_a4c--){if(dojo.isIE){var axo;try{if(_a4c>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_a4c);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_a4c==6){axo.AllowScriptAccess="always";}_a4b=axo.GetVariable("$version");}}catch(e){continue;}}else{_a4b=this._JSFlashInfo(_a4c);}if(_a4b==-1){this.capable=false;return;}else{if(_a4b!=0){var _a4d;if(dojo.isIE){var _a4e=_a4b.split(" ");var _a4f=_a4e[1];_a4d=_a4f.split(",");}else{_a4d=_a4b.split(".");}this.versionMajor=_a4d[0];this.versionMinor=_a4d[1];this.versionRevision=_a4d[2];var _a50=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_a50);this.capable=true;break;}}}},_JSFlashInfo:function(_a51){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _a52=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _a53=navigator.plugins["Shockwave Flash"+_a52].description;var _a54=_a53.split(" ");var _a55=_a54[2].split(".");var _a56=_a55[0];var _a57=_a55[1];var _a58=(_a54[3]||_a54[4]).split("r");var _a59=_a58[1]>0?_a58[1]:0;var _a5a=_a56+"."+_a57+"."+_a59;return _a5a;}}return -1;}};dojox.flash.Embed=function(_a5b){this._visible=_a5b;};dojox.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_a5c){var _a5d;var _a5e=dojox.flash.url;var _a5f=_a5e;var _a60=_a5e;var _a61=dojo.baseUrl;var _a62=document.location.protocol+"//"+document.location.host;if(_a5c){var _a63=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _a64=escape(document.title);_a5f+="?MMredirectURL="+_a63+"&MMplayerType=ActiveX"+"&MMdoctitle="+_a64+"&baseUrl="+escape(_a61)+"&xdomain="+escape(_a62);_a60+="?MMredirectURL="+_a63+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_a61)+"&xdomain="+escape(_a62);}else{_a5f+="?cachebust="+new Date().getTime();_a5f+="&baseUrl="+escape(_a61);_a5f+="&xdomain="+escape(_a62);}if(_a60.indexOf("?")==-1){_a60+="?baseUrl="+escape(_a61);}else{_a60+="&baseUrl="+escape(_a61);}_a60+="&xdomain="+escape(_a62);_a5d="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_a5f+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_a60+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _a65=this.id+"Container";if(dojo.byId(_a65)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_a5d;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_a66){var _a67=dojo.byId(this.id+"Container");if(_a66){_a67.style.position="absolute";_a67.style.visibility="visible";}else{_a67.style.position="absolute";_a67.style.y="-1000px";_a67.style.visibility="hidden";}},center:function(){var _a68=this.width;var _a69=this.height;var _a6a=dojo.window.getBox();var x=_a6a.l+(_a6a.w-_a68)/2;var y=_a6a.t+(_a6a.h-_a69)/2;var _a6b=dojo.byId(this.id+"Container");_a6b.style.top=y+"px";_a6b.style.left=x+"px";}};dojox.flash.Communicator=function(){};dojox.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_a6c){var _a6d=dojo.hitch(this,function(){var _a6e=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_a6e[i]=this._encodeData(arguments[i]);}var _a6f=this._execFlash(_a6c,_a6e);_a6f=this._decodeData(_a6f);return _a6f;});this[_a6c]=_a6d;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_a70,_a71){var _a72=dojox.flash.obj.get();_a71=(_a71)?_a71:[];for(var i=0;i<_a71;i++){if(typeof _a71[i]=="string"){_a71[i]=this._encodeData(_a71[i]);}}var _a73=function(){return eval(_a72.CallFunction("<invoke name=\""+_a70+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_a71,0)+"</invoke>"));};var _a74=_a73.call(_a71);if(typeof _a74=="string"){_a74=this._decodeData(_a74);}return _a74;}};dojox.flash.Install=function(){};dojox.flash.Install.prototype={needed:function(){if(!dojox.flash.info.capable){return true;}if(!dojox.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _a75;dojox.flash.info.installing=true;dojox.flash.installing();if(dojox.flash.info.capable==false){_a75=new dojox.flash.Embed(false);_a75.write();}else{if(dojox.flash.info.isVersionOrAbove(6,0,65)){_a75=new dojox.flash.Embed(false);_a75.write(true);_a75.setVisible(true);_a75.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){dojox.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};dojox.flash.info=new dojox.flash.Info();}if(!dojo._hasResource["dojox.flash"]){dojo._hasResource["dojox.flash"]=true;dojo.provide("dojox.flash");}if(!dojo._hasResource["dojox.storage.FlashStorageProvider"]){dojo._hasResource["dojox.storage.FlashStorageProvider"]=true;dojo.provide("dojox.storage.FlashStorageProvider");dojo.declare("dojox.storage.FlashStorageProvider",dojox.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}dojox.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _a76=dojo.moduleUrl("dojox","storage/Storage.swf").toString();dojox.flash.setSwf(_a76,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_a77){if(_a77===null||typeof _a77==="undefined"||isNaN(_a77)){throw new Error("Invalid argunment: "+_a77);}dojox.flash.comm.setFlushDelay(String(_a77));},getFlushDelay:function(){return Number(dojox.flash.comm.getFlushDelay());},flush:function(_a78){if(_a78==null||typeof _a78=="undefined"){_a78=dojox.storage.DEFAULT_NAMESPACE;}dojox.flash.comm.flush(_a78);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_a79,_a7a,_a7b){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_a7b){_a7b=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a7b)){throw new Error("Invalid namespace given: "+_a7b);}this._statusHandler=_a7a;if(dojo.isString(_a79)){_a79="string:"+_a79;}else{_a79=dojo.toJson(_a79);}dojox.flash.comm.put(key,_a79,_a7b);},putMultiple:function(keys,_a7c,_a7d,_a7e){if(!this.isValidKeyArray(keys)||!_a7c instanceof Array||keys.length!=_a7c.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_a7c+"]");}if(!_a7e){_a7e=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a7e)){throw new Error("Invalid namespace given: "+_a7e);}this._statusHandler=_a7d;var _a7f=keys.join(",");var _a80=[];for(var i=0;i<_a7c.length;i++){if(dojo.isString(_a7c[i])){_a7c[i]="string:"+_a7c[i];}else{_a7c[i]=dojo.toJson(_a7c[i]);}_a80[i]=_a7c[i].length;}var _a81=_a7c.join("");var _a82=_a80.join(",");dojox.flash.comm.putMultiple(_a7f,_a81,_a82,_a7e);},get:function(key,_a83){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_a83){_a83=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a83)){throw new Error("Invalid namespace given: "+_a83);}var _a84=dojox.flash.comm.get(key,_a83);if(_a84==""){return null;}return this._destringify(_a84);},getMultiple:function(keys,_a85){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_a85){_a85=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a85)){throw new Error("Invalid namespace given: "+_a85);}var _a86=keys.join(",");var _a87=dojox.flash.comm.getMultiple(_a86,_a85);var _a88=eval("("+_a87+")");for(var i=0;i<_a88.length;i++){_a88[i]=(_a88[i]=="")?null:this._destringify(_a88[i]);}return _a88;},_destringify:function(_a89){if(dojo.isString(_a89)&&(/^string:/.test(_a89))){_a89=_a89.substring("string:".length);}else{_a89=dojo.fromJson(_a89);}return _a89;},getKeys:function(_a8a){if(!_a8a){_a8a=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a8a)){throw new Error("Invalid namespace given: "+_a8a);}var _a8b=dojox.flash.comm.getKeys(_a8a);if(_a8b==null||_a8b=="null"){_a8b="";}_a8b=_a8b.split(",");_a8b.sort();return _a8b;},getNamespaces:function(){var _a8c=dojox.flash.comm.getNamespaces();if(_a8c==null||_a8c=="null"){_a8c=dojox.storage.DEFAULT_NAMESPACE;}_a8c=_a8c.split(",");_a8c.sort();return _a8c;},clear:function(_a8d){if(!_a8d){_a8d=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a8d)){throw new Error("Invalid namespace given: "+_a8d);}dojox.flash.comm.clear(_a8d);},remove:function(key,_a8e){if(!_a8e){_a8e=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a8e)){throw new Error("Invalid namespace given: "+_a8e);}dojox.flash.comm.remove(key,_a8e);},removeMultiple:function(keys,_a8f){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_a8f){_a8f=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_a8f)){throw new Error("Invalid namespace given: "+_a8f);}var _a90=keys.join(",");dojox.flash.comm.removeMultiple(_a90,_a8f);},isPermanent:function(){return true;},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){dojox.flash.comm.showSettings();dojox.flash.obj.setVisible(true);dojox.flash.obj.center();},hideSettingsUI:function(){dojox.flash.obj.setVisible(false);if(dojo.isFunction(dojox.storage.onHideSettingsUI)){dojox.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;dojox.storage.manager.loaded();},_onStatus:function(_a91,key,_a92){var ds=dojox.storage;var dfo=dojox.flash.obj;if(_a91==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_a91,key,null,_a92);}}});dojox.storage.manager.register("dojox.storage.FlashStorageProvider",new dojox.storage.FlashStorageProvider());}if(!dojo._hasResource["dojox.storage.BehaviorStorageProvider"]){dojo._hasResource["dojox.storage.BehaviorStorageProvider"]=true;dojo.provide("dojox.storage.BehaviorStorageProvider");dojo.declare("dojox.storage.BehaviorStorageProvider",[dojox.storage.Provider],{store:null,storeName:"__dojox_BehaviorStorage",keys:[],initialize:function(){try{this.store=this._createStore();this.store.load(this.storeName);}catch(e){throw new Error("Store is not available: "+e);}var keys=this.get("keys","dojoxSystemNS");this.keys=keys||[];this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return dojo.isIE&&dojo.isIE>=5;},_createStore:function(){var _a93=dojo.create("link",{id:this.storeName+"Node",style:{"display":"none"}},dojo.query("head")[0]);_a93.addBehavior("#default#userdata");return _a93;},put:function(key,_a94,_a95,_a96){this._assertIsValidKey(key);_a96=_a96||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a96);var _a97=this.getFullKey(key,_a96);_a94=dojo.toJson(_a94);this.store.setAttribute(_a97,_a94);this.store.save(this.storeName);var _a98=this.store.getAttribute(_a97)===_a94;if(_a98){this._addKey(_a97);this.store.setAttribute("__dojoxSystemNS_keys",dojo.toJson(this.keys));this.store.save(this.storeName);}if(_a95){_a95(_a98?this.SUCCESS:this.FAILED,key,null,_a96);}},get:function(key,_a99){this._assertIsValidKey(key);_a99=_a99||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a99);key=this.getFullKey(key,_a99);return dojo.fromJson(this.store.getAttribute(key));},getKeys:function(_a9a){_a9a=_a9a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a9a);_a9a="__"+_a9a+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _a9b=this.keys[i];if(this._beginsWith(_a9b,_a9a)){_a9b=_a9b.substring(_a9a.length);keys.push(_a9b);}}return keys;},clear:function(_a9c){_a9c=_a9c||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a9c);_a9c="__"+_a9c+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _a9d=this.keys[i];if(this._beginsWith(_a9d,_a9c)){keys.push(_a9d);}}dojo.forEach(keys,function(key){this.store.removeAttribute(key);this._removeKey(key);},this);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},remove:function(key,_a9e){this._assertIsValidKey(key);_a9e=_a9e||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a9e);key=this.getFullKey(key,_a9e);this.store.removeAttribute(key);this._removeKey(key);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},getNamespaces:function(){var _a9f=[this.DEFAULT_NAMESPACE];var _aa0={};_aa0[this.DEFAULT_NAMESPACE]=true;var _aa1=/^__([^_]*)_/;for(var i=0;i<this.keys.length;i++){var _aa2=this.keys[i];if(_aa1.test(_aa2)==true){var _aa3=_aa2.match(_aa1)[1];if(typeof _aa0[_aa3]=="undefined"){_aa0[_aa3]=true;_a9f.push(_aa3);}}}return _a9f;},isPermanent:function(){return true;},getMaximumSize:function(){return 64;},hasSettingsUI:function(){return false;},isValidKey:function(_aa4){if(_aa4===null||_aa4===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_aa4);},isValidNamespace:function(_aa5){if(_aa5===null||_aa5===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_aa5);},getFullKey:function(key,_aa6){return "__"+_aa6+"_"+key;},_beginsWith:function(_aa7,_aa8){if(_aa8.length>_aa7.length){return false;}return _aa7.substring(0,_aa8.length)===_aa8;},_assertIsValidNamespace:function(_aa9){if(this.isValidNamespace(_aa9)===false){throw new Error("Invalid namespace given: "+_aa9);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}},_addKey:function(key){this._removeKey(key);this.keys.push(key);},_removeKey:function(key){this.keys=dojo.filter(this.keys,function(item){return item!==key;},this);}});dojox.storage.manager.register("dojox.storage.BehaviorStorageProvider",new dojox.storage.BehaviorStorageProvider());}if(!dojo._hasResource["dojox.storage.CookieStorageProvider"]){dojo._hasResource["dojox.storage.CookieStorageProvider"]=true;dojo.provide("dojox.storage.CookieStorageProvider");dojo.declare("dojox.storage.CookieStorageProvider",[dojox.storage.Provider],{store:null,cookieName:"dojoxStorageCookie",storageLife:730,initialize:function(){this.store=dojo.fromJson(dojo.cookie(this.cookieName))||{};this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return dojo.cookie.isSupported();},put:function(key,_aaa,_aab,_aac){this._assertIsValidKey(key);_aac=_aac||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_aac);fullKey=this.getFullKey(key,_aac);this.store[fullKey]=dojo.toJson(_aaa);this._save();var _aad=dojo.toJson(this.store)===dojo.cookie(this.cookieName);if(!_aad){this.remove(key,_aac);}if(_aab){_aab(_aad?this.SUCCESS:this.FAILED,key,null,_aac);}},get:function(key,_aae){this._assertIsValidKey(key);_aae=_aae||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_aae);key=this.getFullKey(key,_aae);return this.store[key]?dojo.fromJson(this.store[key]):null;},getKeys:function(_aaf){_aaf=_aaf||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_aaf);_aaf="__"+_aaf+"_";var keys=[];for(var _ab0 in this.store){if(this._beginsWith(_ab0,_aaf)){_ab0=_ab0.substring(_aaf.length);keys.push(_ab0);}}return keys;},clear:function(_ab1){_ab1=_ab1||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ab1);_ab1="__"+_ab1+"_";for(var _ab2 in this.store){if(this._beginsWith(_ab2,_ab1)){delete (this.store[_ab2]);}}this._save();},remove:function(key,_ab3){_ab3=_ab3||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ab3);this._assertIsValidKey(key);key=this.getFullKey(key,_ab3);delete this.store[key];this._save();},getNamespaces:function(){var _ab4=[this.DEFAULT_NAMESPACE];var _ab5={};_ab5[this.DEFAULT_NAMESPACE]=true;var _ab6=/^__([^_]*)_/;for(var _ab7 in this.store){if(_ab6.test(_ab7)==true){var _ab8=_ab7.match(_ab6)[1];if(typeof _ab5[_ab8]=="undefined"){_ab5[_ab8]=true;_ab4.push(_ab8);}}}return _ab4;},isPermanent:function(){return true;},getMaximumSize:function(){return 4;},hasSettingsUI:function(){return false;},isValidKey:function(_ab9){if(_ab9===null||_ab9===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_ab9);},isValidNamespace:function(_aba){if(_aba===null||_aba===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_aba);},getFullKey:function(key,_abb){return "__"+_abb+"_"+key;},_save:function(){dojo.cookie(this.cookieName,dojo.toJson(this.store),{expires:this.storageLife});},_beginsWith:function(_abc,_abd){if(_abd.length>_abc.length){return false;}return _abc.substring(0,_abd.length)===_abd;},_assertIsValidNamespace:function(_abe){if(this.isValidNamespace(_abe)===false){throw new Error("Invalid namespace given: "+_abe);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});dojox.storage.manager.register("dojox.storage.CookieStorageProvider",new dojox.storage.CookieStorageProvider());}if(!dojo._hasResource["dojox.storage._common"]){dojo._hasResource["dojox.storage._common"]=true;dojo.provide("dojox.storage._common");dojox.storage.manager.initialize();}if(!dojo._hasResource["dojox.storage"]){dojo._hasResource["dojox.storage"]=true;dojo.provide("dojox.storage");}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_abf){var _ac0=dojo.doc;var doc;_abf=_abf||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _ac1=new DOMParser();doc=_ac1.parseFromString(str,_abf);var de=doc.documentElement;var _ac2="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_ac2){var _ac3=de.getElementsByTagNameNS(_ac2,"sourcetext")[0];if(_ac3){_ac3=_ac3.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_ac3);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_ac0.implementation&&_ac0.implementation.createDocument){if(str&&dojo.trim(str)&&_ac0.createElement){var tmp=_ac0.createElement("xml");tmp.innerHTML=str;var _ac4=_ac0.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_ac5){_ac4.importNode(_ac5,true);});return _ac4;}else{return _ac0.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _ac6=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_ac6.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _ac7="";if(node){dojo.forEach(node.childNodes,function(_ac8){switch(_ac8.nodeType){case 1:case 5:_ac7+=dojox.xml.parser.textContent(_ac8);break;case 3:case 2:case 4:_ac7+=_ac8.nodeValue;}});}return _ac7;}};dojox.xml.parser.replaceChildren=function(node,_ac9){var _aca=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_acb){_aca.push(_acb);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_aca,dojo.destroy);if(!dojo.isArray(_ac9)){node.appendChild(_ac9);}else{dojo.forEach(_ac9,function(_acc){node.appendChild(_acc);});}};dojox.xml.parser.removeChildren=function(node){var _acd=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _acd;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.fx._base"]){dojo._hasResource["dojox.fx._base"]=true;dojo.provide("dojox.fx._base");dojo.mixin(dojox.fx,{anim:dojo.anim,animateProperty:dojo.animateProperty,fadeTo:dojo._fade,fadeIn:dojo.fadeIn,fadeOut:dojo.fadeOut,combine:dojo.fx.combine,chain:dojo.fx.chain,slideTo:dojo.fx.slideTo,wipeIn:dojo.fx.wipeIn,wipeOut:dojo.fx.wipeOut});dojox.fx.sizeTo=function(args){var node=args.node=dojo.byId(args.node),abs="absolute";var _ace=args.method||"chain";if(!args.duration){args.duration=500;}if(_ace=="chain"){args.duration=Math.floor(args.duration/2);}var top,_acf,left,_ad0,_ad1,_ad2=null;var init=(function(n){return function(){var cs=dojo.getComputedStyle(n),pos=cs.position,w=cs.width,h=cs.height;top=(pos==abs?n.offsetTop:parseInt(cs.top)||0);left=(pos==abs?n.offsetLeft:parseInt(cs.left)||0);_ad1=(w=="auto"?0:parseInt(w));_ad2=(h=="auto"?0:parseInt(h));_ad0=left-Math.floor((args.width-_ad1)/2);_acf=top-Math.floor((args.height-_ad2)/2);if(pos!=abs&&pos!="relative"){var ret=dojo.coords(n,true);top=ret.y;left=ret.x;n.style.position=abs;n.style.top=top+"px";n.style.left=left+"px";}};})(node);var _ad3=dojo.animateProperty(dojo.mixin({properties:{height:function(){init();return {end:args.height||0,start:_ad2};},top:function(){return {start:top,end:_acf};}}},args));var _ad4=dojo.animateProperty(dojo.mixin({properties:{width:function(){return {start:_ad1,end:args.width||0};},left:function(){return {start:left,end:_ad0};}}},args));var anim=dojo.fx[(args.method=="combine"?"combine":"chain")]([_ad3,_ad4]);return anim;};dojox.fx.slideBy=function(args){var node=args.node=dojo.byId(args.node),top,left;var init=(function(n){return function(){var cs=dojo.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=dojo.coords(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var _ad5=dojo.animateProperty(dojo.mixin({properties:{top:top+(args.top||0),left:left+(args.left||0)}},args));dojo.connect(_ad5,"beforeBegin",_ad5,init);return _ad5;};dojox.fx.crossFade=function(args){var _ad6=args.nodes[0]=dojo.byId(args.nodes[0]),op1=dojo.style(_ad6,"opacity"),_ad7=args.nodes[1]=dojo.byId(args.nodes[1]),op2=dojo.style(_ad7,"opacity");var _ad8=dojo.fx.combine([dojo[(op1==0?"fadeIn":"fadeOut")](dojo.mixin({node:_ad6},args)),dojo[(op1==0?"fadeOut":"fadeIn")](dojo.mixin({node:_ad7},args))]);return _ad8;};dojox.fx.highlight=function(args){var node=args.node=dojo.byId(args.node);args.duration=args.duration||400;var _ad9=args.color||"#ffff99",_ada=dojo.style(node,"backgroundColor");if(_ada=="rgba(0, 0, 0, 0)"){_ada="transparent";}var anim=dojo.animateProperty(dojo.mixin({properties:{backgroundColor:{start:_ad9,end:_ada}}},args));if(_ada=="transparent"){dojo.connect(anim,"onEnd",anim,function(){node.style.backgroundColor=_ada;});}return anim;};dojox.fx.wipeTo=function(args){args.node=dojo.byId(args.node);var node=args.node,s=node.style;var dir=(args.width?"width":"height"),_adb=args[dir],_adc={};_adc[dir]={start:function(){s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s[dir]="1px";s.display="";s.visibility="";return 1;}else{var now=dojo.style(node,dir);return Math.max(now,1);}},end:_adb};var anim=dojo.animateProperty(dojo.mixin({properties:_adc},args));return anim;};}if(!dojo._hasResource["dojox.fx"]){dojo._hasResource["dojox.fx"]=true;dojo.provide("dojox.fx");}if(!dojo._hasResource["dojox.collections._base"]){dojo._hasResource["dojox.collections._base"]=true;dojo.provide("dojox.collections._base");dojox.collections.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};dojox.collections.Iterator=function(arr){var a=arr;var _add=0;this.element=a[_add]||null;this.atEnd=function(){return (_add>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_add++];return this.element;};this.map=function(fn,_ade){return dojo.map(a,fn,_ade);};this.reset=function(){_add=0;this.element=a[_add];};};dojox.collections.DictionaryIterator=function(obj){var a=[];var _adf={};for(var p in obj){if(!_adf[p]){a.push(obj[p]);}}var _ae0=0;this.element=a[_ae0]||null;this.atEnd=function(){return (_ae0>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_ae0++];return this.element;};this.map=function(fn,_ae1){return dojo.map(a,fn,_ae1);};this.reset=function(){_ae0=0;this.element=a[_ae0];};};}if(!dojo._hasResource["dojox.collections.Dictionary"]){dojo._hasResource["dojox.collections.Dictionary"]=true;dojo.provide("dojox.collections.Dictionary");dojox.collections.Dictionary=function(_ae2){var _ae3={};this.count=0;var _ae4={};this.add=function(k,v){var b=(k in _ae3);_ae3[k]=new dojox.collections.DictionaryEntry(k,v);if(!b){this.count++;}};this.clear=function(){_ae3={};this.count=0;};this.clone=function(){return new dojox.collections.Dictionary(this);};this.contains=this.containsKey=function(k){if(_ae4[k]){return false;}return (_ae3[k]!=null);};this.containsValue=function(v){var e=this.getIterator();while(e.get()){if(e.element.value==v){return true;}}return false;};this.entry=function(k){return _ae3[k];};this.forEach=function(fn,_ae5){var a=[];for(var p in _ae3){if(!_ae4[p]){a.push(_ae3[p]);}}dojo.forEach(a,fn,_ae5);};this.getKeyList=function(){return (this.getIterator()).map(function(_ae6){return _ae6.key;});};this.getValueList=function(){return (this.getIterator()).map(function(_ae7){return _ae7.value;});};this.item=function(k){if(k in _ae3){return _ae3[k].valueOf();}return undefined;};this.getIterator=function(){return new dojox.collections.DictionaryIterator(_ae3);};this.remove=function(k){if(k in _ae3&&!_ae4[k]){delete _ae3[k];this.count--;return true;}return false;};if(_ae2){var e=_ae2.getIterator();while(e.get()){this.add(e.element.key,e.element.value);}}};}if(!dojo._hasResource["dojox.collections.Stack"]){dojo._hasResource["dojox.collections.Stack"]=true;dojo.provide("dojox.collections.Stack");dojox.collections.Stack=function(arr){var q=[];if(arr){q=q.concat(arr);}this.count=q.length;this.clear=function(){q=[];this.count=q.length;};this.clone=function(){return new dojox.collections.Stack(q);};this.contains=function(o){for(var i=0;i<q.length;i++){if(q[i]==o){return true;}}return false;};this.copyTo=function(arr,i){arr.splice(i,0,q);};this.forEach=function(fn,_ae8){dojo.forEach(q,fn,_ae8);};this.getIterator=function(){return new dojox.collections.Iterator(q);};this.peek=function(){return q[(q.length-1)];};this.pop=function(){var r=q.pop();this.count=q.length;return r;};this.push=function(o){this.count=q.push(o);};this.toArray=function(){return [].concat(q);};};}if(!dojo._hasResource["dojox.collections.ArrayList"]){dojo._hasResource["dojox.collections.ArrayList"]=true;dojo.provide("dojox.collections.ArrayList");dojox.collections.ArrayList=function(arr){var _ae9=[];if(arr){_ae9=_ae9.concat(arr);}this.count=_ae9.length;this.add=function(obj){_ae9.push(obj);this.count=_ae9.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=_ae9.length;}else{for(var i=0;i<a.length;i++){_ae9.push(a[i]);}this.count=_ae9.length;}};this.clear=function(){_ae9.splice(0,_ae9.length);this.count=0;};this.clone=function(){return new dojox.collections.ArrayList(_ae9);};this.contains=function(obj){for(var i=0;i<_ae9.length;i++){if(_ae9[i]==obj){return true;}}return false;};this.forEach=function(fn,_aea){dojo.forEach(_ae9,fn,_aea);};this.getIterator=function(){return new dojox.collections.Iterator(_ae9);};this.indexOf=function(obj){for(var i=0;i<_ae9.length;i++){if(_ae9[i]==obj){return i;}}return -1;};this.insert=function(i,obj){_ae9.splice(i,0,obj);this.count=_ae9.length;};this.item=function(i){return _ae9[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){_ae9.splice(i,1);}this.count=_ae9.length;};this.removeAt=function(i){_ae9.splice(i,1);this.count=_ae9.length;};this.reverse=function(){_ae9.reverse();};this.sort=function(fn){if(fn){_ae9.sort(fn);}else{_ae9.sort();}};this.setByIndex=function(i,obj){_ae9[i]=obj;this.count=_ae9.length;};this.toArray=function(){return [].concat(_ae9);};this.toString=function(_aeb){return _ae9.join((_aeb||","));};};}if(!dojo._hasResource["dojox.gfx.matrix"]){dojo._hasResource["dojox.gfx.matrix"]=true;dojo.provide("dojox.gfx.matrix");(function(){var m=dojox.gfx.matrix;var _aec={};m._degToRad=function(_aed){return _aec[_aed]||(_aec[_aed]=(Math.PI*_aed/180));};m._radToDeg=function(_aee){return _aee/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _aef=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_aef,r=dojox.gfx.matrix.normalize(arg[i]);_aef=new m.Matrix2D();_aef.xx=l.xx*r.xx+l.xy*r.yx;_aef.xy=l.xx*r.xy+l.xy*r.yy;_aef.yx=l.yx*r.xx+l.yy*r.yx;_aef.yy=l.yx*r.xy+l.yy*r.yy;_aef.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_aef.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}dojo.mixin(this,_aef);}}else{dojo.mixin(this,arg);}}}};dojo.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});dojo.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_af0){var c=Math.cos(_af0);var s=Math.sin(_af0);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_af1){return m.rotate(m._degToRad(_af1));},skewX:function(_af2){return new m.Matrix2D({xy:Math.tan(_af2)});},skewXg:function(_af3){return m.skewX(m._degToRad(_af3));},skewY:function(_af4){return new m.Matrix2D({yx:Math.tan(_af4)});},skewYg:function(_af5){return m.skewY(m._degToRad(_af5));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_af6){return (_af6 instanceof m.Matrix2D)?_af6:new m.Matrix2D(_af6);},clone:function(_af7){var obj=new m.Matrix2D();for(var i in _af7){if(typeof (_af7[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_af7[i]){obj[i]=_af7[i];}}return obj;},invert:function(_af8){var M=m.normalize(_af8),D=M.xx*M.yy-M.xy*M.yx,M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_af9,x,y){return {x:_af9.xx*x+_af9.xy*y+_af9.dx,y:_af9.yx*x+_af9.yy*y+_af9.dy};},multiplyPoint:function(_afa,a,b){var M=m.normalize(_afa);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiply:function(_afb){var M=m.normalize(_afb);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_afc,x,y){return m.multiply(m.translate(x,y),_afc,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_afd,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_afd),a,b);}return m._sandwich(m.rotate(_afd),a.x,a.y);},rotategAt:function(_afe,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_afe),a,b);}return m._sandwich(m.rotateg(_afe),a.x,a.y);},skewXAt:function(_aff,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_aff),a,b);}return m._sandwich(m.skewX(_aff),a.x,a.y);},skewXgAt:function(_b00,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_b00),a,b);}return m._sandwich(m.skewXg(_b00),a.x,a.y);},skewYAt:function(_b01,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_b01),a,b);}return m._sandwich(m.skewY(_b01),a.x,a.y);},skewYgAt:function(_b02,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_b02),a,b);}return m._sandwich(m.skewYg(_b02),a.x,a.y);}});})();dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D;}if(!dojo._hasResource["dojox.gfx._base"]){dojo._hasResource["dojox.gfx._base"]=true;dojo.provide("dojox.gfx._base");(function(){var g=dojox.gfx,b=g._base;g._hasClass=function(node,_b03){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_b03+" ")>=0;};g._addClass=function(node,_b04){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_b04+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_b04);}};g._removeClass=function(node,_b05){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_b05+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _b06={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},dojo.body());for(var p in _b06){div.style.fontSize=p;_b06[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);return _b06;};var _b07=null;b._getCachedFontMeasurements=function(_b08){if(_b08||!_b07){_b07=b._getFontMeasurements();}return _b07;};var _b09=null,_b0a={};b._getTextBox=function(text,_b0b,_b0c){var m,s,al=arguments.length;if(!_b09){_b09=dojo.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},dojo.body());}m=_b09;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_b0b){for(var i in _b0b){if(i in _b0a){continue;}s[i]=_b0b[i];}}if(al>2&&_b0c){m.className=_b0c;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return dojo.marginBox(m);}};var _b0d=0;b._getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++_b0d);}while(dojo.byId(id));return id;};})();dojo.mixin(dojox.gfx,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _b0e={};return function(type){var t=_b0e[type];if(t){return new t();}t=_b0e[type]=new Function;t.prototype=dojox.gfx["default"+type];return new t();};})(),normalizeColor:function(_b0f){return (_b0f instanceof dojo.Color)?_b0f:new dojo.Color(_b0f);},normalizeParameters:function(_b10,_b11){if(_b11){var _b12={};for(var x in _b10){if(x in _b11&&!(x in _b12)){_b10[x]=_b11[x];}}}return _b10;},makeParameters:function(_b13,_b14){if(!_b14){return dojo.delegate(_b13);}var _b15={};for(var i in _b13){if(!(i in _b15)){_b15[i]=dojo.clone((i in _b14)?_b14[i]:_b13[i]);}}return _b15;},formatNumber:function(x,_b16){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _b17=val.indexOf(".");if(_b17>=0&&val.length-_b17>5){val=x.toFixed(4);}}if(x<0){return val;}return _b16?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=dojox.gfx.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return dojox.gfx._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*dojox.gfx.px_in_pt();},px2pt:function(len){return len/dojox.gfx.px_in_pt();},normalizedLength:function(len){if(len.length==0){return 0;}if(len.length>2){var _b18=dojox.gfx.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_b18;case "in":return val*72*_b18;case "pc":return val*12*_b18;case "mm":return val*dojox.gfx.mm_in_pt*_b18;case "cm":return val*dojox.gfx.cm_in_pt*_b18;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a==b;},switchTo:function(_b19){var ns=dojox.gfx[_b19];if(ns){dojo.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface"],function(name){dojox.gfx[name]=ns[name];});}}});}if(!dojo._hasResource["dojox.gfx"]){dojo._hasResource["dojox.gfx"]=true;dojo.provide("dojox.gfx");dojo.loadInit(function(){var gfx=dojo.getObject("dojox.gfx",true),sl,flag,_b1a;while(!gfx.renderer){if(dojo.config.forceGfxRenderer){dojox.gfx.renderer=dojo.config.forceGfxRenderer;break;}var _b1b=(typeof dojo.config.gfxRenderer=="string"?dojo.config.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var i=0;i<_b1b.length;++i){switch(_b1b[i]){case "svg":if("SVGAngle" in dojo.global){dojox.gfx.renderer="svg";}break;case "vml":if(dojo.isIE){dojox.gfx.renderer="vml";}break;case "silverlight":try{if(dojo.isIE){sl=new ActiveXObject("AgControl.AgControl");if(sl&&sl.IsVersionSupported("1.0")){flag=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){flag=true;}}}catch(e){flag=false;}finally{sl=null;}if(flag){dojox.gfx.renderer="silverlight";}break;case "canvas":if(dojo.global.CanvasRenderingContext2D){dojox.gfx.renderer="canvas";}break;}if(gfx.renderer){break;}}break;}if(dojo.config.isDebug){console.log("gfx renderer = "+gfx.renderer);}if(gfx[gfx.renderer]){gfx.switchTo(gfx.renderer);}else{gfx.loadAndSwitch=gfx.renderer;dojo["require"]("dojox.gfx."+gfx.renderer);}});}if(!dojo._hasResource["dojox.gfx.shape"]){dojo._hasResource["dojox.gfx.shape"]=true;dojo.provide("dojox.gfx.shape");dojo.declare("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();gm=dojox.gfx.matrix;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setShape:function(_b1c){this.shape=dojox.gfx.makeParameters(this.shape,_b1c);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,fill);break;case "radial":f=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,fill);break;case "pattern":f=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,fill);break;}}else{f=dojox.gfx.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_b1d){if(!_b1d){this.strokeStyle=null;return this;}if(typeof _b1d=="string"||dojo.isArray(_b1d)||_b1d instanceof dojo.Color){_b1d={color:_b1d};}var s=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_b1d);s.color=dojox.gfx.normalizeColor(s.color);return this;},setTransform:function(_b1e){this.matrix=dojox.gfx.matrix.clone(_b1e?dojox.gfx.matrix.normalize(_b1e):dojox.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_b1f){return _b1f?this.setTransform([this.matrix,_b1f]):this;},applyLeftTransform:function(_b20){return _b20?this.setTransform([_b20,this.matrix]):this;},applyTransform:function(_b21){return _b21?this.setTransform([this.matrix,_b21]):this;},removeShape:function(_b22){if(this.parent){this.parent.remove(this,_b22);}return this;},_setParent:function(_b23,_b24){this.parent=_b23;return this._updateParentMatrix(_b24);},_updateParentMatrix:function(_b25){this.parentMatrix=_b25?dojox.gfx.matrix.clone(_b25):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=dojox.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});dojox.gfx.shape._eventsProcessing={connect:function(name,_b26,_b27){return arguments.length>2?dojo.connect(this.getEventSource(),name,_b26,_b27):dojo.connect(this.getEventSource(),name,_b26);},disconnect:function(_b28){dojo.disconnect(_b28);}};dojo.extend(dojox.gfx.shape.Shape,dojox.gfx.shape._eventsProcessing);dojox.gfx.shape.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_b29){var _b2a=_b29.getParent();if(_b2a){_b2a.remove(_b29,true);}this.children.push(_b29);return _b29._setParent(this,this._getRealMatrix());},remove:function(_b2b,_b2c){for(var i=0;i<this.children.length;++i){if(this.children[i]==_b2b){if(_b2c){}else{_b2b.parent=null;_b2b.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_b2d){for(var i=0;i<this.children.length;++i){if(this.children[i]==_b2d){this.children.splice(i,1);this.children.push(_b2d);break;}}return this;},_moveChildToBack:function(_b2e){for(var i=0;i<this.children.length;++i){if(this.children[i]==_b2e){this.children.splice(i,1);this.children.unshift(_b2e);break;}}return this;}};dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){dojo.forEach(this._nodes,dojo.destroy);this._nodes=[];dojo.forEach(this._events,dojo.disconnect);this._events=[];this.rawNode=null;if(dojo.isIE){while(this._parent.lastChild){dojo.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_b2f){},whenLoaded:function(_b30,_b31){var f=dojo.hitch(_b30,_b31);if(this.isLoaded){f(this);}else{var h=dojo.connect(this,"onLoad",function(_b32){dojo.disconnect(h);f(_b32);});}}});dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing);dojo.declare("dojox.gfx.Point",null,{});dojo.declare("dojox.gfx.Rectangle",null,{});dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.shape.Shape,{constructor:function(_b33){this.shape=dojox.gfx.getDefault("Rect");this.rawNode=_b33;},getBoundingBox:function(){return this.shape;}});dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.shape.Shape,{constructor:function(_b34){this.shape=dojox.gfx.getDefault("Ellipse");this.rawNode=_b34;},getBoundingBox:function(){if(!this.bbox){var _b35=this.shape;this.bbox={x:_b35.cx-_b35.rx,y:_b35.cy-_b35.ry,width:2*_b35.rx,height:2*_b35.ry};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.shape.Shape,{constructor:function(_b36){this.shape=dojox.gfx.getDefault("Circle");this.rawNode=_b36;},getBoundingBox:function(){if(!this.bbox){var _b37=this.shape;this.bbox={x:_b37.cx-_b37.r,y:_b37.cy-_b37.r,width:2*_b37.r,height:2*_b37.r};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Line",dojox.gfx.shape.Shape,{constructor:function(_b38){this.shape=dojox.gfx.getDefault("Line");this.rawNode=_b38;},getBoundingBox:function(){if(!this.bbox){var _b39=this.shape;this.bbox={x:Math.min(_b39.x1,_b39.x2),y:Math.min(_b39.y1,_b39.y2),width:Math.abs(_b39.x2-_b39.x1),height:Math.abs(_b39.y2-_b39.y1)};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.shape.Shape,{constructor:function(_b3a){this.shape=dojox.gfx.getDefault("Polyline");this.rawNode=_b3a;},setShape:function(_b3b,_b3c){if(_b3b&&_b3b instanceof Array){this.inherited(arguments,[{points:_b3b}]);if(_b3c&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_b3b]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _b3d=[];for(var i=0;i<l;i+=2){_b3d.push({x:p[i],y:p[i+1]});}this.shape.points=_b3d;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Image",dojox.gfx.shape.Shape,{constructor:function(_b3e){this.shape=dojox.gfx.getDefault("Image");this.rawNode=_b3e;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});dojo.declare("dojox.gfx.shape.Text",dojox.gfx.shape.Shape,{constructor:function(_b3f){this.fontStyle=null;this.shape=dojox.gfx.getDefault("Text");this.rawNode=_b3f;},getFont:function(){return this.fontStyle;},setFont:function(_b40){this.fontStyle=typeof _b40=="string"?dojox.gfx.splitFontString(_b40):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_b40);this._setFont();return this;}});dojox.gfx.shape.Creator={createShape:function(_b41){var gfx=dojox.gfx;switch(_b41.type){case gfx.defaultPath.type:return this.createPath(_b41);case gfx.defaultRect.type:return this.createRect(_b41);case gfx.defaultCircle.type:return this.createCircle(_b41);case gfx.defaultEllipse.type:return this.createEllipse(_b41);case gfx.defaultLine.type:return this.createLine(_b41);case gfx.defaultPolyline.type:return this.createPolyline(_b41);case gfx.defaultImage.type:return this.createImage(_b41);case gfx.defaultText.type:return this.createText(_b41);case gfx.defaultTextPath.type:return this.createTextPath(_b41);}return null;},createGroup:function(){return this.createObject(dojox.gfx.Group);},createRect:function(rect){return this.createObject(dojox.gfx.Rect,rect);},createEllipse:function(_b42){return this.createObject(dojox.gfx.Ellipse,_b42);},createCircle:function(_b43){return this.createObject(dojox.gfx.Circle,_b43);},createLine:function(line){return this.createObject(dojox.gfx.Line,line);},createPolyline:function(_b44){return this.createObject(dojox.gfx.Polyline,_b44);},createImage:function(_b45){return this.createObject(dojox.gfx.Image,_b45);},createText:function(text){return this.createObject(dojox.gfx.Text,text);},createPath:function(path){return this.createObject(dojox.gfx.Path,path);},createTextPath:function(text){return this.createObject(dojox.gfx.TextPath,{}).setText(text);},createObject:function(_b46,_b47){return null;}};}if(!dojo._hasResource["dojox.gfx.path"]){dojo._hasResource["dojox.gfx.path"]=true;dojo.provide("dojox.gfx.path");dojo.declare("dojox.gfx.path.Path",dojox.gfx.shape.Shape,{constructor:function(_b48){this.shape=dojo.clone(dojox.gfx.defaultPath);this.segments=[];this.tbbox=null;this.absolute=true;this.last={};this.rawNode=_b48;this.segmented=false;},setAbsoluteMode:function(mode){this._confirmSegmented();this.absolute=typeof mode=="string"?(mode=="absolute"):mode;return this;},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute;},getBoundingBox:function(){this._confirmSegmented();return (this.bbox&&("l" in this.bbox))?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null;},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox){return this.tbbox;}var bbox=this.bbox,_b49=this._getRealMatrix();this.bbox=null;for(var i=0,len=this.segments.length;i<len;++i){this._updateWithSegment(this.segments[i],_b49);}var t=this.bbox;this.bbox=bbox;this.tbbox=t?[{x:t.l,y:t.t},{x:t.r,y:t.t},{x:t.r,y:t.b},{x:t.l,y:t.b}]:null;return this.tbbox;},getLastPosition:function(){this._confirmSegmented();return "x" in this.last?this.last:null;},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments);},_updateBBox:function(x,y,_b4a){if(_b4a){var t=dojox.gfx.matrix.multiplyPoint(_b4a,x,y);x=t.x;y=t.y;}if(this.bbox&&("l" in this.bbox)){if(this.bbox.l>x){this.bbox.l=x;}if(this.bbox.r<x){this.bbox.r=x;}if(this.bbox.t>y){this.bbox.t=y;}if(this.bbox.b<y){this.bbox.b=y;}}else{this.bbox={l:x,b:y,r:x,t:y};}},_updateWithSegment:function(_b4b,_b4c){var n=_b4b.args,l=n.length;switch(_b4b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(var i=0;i<l;i+=2){this._updateBBox(n[i],n[i+1],_b4c);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "H":for(var i=0;i<l;++i){this._updateBBox(n[i],this.last.y,_b4c);}this.last.x=n[l-1];this.absolute=true;break;case "V":for(var i=0;i<l;++i){this._updateBBox(this.last.x,n[i],_b4c);}this.last.y=n[l-1];this.absolute=true;break;case "m":var _b4d=0;if(!("x" in this.last)){this._updateBBox(this.last.x=n[0],this.last.y=n[1],_b4c);_b4d=2;}for(var i=_b4d;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],_b4c);}this.absolute=false;break;case "l":case "t":for(var i=0;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],_b4c);}this.absolute=false;break;case "h":for(var i=0;i<l;++i){this._updateBBox(this.last.x+=n[i],this.last.y,_b4c);}this.absolute=false;break;case "v":for(var i=0;i<l;++i){this._updateBBox(this.last.x,this.last.y+=n[i],_b4c);}this.absolute=false;break;case "c":for(var i=0;i<l;i+=6){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],_b4c);this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3],_b4c);this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5],_b4c);}this.absolute=false;break;case "s":case "q":for(var i=0;i<l;i+=4){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],_b4c);this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3],_b4c);}this.absolute=false;break;case "A":for(var i=0;i<l;i+=7){this._updateBBox(n[i+5],n[i+6],_b4c);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "a":for(var i=0;i<l;i+=7){this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6],_b4c);}this.absolute=false;break;}var path=[_b4b.action];for(var i=0;i<l;++i){path.push(dojox.gfx.formatNumber(n[i],true));}if(typeof this.shape.path=="string"){this.shape.path+=path.join("");}else{Array.prototype.push.apply(this.shape.path,path);}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(_b4e,args){this.tbbox=null;var _b4f=this._validSegments[_b4e.toLowerCase()];if(typeof _b4f=="number"){if(_b4f){if(args.length>=_b4f){var _b50={action:_b4e,args:args.slice(0,args.length-args.length%_b4f)};this.segments.push(_b50);this._updateWithSegment(_b50);}}else{var _b50={action:_b4e,args:[]};this.segments.push(_b50);this._updateWithSegment(_b50);}}},_collectArgs:function(_b51,args){for(var i=0;i<args.length;++i){var t=args[i];if(typeof t=="boolean"){_b51.push(t?1:0);}else{if(typeof t=="number"){_b51.push(t);}else{if(t instanceof Array){this._collectArgs(_b51,t);}else{if("x" in t&&"y" in t){_b51.push(t.x,t.y);}}}}}},moveTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"M":"m",args);return this;},lineTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"L":"l",args);return this;},hLineTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"H":"h",args);return this;},vLineTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"V":"v",args);return this;},curveTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"C":"c",args);return this;},smoothCurveTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"S":"s",args);return this;},qCurveTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"Q":"q",args);return this;},qSmoothCurveTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"T":"t",args);return this;},arcTo:function(){this._confirmSegmented();var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"A":"a",args);return this;},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this;},_confirmSegmented:function(){if(!this.segmented){var path=this.shape.path;this.shape.path=[];this._setPath(path);this.shape.path=this.shape.path.join("");this.segmented=true;}},_setPath:function(path){var p=dojo.isArray(path)?path:path.match(dojox.gfx.pathSvgRegExp);this.segments=[];this.absolute=true;this.bbox={};this.last={};if(!p){return;}var _b52="",args=[],l=p.length;for(var i=0;i<l;++i){var t=p[i],x=parseFloat(t);if(isNaN(x)){if(_b52){this._pushSegment(_b52,args);}args=[];_b52=t;}else{args.push(x);}}this._pushSegment(_b52,args);},setShape:function(_b53){this.inherited(arguments,[typeof _b53=="string"?{path:_b53}:_b53]);this.segmented=false;this.segments=[];if(!dojox.gfx.lazyPathSegmentation){this._confirmSegmented();}return this;},_2PI:Math.PI*2});dojo.declare("dojox.gfx.path.TextPath",dojox.gfx.path.Path,{constructor:function(_b54){if(!("text" in this)){this.text=dojo.clone(dojox.gfx.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=dojo.clone(dojox.gfx.defaultFont);}},getText:function(){return this.text;},setText:function(_b55){this.text=dojox.gfx.makeParameters(this.text,typeof _b55=="string"?{text:_b55}:_b55);this._setText();return this;},getFont:function(){return this.fontStyle;},setFont:function(_b56){this.fontStyle=typeof _b56=="string"?dojox.gfx.splitFontString(_b56):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_b56);this._setFont();return this;}});}if(!dojo._hasResource["dojox.gfx.svg"]){dojo._hasResource["dojox.gfx.svg"]=true;dojo.provide("dojox.gfx.svg");(function(){var d=dojo,g=dojox.gfx,gs=g.shape,svg=g.svg;svg.useSvgWeb=(typeof window.svgweb!="undefined");function _b57(ns,_b58){if(dojo.doc.createElementNS){return dojo.doc.createElementNS(ns,_b58);}else{return dojo.doc.createElement(_b58);}};function _b59(text){if(svg.useSvgWeb){return dojo.doc.createTextNode(text,true);}else{return dojo.doc.createTextNode(text);}};function _b5a(){if(svg.useSvgWeb){return dojo.doc.createDocumentFragment(true);}else{return dojo.doc.createDocumentFragment();}};svg.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};svg.getRef=function(name){if(!name||name=="none"){return null;}if(name.match(/^url\(#.+\)$/)){return d.byId(name.slice(5,-1));}if(name.match(/^#dojoUnique\d+$/)){return d.byId(name.slice(1));}return null;};svg.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};d.declare("dojox.gfx.svg.Shape",gs.Shape,{setFill:function(fill){if(!fill){this.fillStyle=null;this.rawNode.setAttribute("fill","none");this.rawNode.setAttribute("fill-opacity",0);return this;}var f;var _b5b=function(x){this.setAttribute(x,f[x].toFixed(8));};if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);var _b5c=this._setFillObject(f,"linearGradient");d.forEach(["x1","y1","x2","y2"],_b5b,_b5c);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);var _b5c=this._setFillObject(f,"radialGradient");d.forEach(["cx","cy","r"],_b5b,_b5c);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);var _b5d=this._setFillObject(f,"pattern");d.forEach(["x","y","width","height"],_b5b,_b5d);break;}this.fillStyle=f;return this;}var f=g.normalizeColor(fill);this.fillStyle=f;this.rawNode.setAttribute("fill",f.toCss());this.rawNode.setAttribute("fill-opacity",f.a);this.rawNode.setAttribute("fill-rule","evenodd");return this;},setStroke:function(_b5e){var rn=this.rawNode;if(!_b5e){this.strokeStyle=null;rn.setAttribute("stroke","none");rn.setAttribute("stroke-opacity",0);return this;}if(typeof _b5e=="string"||d.isArray(_b5e)||_b5e instanceof d.Color){_b5e={color:_b5e};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_b5e);s.color=g.normalizeColor(s.color);if(s){rn.setAttribute("stroke",s.color.toCss());rn.setAttribute("stroke-opacity",s.color.a);rn.setAttribute("stroke-width",s.width);rn.setAttribute("stroke-linecap",s.cap);if(typeof s.join=="number"){rn.setAttribute("stroke-linejoin","miter");rn.setAttribute("stroke-miterlimit",s.join);}else{rn.setAttribute("stroke-linejoin",s.join);}var da=s.style.toLowerCase();if(da in svg.dasharray){da=svg.dasharray[da];}if(da instanceof Array){da=d._toArray(da);for(var i=0;i<da.length;++i){da[i]*=s.width;}if(s.cap!="butt"){for(var i=0;i<da.length;i+=2){da[i]-=s.width;if(da[i]<1){da[i]=1;}}for(var i=1;i<da.length;i+=2){da[i]+=s.width;}}da=da.join(",");}rn.setAttribute("stroke-dasharray",da);rn.setAttribute("dojoGfxStrokeStyle",s.style);}return this;},_getParentSurface:function(){var _b5f=this.parent;for(;_b5f&&!(_b5f instanceof g.Surface);_b5f=_b5f.parent){}return _b5f;},_setFillObject:function(f,_b60){var _b61=svg.xmlns.svg;this.fillStyle=f;var _b62=this._getParentSurface(),defs=_b62.defNode,fill=this.rawNode.getAttribute("fill"),ref=svg.getRef(fill);if(ref){fill=ref;if(fill.tagName.toLowerCase()!=_b60.toLowerCase()){var id=fill.id;fill.parentNode.removeChild(fill);fill=_b57(_b61,_b60);fill.setAttribute("id",id);defs.appendChild(fill);}else{while(fill.childNodes.length){fill.removeChild(fill.lastChild);}}}else{fill=_b57(_b61,_b60);fill.setAttribute("id",g._base._getUniqueId());defs.appendChild(fill);}if(_b60=="pattern"){fill.setAttribute("patternUnits","userSpaceOnUse");var img=_b57(_b61,"image");img.setAttribute("x",0);img.setAttribute("y",0);img.setAttribute("width",f.width.toFixed(8));img.setAttribute("height",f.height.toFixed(8));img.setAttributeNS(svg.xmlns.xlink,"xlink:href",f.src);fill.appendChild(img);}else{fill.setAttribute("gradientUnits","userSpaceOnUse");for(var i=0;i<f.colors.length;++i){var c=f.colors[i],t=_b57(_b61,"stop"),cc=c.color=g.normalizeColor(c.color);t.setAttribute("offset",c.offset.toFixed(8));t.setAttribute("stop-color",cc.toCss());t.setAttribute("stop-opacity",cc.a);fill.appendChild(t);}}this.rawNode.setAttribute("fill","url(#"+fill.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return fill;},_applyTransform:function(){var _b63=this.matrix;if(_b63){var tm=this.matrix;this.rawNode.setAttribute("transform","matrix("+tm.xx.toFixed(8)+","+tm.yx.toFixed(8)+","+tm.xy.toFixed(8)+","+tm.yy.toFixed(8)+","+tm.dx.toFixed(8)+","+tm.dy.toFixed(8)+")");}else{this.rawNode.removeAttribute("transform");}return this;},setRawNode:function(_b64){var r=this.rawNode=_b64;if(this.shape.type!="image"){r.setAttribute("fill","none");}r.setAttribute("fill-opacity",0);r.setAttribute("stroke","none");r.setAttribute("stroke-opacity",0);r.setAttribute("stroke-width",1);r.setAttribute("stroke-linecap","butt");r.setAttribute("stroke-linejoin","miter");r.setAttribute("stroke-miterlimit",4);},setShape:function(_b65){this.shape=g.makeParameters(this.shape,_b65);for(var i in this.shape){if(i!="type"){this.rawNode.setAttribute(i,this.shape[i]);}}this.bbox=null;return this;},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this;},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this;}});dojo.declare("dojox.gfx.svg.Group",svg.Shape,{constructor:function(){gs.Container._init.call(this);},setRawNode:function(_b66){this.rawNode=_b66;}});svg.Group.nodeType="g";dojo.declare("dojox.gfx.svg.Rect",[svg.Shape,gs.Rect],{setShape:function(_b67){this.shape=g.makeParameters(this.shape,_b67);this.bbox=null;for(var i in this.shape){if(i!="type"&&i!="r"){this.rawNode.setAttribute(i,this.shape[i]);}}if(this.shape.r){this.rawNode.setAttribute("ry",this.shape.r);this.rawNode.setAttribute("rx",this.shape.r);}return this;}});svg.Rect.nodeType="rect";dojo.declare("dojox.gfx.svg.Ellipse",[svg.Shape,gs.Ellipse],{});svg.Ellipse.nodeType="ellipse";dojo.declare("dojox.gfx.svg.Circle",[svg.Shape,gs.Circle],{});svg.Circle.nodeType="circle";dojo.declare("dojox.gfx.svg.Line",[svg.Shape,gs.Line],{});svg.Line.nodeType="line";dojo.declare("dojox.gfx.svg.Polyline",[svg.Shape,gs.Polyline],{setShape:function(_b68,_b69){if(_b68&&_b68 instanceof Array){this.shape=g.makeParameters(this.shape,{points:_b68});if(_b69&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.shape=g.makeParameters(this.shape,_b68);}this.bbox=null;this._normalizePoints();var attr=[],p=this.shape.points;for(var i=0;i<p.length;++i){attr.push(p[i].x.toFixed(8),p[i].y.toFixed(8));}this.rawNode.setAttribute("points",attr.join(" "));return this;}});svg.Polyline.nodeType="polyline";dojo.declare("dojox.gfx.svg.Image",[svg.Shape,gs.Image],{setShape:function(_b6a){this.shape=g.makeParameters(this.shape,_b6a);this.bbox=null;var _b6b=this.rawNode;for(var i in this.shape){if(i!="type"&&i!="src"){_b6b.setAttribute(i,this.shape[i]);}}_b6b.setAttribute("preserveAspectRatio","none");_b6b.setAttributeNS(svg.xmlns.xlink,"xlink:href",this.shape.src);return this;}});svg.Image.nodeType="image";dojo.declare("dojox.gfx.svg.Text",[svg.Shape,gs.Text],{setShape:function(_b6c){this.shape=g.makeParameters(this.shape,_b6c);this.bbox=null;var r=this.rawNode,s=this.shape;r.setAttribute("x",s.x);r.setAttribute("y",s.y);r.setAttribute("text-anchor",s.align);r.setAttribute("text-decoration",s.decoration);r.setAttribute("rotate",s.rotated?90:0);r.setAttribute("kerning",s.kerning?"auto":0);r.setAttribute("text-rendering","optimizeLegibility");if(r.firstChild){r.firstChild.nodeValue=s.text;}else{r.appendChild(_b59(s.text));}return this;},getTextWidth:function(){var _b6d=this.rawNode,_b6e=_b6d.parentNode,_b6f=_b6d.cloneNode(true);_b6f.style.visibility="hidden";var _b70=0,_b71=_b6f.firstChild.nodeValue;_b6e.appendChild(_b6f);if(_b71!=""){while(!_b70){if(_b6f.getBBox){_b70=parseInt(_b6f.getBBox().width);}else{_b70=68;}}}_b6e.removeChild(_b6f);return _b70;}});svg.Text.nodeType="text";dojo.declare("dojox.gfx.svg.Path",[svg.Shape,g.path.Path],{_updateWithSegment:function(_b72){this.inherited(arguments);if(typeof (this.shape.path)=="string"){this.rawNode.setAttribute("d",this.shape.path);}},setShape:function(_b73){this.inherited(arguments);if(this.shape.path){this.rawNode.setAttribute("d",this.shape.path);}else{this.rawNode.removeAttribute("d");}return this;}});svg.Path.nodeType="path";dojo.declare("dojox.gfx.svg.TextPath",[svg.Shape,g.path.TextPath],{_updateWithSegment:function(_b74){this.inherited(arguments);this._setTextPath();},setShape:function(_b75){this.inherited(arguments);this._setTextPath();return this;},_setTextPath:function(){if(typeof this.shape.path!="string"){return;}var r=this.rawNode;if(!r.firstChild){var tp=_b57(svg.xmlns.svg,"textPath"),tx=_b59("");tp.appendChild(tx);r.appendChild(tp);}var ref=r.firstChild.getAttributeNS(svg.xmlns.xlink,"href"),path=ref&&svg.getRef(ref);if(!path){var _b76=this._getParentSurface();if(_b76){var defs=_b76.defNode;path=_b57(svg.xmlns.svg,"path");var id=g._base._getUniqueId();path.setAttribute("id",id);defs.appendChild(path);r.firstChild.setAttributeNS(svg.xmlns.xlink,"xlink:href","#"+id);}}if(path){path.setAttribute("d",this.shape.path);}},_setText:function(){var r=this.rawNode;if(!r.firstChild){var tp=_b57(svg.xmlns.svg,"textPath"),tx=_b59("");tp.appendChild(tx);r.appendChild(tp);}r=r.firstChild;var t=this.text;r.setAttribute("alignment-baseline","middle");switch(t.align){case "middle":r.setAttribute("text-anchor","middle");r.setAttribute("startOffset","50%");break;case "end":r.setAttribute("text-anchor","end");r.setAttribute("startOffset","100%");break;default:r.setAttribute("text-anchor","start");r.setAttribute("startOffset","0%");break;}r.setAttribute("baseline-shift","0.5ex");r.setAttribute("text-decoration",t.decoration);r.setAttribute("rotate",t.rotated?90:0);r.setAttribute("kerning",t.kerning?"auto":0);r.firstChild.data=t.text;}});svg.TextPath.nodeType="text";dojo.declare("dojox.gfx.svg.Surface",gs.Surface,{constructor:function(){gs.Container._init.call(this);},destroy:function(){this.defNode=null;this.inherited(arguments);},setDimensions:function(_b77,_b78){if(!this.rawNode){return this;}this.rawNode.setAttribute("width",_b77);this.rawNode.setAttribute("height",_b78);return this;},getDimensions:function(){var t=this.rawNode?{width:g.normalizedLength(this.rawNode.getAttribute("width")),height:g.normalizedLength(this.rawNode.getAttribute("height"))}:null;return t;}});svg.createSurface=function(_b79,_b7a,_b7b){var s=new svg.Surface();s.rawNode=_b57(svg.xmlns.svg,"svg");if(_b7a){s.rawNode.setAttribute("width",_b7a);}if(_b7b){s.rawNode.setAttribute("height",_b7b);}var _b7c=_b57(svg.xmlns.svg,"defs");s.rawNode.appendChild(_b7c);s.defNode=_b7c;s._parent=d.byId(_b79);s._parent.appendChild(s.rawNode);return s;};var Font={_setFont:function(){var f=this.fontStyle;this.rawNode.setAttribute("font-style",f.style);this.rawNode.setAttribute("font-variant",f.variant);this.rawNode.setAttribute("font-weight",f.weight);this.rawNode.setAttribute("font-size",f.size);this.rawNode.setAttribute("font-family",f.family);}};var C=gs.Container,_b7d={openBatch:function(){this.fragment=_b5a();},closeBatch:function(){if(this.fragment){this.rawNode.appendChild(this.fragment);delete this.fragment;}},add:function(_b7e){if(this!=_b7e.getParent()){if(this.fragment){this.fragment.appendChild(_b7e.rawNode);}else{this.rawNode.appendChild(_b7e.rawNode);}C.add.apply(this,arguments);}return this;},remove:function(_b7f,_b80){if(this==_b7f.getParent()){if(this.rawNode==_b7f.rawNode.parentNode){this.rawNode.removeChild(_b7f.rawNode);}if(this.fragment&&this.fragment==_b7f.rawNode.parentNode){this.fragment.removeChild(_b7f.rawNode);}C.remove.apply(this,arguments);}return this;},clear:function(){var r=this.rawNode;while(r.lastChild){r.removeChild(r.lastChild);}var _b81=this.defNode;if(_b81){while(_b81.lastChild){_b81.removeChild(_b81.lastChild);}r.appendChild(_b81);}return C.clear.apply(this,arguments);},_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};var _b82={createObject:function(_b83,_b84){if(!this.rawNode){return null;}var _b85=new _b83(),node=_b57(svg.xmlns.svg,_b83.nodeType);_b85.setRawNode(node);_b85.setShape(_b84);this.add(_b85);return _b85;}};d.extend(svg.Text,Font);d.extend(svg.TextPath,Font);d.extend(svg.Group,_b7d);d.extend(svg.Group,gs.Creator);d.extend(svg.Group,_b82);d.extend(svg.Surface,_b7d);d.extend(svg.Surface,gs.Creator);d.extend(svg.Surface,_b82);if(svg.useSvgWeb){svg.createSurface=function(_b86,_b87,_b88){var s=new svg.Surface();if(!_b87||!_b88){var pos=d.position(_b86);_b87=_b87||pos.w;_b88=_b88||pos.h;}_b86=d.byId(_b86);var id=_b86.id?_b86.id+"_svgweb":g._base._getUniqueId();var _b89=_b57(svg.xmlns.svg,"svg");_b89.id=id;_b89.setAttribute("width",_b87);_b89.setAttribute("height",_b88);svgweb.appendChild(_b89,_b86);_b89.addEventListener("SVGLoad",function(){s.rawNode=this;s.isLoaded=true;var _b8a=_b57(svg.xmlns.svg,"defs");s.rawNode.appendChild(_b8a);s.defNode=_b8a;if(s.onLoad){s.onLoad(s);}},false);s.isLoaded=false;return s;};svg.Surface.extend({destroy:function(){var _b8b=this.rawNode;svgweb.removeChild(_b8b,_b8b.parentNode);}});var _b8c={connect:function(name,_b8d,_b8e){if(name.substring(0,2)==="on"){name=name.substring(2);}if(arguments.length==2){_b8e=_b8d;}else{_b8e=d.hitch(_b8d,_b8e);}this.getEventSource().addEventListener(name,_b8e,false);return [this,name,_b8e];},disconnect:function(_b8f){this.getEventSource().removeEventListener(_b8f[1],_b8f[2],false);delete _b8f[0];}};dojo.extend(svg.Shape,_b8c);dojo.extend(svg.Surface,_b8c);}if(g.loadAndSwitch==="svg"){g.switchTo("svg");delete g.loadAndSwitch;}})();}if(!dojo._hasResource["dojox.gfx3d.matrix"]){dojo._hasResource["dojox.gfx3d.matrix"]=true;dojo.provide("dojox.gfx3d.matrix");dojox.gfx3d.matrix._degToRad=function(_b90){return Math.PI*_b90/180;};dojox.gfx3d.matrix._radToDeg=function(_b91){return _b91/Math.PI*180;};dojox.gfx3d.matrix.Matrix3D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=this.zz=arg;}else{if(arg instanceof Array){if(arg.length>0){var m=dojox.gfx3d.matrix.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=m;var r=dojox.gfx3d.matrix.normalize(arg[i]);m=new dojox.gfx3d.matrix.Matrix3D();m.xx=l.xx*r.xx+l.xy*r.yx+l.xz*r.zx;m.xy=l.xx*r.xy+l.xy*r.yy+l.xz*r.zy;m.xz=l.xx*r.xz+l.xy*r.yz+l.xz*r.zz;m.yx=l.yx*r.xx+l.yy*r.yx+l.yz*r.zx;m.yy=l.yx*r.xy+l.yy*r.yy+l.yz*r.zy;m.yz=l.yx*r.xz+l.yy*r.yz+l.yz*r.zz;m.zx=l.zx*r.xx+l.zy*r.yx+l.zz*r.zx;m.zy=l.zx*r.xy+l.zy*r.yy+l.zz*r.zy;m.zz=l.zx*r.xz+l.zy*r.yz+l.zz*r.zz;m.dx=l.xx*r.dx+l.xy*r.dy+l.xz*r.dz+l.dx;m.dy=l.yx*r.dx+l.yy*r.dy+l.yz*r.dz+l.dy;m.dz=l.zx*r.dx+l.zy*r.dy+l.zz*r.dz+l.dz;}dojo.mixin(this,m);}}else{dojo.mixin(this,arg);}}}};dojo.extend(dojox.gfx3d.matrix.Matrix3D,{xx:1,xy:0,xz:0,yx:0,yy:1,yz:0,zx:0,zy:0,zz:1,dx:0,dy:0,dz:0});dojo.mixin(dojox.gfx3d.matrix,{identity:new dojox.gfx3d.matrix.Matrix3D(),translate:function(a,b,c){if(arguments.length>1){return new dojox.gfx3d.matrix.Matrix3D({dx:a,dy:b,dz:c});}return new dojox.gfx3d.matrix.Matrix3D({dx:a.x,dy:a.y,dz:a.z});},scale:function(a,b,c){if(arguments.length>1){return new dojox.gfx3d.matrix.Matrix3D({xx:a,yy:b,zz:c});}if(typeof a=="number"){return new dojox.gfx3d.matrix.Matrix3D({xx:a,yy:a,zz:a});}return new dojox.gfx3d.matrix.Matrix3D({xx:a.x,yy:a.y,zz:a.z});},rotateX:function(_b92){var c=Math.cos(_b92);var s=Math.sin(_b92);return new dojox.gfx3d.matrix.Matrix3D({yy:c,yz:-s,zy:s,zz:c});},rotateXg:function(_b93){return dojox.gfx3d.matrix.rotateX(dojox.gfx3d.matrix._degToRad(_b93));},rotateY:function(_b94){var c=Math.cos(_b94);var s=Math.sin(_b94);return new dojox.gfx3d.matrix.Matrix3D({xx:c,xz:s,zx:-s,zz:c});},rotateYg:function(_b95){return dojox.gfx3d.matrix.rotateY(dojox.gfx3d.matrix._degToRad(_b95));},rotateZ:function(_b96){var c=Math.cos(_b96);var s=Math.sin(_b96);return new dojox.gfx3d.matrix.Matrix3D({xx:c,xy:-s,yx:s,yy:c});},rotateZg:function(_b97){return dojox.gfx3d.matrix.rotateZ(dojox.gfx3d.matrix._degToRad(_b97));},cameraTranslate:function(a,b,c){if(arguments.length>1){return new dojox.gfx3d.matrix.Matrix3D({dx:-a,dy:-b,dz:-c});}return new dojox.gfx3d.matrix.Matrix3D({dx:-a.x,dy:-a.y,dz:-a.z});},cameraRotateX:function(_b98){var c=Math.cos(-_b98);var s=Math.sin(-_b98);return new dojox.gfx3d.matrix.Matrix3D({yy:c,yz:-s,zy:s,zz:c});},cameraRotateXg:function(_b99){return dojox.gfx3d.matrix.rotateX(dojox.gfx3d.matrix._degToRad(_b99));},cameraRotateY:function(_b9a){var c=Math.cos(-_b9a);var s=Math.sin(-_b9a);return new dojox.gfx3d.matrix.Matrix3D({xx:c,xz:s,zx:-s,zz:c});},cameraRotateYg:function(_b9b){return dojox.gfx3d.matrix.rotateY(dojox.gfx3d.matrix._degToRad(_b9b));},cameraRotateZ:function(_b9c){var c=Math.cos(-_b9c);var s=Math.sin(-_b9c);return new dojox.gfx3d.matrix.Matrix3D({xx:c,xy:-s,yx:s,yy:c});},cameraRotateZg:function(_b9d){return dojox.gfx3d.matrix.rotateZ(dojox.gfx3d.matrix._degToRad(_b9d));},normalize:function(_b9e){return (_b9e instanceof dojox.gfx3d.matrix.Matrix3D)?_b9e:new dojox.gfx3d.matrix.Matrix3D(_b9e);},clone:function(_b9f){var obj=new dojox.gfx3d.matrix.Matrix3D();for(var i in _b9f){if(typeof (_b9f[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_b9f[i]){obj[i]=_b9f[i];}}return obj;},invert:function(_ba0){var m=dojox.gfx3d.matrix.normalize(_ba0);var D=m.xx*m.yy*m.zz+m.xy*m.yz*m.zx+m.xz*m.yx*m.zy-m.xx*m.yz*m.zy-m.xy*m.yx*m.zz-m.xz*m.yy*m.zx;var M=new dojox.gfx3d.matrix.Matrix3D({xx:(m.yy*m.zz-m.yz*m.zy)/D,xy:(m.xz*m.zy-m.xy*m.zz)/D,xz:(m.xy*m.yz-m.xz*m.yy)/D,yx:(m.yz*m.zx-m.yx*m.zz)/D,yy:(m.xx*m.zz-m.xz*m.zx)/D,yz:(m.xz*m.yx-m.xx*m.yz)/D,zx:(m.yx*m.zy-m.yy*m.zx)/D,zy:(m.xy*m.zx-m.xx*m.zy)/D,zz:(m.xx*m.yy-m.xy*m.yx)/D,dx:-1*(m.xy*m.yz*m.dz+m.xz*m.dy*m.zy+m.dx*m.yy*m.zz-m.xy*m.dy*m.zz-m.xz*m.yy*m.dz-m.dx*m.yz*m.zy)/D,dy:(m.xx*m.yz*m.dz+m.xz*m.dy*m.zx+m.dx*m.yx*m.zz-m.xx*m.dy*m.zz-m.xz*m.yx*m.dz-m.dx*m.yz*m.zx)/D,dz:-1*(m.xx*m.yy*m.dz+m.xy*m.dy*m.zx+m.dx*m.yx*m.zy-m.xx*m.dy*m.zy-m.xy*m.yx*m.dz-m.dx*m.yy*m.zx)/D});return M;},_multiplyPoint:function(m,x,y,z){return {x:m.xx*x+m.xy*y+m.xz*z+m.dx,y:m.yx*x+m.yy*y+m.yz*z+m.dy,z:m.zx*x+m.zy*y+m.zz*z+m.dz};},multiplyPoint:function(_ba1,a,b,c){var m=dojox.gfx3d.matrix.normalize(_ba1);if(typeof a=="number"&&typeof b=="number"&&typeof c=="number"){return dojox.gfx3d.matrix._multiplyPoint(m,a,b,c);}return dojox.gfx3d.matrix._multiplyPoint(m,a.x,a.y,a.z);},multiply:function(_ba2){var m=dojox.gfx3d.matrix.normalize(_ba2);for(var i=1;i<arguments.length;++i){var l=m;var r=dojox.gfx3d.matrix.normalize(arguments[i]);m=new dojox.gfx3d.matrix.Matrix3D();m.xx=l.xx*r.xx+l.xy*r.yx+l.xz*r.zx;m.xy=l.xx*r.xy+l.xy*r.yy+l.xz*r.zy;m.xz=l.xx*r.xz+l.xy*r.yz+l.xz*r.zz;m.yx=l.yx*r.xx+l.yy*r.yx+l.yz*r.zx;m.yy=l.yx*r.xy+l.yy*r.yy+l.yz*r.zy;m.yz=l.yx*r.xz+l.yy*r.yz+l.yz*r.zz;m.zx=l.zx*r.xx+l.zy*r.yx+l.zz*r.zx;m.zy=l.zx*r.xy+l.zy*r.yy+l.zz*r.zy;m.zz=l.zx*r.xz+l.zy*r.yz+l.zz*r.zz;m.dx=l.xx*r.dx+l.xy*r.dy+l.xz*r.dz+l.dx;m.dy=l.yx*r.dx+l.yy*r.dy+l.yz*r.dz+l.dy;m.dz=l.zx*r.dx+l.zy*r.dy+l.zz*r.dz+l.dz;}return m;},_project:function(m,x,y,z){return {x:m.xx*x+m.xy*y+m.xz*z+m.dx,y:m.yx*x+m.yy*y+m.yz*z+m.dy,z:m.zx*x+m.zy*y+m.zz*z+m.dz};},project:function(_ba3,a,b,c){var m=dojox.gfx3d.matrix.normalize(_ba3);if(typeof a=="number"&&typeof b=="number"&&typeof c=="number"){return dojox.gfx3d.matrix._project(m,a,b,c);}return dojox.gfx3d.matrix._project(m,a.x,a.y,a.z);}});dojox.gfx3d.Matrix3D=dojox.gfx3d.matrix.Matrix3D;}if(!dojo._hasResource["dojox.gfx3d._base"]){dojo._hasResource["dojox.gfx3d._base"]=true;dojo.provide("dojox.gfx3d._base");dojo.mixin(dojox.gfx3d,{defaultEdges:{type:"edges",style:null,points:[]},defaultTriangles:{type:"triangles",style:null,points:[]},defaultQuads:{type:"quads",style:null,points:[]},defaultOrbit:{type:"orbit",center:{x:0,y:0,z:0},radius:50},defaultPath3d:{type:"path3d",path:[]},defaultPolygon:{type:"polygon",path:[]},defaultCube:{type:"cube",bottom:{x:0,y:0,z:0},top:{x:100,y:100,z:100}},defaultCylinder:{type:"cylinder",center:{x:0,y:0,z:0},height:100,radius:50}});}if(!dojo._hasResource["dojox.gfx3d.lighting"]){dojo._hasResource["dojox.gfx3d.lighting"]=true;dojo.provide("dojox.gfx3d.lighting");(function(){var lite=dojox.gfx3d.lighting;dojo.mixin(dojox.gfx3d.lighting,{black:function(){return {r:0,g:0,b:0,a:1};},white:function(){return {r:1,g:1,b:1,a:1};},toStdColor:function(c){c=dojox.gfx.normalizeColor(c);return {r:c.r/255,g:c.g/255,b:c.b/255,a:c.a};},fromStdColor:function(c){return new dojo.Color([Math.round(255*c.r),Math.round(255*c.g),Math.round(255*c.b),c.a]);},scaleColor:function(s,c){return {r:s*c.r,g:s*c.g,b:s*c.b,a:s*c.a};},addColor:function(a,b){return {r:a.r+b.r,g:a.g+b.g,b:a.b+b.b,a:a.a+b.a};},multiplyColor:function(a,b){return {r:a.r*b.r,g:a.g*b.g,b:a.b*b.b,a:a.a*b.a};},saturateColor:function(c){return {r:c.r<0?0:c.r>1?1:c.r,g:c.g<0?0:c.g>1?1:c.g,b:c.b<0?0:c.b>1?1:c.b,a:c.a<0?0:c.a>1?1:c.a};},mixColor:function(c1,c2,s){return lite.addColor(lite.scaleColor(s,c1),lite.scaleColor(1-s,c2));},diff2Color:function(c1,c2){var r=c1.r-c2.r;var g=c1.g-c2.g;var b=c1.b-c2.b;var a=c1.a-c2.a;return r*r+g*g+b*b+a*a;},length2Color:function(c){return c.r*c.r+c.g*c.g+c.b*c.b+c.a*c.a;},dot:function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z;},scale:function(s,v){return {x:s*v.x,y:s*v.y,z:s*v.z};},add:function(a,b){return {x:a.x+b.x,y:a.y+b.y,z:a.z+b.z};},saturate:function(v){return Math.min(Math.max(v,0),1);},length:function(v){return Math.sqrt(dojox.gfx3d.lighting.dot(v,v));},normalize:function(v){return lite.scale(1/lite.length(v),v);},faceforward:function(n,i){var p=dojox.gfx3d.lighting;var s=p.dot(i,n)<0?1:-1;return p.scale(s,n);},reflect:function(i,n){var p=dojox.gfx3d.lighting;return p.add(i,p.scale(-2*p.dot(i,n),n));},diffuse:function(_ba4,_ba5){var c=lite.black();for(var i=0;i<_ba5.length;++i){var l=_ba5[i],d=lite.dot(lite.normalize(l.direction),_ba4);c=lite.addColor(c,lite.scaleColor(d,l.color));}return lite.saturateColor(c);},specular:function(_ba6,v,_ba7,_ba8){var c=lite.black();for(var i=0;i<_ba8.length;++i){var l=_ba8[i],h=lite.normalize(lite.add(lite.normalize(l.direction),v)),s=Math.pow(Math.max(0,lite.dot(_ba6,h)),1/_ba7);c=lite.addColor(c,lite.scaleColor(s,l.color));}return lite.saturateColor(c);},phong:function(_ba9,v,size,_baa){_ba9=lite.normalize(_ba9);var c=lite.black();for(var i=0;i<_baa.length;++i){var l=_baa[i],r=lite.reflect(lite.scale(-1,lite.normalize(v)),_ba9),s=Math.pow(Math.max(0,lite.dot(r,lite.normalize(l.direction))),size);c=lite.addColor(c,lite.scaleColor(s,l.color));}return lite.saturateColor(c);}});dojo.declare("dojox.gfx3d.lighting.Model",null,{constructor:function(_bab,_bac,_bad,_bae){this.incident=lite.normalize(_bab);this.lights=[];for(var i=0;i<_bac.length;++i){var l=_bac[i];this.lights.push({direction:lite.normalize(l.direction),color:lite.toStdColor(l.color)});}this.ambient=lite.toStdColor(_bad.color?_bad.color:"white");this.ambient=lite.scaleColor(_bad.intensity,this.ambient);this.ambient=lite.scaleColor(this.ambient.a,this.ambient);this.ambient.a=1;this.specular=lite.toStdColor(_bae?_bae:"white");this.specular=lite.scaleColor(this.specular.a,this.specular);this.specular.a=1;this.npr_cool={r:0,g:0,b:0.4,a:1};this.npr_warm={r:0.4,g:0.4,b:0.2,a:1};this.npr_alpha=0.2;this.npr_beta=0.6;this.npr_scale=0.6;},constant:function(_baf,_bb0,_bb1){_bb1=lite.toStdColor(_bb1);var _bb2=_bb1.a,_bb3=lite.scaleColor(_bb2,_bb1);_bb3.a=_bb2;return lite.fromStdColor(lite.saturateColor(_bb3));},matte:function(_bb4,_bb5,_bb6){if(typeof _bb5=="string"){_bb5=lite.finish[_bb5];}_bb6=lite.toStdColor(_bb6);_bb4=lite.faceforward(lite.normalize(_bb4),this.incident);var _bb7=lite.scaleColor(_bb5.Ka,this.ambient),_bb8=lite.saturate(-4*lite.dot(_bb4,this.incident)),_bb9=lite.scaleColor(_bb8*_bb5.Kd,lite.diffuse(_bb4,this.lights)),_bba=lite.scaleColor(_bb6.a,lite.multiplyColor(_bb6,lite.addColor(_bb7,_bb9)));_bba.a=_bb6.a;return lite.fromStdColor(lite.saturateColor(_bba));},metal:function(_bbb,_bbc,_bbd){if(typeof _bbc=="string"){_bbc=lite.finish[_bbc];}_bbd=lite.toStdColor(_bbd);_bbb=lite.faceforward(lite.normalize(_bbb),this.incident);var v=lite.scale(-1,this.incident),_bbe,_bbf,_bc0=lite.scaleColor(_bbc.Ka,this.ambient),_bc1=lite.saturate(-4*lite.dot(_bbb,this.incident));if("phong" in _bbc){_bbe=lite.scaleColor(_bc1*_bbc.Ks*_bbc.phong,lite.phong(_bbb,v,_bbc.phong_size,this.lights));}else{_bbe=lite.scaleColor(_bc1*_bbc.Ks,lite.specular(_bbb,v,_bbc.roughness,this.lights));}_bbf=lite.scaleColor(_bbd.a,lite.addColor(lite.multiplyColor(_bbd,_bc0),lite.multiplyColor(this.specular,_bbe)));_bbf.a=_bbd.a;return lite.fromStdColor(lite.saturateColor(_bbf));},plastic:function(_bc2,_bc3,_bc4){if(typeof _bc3=="string"){_bc3=lite.finish[_bc3];}_bc4=lite.toStdColor(_bc4);_bc2=lite.faceforward(lite.normalize(_bc2),this.incident);var v=lite.scale(-1,this.incident),_bc5,_bc6,_bc7=lite.scaleColor(_bc3.Ka,this.ambient),_bc8=lite.saturate(-4*lite.dot(_bc2,this.incident)),_bc9=lite.scaleColor(_bc8*_bc3.Kd,lite.diffuse(_bc2,this.lights));if("phong" in _bc3){_bc5=lite.scaleColor(_bc8*_bc3.Ks*_bc3.phong,lite.phong(_bc2,v,_bc3.phong_size,this.lights));}else{_bc5=lite.scaleColor(_bc8*_bc3.Ks,lite.specular(_bc2,v,_bc3.roughness,this.lights));}_bc6=lite.scaleColor(_bc4.a,lite.addColor(lite.multiplyColor(_bc4,lite.addColor(_bc7,_bc9)),lite.multiplyColor(this.specular,_bc5)));_bc6.a=_bc4.a;return lite.fromStdColor(lite.saturateColor(_bc6));},npr:function(_bca,_bcb,_bcc){if(typeof _bcb=="string"){_bcb=lite.finish[_bcb];}_bcc=lite.toStdColor(_bcc);_bca=lite.faceforward(lite.normalize(_bca),this.incident);var _bcd=lite.scaleColor(_bcb.Ka,this.ambient),_bce=lite.saturate(-4*lite.dot(_bca,this.incident)),_bcf=lite.scaleColor(_bce*_bcb.Kd,lite.diffuse(_bca,this.lights)),_bd0=lite.scaleColor(_bcc.a,lite.multiplyColor(_bcc,lite.addColor(_bcd,_bcf))),cool=lite.addColor(this.npr_cool,lite.scaleColor(this.npr_alpha,_bd0)),warm=lite.addColor(this.npr_warm,lite.scaleColor(this.npr_beta,_bd0)),d=(1+lite.dot(this.incident,_bca))/2,_bd0=lite.scaleColor(this.npr_scale,lite.addColor(_bd0,lite.mixColor(cool,warm,d)));_bd0.a=_bcc.a;return lite.fromStdColor(lite.saturateColor(_bd0));}});})();dojox.gfx3d.lighting.finish={defaults:{Ka:0.1,Kd:0.6,Ks:0,roughness:0.05},dull:{Ka:0.1,Kd:0.6,Ks:0.5,roughness:0.15},shiny:{Ka:0.1,Kd:0.6,Ks:1,roughness:0.001},glossy:{Ka:0.1,Kd:0.6,Ks:1,roughness:0.0001},phong_dull:{Ka:0.1,Kd:0.6,Ks:0.5,phong:0.5,phong_size:1},phong_shiny:{Ka:0.1,Kd:0.6,Ks:1,phong:1,phong_size:200},phong_glossy:{Ka:0.1,Kd:0.6,Ks:1,phong:1,phong_size:300},luminous:{Ka:1,Kd:0,Ks:0,roughness:0.05},metalA:{Ka:0.35,Kd:0.3,Ks:0.8,roughness:1/20},metalB:{Ka:0.3,Kd:0.4,Ks:0.7,roughness:1/60},metalC:{Ka:0.25,Kd:0.5,Ks:0.8,roughness:1/80},metalD:{Ka:0.15,Kd:0.6,Ks:0.8,roughness:1/100},metalE:{Ka:0.1,Kd:0.7,Ks:0.8,roughness:1/120}};}if(!dojo._hasResource["dojox.gfx3d.vector"]){dojo._hasResource["dojox.gfx3d.vector"]=true;dojo.provide("dojox.gfx3d.vector");dojo.mixin(dojox.gfx3d.vector,{sum:function(){var v={x:0,y:0,z:0};dojo.forEach(arguments,function(item){v.x+=item.x;v.y+=item.y;v.z+=item.z;});return v;},center:function(){var l=arguments.length;if(l==0){return {x:0,y:0,z:0};}var v=dojox.gfx3d.vector.sum(arguments);return {x:v.x/l,y:v.y/l,z:v.z/l};},substract:function(a,b){return {x:a.x-b.x,y:a.y-b.y,z:a.z-b.z};},_crossProduct:function(x,y,z,u,v,w){return {x:y*w-z*v,y:z*u-x*w,z:x*v-y*u};},crossProduct:function(a,b,c,d,e,f){if(arguments.length==6&&dojo.every(arguments,function(item){return typeof item=="number";})){return dojox.gfx3d.vector._crossProduct(a,b,c,d,e,f);}return dojox.gfx3d.vector._crossProduct(a.x,a.y,a.z,b.x,b.y,b.z);},_dotProduct:function(x,y,z,u,v,w){return x*u+y*v+z*w;},dotProduct:function(a,b,c,d,e,f){if(arguments.length==6&&dojo.every(arguments,function(item){return typeof item=="number";})){return dojox.gfx3d.vector._dotProduct(a,b,c,d,e,f);}return dojox.gfx3d.vector._dotProduct(a.x,a.y,a.z,b.x,b.y,b.z);},normalize:function(a,b,c){var l,m,n;if(a instanceof Array){l=a[0];m=a[1];n=a[2];}else{l=a;m=b;n=c;}var u=dojox.gfx3d.vector.substract(m,l);var v=dojox.gfx3d.vector.substract(n,l);return dojox.gfx3d.vector.crossProduct(u,v);}});}if(!dojo._hasResource["dojox.gfx3d.scheduler"]){dojo._hasResource["dojox.gfx3d.scheduler"]=true;dojo.provide("dojox.gfx3d.scheduler");dojo.provide("dojox.gfx3d.drawer");dojo.mixin(dojox.gfx3d.scheduler,{zOrder:function(_bd1,_bd2){_bd2=_bd2?_bd2:dojox.gfx3d.scheduler.order;_bd1.sort(function(a,b){return _bd2(b)-_bd2(a);});return _bd1;},bsp:function(_bd3,_bd4){_bd4=_bd4?_bd4:dojox.gfx3d.scheduler.outline;var p=new dojox.gfx3d.scheduler.BinarySearchTree(_bd3[0],_bd4);dojo.forEach(_bd3.slice(1),function(item){p.add(item,_bd4);});return p.iterate(_bd4);},order:function(it){return it.getZOrder();},outline:function(it){return it.getOutline();}});dojo.declare("dojox.gfx3d.scheduler.BinarySearchTree",null,{constructor:function(obj,_bd5){this.plus=null;this.minus=null;this.object=obj;var o=_bd5(obj);this.orient=o[0];this.normal=dojox.gfx3d.vector.normalize(o);},add:function(obj,_bd6){var _bd7=0.5,o=_bd6(obj),v=dojox.gfx3d.vector,n=this.normal,a=this.orient,BST=dojox.gfx3d.scheduler.BinarySearchTree;if(dojo.every(o,function(item){return Math.floor(_bd7+v.dotProduct(n,v.substract(item,a)))<=0;})){if(this.minus){this.minus.add(obj,_bd6);}else{this.minus=new BST(obj,_bd6);}}else{if(dojo.every(o,function(item){return Math.floor(_bd7+v.dotProduct(n,v.substract(item,a)))>=0;})){if(this.plus){this.plus.add(obj,_bd6);}else{this.plus=new BST(obj,_bd6);}}else{throw "The case: polygon cross siblings' plate is not implemneted yet";}}},iterate:function(_bd8){var _bd9=0.5;var v=dojox.gfx3d.vector;var _bda=[];var subs=null;var view={x:0,y:0,z:-10000};if(Math.floor(_bd9+v.dotProduct(this.normal,v.substract(view,this.orient)))<=0){subs=[this.plus,this.minus];}else{subs=[this.minus,this.plus];}if(subs[0]){_bda=_bda.concat(subs[0].iterate());}_bda.push(this.object);if(subs[1]){_bda=_bda.concat(subs[1].iterate());}return _bda;}});dojo.mixin(dojox.gfx3d.drawer,{conservative:function(_bdb,_bdc,_bdd){dojo.forEach(this.objects,function(item){item.destroy();});dojo.forEach(_bdc,function(item){item.draw(_bdd.lighting);});},chart:function(_bde,_bdf,_be0){dojo.forEach(this.todos,function(item){item.draw(_be0.lighting);});}});}if(!dojo._hasResource["dojox.gfx3d.gradient"]){dojo._hasResource["dojox.gfx3d.gradient"]=true;dojo.provide("dojox.gfx3d.gradient");(function(){var dist=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));};var N=32;dojox.gfx3d.gradient=function(_be1,_be2,_be3,_be4,from,to,_be5){var m=dojox.gfx3d.matrix,v=dojox.gfx3d.vector,mx=m.normalize(_be5),f=m.multiplyPoint(mx,_be4*Math.cos(from)+_be3.x,_be4*Math.sin(from)+_be3.y,_be3.z),t=m.multiplyPoint(mx,_be4*Math.cos(to)+_be3.x,_be4*Math.sin(to)+_be3.y,_be3.z),c=m.multiplyPoint(mx,_be3.x,_be3.y,_be3.z),step=(to-from)/N,r=dist(f,t)/2,mod=_be1[_be2.type],fin=_be2.finish,pmt=_be2.color,_be6=[{offset:0,color:mod.call(_be1,v.substract(f,c),fin,pmt)}];for(var a=from+step;a<to;a+=step){var p=m.multiplyPoint(mx,_be4*Math.cos(a)+_be3.x,_be4*Math.sin(a)+_be3.y,_be3.z),df=dist(f,p),dt=dist(t,p);_be6.push({offset:df/(df+dt),color:mod.call(_be1,v.substract(p,c),fin,pmt)});}_be6.push({offset:1,color:mod.call(_be1,v.substract(t,c),fin,pmt)});return {type:"linear",x1:0,y1:-r,x2:0,y2:r,colors:_be6};};})();}if(!dojo._hasResource["dojox.gfx3d.object"]){dojo._hasResource["dojox.gfx3d.object"]=true;dojo.provide("dojox.gfx3d.object");var out=function(o,x){if(arguments.length>1){o=x;}var e={};for(var i in o){if(i in e){continue;}}};dojo.declare("dojox.gfx3d.Object",null,{constructor:function(){this.object=null;this.matrix=null;this.cache=null;this.renderer=null;this.parent=null;this.strokeStyle=null;this.fillStyle=null;this.shape=null;},setObject:function(_be7){this.object=dojox.gfx.makeParameters(this.object,_be7);return this;},setTransform:function(_be8){this.matrix=dojox.gfx3d.matrix.clone(_be8?dojox.gfx3d.matrix.normalize(_be8):dojox.gfx3d.identity,true);return this;},applyRightTransform:function(_be9){return _be9?this.setTransform([this.matrix,_be9]):this;},applyLeftTransform:function(_bea){return _bea?this.setTransform([_bea,this.matrix]):this;},applyTransform:function(_beb){return _beb?this.setTransform([this.matrix,_beb]):this;},setFill:function(fill){this.fillStyle=fill;return this;},setStroke:function(_bec){this.strokeStyle=_bec;return this;},toStdFill:function(_bed,_bee){return (this.fillStyle&&typeof this.fillStyle["type"]!="undefined")?_bed[this.fillStyle.type](_bee,this.fillStyle.finish,this.fillStyle.color):this.fillStyle;},invalidate:function(){this.renderer.addTodo(this);},destroy:function(){if(this.shape){var p=this.shape.getParent();if(p){p.remove(this.shape);}this.shape=null;}},render:function(_bef){throw "Pure virtual function, not implemented";},draw:function(_bf0){throw "Pure virtual function, not implemented";},getZOrder:function(){return 0;},getOutline:function(){return null;}});dojo.declare("dojox.gfx3d.Scene",dojox.gfx3d.Object,{constructor:function(){this.objects=[];this.todos=[];this.schedule=dojox.gfx3d.scheduler.zOrder;this._draw=dojox.gfx3d.drawer.conservative;},setFill:function(fill){this.fillStyle=fill;dojo.forEach(this.objects,function(item){item.setFill(fill);});return this;},setStroke:function(_bf1){this.strokeStyle=_bf1;dojo.forEach(this.objects,function(item){item.setStroke(_bf1);});return this;},render:function(_bf2,deep){var m=dojox.gfx3d.matrix.multiply(_bf2,this.matrix);if(deep){this.todos=this.objects;}dojo.forEach(this.todos,function(item){item.render(m,deep);});},draw:function(_bf3){this.objects=this.schedule(this.objects);this._draw(this.todos,this.objects,this.renderer);},addTodo:function(_bf4){if(dojo.every(this.todos,function(item){return item!=_bf4;})){this.todos.push(_bf4);this.invalidate();}},invalidate:function(){this.parent.addTodo(this);},getZOrder:function(){var _bf5=0;dojo.forEach(this.objects,function(item){_bf5+=item.getZOrder();});return (this.objects.length>1)?_bf5/this.objects.length:0;}});dojo.declare("dojox.gfx3d.Edges",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultEdges);},setObject:function(_bf6,_bf7){this.object=dojox.gfx.makeParameters(this.object,(_bf6 instanceof Array)?{points:_bf6,style:_bf7}:_bf6);return this;},getZOrder:function(){var _bf8=0;dojo.forEach(this.cache,function(item){_bf8+=item.z;});return (this.cache.length>1)?_bf8/this.cache.length:0;},render:function(_bf9){var m=dojox.gfx3d.matrix.multiply(_bf9,this.matrix);this.cache=dojo.map(this.object.points,function(item){return dojox.gfx3d.matrix.multiplyPoint(m,item);});},draw:function(){var c=this.cache;if(this.shape){this.shape.setShape("");}else{this.shape=this.renderer.createPath();}var p=this.shape.setAbsoluteMode("absolute");if(this.object.style=="strip"||this.object.style=="loop"){p.moveTo(c[0].x,c[0].y);dojo.forEach(c.slice(1),function(item){p.lineTo(item.x,item.y);});if(this.object.style=="loop"){p.closePath();}}else{for(var i=0;i<this.cache.length;){p.moveTo(c[i].x,c[i].y);i++;p.lineTo(c[i].x,c[i].y);i++;}}p.setStroke(this.strokeStyle);}});dojo.declare("dojox.gfx3d.Orbit",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultOrbit);},render:function(_bfa){var m=dojox.gfx3d.matrix.multiply(_bfa,this.matrix);var _bfb=[0,Math.PI/4,Math.PI/3];var _bfc=dojox.gfx3d.matrix.multiplyPoint(m,this.object.center);var _bfd=dojo.map(_bfb,function(item){return {x:this.center.x+this.radius*Math.cos(item),y:this.center.y+this.radius*Math.sin(item),z:this.center.z};},this.object);_bfd=dojo.map(_bfd,function(item){return dojox.gfx3d.matrix.multiplyPoint(m,item);});var _bfe=dojox.gfx3d.vector.normalize(_bfd);_bfd=dojo.map(_bfd,function(item){return dojox.gfx3d.vector.substract(item,_bfc);});var A={xx:_bfd[0].x*_bfd[0].y,xy:_bfd[0].y*_bfd[0].y,xz:1,yx:_bfd[1].x*_bfd[1].y,yy:_bfd[1].y*_bfd[1].y,yz:1,zx:_bfd[2].x*_bfd[2].y,zy:_bfd[2].y*_bfd[2].y,zz:1,dx:0,dy:0,dz:0};var B=dojo.map(_bfd,function(item){return -Math.pow(item.x,2);});var X=dojox.gfx3d.matrix.multiplyPoint(dojox.gfx3d.matrix.invert(A),B[0],B[1],B[2]);var _bff=Math.atan2(X.x,1-X.y)/2;var _c00=dojo.map(_bfd,function(item){return dojox.gfx.matrix.multiplyPoint(dojox.gfx.matrix.rotate(-_bff),item.x,item.y);});var a=Math.pow(_c00[0].x,2);var b=Math.pow(_c00[0].y,2);var c=Math.pow(_c00[1].x,2);var d=Math.pow(_c00[1].y,2);var rx=Math.sqrt((a*d-b*c)/(d-b));var ry=Math.sqrt((a*d-b*c)/(a-c));this.cache={cx:_bfc.x,cy:_bfc.y,rx:rx,ry:ry,theta:_bff,normal:_bfe};},draw:function(_c01){if(this.shape){this.shape.setShape(this.cache);}else{this.shape=this.renderer.createEllipse(this.cache);}this.shape.applyTransform(dojox.gfx.matrix.rotateAt(this.cache.theta,this.cache.cx,this.cache.cy)).setStroke(this.strokeStyle).setFill(this.toStdFill(_c01,this.cache.normal));}});dojo.declare("dojox.gfx3d.Path3d",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultPath3d);this.segments=[];this.absolute=true;this.last={};this.path="";},_collectArgs:function(_c02,args){for(var i=0;i<args.length;++i){var t=args[i];if(typeof (t)=="boolean"){_c02.push(t?1:0);}else{if(typeof (t)=="number"){_c02.push(t);}else{if(t instanceof Array){this._collectArgs(_c02,t);}else{if("x" in t&&"y" in t){_c02.push(t.x);_c02.push(t.y);}}}}}},_validSegments:{m:3,l:3,z:0},_pushSegment:function(_c03,args){var _c04=this._validSegments[_c03.toLowerCase()],_c05;if(typeof (_c04)=="number"){if(_c04){if(args.length>=_c04){_c05={action:_c03,args:args.slice(0,args.length-args.length%_c04)};this.segments.push(_c05);}}else{_c05={action:_c03,args:[]};this.segments.push(_c05);}}},moveTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"M":"m",args);return this;},lineTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"L":"l",args);return this;},closePath:function(){this._pushSegment("Z",[]);return this;},render:function(_c06){var m=dojox.gfx3d.matrix.multiply(_c06,this.matrix);var path="";var _c07=this._validSegments;dojo.forEach(this.segments,function(item){path+=item.action;for(var i=0;i<item.args.length;i+=_c07[item.action.toLowerCase()]){var pt=dojox.gfx3d.matrix.multiplyPoint(m,item.args[i],item.args[i+1],item.args[i+2]);path+=" "+pt.x+" "+pt.y;}});this.cache=path;},_draw:function(){return this.parent.createPath(this.cache);}});dojo.declare("dojox.gfx3d.Triangles",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultTriangles);},setObject:function(_c08,_c09){if(_c08 instanceof Array){this.object=dojox.gfx.makeParameters(this.object,{points:_c08,style:_c09});}else{this.object=dojox.gfx.makeParameters(this.object,_c08);}return this;},render:function(_c0a){var m=dojox.gfx3d.matrix.multiply(_c0a,this.matrix);var c=dojo.map(this.object.points,function(item){return dojox.gfx3d.matrix.multiplyPoint(m,item);});this.cache=[];var pool=c.slice(0,2);var _c0b=c[0];if(this.object.style=="strip"){dojo.forEach(c.slice(2),function(item){pool.push(item);pool.push(pool[0]);this.cache.push(pool);pool=pool.slice(1,3);},this);}else{if(this.object.style=="fan"){dojo.forEach(c.slice(2),function(item){pool.push(item);pool.push(_c0b);this.cache.push(pool);pool=[_c0b,item];},this);}else{for(var i=0;i<c.length;){this.cache.push([c[i],c[i+1],c[i+2],c[i]]);i+=3;}}}},draw:function(_c0c){this.cache=dojox.gfx3d.scheduler.bsp(this.cache,function(it){return it;});if(this.shape){this.shape.clear();}else{this.shape=this.renderer.createGroup();}dojo.forEach(this.cache,function(item){this.shape.createPolyline(item).setStroke(this.strokeStyle).setFill(this.toStdFill(_c0c,dojox.gfx3d.vector.normalize(item)));},this);},getZOrder:function(){var _c0d=0;dojo.forEach(this.cache,function(item){_c0d+=(item[0].z+item[1].z+item[2].z)/3;});return (this.cache.length>1)?_c0d/this.cache.length:0;}});dojo.declare("dojox.gfx3d.Quads",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultQuads);},setObject:function(_c0e,_c0f){this.object=dojox.gfx.makeParameters(this.object,(_c0e instanceof Array)?{points:_c0e,style:_c0f}:_c0e);return this;},render:function(_c10){var m=dojox.gfx3d.matrix.multiply(_c10,this.matrix),i;var c=dojo.map(this.object.points,function(item){return dojox.gfx3d.matrix.multiplyPoint(m,item);});this.cache=[];if(this.object.style=="strip"){var pool=c.slice(0,2);for(i=2;i<c.length;){pool=pool.concat([c[i],c[i+1],pool[0]]);this.cache.push(pool);pool=pool.slice(2,4);i+=2;}}else{for(i=0;i<c.length;){this.cache.push([c[i],c[i+1],c[i+2],c[i+3],c[i]]);i+=4;}}},draw:function(_c11){this.cache=dojox.gfx3d.scheduler.bsp(this.cache,function(it){return it;});if(this.shape){this.shape.clear();}else{this.shape=this.renderer.createGroup();}for(var x=0;x<this.cache.length;x++){this.shape.createPolyline(this.cache[x]).setStroke(this.strokeStyle).setFill(this.toStdFill(_c11,dojox.gfx3d.vector.normalize(this.cache[x])));}},getZOrder:function(){var _c12=0;for(var x=0;x<this.cache.length;x++){var i=this.cache[x];_c12+=(i[0].z+i[1].z+i[2].z+i[3].z)/4;}return (this.cache.length>1)?_c12/this.cache.length:0;}});dojo.declare("dojox.gfx3d.Polygon",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultPolygon);},setObject:function(_c13){this.object=dojox.gfx.makeParameters(this.object,(_c13 instanceof Array)?{path:_c13}:_c13);return this;},render:function(_c14){var m=dojox.gfx3d.matrix.multiply(_c14,this.matrix);this.cache=dojo.map(this.object.path,function(item){return dojox.gfx3d.matrix.multiplyPoint(m,item);});this.cache.push(this.cache[0]);},draw:function(_c15){if(this.shape){this.shape.setShape({points:this.cache});}else{this.shape=this.renderer.createPolyline({points:this.cache});}this.shape.setStroke(this.strokeStyle).setFill(this.toStdFill(_c15,dojox.gfx3d.matrix.normalize(this.cache)));},getZOrder:function(){var _c16=0;for(var x=0;x<this.cache.length;x++){_c16+=this.cache[x].z;}return (this.cache.length>1)?_c16/this.cache.length:0;},getOutline:function(){return this.cache.slice(0,3);}});dojo.declare("dojox.gfx3d.Cube",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultCube);this.polygons=[];},setObject:function(_c17){this.object=dojox.gfx.makeParameters(this.object,_c17);},render:function(_c18){var a=this.object.top;var g=this.object.bottom;var b={x:g.x,y:a.y,z:a.z};var c={x:g.x,y:g.y,z:a.z};var d={x:a.x,y:g.y,z:a.z};var e={x:a.x,y:a.y,z:g.z};var f={x:g.x,y:a.y,z:g.z};var h={x:a.x,y:g.y,z:g.z};var _c19=[a,b,c,d,e,f,g,h];var m=dojox.gfx3d.matrix.multiply(_c18,this.matrix);var p=dojo.map(_c19,function(item){return dojox.gfx3d.matrix.multiplyPoint(m,item);});a=p[0];b=p[1];c=p[2];d=p[3];e=p[4];f=p[5];g=p[6];h=p[7];this.cache=[[a,b,c,d,a],[e,f,g,h,e],[a,d,h,e,a],[d,c,g,h,d],[c,b,f,g,c],[b,a,e,f,b]];},draw:function(_c1a){this.cache=dojox.gfx3d.scheduler.bsp(this.cache,function(it){return it;});var _c1b=this.cache.slice(3);if(this.shape){this.shape.clear();}else{this.shape=this.renderer.createGroup();}for(var x=0;x<_c1b.length;x++){this.shape.createPolyline(_c1b[x]).setStroke(this.strokeStyle).setFill(this.toStdFill(_c1a,dojox.gfx3d.vector.normalize(_c1b[x])));}},getZOrder:function(){var top=this.cache[0][0];var _c1c=this.cache[1][2];return (top.z+_c1c.z)/2;}});dojo.declare("dojox.gfx3d.Cylinder",dojox.gfx3d.Object,{constructor:function(){this.object=dojo.clone(dojox.gfx3d.defaultCylinder);},render:function(_c1d){var m=dojox.gfx3d.matrix.multiply(_c1d,this.matrix);var _c1e=[0,Math.PI/4,Math.PI/3];var _c1f=dojox.gfx3d.matrix.multiplyPoint(m,this.object.center);var _c20=dojo.map(_c1e,function(item){return {x:this.center.x+this.radius*Math.cos(item),y:this.center.y+this.radius*Math.sin(item),z:this.center.z};},this.object);_c20=dojo.map(_c20,function(item){return dojox.gfx3d.vector.substract(dojox.gfx3d.matrix.multiplyPoint(m,item),_c1f);});var A={xx:_c20[0].x*_c20[0].y,xy:_c20[0].y*_c20[0].y,xz:1,yx:_c20[1].x*_c20[1].y,yy:_c20[1].y*_c20[1].y,yz:1,zx:_c20[2].x*_c20[2].y,zy:_c20[2].y*_c20[2].y,zz:1,dx:0,dy:0,dz:0};var B=dojo.map(_c20,function(item){return -Math.pow(item.x,2);});var X=dojox.gfx3d.matrix.multiplyPoint(dojox.gfx3d.matrix.invert(A),B[0],B[1],B[2]);var _c21=Math.atan2(X.x,1-X.y)/2;var _c22=dojo.map(_c20,function(item){return dojox.gfx.matrix.multiplyPoint(dojox.gfx.matrix.rotate(-_c21),item.x,item.y);});var a=Math.pow(_c22[0].x,2);var b=Math.pow(_c22[0].y,2);var c=Math.pow(_c22[1].x,2);var d=Math.pow(_c22[1].y,2);var rx=Math.sqrt((a*d-b*c)/(d-b));var ry=Math.sqrt((a*d-b*c)/(a-c));if(rx<ry){var t=rx;rx=ry;ry=t;_c21-=Math.PI/2;}var top=dojox.gfx3d.matrix.multiplyPoint(m,dojox.gfx3d.vector.sum(this.object.center,{x:0,y:0,z:this.object.height}));var _c23=this.fillStyle.type=="constant"?this.fillStyle.color:dojox.gfx3d.gradient(this.renderer.lighting,this.fillStyle,this.object.center,this.object.radius,Math.PI,2*Math.PI,m);if(isNaN(rx)||isNaN(ry)||isNaN(_c21)){rx=this.object.radius,ry=0,_c21=0;}this.cache={center:_c1f,top:top,rx:rx,ry:ry,theta:_c21,gradient:_c23};},draw:function(){var c=this.cache,v=dojox.gfx3d.vector,m=dojox.gfx.matrix,_c24=[c.center,c.top],_c25=v.substract(c.top,c.center);if(v.dotProduct(_c25,this.renderer.lighting.incident)>0){_c24=[c.top,c.center];_c25=v.substract(c.center,c.top);}var _c26=this.renderer.lighting[this.fillStyle.type](_c25,this.fillStyle.finish,this.fillStyle.color),d=Math.sqrt(Math.pow(c.center.x-c.top.x,2)+Math.pow(c.center.y-c.top.y,2));if(this.shape){this.shape.clear();}else{this.shape=this.renderer.createGroup();}this.shape.createPath("").moveTo(0,-c.rx).lineTo(d,-c.rx).lineTo(d,c.rx).lineTo(0,c.rx).arcTo(c.ry,c.rx,0,true,true,0,-c.rx).setFill(c.gradient).setStroke(this.strokeStyle).setTransform([m.translate(_c24[0]),m.rotate(Math.atan2(_c24[1].y-_c24[0].y,_c24[1].x-_c24[0].x))]);if(c.rx>0&&c.ry>0){this.shape.createEllipse({cx:_c24[1].x,cy:_c24[1].y,rx:c.rx,ry:c.ry}).setFill(_c26).setStroke(this.strokeStyle).applyTransform(m.rotateAt(c.theta,_c24[1]));}}});dojo.declare("dojox.gfx3d.Viewport",dojox.gfx.Group,{constructor:function(){this.dimension=null;this.objects=[];this.todos=[];this.renderer=this;this.schedule=dojox.gfx3d.scheduler.zOrder;this.draw=dojox.gfx3d.drawer.conservative;this.deep=false;this.lights=[];this.lighting=null;},setCameraTransform:function(_c27){this.camera=dojox.gfx3d.matrix.clone(_c27?dojox.gfx3d.matrix.normalize(_c27):dojox.gfx3d.identity,true);this.invalidate();return this;},applyCameraRightTransform:function(_c28){return _c28?this.setCameraTransform([this.camera,_c28]):this;},applyCameraLeftTransform:function(_c29){return _c29?this.setCameraTransform([_c29,this.camera]):this;},applyCameraTransform:function(_c2a){return this.applyCameraRightTransform(_c2a);},setLights:function(_c2b,_c2c,_c2d){this.lights=(_c2b instanceof Array)?{sources:_c2b,ambient:_c2c,specular:_c2d}:_c2b;var view={x:0,y:0,z:1};this.lighting=new dojox.gfx3d.lighting.Model(view,this.lights.sources,this.lights.ambient,this.lights.specular);this.invalidate();return this;},addLights:function(_c2e){return this.setLights(this.lights.sources.concat(_c2e));},addTodo:function(_c2f){if(dojo.every(this.todos,function(item){return item!=_c2f;})){this.todos.push(_c2f);}},invalidate:function(){this.deep=true;this.todos=this.objects;},setDimensions:function(dim){if(dim){var w=dojo.isString(dim.width)?parseInt(dim.width):dim.width;var h=dojo.isString(dim.height)?parseInt(dim.height):dim.height;if(this.rawNode){var trs=this.rawNode.style;trs.height=h;trs.width=w;}this.dimension={width:w,height:h};}else{this.dimension=null;}},render:function(){if(!this.todos.length){return;}var m=dojox.gfx3d.matrix;for(var x=0;x<this.todos.length;x++){this.todos[x].render(dojox.gfx3d.matrix.normalize([m.cameraRotateXg(180),m.cameraTranslate(0,this.dimension.height,0),this.camera]),this.deep);}this.objects=this.schedule(this.objects);this.draw(this.todos,this.objects,this);this.todos=[];this.deep=false;}});dojox.gfx3d.Viewport.nodeType=dojox.gfx.Group.nodeType;dojox.gfx3d._creators={createEdges:function(_c30,_c31){return this.create3DObject(dojox.gfx3d.Edges,_c30,_c31);},createTriangles:function(tris,_c32){return this.create3DObject(dojox.gfx3d.Triangles,tris,_c32);},createQuads:function(_c33,_c34){return this.create3DObject(dojox.gfx3d.Quads,_c33,_c34);},createPolygon:function(_c35){return this.create3DObject(dojox.gfx3d.Polygon,_c35);},createOrbit:function(_c36){return this.create3DObject(dojox.gfx3d.Orbit,_c36);},createCube:function(cube){return this.create3DObject(dojox.gfx3d.Cube,cube);},createCylinder:function(_c37){return this.create3DObject(dojox.gfx3d.Cylinder,_c37);},createPath3d:function(path){return this.create3DObject(dojox.gfx3d.Path3d,path);},createScene:function(){return this.create3DObject(dojox.gfx3d.Scene);},create3DObject:function(_c38,_c39,_c3a){var obj=new _c38();this.adopt(obj);if(_c39){obj.setObject(_c39,_c3a);}return obj;},adopt:function(obj){obj.renderer=this.renderer;obj.parent=this;this.objects.push(obj);this.addTodo(obj);return this;},abandon:function(obj,_c3b){for(var i=0;i<this.objects.length;++i){if(this.objects[i]==obj){this.objects.splice(i,1);}}obj.parent=null;return this;},setScheduler:function(_c3c){this.schedule=_c3c;},setDrawer:function(_c3d){this.draw=_c3d;}};dojo.extend(dojox.gfx3d.Viewport,dojox.gfx3d._creators);dojo.extend(dojox.gfx3d.Scene,dojox.gfx3d._creators);delete dojox.gfx3d._creators;dojo.extend(dojox.gfx.Surface,{createViewport:function(){var _c3e=this.createObject(dojox.gfx3d.Viewport,null,true);_c3e.setDimensions(this.getDimensions());return _c3e;}});}if(!dojo._hasResource["dojox.gfx3d"]){dojo._hasResource["dojox.gfx3d"]=true;dojo.provide("dojox.gfx3d");}if(!dojo._hasResource["dojox.highlight._base"]){dojo._hasResource["dojox.highlight._base"]=true;dojo.provide("dojox.highlight._base");(function(){var dh=dojox.highlight,_c3f="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)";dh.constants={IDENT_RE:"[a-zA-Z][a-zA-Z0-9_]*",UNDERSCORE_IDENT_RE:"[a-zA-Z_][a-zA-Z0-9_]*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:_c3f,APOS_STRING_MODE:{className:"string",begin:"'",end:"'",illegal:"\\n",contains:["escape"],relevance:0},QUOTE_STRING_MODE:{className:"string",begin:"\"",end:"\"",illegal:"\\n",contains:["escape"],relevance:0},BACKSLASH_ESCAPE:{className:"escape",begin:"\\\\.",end:"^",relevance:0},C_LINE_COMMENT_MODE:{className:"comment",begin:"//",end:"$",relevance:0},C_BLOCK_COMMENT_MODE:{className:"comment",begin:"/\\*",end:"\\*/"},HASH_COMMENT_MODE:{className:"comment",begin:"#",end:"$"},C_NUMBER_MODE:{className:"number",begin:_c3f,end:"^",relevance:0}};function esc(_c40){return _c40.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;");};function _c41(_c42){return dojo.every(_c42.childNodes,function(node){return node.nodeType==3||String(node.nodeName).toLowerCase()=="br";});};function _c43(_c44){var _c45=[];dojo.forEach(_c44.childNodes,function(node){if(node.nodeType==3){_c45.push(node.nodeValue);}else{if(String(node.nodeName).toLowerCase()=="br"){_c45.push("\n");}else{throw "Complex markup";}}});return _c45.join("");};function _c46(mode){if(!mode.keywordGroups){for(var key in mode.keywords){var kw=mode.keywords[key];if(kw instanceof Object){mode.keywordGroups=mode.keywords;}else{mode.keywordGroups={keyword:mode.keywords};}break;}}};function _c47(lang){if(lang.defaultMode&&lang.modes){_c46(lang.defaultMode);dojo.forEach(lang.modes,_c46);}};var _c48=function(_c49,_c4a){this.langName=_c49;this.lang=dh.languages[_c49];this.modes=[this.lang.defaultMode];this.relevance=0;this.keywordCount=0;this.result=[];if(!this.lang.defaultMode.illegalRe){this.buildRes();_c47(this.lang);}try{this.highlight(_c4a);this.result=this.result.join("");}catch(e){if(e=="Illegal"){this.relevance=0;this.keywordCount=0;this.partialResult=this.result.join("");this.result=esc(_c4a);}else{throw e;}}};dojo.extend(_c48,{buildRes:function(){dojo.forEach(this.lang.modes,function(mode){if(mode.begin){mode.beginRe=this.langRe("^"+mode.begin);}if(mode.end){mode.endRe=this.langRe("^"+mode.end);}if(mode.illegal){mode.illegalRe=this.langRe("^(?:"+mode.illegal+")");}},this);this.lang.defaultMode.illegalRe=this.langRe("^(?:"+this.lang.defaultMode.illegal+")");},subMode:function(_c4b){var _c4c=this.modes[this.modes.length-1].contains;if(_c4c){var _c4d=this.lang.modes;for(var i=0;i<_c4c.length;++i){var _c4e=_c4c[i];for(var j=0;j<_c4d.length;++j){var mode=_c4d[j];if(mode.className==_c4e&&mode.beginRe.test(_c4b)){return mode;}}}}return null;},endOfMode:function(_c4f){for(var i=this.modes.length-1;i>=0;--i){var mode=this.modes[i];if(mode.end&&mode.endRe.test(_c4f)){return this.modes.length-i;}if(!mode.endsWithParent){break;}}return 0;},isIllegal:function(_c50){var _c51=this.modes[this.modes.length-1].illegalRe;return _c51&&_c51.test(_c50);},langRe:function(_c52,_c53){var mode="m"+(this.lang.case_insensitive?"i":"")+(_c53?"g":"");return new RegExp(_c52,mode);},buildTerminators:function(){var mode=this.modes[this.modes.length-1],_c54={};if(mode.contains){dojo.forEach(this.lang.modes,function(_c55){if(dojo.indexOf(mode.contains,_c55.className)>=0){_c54[_c55.begin]=1;}});}for(var i=this.modes.length-1;i>=0;--i){var m=this.modes[i];if(m.end){_c54[m.end]=1;}if(!m.endsWithParent){break;}}if(mode.illegal){_c54[mode.illegal]=1;}var t=[];for(i in _c54){t.push(i);}mode.terminatorsRe=this.langRe("("+t.join("|")+")");},eatModeChunk:function(_c56,_c57){var mode=this.modes[this.modes.length-1];if(!mode.terminatorsRe){this.buildTerminators();}_c56=_c56.substr(_c57);var _c58=mode.terminatorsRe.exec(_c56);if(!_c58){return {buffer:_c56,lexeme:"",end:true};}return {buffer:_c58.index?_c56.substr(0,_c58.index):"",lexeme:_c58[0],end:false};},keywordMatch:function(mode,_c59){var _c5a=_c59[0];if(this.lang.case_insensitive){_c5a=_c5a.toLowerCase();}for(var _c5b in mode.keywordGroups){if(_c5a in mode.keywordGroups[_c5b]){return _c5b;}}return "";},buildLexemes:function(mode){var _c5c={};dojo.forEach(mode.lexems,function(_c5d){_c5c[_c5d]=1;});var t=[];for(var i in _c5c){t.push(i);}mode.lexemsRe=this.langRe("("+t.join("|")+")",true);},processKeywords:function(_c5e){var mode=this.modes[this.modes.length-1];if(!mode.keywords||!mode.lexems){return esc(_c5e);}if(!mode.lexemsRe){this.buildLexemes(mode);}mode.lexemsRe.lastIndex=0;var _c5f=[],_c60=0,_c61=mode.lexemsRe.exec(_c5e);while(_c61){_c5f.push(esc(_c5e.substr(_c60,_c61.index-_c60)));var _c62=this.keywordMatch(mode,_c61);if(_c62){++this.keywordCount;_c5f.push("<span class=\""+_c62+"\">"+esc(_c61[0])+"</span>");}else{_c5f.push(esc(_c61[0]));}_c60=mode.lexemsRe.lastIndex;_c61=mode.lexemsRe.exec(_c5e);}_c5f.push(esc(_c5e.substr(_c60,_c5e.length-_c60)));return _c5f.join("");},processModeInfo:function(_c63,_c64,end){var mode=this.modes[this.modes.length-1];if(end){this.result.push(this.processKeywords(mode.buffer+_c63));return;}if(this.isIllegal(_c64)){throw "Illegal";}var _c65=this.subMode(_c64);if(_c65){mode.buffer+=_c63;this.result.push(this.processKeywords(mode.buffer));if(_c65.excludeBegin){this.result.push(_c64+"<span class=\""+_c65.className+"\">");_c65.buffer="";}else{this.result.push("<span class=\""+_c65.className+"\">");_c65.buffer=_c64;}this.modes.push(_c65);this.relevance+=typeof _c65.relevance=="number"?_c65.relevance:1;return;}var _c66=this.endOfMode(_c64);if(_c66){mode.buffer+=_c63;if(mode.excludeEnd){this.result.push(this.processKeywords(mode.buffer)+"</span>"+_c64);}else{this.result.push(this.processKeywords(mode.buffer+_c64)+"</span>");}while(_c66>1){this.result.push("</span>");--_c66;this.modes.pop();}this.modes.pop();this.modes[this.modes.length-1].buffer="";return;}},highlight:function(_c67){var _c68=0;this.lang.defaultMode.buffer="";do{var _c69=this.eatModeChunk(_c67,_c68);this.processModeInfo(_c69.buffer,_c69.lexeme,_c69.end);_c68+=_c69.buffer.length+_c69.lexeme.length;}while(!_c69.end);if(this.modes.length>1){throw "Illegal";}}});function _c6a(node,_c6b,text){if(String(node.tagName).toLowerCase()=="code"&&String(node.parentNode.tagName).toLowerCase()=="pre"){var _c6c=document.createElement("div"),_c6d=node.parentNode.parentNode;_c6c.innerHTML="<pre><code class=\""+_c6b+"\">"+text+"</code></pre>";_c6d.replaceChild(_c6c.firstChild,node.parentNode);}else{node.className=_c6b;node.innerHTML=text;}};function _c6e(lang,str){var _c6f=new _c48(lang,str);return {result:_c6f.result,langName:lang,partialResult:_c6f.partialResult};};function _c70(_c71,lang){var _c72=_c6e(lang,_c43(_c71));_c6a(_c71,_c71.className,_c72.result);};function _c73(str){var _c74="",_c75="",_c76=2,_c77=str;for(var key in dh.languages){if(!dh.languages[key].defaultMode){continue;}var _c78=new _c48(key,_c77),_c79=_c78.keywordCount+_c78.relevance,_c7a=0;if(!_c74||_c79>_c7a){_c7a=_c79;_c74=_c78.result;_c75=_c78.langName;}}return {result:_c74,langName:_c75};};function _c7b(_c7c){var _c7d=_c73(_c43(_c7c));if(_c7d.result){_c6a(_c7c,_c7d.langName,_c7d.result);}};dojox.highlight.processString=function(str,lang){return lang?_c6e(lang,str):_c73(str);};dojox.highlight.init=function(node){node=dojo.byId(node);if(dojo.hasClass(node,"no-highlight")){return;}if(!_c41(node)){return;}var _c7e=node.className.split(/\s+/),flag=dojo.some(_c7e,function(_c7f){if(_c7f.charAt(0)!="_"&&dh.languages[_c7f]){_c70(node,_c7f);return true;}return false;});if(!flag){_c7b(node);}};dh.Code=function(p,n){dh.init(n);};})();}if(!dojo._hasResource["dojox.highlight"]){dojo._hasResource["dojox.highlight"]=true;dojo.provide("dojox.highlight");}if(!dojo._hasResource["dojox.math._base"]){dojo._hasResource["dojox.math._base"]=true;dojo.provide("dojox.math._base");dojo.getObject("math",true,dojox);(function(){var m=dojox.math;dojo.mixin(dojox.math,{toRadians:function(n){return (n*Math.PI)/180;},toDegrees:function(n){return (n*180)/Math.PI;},degreesToRadians:function(n){return m.toRadians(n);},radiansToDegrees:function(n){return m.toDegrees(n);},_gamma:function(z){var _c80=1;while(--z>=1){_c80*=z;}if(z==0){return _c80;}if(Math.floor(z)==z){return NaN;}if(z==-0.5){return Math.sqrt(Math.PI);}if(z<-0.5){return Math.PI/(Math.sin(Math.PI*(z+1))*this._gamma(-z));}var a=13;var c=[0.000005665805601518633,1.274371766337968,-4.937419909315511,7.872026703248596,-6.676050374943609,3.252529844448517,-0.9185252144102627,0.14474022977730785,-0.011627561382389852,0.0004011798075706662,-0.0000042652458386405745,6.665191329033609e-9,-1.5392547381874824e-13];var sum=c[0];for(var k=1;k<a;k++){sum+=c[k]/(z+k);}return _c80*Math.pow(z+a,z+0.5)/Math.exp(z)*sum;},factorial:function(n){return this._gamma(n+1);},permutations:function(n,k){if(n==0||k==0){return 1;}return this.factorial(n)/this.factorial(n-k);},combinations:function(n,r){if(n==0||r==0){return 1;}return this.factorial(n)/(this.factorial(n-r)*this.factorial(r));},bernstein:function(t,n,i){return this.combinations(n,i)*Math.pow(t,i)*Math.pow(1-t,n-i);},gaussian:function(){var k=2;do{var i=2*Math.random()-1;var j=2*Math.random()-1;k=i*i+j*j;}while(k>=1);return i*Math.sqrt((-2*Math.log(k))/k);},range:function(a,b,step){if(arguments.length<2){b=a,a=0;}var _c81=[],s=step||1,i;if(s>0){for(i=a;i<b;i+=s){_c81.push(i);}}else{if(s<0){for(i=a;i>b;i+=s){_c81.push(i);}}else{throw new Error("dojox.math.range: step must not be zero.");}}return _c81;},distance:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2));},midpoint:function(a,b){if(a.length!=b.length){console.error("dojox.math.midpoint: Points A and B are not the same dimensionally.",a,b);}var m=[];for(var i=0;i<a.length;i++){m[i]=(a[i]+b[i])/2;}return m;}});})();}if(!dojo._hasResource["dojox.math"]){dojo._hasResource["dojox.math"]=true;dojo.provide("dojox.math");dojo.getObject("math",true,dojox);}if(!dojo._hasResource["dojox.layout.ResizeHandle"]){dojo._hasResource["dojox.layout.ResizeHandle"]=true;dojo.provide("dojox.layout.ResizeHandle");dojo.experimental("dojox.layout.ResizeHandle");dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=dijit.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new dojox.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"}).placeAt(dojo.body());dojo.addClass(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _c82=dojo.partial(dojo.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_c82("dojoxResizeNW");break;case "x":this._resizeX=true;_c82("dojoxResizeW");break;case "y":this._resizeY=true;_c82("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return false;}dojo.publish(this.startTopic,[this]);this.targetWidget=dijit.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:dojo.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return false;}if(!this.activeResize){var c=dojo.position(this.targetDomNode,true);console.log(c);console.log(dojo.window.getBox());this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var mb=this.targetWidget?dojo.marginBox(this.targetDomNode):dojo.contentBox(this.targetDomNode);this.startSize={w:mb.w,h:mb.h};if(this.fixedAspect){var max,val;if(mb.w>mb.h){max="w";val=mb.w/mb.h;}else{max="h";val=mb.h/mb.w;}this._aspect={prop:max};this._aspect[max]=val;}this._pconnects=[];this._pconnects.push(dojo.connect(dojo.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(dojo.connect(dojo.doc,"onmouseup",this,"_endSizing"));dojo.stopEvent(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?this.startPoint.x-e.clientX:e.clientX-this.startPoint.x),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0);return this._checkConstraints(newW,newH);},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var ta=this._aspect[this._aspect.prop];if(newW<newH){newH=newW*ta;}else{if(newH<newW){newW=newH*ta;}}}return {w:newW,h:newH};},_changeSizing:function(e){var tmp=this._getNewCoords(e);if(tmp===false){return;}if(this.targetWidget&&dojo.isFunction(this.targetWidget.resize)){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{dojo.style(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){dojo.forEach(this._pconnects,dojo.disconnect);var pub=dojo.partial(dojo.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});dojo.declare("dojox.layout._ResizeHelper",dijit._Widget,{show:function(){dojo.fadeIn({node:this.domNode,duration:120,beforeBegin:function(n){dojo.style(n,"display","");}}).play();},hide:function(){dojo.fadeOut({node:this.domNode,duration:250,onEnd:function(n){dojo.style(n,"display","none");}}).play();},resize:function(dim){dojo.marginBox(this.domNode,dim);}});}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var _c83=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;}var _c84=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var _c85=dojox.html._adjustCssPaths=function(_c86,_c87){if(!_c87||!_c86){return;}if(_c83){_c87=_c87.replace(_c83,function(_c88,pre,_c89,url,post){return pre+(new dojo._Url(_c86,"./"+url).toString())+post;});}return _c87.replace(_c84,function(_c8a,_c8b,_c8c,_c8d,_c8e,_c8f){if(_c8c){return "@import \""+(new dojo._Url(_c86,"./"+_c8c).toString())+"\""+_c8f;}else{return "url("+(new dojo._Url(_c86,"./"+_c8e).toString())+")"+_c8f;}});};var _c90=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var _c91=dojox.html._adjustHtmlPaths=function(_c92,cont){var url=_c92||"./";return cont.replace(_c90,function(tag,_c93,name,_c94,_c95,_c96,_c97,end){return _c93+(name?(name+"="+_c94+(new dojo._Url(url,_c95).toString())+_c94):("style="+_c96+_c85(url,_c97)+_c96))+end;});};var _c98=dojox.html._snarfStyles=function(_c99,cont,_c9a){_c9a.attributes=[];return cont.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_c9b,_c9c,_c9d,_c9e,_c9f,href){var i,attr=(_c9c||_c9e||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(_c9d){i=_c9a.push(_c99?_c85(_c99,_c9d):_c9d);}else{i=_c9a.push("@import \""+href+"\";");attr=attr.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");}if(attr){attr=attr.split(/\s+/);var _ca0={},tmp;for(var j=0,e=attr.length;j<e;j++){tmp=attr[j].split("=");_ca0[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");}_c9a.attributes[i-1]=_ca0;}return "";});};var _ca1=dojox.html._snarfScripts=function(cont,_ca2){_ca2.code="";cont=cont.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(_ca3){return _ca3.replace(/<(\/?)script\b/ig,"&lt;$1Script");});function _ca4(src){if(_ca2.downloadRemote){src=src.replace(/&([a-z0-9#]+);/g,function(m,name){switch(name){case "amp":return "&";case "gt":return ">";case "lt":return "<";default:return name.charAt(0)=="#"?String.fromCharCode(name.substring(1)):"&"+name+";";}});dojo.xhrGet({url:src,sync:true,load:function(code){_ca2.code+=code+";";},error:_ca2.errBack});}};return cont.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(_ca5,_ca6,src,code){if(src){_ca4(src);}else{_ca2.code+=code;}return "";});};var _ca7=dojox.html.evalInGlobal=function(code,_ca8){_ca8=_ca8||dojo.doc.body;var n=_ca8.ownerDocument.createElement("script");n.type="text/javascript";_ca8.appendChild(n);n.text=code;};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_ca9){this._styleNodes=[];var st,att,_caa,doc=this.node.ownerDocument;var head=doc.getElementsByTagName("head")[0];for(var i=0,e=_ca9.length;i<e;i++){_caa=_ca9[i];att=_ca9.attributes[i];st=doc.createElement("style");st.setAttribute("type","text/css");for(var x in att){st.setAttribute(x,att[x]);}this._styleNodes.push(st);head.appendChild(st);if(st.styleSheet){st.styleSheet.cssText=_caa;}else{st.appendChild(doc.createTextNode(_caa));}}},empty:function(){this.inherited("empty",arguments);this._styles=[];},onBegin:function(){this.inherited("onBegin",arguments);var cont=this.content,node=this.node;var _cab=this._styles;if(dojo.isString(cont)){if(this.adjustPaths&&this.referencePath){cont=_c91(this.referencePath,cont);}if(this.renderStyles||this.cleanContent){cont=_c98(this.referencePath,cont,_cab);}if(this.executeScripts){var _cac=this;var _cad={downloadRemote:true,errBack:function(e){_cac._onError.call(_cac,"Exec","Error downloading remote script in \""+_cac.id+"\"",e);}};cont=_ca1(cont,_cad);this._code=_cad.code;}}this.content=cont;},onEnd:function(){var code=this._code,_cae=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}if(this.renderStyles&&_cae&&_cae.length){this._renderStyles(_cae);}if(this.executeScripts&&code){if(this.cleanContent){code=code.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");}if(this.scriptHasHooks){code=code.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);}try{_ca7(code,this.node);}catch(e){this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);}}this.inherited("onEnd",arguments);},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype);}});dojox.html.set=function(node,cont,_caf){if(!_caf){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojox.html._ContentSetter(dojo.mixin(_caf,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet;},onExecError:function(e){},_setContent:function(cont){var _cb0=this._contentSetter;if(!(_cb0&&_cb0 instanceof dojox.html._ContentSetter)){_cb0=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _cb1=this.onContentError(e);try{this.containerNode.innerHTML=_cb1;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments);}});}if(!dojo._hasResource["dojox.layout.ScrollPane"]){dojo._hasResource["dojox.layout.ScrollPane"]=true;dojo.provide("dojox.layout.ScrollPane");dojo.experimental("dojox.layout.ScrollPane");dojo.declare("dojox.layout.ScrollPane",[dijit.layout.ContentPane,dijit._Templated],{_line:null,_lo:null,_offset:15,orientation:"vertical",autoHide:true,templateString:dojo.cache("dojox.layout","resources/ScrollPane.html","<div class=\"dojoxScrollWindow\" dojoAttachEvent=\"onmouseenter: _enter, onmouseleave: _leave\">\n    <div class=\"dojoxScrollWrapper\" style=\"${style}\" dojoAttachPoint=\"wrapper\" dojoAttachEvent=\"onmousemove: _calc\">\n\t<div class=\"dojoxScrollPane\" dojoAttachPoint=\"containerNode\"></div>\n    </div>\n    <div dojoAttachPoint=\"helper\" class=\"dojoxScrollHelper\"><span class=\"helperInner\">|</span></div>\n</div>\n"),resize:function(size){if(size){if(size.h){dojo.style(this.domNode,"height",size.h+"px");}if(size.w){dojo.style(this.domNode,"width",size.w+"px");}}var dir=this._dir,vert=this._vertical,val=this.containerNode[(vert?"scrollHeight":"scrollWidth")];dojo.style(this.wrapper,this._dir,this.domNode.style[this._dir]);this._lo=dojo.coords(this.wrapper,true);this._size=Math.max(0,val-this._lo[(vert?"h":"w")]);if(!this._size){this.helper.style.display="none";this.wrapper[this._scroll]=0;return;}else{this.helper.style.display="";}this._line=new dojo._Line(0-this._offset,this._size+(this._offset*2));var u=this._lo[(vert?"h":"w")],r=Math.min(1,u/val),s=u*r,c=Math.floor(u-(u*r));this._helpLine=new dojo._Line(0,c);dojo.style(this.helper,dir,Math.floor(s)+"px");},postCreate:function(){this.inherited(arguments);if(this.autoHide){this._showAnim=dojo._fade({node:this.helper,end:0.5,duration:350});this._hideAnim=dojo.fadeOut({node:this.helper,duration:750});}this._vertical=(this.orientation=="vertical");if(!this._vertical){dojo.addClass(this.containerNode,"dijitInline");this._dir="width";this._edge="left";this._scroll="scrollLeft";}else{this._dir="height";this._edge="top";this._scroll="scrollTop";}if(this._hideAnim){this._hideAnim.play();}dojo.style(this.wrapper,"overflow","hidden");},_set:function(n){if(!this._size){return;}this.wrapper[this._scroll]=Math.floor(this._line.getValue(n));dojo.style(this.helper,this._edge,Math.floor(this._helpLine.getValue(n))+"px");},_calc:function(e){if(!this._lo){this.resize();}this._set(this._vertical?((e.pageY-this._lo.y)/this._lo.h):((e.pageX-this._lo.x)/this._lo.w));},_enter:function(e){if(this._hideAnim){if(this._hideAnim.status()=="playing"){this._hideAnim.stop();}this._showAnim.play();}},_leave:function(e){if(this._hideAnim){this._hideAnim.play();}}});}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.getObject("fx.easing",true,dojo);dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["dojox.layout.RadioGroup"]){dojo._hasResource["dojox.layout.RadioGroup"]=true;dojo.provide("dojox.layout.RadioGroup");dojo.experimental("dojox.layout.RadioGroup");dojo.declare("dojox.layout.RadioGroup",[dijit.layout.StackContainer,dijit._Templated],{duration:750,hasButtons:false,buttonClass:"dojox.layout._RadioButton",templateString:"<div class=\"dojoxRadioGroup\">"+" \t<div dojoAttachPoint=\"buttonHolder\" style=\"display:none;\">"+"\t\t<table class=\"dojoxRadioButtons\"><tbody><tr class=\"dojoxRadioButtonRow\" dojoAttachPoint=\"buttonNode\"></tr></tbody></table>"+"\t</div>"+"\t<div class=\"dojoxRadioView\" dojoAttachPoint=\"containerNode\"></div>"+"</div>",startup:function(){this.inherited(arguments);this._children=this.getChildren();this._buttons=this._children.length;this._size=dojo.coords(this.containerNode);if(this.hasButtons){dojo.style(this.buttonHolder,"display","block");}},_setupChild:function(_cb2){dojo.style(_cb2.domNode,"position","absolute");if(this.hasButtons){var tmp=this.buttonNode.appendChild(dojo.create("td"));var n=dojo.create("div",null,tmp),_cb3=dojo.getObject(this.buttonClass),tmpw=new _cb3({label:_cb2.title,page:_cb2},n);dojo.mixin(_cb2,{_radioButton:tmpw});tmpw.startup();}_cb2.domNode.style.display="none";},removeChild:function(_cb4){if(this.hasButtons&&_cb4._radioButton){_cb4._radioButton.destroy();delete _cb4._radioButton;}this.inherited(arguments);},_transition:function(_cb5,_cb6){this._showChild(_cb5);if(_cb6){this._hideChild(_cb6);}if(this.doLayout&&_cb5.resize){_cb5.resize(this._containerContentBox||this._contentBox);}},_showChild:function(page){var _cb7=this.getChildren();page.isFirstChild=(page==_cb7[0]);page.isLastChild=(page==_cb7[_cb7.length-1]);page.selected=true;page.domNode.style.display="";if(page._onShow){page._onShow();}else{if(page.onShow){page.onShow();}}},_hideChild:function(page){page.selected=false;page.domNode.style.display="none";if(page.onHide){page.onHide();}}});dojo.declare("dojox.layout.RadioGroupFade",dojox.layout.RadioGroup,{_hideChild:function(page){dojo.fadeOut({node:page.domNode,duration:this.duration,onEnd:dojo.hitch(this,"inherited",arguments,arguments)}).play();},_showChild:function(page){this.inherited(arguments);dojo.style(page.domNode,"opacity",0);dojo.fadeIn({node:page.domNode,duration:this.duration}).play();}});dojo.declare("dojox.layout.RadioGroupSlide",dojox.layout.RadioGroup,{easing:"dojo.fx.easing.backOut",zTop:99,constructor:function(){if(dojo.isString(this.easing)){this.easing=dojo.getObject(this.easing);}},_positionChild:function(page){if(!this._size){return;}var rA=true,rB=true;switch(page.slideFrom){case "bottom":rB=!rB;break;case "right":rA=!rA;rB=!rB;break;case "top":break;case "left":rA=!rA;break;default:rA=Math.round(Math.random());rB=Math.round(Math.random());break;}var prop=rA?"top":"left",val=(rB?"-":"")+(this._size[rA?"h":"w"]+20)+"px";dojo.style(page.domNode,prop,val);},_showChild:function(page){var _cb8=this.getChildren();page.isFirstChild=(page==_cb8[0]);page.isLastChild=(page==_cb8[_cb8.length-1]);page.selected=true;dojo.style(page.domNode,{zIndex:this.zTop,display:""});if(this._anim&&this._anim.status()=="playing"){this._anim.gotoPercent(100,true);}this._anim=dojo.animateProperty({node:page.domNode,properties:{left:0,top:0},duration:this.duration,easing:this.easing,onEnd:dojo.hitch(page,function(){if(this.onShow){this.onShow();}if(this._onShow){this._onShow();}}),beforeBegin:dojo.hitch(this,"_positionChild",page)});this._anim.play();},_hideChild:function(page){page.selected=false;page.domNode.style.zIndex=this.zTop-1;if(page.onHide){page.onHide();}}});dojo.declare("dojox.layout._RadioButton",[dijit._Widget,dijit._Templated,dijit._Contained],{label:"",page:null,templateString:"<div dojoAttachPoint=\"focusNode\" class=\"dojoxRadioButton\"><span dojoAttachPoint=\"titleNode\" class=\"dojoxRadioButtonLabel\">${label}</span></div>",startup:function(){this.connect(this.domNode,"onmouseenter","_onMouse");},_onMouse:function(e){this.getParent().selectChild(this.page);this._clearSelected();dojo.addClass(this.domNode,"dojoxRadioButtonSelected");},_clearSelected:function(){dojo.query(".dojoxRadioButtonSelected",this.domNode.parentNode.parentNode).removeClass("dojoxRadioButtonSelected");}});dojo.extend(dijit._Widget,{slideFrom:"random"});}if(!dojo._hasResource["dojox.layout.ExpandoPane"]){dojo._hasResource["dojox.layout.ExpandoPane"]=true;dojo.provide("dojox.layout.ExpandoPane");dojo.experimental("dojox.layout.ExpandoPane");dojo.declare("dojox.layout.ExpandoPane",[dijit.layout.ContentPane,dijit._Templated,dijit._Contained,dijit._Container],{attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),templateString:dojo.cache("dojox.layout","resources/ExpandoPane.html","<div class=\"dojoxExpandoPane\">\n\t<div dojoAttachPoint=\"titleWrapper\" class=\"dojoxExpandoTitle\">\n\t\t<div class=\"dojoxExpandoIcon\" dojoAttachPoint=\"iconNode\" dojoAttachEvent=\"onclick:toggle\"><span class=\"a11yNode\">X</span></div>\t\t\t\n\t\t<span class=\"dojoxExpandoTitleNode\" dojoAttachPoint=\"titleNode\">${title}</span>\n\t</div>\n\t<div class=\"dojoxExpandoWrapper\" dojoAttachPoint=\"cwrapper\" dojoAttachEvent=\"ondblclick:_trap\">\n\t\t<div class=\"dojoxExpandoContent\" dojoAttachPoint=\"containerNode\"></div>\n\t</div>\n</div>\n"),easeOut:"dojo._DefaultEasing",easeIn:"dojo._DefaultEasing",duration:420,startExpanded:true,previewOpacity:0.75,previewOnDblClick:false,baseClass:"dijitExpandoPane",postCreate:function(){this.inherited(arguments);this._animConnects=[];this._isHorizontal=true;if(dojo.isString(this.easeOut)){this.easeOut=dojo.getObject(this.easeOut);}if(dojo.isString(this.easeIn)){this.easeIn=dojo.getObject(this.easeIn);}var _cb9="",rtl=!this.isLeftToRight();if(this.region){switch(this.region){case "trailing":case "right":_cb9=rtl?"Left":"Right";break;case "leading":case "left":_cb9=rtl?"Right":"Left";break;case "top":_cb9="Top";break;case "bottom":_cb9="Bottom";break;}dojo.addClass(this.domNode,"dojoxExpando"+_cb9);dojo.addClass(this.iconNode,"dojoxExpandoIcon"+_cb9);this._isHorizontal=/top|bottom/.test(this.region);}dojo.style(this.domNode,{overflow:"hidden",padding:0});this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");if(this.previewOnDblClick){this.connect(this.getParent(),"_layoutChildren",dojo.hitch(this,function(){this._isonlypreview=false;}));}},_startupSizes:function(){this._container=this.getParent();this._closedSize=this._titleHeight=dojo.marginBox(this.titleWrapper).h;if(this.splitter){var myid=this.id;dijit.registry.filter(function(w){return w&&w.child&&w.child.id==myid;}).forEach(dojo.hitch(this,function(w){this.connect(w,"_stopDrag","_afterResize");}));}this._currentSize=dojo.contentBox(this.domNode);this._showSize=this._currentSize[(this._isHorizontal?"h":"w")];this._setupAnims();if(this.startExpanded){this._showing=true;}else{this._showing=false;this._hideWrapper();this._hideAnim.gotoPercent(99,true);}this._hasSizes=true;},_afterResize:function(e){var tmp=this._currentSize;this._currentSize=dojo.marginBox(this.domNode);var n=this._currentSize[(this._isHorizontal?"h":"w")];if(n>this._titleHeight){if(!this._showing){this._showing=!this._showing;this._showEnd();}this._showSize=n;this._setupAnims();}else{this._showSize=tmp[(this._isHorizontal?"h":"w")];this._showing=false;this._hideWrapper();this._hideAnim.gotoPercent(89,true);}},_setupAnims:function(){dojo.forEach(this._animConnects,dojo.disconnect);var _cba={node:this.domNode,duration:this.duration},_cbb=this._isHorizontal,_cbc={},_cbd={},_cbe=_cbb?"height":"width";_cbc[_cbe]={end:this._showSize};_cbd[_cbe]={end:this._closedSize};this._showAnim=dojo.animateProperty(dojo.mixin(_cba,{easing:this.easeIn,properties:_cbc}));this._hideAnim=dojo.animateProperty(dojo.mixin(_cba,{easing:this.easeOut,properties:_cbd}));this._animConnects=[dojo.connect(this._showAnim,"onEnd",this,"_showEnd"),dojo.connect(this._hideAnim,"onEnd",this,"_hideEnd")];},preview:function(){if(!this._showing){this._isonlypreview=!this._isonlypreview;}this.toggle();},toggle:function(){if(this._showing){this._hideWrapper();this._showAnim&&this._showAnim.stop();this._hideAnim.play();}else{this._hideAnim&&this._hideAnim.stop();this._showAnim.play();}this._showing=!this._showing;},_hideWrapper:function(){dojo.addClass(this.domNode,"dojoxExpandoClosed");dojo.style(this.cwrapper,{visibility:"hidden",opacity:"0",overflow:"hidden"});},_showEnd:function(){dojo.style(this.cwrapper,{opacity:0,visibility:"visible"});dojo.anim(this.cwrapper,{opacity:this._isonlypreview?this.previewOpacity:1},227);dojo.removeClass(this.domNode,"dojoxExpandoClosed");if(!this._isonlypreview){setTimeout(dojo.hitch(this._container,"layout"),15);}else{this._previewShowing=true;this.resize();}},_hideEnd:function(){if(!this._isonlypreview){setTimeout(dojo.hitch(this._container,"layout"),25);}else{this._previewShowing=false;}this._isonlypreview=false;},resize:function(_cbf){if(!this._hasSizes){this._startupSizes(_cbf);}var _cc0=dojo.marginBox(this.domNode);this._contentBox={w:_cbf&&"w" in _cbf?_cbf.w:_cc0.w,h:(_cbf&&"h" in _cbf?_cbf.h:_cc0.h)-this._titleHeight};dojo.style(this.containerNode,"height",this._contentBox.h+"px");if(_cbf){dojo.marginBox(this.domNode,_cbf);}this._layoutChildren();},_trap:function(e){dojo.stopEvent(e);}});}if(!dojo._hasResource["dojox.testing.DocTest"]){dojo._hasResource["dojox.testing.DocTest"]=true;dojo.provide("dojox.testing.DocTest");dojo.declare("dojox.testing.DocTest",null,{errors:[],getTests:function(_cc1){var path=dojo.moduleUrl(_cc1).path;var file=path.substring(0,path.length-1)+".js";var xhr=dojo.xhrGet({url:file,handleAs:"text"});var data=dojo._getText(file);return this._getTestsFromString(data,true);},getTestsFromString:function(data){return this._getTestsFromString(data,false);},_getTestsFromString:function(data,_cc2){var trim=dojo.hitch(dojo.string,"trim");var _cc3=data.split("\n");var len=_cc3.length;var _cc4=[];var test={commands:[],expectedResult:[],line:null};for(var i=0;i<len+1;i++){var l=trim(_cc3[i]||"");if((_cc2&&l.match(/^\/\/\s+>>>\s.*/))||l.match(/^\s*>>>\s.*/)){if(!test.line){test.line=i+1;}if(test.expectedResult.length>0){_cc4.push({commands:test.commands,expectedResult:test.expectedResult.join("\n"),line:test.line});test={commands:[],expectedResult:[],line:i+1};}l=_cc2?trim(l).substring(2,l.length):l;l=trim(l).substring(3,l.length);test.commands.push(trim(l));}else{if((!_cc2||l.match(/^\/\/\s+.*/))&&test.commands.length&&test.expectedResult.length==0){l=_cc2?trim(l).substring(3,l.length):l;test.expectedResult.push(trim(l));}else{if(test.commands.length>0&&test.expectedResult.length){if(!_cc2||l.match(/^\/\/\s*$/)){_cc4.push({commands:test.commands,expectedResult:test.expectedResult.join("\n"),line:test.line});}if(_cc2&&!l.match(/^\/\//)){_cc4.push({commands:test.commands,expectedResult:test.expectedResult.join("\n"),line:test.line});}test={commands:[],expectedResult:[],line:0};}}}}return _cc4;},run:function(_cc5){this.errors=[];var _cc6=this.getTests(_cc5);if(_cc6){this._run(_cc6);}},_run:function(_cc7){var len=_cc7.length;this.tests=len;var oks=0;for(var i=0;i<len;i++){var t=_cc7[i];var res=this.runTest(t.commands,t.expectedResult);var msg="Test "+(i+1)+": ";var _cc8=t.commands.join(" ");_cc8=(_cc8.length>50?_cc8.substr(0,50)+"...":_cc8);if(res.success){console.info(msg+"OK: "+_cc8);oks+=1;}else{this.errors.push({commands:t.commands,actual:res.actualResult,expected:t.expectedResult});console.error(msg+"Failed: "+_cc8,{commands:t.commands,actualResult:res.actualResult,expectedResult:t.expectedResult});}}console.info(len+" tests ran.",oks+" Success,",this.errors.length+" Errors");},runTest:function(_cc9,_cca){var ret={success:false,actualResult:null};var cmds=_cc9.join("\n");ret.actualResult=eval(cmds);if((String(ret.actualResult)==_cca)||(dojo.toJson(ret.actualResult)==_cca)||((_cca.charAt(0)=="\"")&&(_cca.charAt(_cca.length-1)=="\"")&&(String(ret.actualResult)==_cca.substring(1,_cca.length-1)))){ret.success=true;}return ret;}});}if(!dojo._hasResource["pentaho.common.button"]){dojo._hasResource["pentaho.common.button"]=true;dojo.provide("pentaho.common.button");dojo.declare("pentaho.common.button",[dijit._Widget,dijit._Templated],{label:"a button",onClick:function(){this.callback();},callback:null,templateString:"<button type=\"button\" dojoAttachPoint=\"button\" tabindex=\"0\" class=\"pentaho-button\" id=\"${id}\">\n\t${label}\n</button>\n",postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);dojo.connect(this.button,"onclick",this,this.onClick);}});}if(!dojo._hasResource["pentaho.common.SmallImageButton"]){dojo._hasResource["pentaho.common.SmallImageButton"]=true;dojo.provide("pentaho.common.SmallImageButton");dojo.declare("pentaho.common.SmallImageButton",[dijit._Widget,dijit._Templated],{title:"",baseClass:"",callback:function(){},disabled:false,_imageSrc:dojo.moduleUrl("pentaho.common","images/spacer.gif"),onClick:function(_ccb){if(this.callback&&!this.get("disabled")){this.callback(_ccb);}},templateString:"<img dojoAttachPoint=\"buttonImg\" src=\"${_imageSrc}\" title=\"\" class=\"pentaho-addbutton\"/>\n",mouseOver:function(){if(!this.disabled){dojo.addClass(this.buttonImg,"pentaho-imagebutton-hover");}},mouseOut:function(){if(!this.disabled){dojo.removeClass(this.buttonImg,"pentaho-imagebutton-hover");}},set:function(attr,_ccc){this.inherited(arguments);if(attr=="disabled"){this.disabled=_ccc;dojo.toggleClass(this.buttonImg,"pentaho-imagebutton-disabled",this.disabled);if(this.disabled){this.buttonImg.title="";}else{this.buttonImg.title=this.title;}}},postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.buttonImg.className=this.baseClass;dojo.toggleClass(this.buttonImg,"pentaho-imagebutton-disabled",this.disabled);dojo.connect(this.buttonImg,"onclick",this,this.onClick);dojo.connect(this.buttonImg,"onmouseover",this,this.mouseOver);dojo.connect(this.buttonImg,"onmouseout",this,this.mouseOut);}});}if(!dojo._hasResource["pentaho.common.DropDownButton"]){dojo._hasResource["pentaho.common.DropDownButton"]=true;dojo.provide("pentaho.common.DropDownButton");dojo.declare("pentaho.common.DropDownButton",dijit.form.DropDownButton,{baseClass:"dijitDropDownButton",templateString:dojo.cache("pentaho.common","DropDownButton.html","<span class=\"dijit dijitReset dijitInline\">\n    <span class='dijitReset dijitInline ' dojoAttachEvent=\"ondijitclick:_onButtonClick\" dojoAttachPoint=\"_buttonNode\">\n        <span class=\"dijitReset dijitStretch dijitButtonContents pentaho-listbox\"\n\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\">\n            <table cellpadding=\"0\" cellspacing=\"0\">\n                <tr>\n                    <td>\n                        <span class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\">\n                        </span>\n                    </td>\n                    <td>\n                        <span class=\"dijitReset dijitInline dijitButtonText\"\n                            dojoAttachPoint=\"containerNode,_popupStateNode\"\n                            id=\"${id}_label\">\n                        </span>\n                    </td>\n                    <td>\n                        <div class=\"pentaho-dropdownbutton-outer\">\n                            <div class=\"pentaho-dropdownbutton-inner\">\n                            </div>\n                        </div>\n                        <span class=\"dijitReset dijitInline dijitArrowButtonChar\" style=\"display:none\">&#9660;</span>\n                        <span class=\"dijitReset dijitInline dijitArrowButtonInner\" style=\"display:none\"></span>\n                    </td>\n                </tr>\n            </table>\n        </span>\n    </span>\n    <input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" dojoAttachPoint=\"valueNode\"/>\n</span>\n")});}if(!dojo._hasResource["pentaho.common.Calendar"]){dojo._hasResource["pentaho.common.Calendar"]=true;dojo.provide("pentaho.common.Calendar");dojo.declare("pentaho.common.Calendar",[dijit.Calendar],{templateString:dojo.cache("pentaho.common","Calendar.html","<div class=\"pentaho-rounded-panel pentaho-tooltip-background pentaho-padding-sm pentaho-shadow\" style=\"width:178px;text-align:center\">\n    <div class=\"panel-content\" style=\"width:100%\">\n        <div class=\"pentaho-padding-sm\">\n            <center>\n                <table cellspacing=\"0\" cellpadding=\"0\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year\" >\n                    <thead>\n                        <tr class=\"\" valign=\"top\">\n                            <th class='dijitReset' dojoAttachPoint=\"decrementMonth\">\n                                <div dojoAttachPoint=\"decreaseArrowNode\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-pagebackbutton\">\n                                </div>\n                            </th>\n                            <th class='dijitReset' colspan=\"5\">\n                                <div dojoType=\"pentaho.common.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n                                    id=\"${id}_mddb\" tabIndex=\"-1\">\n                                </div>\n                            </th>\n                            <th class='dijitReset' dojoAttachPoint=\"incrementMonth\">\n                                <div dojoAttachPoint=\"increaseArrowNode\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-pagenextbutton\">\n                                </div>                            \n                            </th>\n                        </tr>\n                        <tr>\n                            <th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n                        </tr>\n                    </thead>\n                    <tbody class=\"\" dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n                        <tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n                            <td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n                        </tr>\n                    </tbody>\n                    <tfoot class=\"dijitReset\">\n                        <tr>\n                            <td class='dijitReset' valign=\"middle\" colspan=\"7\" style=\"vertical-align:middle\">\n                                <center>\n                                    <table>\n                                        <tr>\n                                            <td>\n                                                <div dojoAttachPoint=\"previousYearBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-pagebackbutton\">\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <span dojoAttachPoint=\"currentYearLabelNode\" class=\"label\" id=\"${id}_year\"></span>\n                                            </td>\n                                            <td>\n                                                <div dojoAttachPoint=\"nextYearBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-pagenextbutton\">\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                    <span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" style=\"display:none\"></span>\n                                    <span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" style=\"display:none\"></span>\n                                </center>\n                            </td>\n                        </tr>\n                    </tfoot>\n                </table>\n            </center>\n        </div>\n    </div>\n</div>\n"),buildRendering:function(){this.inherited(arguments);this.previousYearBtn.callback=dojo.hitch(this,this._prevYearClick);this.nextYearBtn.callback=dojo.hitch(this,this._nextYearClick);this.monthDropDownButton.dropDown.destroy();this.monthDropDownButton.dropDown=new pentho.common.Calendar._MonthDropDown({id:this.id+"_mdd",onChange:dojo.hitch(this,"_onMonthSelect")});},_prevYearClick:function(){this._adjustDisplay("year",-1);},_nextYearClick:function(){this._adjustDisplay("year",1);},_populateGrid:function(){this.inherited(arguments);dojo.query(".dijitCalendarDateLabel",this.domNode).forEach(function(cell){dojo.addClass(cell,"label");},this);dojo.query(".dijitCalendarPreviousMonth",this.domNode).forEach(function(cell){dojo.addClass(cell,"pentaho-light-text");},this);dojo.query(".dijitCalendarNextMonth",this.domNode).forEach(function(cell){dojo.addClass(cell,"pentaho-light-text");},this);dojo.query(".dijitCalendarCurrentMonth",this.domNode).forEach(function(cell){dojo.addClass(cell,"pentaho-listitem");},this);dojo.query(".dijitCalendarCurrentDate",this.domNode).forEach(function(cell){dojo.removeClass(cell,"pentaho-listitem");dojo.addClass(cell,"panel-content");},this);dojo.query(".dijitCalendarSelectedDate",this.domNode).forEach(function(cell){dojo.addClass(cell,"pentaho-listitem-selected");},this);},_onDayMouseOver:function(evt){var node=dojo.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&(node.dijitDateValue||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){dojo.addClass(node,"pentaho-listitem-hover");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="pentaho-listitem-hover";if(dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")){cls+=" pentaho-listitem-hover";}dojo.removeClass(this._currentNode,cls);this._currentNode=null;},_onDayMouseUp:function(evt){this.inherited(arguments);var node=evt.target.parentNode;if(node&&node.dijitDateValue){dojo.addClass(node,"pentaho-listitem-selected");}},_onDayClick:function(evt){this.inherited(arguments);dojo.stopEvent(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!dojo.hasClass(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);dojo.addClass(node,"pentaho-listitem-selected");}}});dojo.declare("pentho.common.Calendar._MonthDropDown",[dijit._Widget,dijit._Templated],{months:[],templateString:"<div class='pentaho-listbox' "+"dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_ccd){this.domNode.innerHTML=dojo.map(_ccd,function(_cce,idx){return _cce?"<div class='pentaho-listitem' month='"+idx+"'>"+_cce+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(dojo.attr(evt.target,"month"));},onChange:function(_ccf){},_onMenuHover:function(evt){dojo.toggleClass(evt.target,"pentaho-listitem-hover",evt.type=="mouseover");}});}if(!dojo._hasResource["pentaho.common.CheckedMenuItem"]){dojo._hasResource["pentaho.common.CheckedMenuItem"]=true;dojo.provide("pentaho.common.CheckedMenuItem");dojo.declare("pentaho.common.CheckedMenuItem",dijit.CheckedMenuItem,{templateString:dojo.cache("pentaho.common","CheckedMenuItem.html","<tr class=\"dijitReset pentaho-menuitem\" dojoAttachPoint=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"pentaho-checkmenuitem\" dojoAttachPoint=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset pentaho-menuitem-label\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&nbsp;</td>\n</tr>\n"),_setCheckedAttr:function(_cd0){dojo.toggleClass(this.iconNode,"menuitem-checked",_cd0);dijit.setWaiState(this.domNode,"checked",_cd0);this._set("checked",_cd0);},_setSelected:function(_cd1){if(!this.disabled){dojo.toggleClass(this.domNode,"pentaho-menuitem-hover",_cd1);}}});}if(!dojo._hasResource["pentaho.common.Messages"]){dojo._hasResource["pentaho.common.Messages"]=true;dojo.provide("pentaho.common.Messages");dojo.declare("pentaho.common.Messages",null,{});pentaho.common.Messages.init=function(){if(pentaho.common.Messages.messageBundle===undefined){pentaho.common.Messages.messageBundle={};}};pentaho.common.Messages.addBundle=function(_cd2,_cd3){dojo["requireLocalization"](_cd2,_cd3,"ROOT","ROOT");pentaho.common.Messages.messageBundle[_cd2]=dojo.i18n.getLocalization(_cd2,_cd3);};pentaho.common.Messages.getBundle=function(name){return pentaho.common.Messages.messageBundle[name];};pentaho.common.Messages.entityDecoder=document.createElement("textarea");pentaho.common.Messages.getString=function(key,_cd4){var b,_cd5,msg=key;for(b in pentaho.common.Messages.messageBundle){if(pentaho.common.Messages.messageBundle.hasOwnProperty(b)){_cd5=pentaho.common.Messages.messageBundle[b];if(_cd5.hasOwnProperty(key)){msg=_cd5[key];if(undefined!=_cd4){var subs={};if(dojo.isString(_cd4)){subs["0"]=_cd4;}else{if(dojo.isArray(_cd4)){for(var sNo=0;sNo<_cd4.length;sNo++){subs[""+sNo]=_cd4[sNo];}}else{if(dojo.isObject(_cd4)){subs=_cd4;}}}if(dojo.string.substituteParams){msg=dojo.string.substituteParams(msg,subs);}else{if(dojo.replace){msg=dojo.replace(msg,subs);}}}break;}}}return msg;};var cnt=0;pentaho.common.Messages.setElementText=function(_cd6,_cd7){var _cd8;if(typeof _cd6=="string"){_cd8=document.getElementById(_cd6);}else{_cd8=_cd6;}if(_cd8){_cd8.innerHTML=pentaho.common.Messages.getString(_cd7);}};pentaho.common.Messages.addUrlBundle=function(_cd9,url,_cda){if(!_cda&&pentaho.common.Messages.messageBundle.hasOwnProperty(_cd9)){return;}var _cdb=dojo.xhrGet({url:url,handleAs:"json",sync:true});_cdb.then(function(data){pentaho.common.Messages.messageBundle[_cd9]=data;},function(_cdc){if(typeof (console)!="undefined"){console.log("error loading message bundle at:"+url);}});};pentaho.common.Messages.init();pentaho.common.Messages.addUrlBundle("pentaho.common",CONTEXT_PATH+"i18n?plugin=common-ui&name=resources/web/dojo/pentaho/common/nls/messages");}if(!dojo._hasResource["pentaho.common.Dialog"]){dojo._hasResource["pentaho.common.Dialog"]=true;dojo.provide("pentaho.common.Dialog");dojo.declare("pentaho.common.Dialog",[dijit._Widget,dijit._Templated],{popup:null,title:"",widgetsInTemplate:true,getLocaleString:pentaho.common.Messages.getString,callbacks:[],shown:false,buttonsCreated:false,buttonPanel:null,hasTitleBar:true,hasBorder:true,hasCloseIcon:false,closeIcon:undefined,_onCancelCallback:undefined,setLocalizationLookupFunction:function(f){this.getLocaleString=f;this._localize();},buttonClick:function(idx){if(this.callbacks[idx]){this.callbacks[idx]();}},buttons:[],_localize:function(){if(this.getLocaleString){for(var i=0;i<this.buttons.length;i++){var _cdd=dojo.query("button"+i,this.popup.domNode);this.buttons[i]=this.getLocaleString(this.buttons[i]);if(_cdd){_cdd.innerHTML=this.getLocaleString();}}if(this.hasCloseIcon){dojo.attr(this.closeIcon.domNode,"title",this.getLocaleString("CloseIcon_title"));}}},templateString:"<div></div>",postMixInProperties:function(){this.inherited(arguments);},_createButtonPanel:function(){this.buttonPanel=dojo.create("TABLE");dojo.style(this.buttonPanel,"width","100%");dojo.place(this.buttonPanel,this.popup.domNode);dojo.addClass(this.buttonPanel,"button-panel");},_createButtons:function(){if(this.buttonPanel.rows.length>0){this.buttonPanel.deleteRow(-1);}var row=this.buttonPanel.insertRow(-1);var cell=row.insertCell(-1);dojo.style(cell,"align","right");dojo.style(cell,"width","100%");for(var j=0;j<this.buttons.length;j++){cell=row.insertCell(-1);dojo.style(cell,"align","right");var btn=document.createElement("BUTTON");dojo.addClass(btn,"pentaho-button");dojo.attr(btn,"id","button"+j);btn.innerHTML=this.buttons[j];cell.appendChild(btn);btn.onclick=dojo.hitch(this,this.buttonClick,j);}},setButtonEnabled:function(_cde,_cdf){var btn=dojo.byId("button"+_cde);if(typeof (btn)!="undefined"&&btn!=null){if(typeof (btn.set)!="undefined"){btn.set("disabled",!_cdf);}else{btn.disabled=!_cdf;}}},postCreate:function(){if(this.templatePath||this.templateString!="<div></div>"){this.popup.attr("content",this.domNode);}this.inherited(arguments);if(!this.hasTitleBar){dojo.addClass(dojo.query(".dijitDialogTitleBar",this.popup.domNode)[0],"hidden");}if(this.hasBorder){dojo.addClass(this.popup.domNode,"pentaho-dialog");}if(this.hasCloseIcon){this.closeIcon=new pentaho.common.SmallImageButton({"baseClass":"pentaho-closebutton"});dojo.addClass(this.closeIcon.domNode,"pentahoDialogCloseIcon");dojo.place(this.closeIcon.domNode,dojo.query(".dijitDialogTitleBar",this.popup.domNode)[0]);this.closeIcon.callback=dojo.hitch(this,this.onCancel);}dojo.addClass(dojo.query(".dijitDialogTitleBar",this.popup.domNode)[0],"Caption");dojo.connect(this.domNode,"onKeyPress",this,this.keyUp);dojo.connect(this.popup.domNode,"onKeyPress",this,this.keyUp);dojo.connect(this.domNode,"onkeyup",this,this.keyup);this.onKeyUp=dojo.hitch(this,this.keyup);dojo.connect(this.domNode,"onKeyUp",this,this.keyup);dojo.connect(this.popup,"onKeyUp",this,this.keyup);dojo.connect(this.popup.domNode,"onKeyUp",this,this.keyup);this.popup.onCancel=dojo.hitch(this,function(){});this.popup.onExecute=dojo.hitch(this,this.okClick);this._localize();dojo.connect(this.popup,"onHide",dojo.hitch(this,"onHide"));},keyup:function(_ce0){dojo.stopEvent(_ce0);if(_ce0.keyCode==dojo.keys.ENTER){if(this.execute){this.execute();}}if(_ce0.keyCode==dojo.keys.ESCAPE){if(this.onCancel){this.onCancel();}}},setTitle:function(_ce1){this.title=_ce1;this.popup.set("title",this.title);},show:function(){this.domNode.style.display="";this.popup.set("title",this.title);dojo.style(this.popup.domNode,"display","none");if(this.templateBased){if(!this.shown){this.width=""+dojo.style(this.domNode,"width")+"px";if(dojo.style(this.domNode,"display")==="block"){this.width=(dojo.style(this.domNode,"width")+dojo.style(this.domNode,"paddingLeft")+dojo.style(this.domNode,"paddingRight")+dojo.style(this.domNode,"borderLeftWidth")+dojo.style(this.domNode,"borderRightWidth"))+"px";}dojo.style(this.popup.domNode,"width",this.width);dojo.style(dojo.query(".dijitDialogPaneContent",this.popup.domNode),"width",this.width);dojo.style(dojo.query(".dijitDialogPaneContent",this.domNode),"width",this.width);}}else{if(!this.shown){dojo.style(this.domNode,"width",this.width);dojo.style(this.popup.domNode,"width",this.width);dojo.style(dojo.query(".dijitDialogPaneContent",this.popup.domNode),"width",this.width);dojo.style(dojo.query(".dijitDialogPaneContent",this.domNode),"width",this.width);dojo.style(this.domNode,"height",this.height);dojo.style(this.popup.domNode,"height",this.height);dojo.style(dojo.query(".dijitDialogPaneContent",this.popup.domNode),"height",this.height);dojo.style(dojo.query(".dijitDialogPaneContent",this.domNode),"height",this.height);}}if(!this.shown){this._createButtonPanel();}this._createButtons();this.popup.show();this.shown=true;},hide:function(){return this.popup.hide();},destroy:function(){this.popup.destroy();},destroyRecursive:function(){this.popup.destroyRecursive();dojo.empty(this.domNode);},buildRendering:function(){if(this.templatePath){this.templateString=null;}this.inherited(arguments);if(this.templateString=="<div></div>"){this.popup.buildRendering();}},_attachTemplateNodes:function(_ce2,_ce3){this.inherited(arguments);},_fillContent:function(_ce4){if(!this.templatePath&&this.templateString=="<div></div>"){this.templateBased=false;this.width=""+dojo.style(_ce4,"width")+"px";this.height=""+dojo.style(_ce4,"height")+"px";if(dojo.hasClass(_ce4,"hidden")){dojo.removeClass(_ce4,"hidden");}this._attachTemplateNodes(_ce4);this.source=_ce4;this.popup=new dijit.Dialog({title:this.title,content:this.source.innerHTML});dojo.addClass(this.popup.domNode,"pentaho-dialog");dojo.removeClass(this.popup.domNode,"hidden");dojo.addClass(dojo.query(".dijitDialogTitleBar",this.popup.domNode)[0],"Caption");}else{this.templateBased=true;this.popup=new dijit.Dialog();}this.inherited(arguments);},registerOnCancelCallback:function(f){this._onCancelCallback=f;},onCancel:function(){if(this._onCancelCallback){try{this._onCancelCallback();}catch(e){console.warn("error in onCancelCallback: "+e);}}this.hide();},onHide:function(){}});}if(!dojo._hasResource["pentaho.common.CustomColorPicker"]){dojo._hasResource["pentaho.common.CustomColorPicker"]=true;dojo.provide("pentaho.common.CustomColorPicker");(function(d){dojo.declare("pentaho.common.CustomColorPicker",dojox.widget.ColorPicker,{showPreview:true,templateString:dojo.cache("pentaho.common","CustomColorPicker/CustomColorPicker.html","<table dojoAttachEvent=\"onkeypress: _handleKey\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\n\t<tr>\n        <td>\n            <table>\n                <tr>\n\t\t<td valign=\"top\" class=\"dojoxColorPickerRightPad\">\n\t\t\t<div class=\"dojoxColorPickerBox\">\n\t\t\t\t<!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. -->\n\t\t\t\t<img role=\"status\" title=\"${saturationPickerTitle}\" alt=\"${saturationPickerTitle}\" class=\"dojoxColorPickerPoint\" src=\"${_pickerPointer}\" tabIndex=\"0\" dojoAttachPoint=\"cursorNode\" style=\"position: absolute; top: 0px; left: 0px;\">\n\t\t\t\t<img role=\"presentation\" alt=\"\" dojoAttachPoint=\"colorUnderlay\" dojoAttachEvent=\"onclick: _setPoint, onmousedown: _stopDrag\" class=\"dojoxColorPickerUnderlay\" src=\"${_underlay}\" ondragstart=\"return false\">\n\t\t\t</div>\n\t\t</td>\n\t\t<td valign=\"top\" class=\"dojoxColorPickerRightPad\">\n\t\t\t<div class=\"dojoxHuePicker\">\n\t\t\t\t<!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. -->\n\t\t\t\t<img role=\"status\" dojoAttachPoint=\"hueCursorNode\" tabIndex=\"0\" class=\"dojoxHuePickerPoint\" title=\"${huePickerTitle}\" alt=\"${huePickerTitle}\" src=\"${_huePickerPointer}\" style=\"position: absolute; top: 0px; left: 0px;\">\n\t\t\t\t<div class=\"dojoxHuePickerUnderlay\" dojoAttachPoint=\"hueNode\">\n\t\t\t\t    <img role=\"presentation\" alt=\"\" dojoAttachEvent=\"onclick: _setHuePoint, onmousedown: _stopDrag\" src=\"${_hueUnderlay}\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n    <tr>\n\t\t<td valign=\"top\">\n\t\t\t<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:100%\">\n\t\t\t\t<tr dojoAttachPoint=\"previewNodes\">\n\t\t\t\t\t<td valign=\"top\" class=\"dojoxColorPickerPreviewContainer\">\n\t\t\t\t\t\t<table cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td valign=\"top\" class=\"dojoxColorPickerRightPad\">\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"previewNode\" class=\"dojoxColorPickerPreview\"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td valign=\"top\">\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"safePreviewNode\" class=\"dojoxColorPickerWebSafePreview\"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign=\"top\">\n\t\t\t\t\t\t<table class=\"dojoxColorPickerOptional\" cellpadding=\"0\" cellspacing=\"0\" style=\"width:100%\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"dijitInline dojoxColorPickerRgb\" dojoAttachPoint=\"rgbNode\" style=\"width:100%\">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding=\"1\" cellspacing=\"1\" style=\"width:100%\">\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_r\">${redLabel}</label></td><td><input id=\"${_uId}_r\" dojoAttachPoint=\"Rval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"></td>\n\t\t\t\t\t\t\t\t\t\t<td><label for=\"${_uId}_g\">${greenLabel}</label></td><td><input id=\"${_uId}_g\" dojoAttachPoint=\"Gval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"></td>\n\t\t\t\t\t\t\t\t\t\t<td><label for=\"${_uId}_b\">${blueLabel}</label></td><td><input id=\"${_uId}_b\" dojoAttachPoint=\"Bval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"></td></tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr dojoAttachPoint=\"hsvRow\">\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"dijitInline dojoxColorPickerHsv\" dojoAttachPoint=\"hsvNode\">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding=\"1\" cellspacing=\"1\" style=\"width:100%\">\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for=\"${_uId}_h\">${hueLabel}</label></td><td><input id=\"${_uId}_h\" dojoAttachPoint=\"Hval\"size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"> ${degLabel}</td>\n\t\t\t\t\t\t\t\t\t\t<td><label for=\"${_uId}_s\">${saturationLabel}</label></td><td><input id=\"${_uId}_s\" dojoAttachPoint=\"Sval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"> ${percentSign}</td>\n\t\t\t\t\t\t\t\t\t\t<td><label for=\"${_uId}_v\">${valueLabel}</label></td><td><input id=\"${_uId}_v\" dojoAttachPoint=\"Vval\" size=\"1\" dojoAttachEvent=\"onchange: _colorInputChange\"> ${percentSign}</td></tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"dojoxColorPickerHex\" dojoAttachPoint=\"hexNode\" aria-live=\"polite\">\t\n\t\t\t\t\t\t\t\t\t\t<label for=\"${_uId}_hex\">&nbsp;${hexLabel}&nbsp;</label><input id=\"${_uId}_hex\" dojoAttachPoint=\"hexCode, focusNode, valueNode\" size=\"6\" class=\"dojoxColorPickerHexCode\" dojoAttachEvent=\"onchange: _colorInputChange\">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</td>\n\t</tr>\n</table>\n\n"),postCreate:function(){this.inherited(arguments);if(!this.showPreview){this.previewNode.style.visibility="hidden";}if(!this.showHsv){dojo.style(this.hsvRow,"display","none");}if(!this.showPreview&&!this.webSafe){if(!this.showPreview){dojo.style(this.previewNodes,"display","none");}}},_setTimer:function(_ce5){if(!dojo.hasClass(_ce5.node,"dojoxHuePickerPoint")&&!dojo.hasClass(_ce5.node,"dojoxColorPickerPoint")){return;}this.inherited(arguments);},_clearTimer:function(_ce6){if(!dojo.hasClass(_ce6.node,"dojoxHuePickerPoint")&&!dojo.hasClass(_ce6.node,"dojoxColorPickerPoint")){return;}this.inherited(arguments);},_setPoint:function(evt){var _ce7=this.PICKER_SAT_SELECTOR_H/2;var _ce8=this.PICKER_SAT_SELECTOR_W/2;var root=dojo.position(this.colorUnderlay,true);var _ce9=evt.pageY-root.y-_ce7;var _cea=evt.pageX-root.x-_ce8;if(evt){dijit.focus(evt.target);}if(this.animatePoint){d.fx.slideTo({node:this.cursorNode,duration:this.slideDuration,top:_ce9,left:_cea,onEnd:d.hitch(this,function(){this._updateColor(true);dijit.focus(this.cursorNode);})}).play();}else{d.style(this.cursorNode,{left:_cea+"px",top:_ce9+"px"});this._updateColor(false);}},_setHuePoint:function(evt){var _ceb=(this.PICKER_HUE_SELECTOR_H/2);var root=dojo.position(this.colorUnderlay,true);var ypos=evt.pageY-root.y-_ceb;if(this.animatePoint){d.fx.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:ypos,left:0,onEnd:d.hitch(this,function(){this._updateColor(true);dijit.focus(this.hueCursorNode);})}).play();}else{d.style(this.hueCursorNode,"top",ypos+"px");this._updateColor(false);}}});})(dojo);}if(!dojo._hasResource["pentaho.common.TabSet"]){dojo._hasResource["pentaho.common.TabSet"]=true;dojo.provide("pentaho.common.TabSet");dojo.declare("pentaho.common.TabSet",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"tabSetDiv\" style=\"margin-right: 0px\"></div>",tabs:[],stackContainerId:null,setTabs:function(tabs){if(this.tabSetDiv.childNodes.length>0){return;}this.tabs=tabs;var html="";dojo.addClass(this.tabSetDiv,"pentaho-tabBar");for(var idx=0;idx<this.tabs.length;idx++){var div=dojo.create("div",{},this.tabSetDiv);dojo.attr(div,"tabId",this.tabs[idx].id);this.tabs[idx].element=div;dojo.addClass(div,"pentaho-tabWidget");if(idx==0){dojo.addClass(div,"pentaho-tabWidget-selected");}var span=dojo.create("span",{},div);dojo.addClass(span,"pentaho-tabWidgetLabel",div);dojo.attr(span,"tabId",this.tabs[idx].id);span.innerHTML=this.tabs[idx].title;dojo.connect(div,"onclick",this,this.tabClicked);}},tabClicked:function(_cec){var _ced=dojo.attr(_cec.target,"tabId");this.setSelectedTab(_ced);},setSelectedTab:function(_cee){for(var idx=0;idx<this.tabs.length;idx++){if(this.tabs[idx].id==_cee){this.setSeletedTabIdx(idx);}}},setSeletedTabIdx:function(_cef){var _cf0=this.tabs[_cef].id;for(var idx=0;idx<this.tabs.length;idx++){if(_cef==idx){dojo.addClass(this.tabs[idx].element,"pentaho-tabWidget-selected");}else{dojo.removeClass(this.tabs[idx].element,"pentaho-tabWidget-selected");}}if(this.tabs[_cef].beforeCallback){this.tabs[_cef].beforeCallback(this.tabs[_cef]);}if(this.stackContainerId){dijit.byId(this.stackContainerId).selectChild(_cf0,false);}if(this.tabs[_cef].afterCallback){this.tabs[_cef].afterCallback(this.tabs[_cef]);}}});}if(!dojo._hasResource["pentaho.common.ComboColorPicker"]){dojo._hasResource["pentaho.common.ComboColorPicker"]=true;dojo.provide("pentaho.common.ComboColorPicker");dojo.declare("pentaho.common.ComboColorPicker",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,hasTitleBar:false,onColorChange:null,closeCallback:null,setLocalizationLookupFunction:function(f){this.getLocaleString=f;this._localize();},_localize:function(){this.inherited(arguments);this.currentLbl.innerHTML=this.getLocaleString("currentColor_content");this.inUseLbl.innerHTML=this.getLocaleString("inUseColors_content");this.tabset.setTabs([{id:"palettetab",title:this.getLocaleString("Palette_txt"),afterCallback:dojo.hitch(this,"showTab","palettetab")},{id:"customtab",title:this.getLocaleString("Custom_txt"),afterCallback:dojo.hitch(this,"showTab","customtab")}]);},showTab:function(id){if(id=="palettetab"){dojo.addClass(this.customtab,"hidden");dojo.removeClass(this.palettetab,"hidden");}else{dojo.addClass(this.palettetab,"hidden");dojo.removeClass(this.customtab,"hidden");}},show:function(){dojo.removeClass(this.topframe,"hidden");},hide:function(){dojo.addClass(this.topframe,"hidden");},templateString:"<div dojoAttachPoint=\"topframe\" class=\"pentaho-rounded-panel pentaho-tooltip-background pentaho-padding-sm pentaho-shadow\" style=\"width:234px;\">\n    <table style=\"width:100%;heightx:270px\" border=\"0\">\n        <tr>\n            <td style=\"width:100%;\">\n            <td>\n            <td style=\"width:16px; text-align: right\">\n                <div dojoAttachPoint=\"closeBtn\" class=\"cursorPointer closeIcon\" onmouseover=\"dojo.addClass(this,'closeIconHover')\" onmouseout=\"dojo.removeClass(this,'closeIconHover')\"/>\n            <td>\n        </tr>\n    </table>\n    <div class=\"dialog-content pentaho-padding-sm\" style=\"heightx:400px\">\n        <table style=\"width:100%;heightx:270px\" border=\"0\">\n            <tr>\n                <td class=\"label\" dojoAttachPoint=\"currentLbl\" style=\"width:50%\">\n                    Current\n                </td>\n                <td style=\"heightx:15px; width:50%\">\n                    <div class=\"colorboxOuter\" style=\"width:100%\">\n                        <div dojoAttachPoint=\"currentColor\" class=\"colorbox\" stylex=\"width:100%\" style=\"background-color:none\">&nbsp;</div>\n                    </div>\n                </td>\n            </tr>\n        </table>\n        <div dojoAttachPoint=\"tabset\" dojoType=\"pentaho.common.TabSet\" style=\"width:100%;height:23px;display:block\">\n        </div> \n        <div dojoAttachPoint=\"colorpickertabs\" dojoTypex=\"dijit.layout.StackContainer\" class=\"tabpanel\" isLayoutContainer=\"true\" tabStrip=\"true\" style=\"padding: 0px; height:230px; width: 222px; display:block; border: 1px solid #444444\">\n            <div dojoAttachPoint=\"palettetab\" dojoTypex=\"dijit.layout.ContentPane\" selected=\"true\" style=\"heightx: 210px; padding: 0px; overflow:hidden;\" class=\"palettetab\">\n                <div style=\"height:218px; width:218px;\">\n                    <table style=\"width:100%;height:100%\">\n                        <tr>    \n                            <td style=\"text-align:center\">\n                                <div dojoAttachPoint=\"palette\" dojoType=\"dijit.ColorPalette\">\n                                </div>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n            <div dojoAttachPoint=\"customtab\" dojoTypex=\"dijit.layout.ContentPane\" selected=\"false\" style=\"height: 230px; padding: 0px; overflow:hidden;\" class=\"hidden\">\n                <div style=\"height:230px; width:180px; padding: 4px 20px; position: absolute; left: 15px\">\n                    <div dojoType=\"pentaho.common.CustomColorPicker\" dojoAttachPoint=\"colorPicker\" showPreview=\"false\" showHsv=\"false\" webSafe=\"false\" style=\"height:220px\">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"padding:0px\">\n            <tr>\n                <td style=\"padding-top: 4px\">\n                    <span class=\"label\" dojoAttachPoint=\"inUseLbl\">In Use</span>\n                </td>\n            </tr>\n            <tr>\n                <td style=\"vertical-align: top; heightx:20px; padding-left: 2px\">\n                    <table dojoAttachPoint=\"colorTable\" class=\"usedColorTable\" cellspacing=\"2\">\n                    </table>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>    \n",usedColors:[],setColor:function(_cf1){this._setColor(_cf1);},_setColor:function(_cf2){dojo.style(this.currentColor,"backgroundColor",_cf2);this.palette._setValueAttr(_cf2,false);this.colorPicker.setColor(_cf2,false);},_colorChange:function(_cf3){this._setColor(_cf3);if(this.onColorChange){this.onColorChange(_cf3);}},colorPaletteChange:function(_cf4){this.colorPicker.setColor(_cf4,false);dojo.style(dis.currentColor,"backgroundColor",_cf4);},setUsedColors:function(_cf5){this.usedColors=_cf5;var _cf6=this.colorTable;while(_cf6.rows.length>0){_cf6.deleteRow(0);}var row=null;for(var idx=0;idx<_cf5.length;idx++){var _cf7=_cf5[idx];if(row==null){row=_cf6.insertRow(-1);}var cell=row.insertCell(-1);var div=document.createElement("DIV");div.className="usedColorTableDiv";cell.className="usedColorTableCell";dojo.style(div,"backgroundColor",""+_cf7);var id="usedcolor"+idx;if(_cf7.indexOf("rgb")==0){_cf7=eval("this."+_cf7);}if(_cf7[0]!="#"){var _cf8=dojo.Color.named[_cf7];if(_cf8){_cf7=dojox.color.fromArray(_cf8).toHex();}}dojo.attr(div,"id",id);dojo.attr(div,"color",""+_cf7);dojo.connect(cell,"onclick",this,"usedColorClick");cell.appendChild(div);if((idx%10)==9){row=null;}}},usedColorClick:function(_cf9){var idx=parseInt(_cf9.target.id.substr("usedcolor".length));this._colorChange(this.usedColors[idx],false);},closeRequest:function(){if(this.closeCallback){this.closeCallback();}},postCreate:function(){this.inherited(arguments);this.colorPicker.animatePoint=false;pentaho.common.Messages.addUrlBundle("pentaho.common",CONTEXT_PATH+"i18n?plugin=common-ui&name=resources/web/dojo/pentaho/common/nls/messages");dojo.connect(this.palette,"onChange",this,"_colorChange");dojo.connect(this.colorPicker,"onChange",this,"_colorChange");dojo.connect(this.closeBtn,"onclick",this,"closeRequest");},rgb:function(r,g,b){var hex="#";var c1=r.toString(16);var c2=g.toString(16);var c3=b.toString(16);hex+=c1.length<2?"0"+c1:c1;hex+=c2.length<2?"0"+c2:c2;hex+=c3.length<2?"0"+c3:c3;return hex;},rgba:function(r,g,b,a){var hex="#";var c1=r.toString(16);var c2=g.toString(16);var c3=b.toString(16);hex+=c1.length<2?"0"+c1:c1;hex+=c2.length<2?"0"+c2:c2;hex+=c3.length<2?"0"+c3:c3;return hex;}});}if(!dojo._hasResource["pentaho.common.ContextHelp"]){dojo._hasResource["pentaho.common.ContextHelp"]=true;dojo.provide("pentaho.common.ContextHelp");dojo.declare("pentaho.common.ContextHelp",null,{});pentaho.common.ContextHelp.REF="_ref";pentaho.common.ContextHelp.CONTENT="_content";pentaho.common.ContextHelp.POSITION="_position";pentaho.common.ContextHelp.TARGET="_target";pentaho.common.ContextHelp.suffixes=[pentaho.common.ContextHelp.REF,pentaho.common.ContextHelp.CONTENT,pentaho.common.ContextHelp.POSITION,pentaho.common.ContextHelp.TARGET];pentaho.common.ContextHelp.createHelpContainer=function(){var _cfa=dojo.byId("pentaho-ctx-help-container");if(this.container==undefined){_cfa=dojo.create("div");_cfa.id="pentaho-ctx-help-container";dojo.place(_cfa,dojo.body());}return _cfa;};pentaho.common.ContextHelp.parsePosition=function(_cfb){return dojo.map(_cfb.split(","),function(item){return dojo.trim(item);});};pentaho.common.ContextHelp.buildContext=function(map){var _cfc=new pentaho.common.ContextHelp.helpContext();for(var k in map){if(map.hasOwnProperty(k)){if(k==="defaultPosition"){_cfc.defaultPosition=pentaho.common.ContextHelp.parsePosition(map[k]);continue;}var _cfd=_cfc.parseProperty(k);if(_cfd==null){continue;}var help=_cfc.getHelpFor(_cfd.id);if(_cfd.property){_cfc.setHelpProperty(help,_cfd.property,map[k]);}}}return _cfc;};pentaho.common.ContextHelp.installHelpFor=function(help,_cfe){var t={connectId:help.target,label:help.content,position:help.position};help.widget=new dijit.Tooltip(t);help.widget.domNode.id="tt_"+help.target;dojo.place(help.widget.domNode,_cfe);};pentaho.common.ContextHelp.helpContext=function(){this.context={};};pentaho.common.ContextHelp.helpContext.prototype.installAll=function(_cff){if(this.context.defaultPosition){dijit.Tooltip.defaultPosition=this.context.defaultPosition;}if(_cff==undefined){_cff=pentaho.common.ContextHelp.createHelpContainer();}for(var help in this.context){pentaho.common.ContextHelp.installHelpFor(this.context[help],_cff);}};pentaho.common.ContextHelp.helpContext.prototype.removeAll=function(){for(var help in this.context){if(this.context[help].widget){this.context[help].widget.destroyRecursive();}}};pentaho.common.ContextHelp.helpContext.createHelpFor=function(_d00){return {target:_d00,content:null,ref:null,position:null,widget:null};};pentaho.common.ContextHelp.helpContext.prototype.parseProperty=function(str){if(str.indexOf("_")>-1){for(var idx=0;idx<pentaho.common.ContextHelp.suffixes.length;idx++){var _d01=pentaho.common.ContextHelp.suffixes[idx];if(str.indexOf(_d01)>-1){return {id:str.substring(0,str.length-_d01.length),property:_d01.substring(1)};}}}return null;};pentaho.common.ContextHelp.helpContext.prototype.getHelpFor=function(_d02){var help=this.context[_d02];if(help==undefined){help=this.context[_d02]=pentaho.common.ContextHelp.helpContext.createHelpFor(_d02);}return help;};pentaho.common.ContextHelp.helpContext.prototype.setHelpProperty=function(help,prop,_d03){if(prop==="position"){_d03=pentaho.common.ContextHelp.parsePosition(_d03);}help[prop]=_d03;return help;};}if(!dojo._hasResource["pentaho.common.Menu"]){dojo._hasResource["pentaho.common.Menu"]=true;dojo.provide("pentaho.common.Menu");dojo.declare("pentaho.common.Menu",dijit.Menu,{baseClass:"pentaho-menu",templateString:dojo.cache("pentaho.common","Menu.html","<table class=\"pentaho-menu-outer\" role=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n")});}if(!dojo._hasResource["pentaho.common.ListItem"]){dojo._hasResource["pentaho.common.ListItem"]=true;dojo.provide("pentaho.common.ListItem");dojo.declare("pentaho.common.ListItem",[dijit.MenuItem],{baseClass:"pentaho-listitem",templateString:dojo.cache("pentaho.common","ListItem.html","<tr class=\"dijitReset pentaho-listitem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset pentaho-menuitem-label\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n</tr>\n"),selected:false,_setSelected:function(_d04){if(!this.disabled){dojo.toggleClass(this.domNode,"pentaho-listitem-selected",_d04);dojo.removeClass(this.domNode,"pentaho-listitem-hover");this.selected=_d04;}},setDisabled:function(_d05){this.set("disabled",_d05);dojo.toggleClass(this.domNode,"pentaho-listitem-disabled",_d05);},_setDisabledAttr:function(_d06){dijit.setWaiState(this.focusNode,"disabled",_d06?"true":"false");this._set("disabled",_d06);dojo.toggleClass(this.domNode,"pentaho-listitem-disabled",_d06);},_onHover:function(){if(!this.disabled&&!this.selected){dojo.addClass(this.domNode,"pentaho-listitem-hover");}else{if(this.selected){dojo.addClass(this.domNode,"pentaho-listitem-selected");}}},_onUnhover:function(){dojo.removeClass(this.domNode,"pentaho-listitem-hover");}});}if(!dojo._hasResource["pentaho.common.MenuSeparator"]){dojo._hasResource["pentaho.common.MenuSeparator"]=true;dojo.provide("pentaho.common.MenuSeparator");dojo.declare("pentaho.common.MenuSeparator",dijit.MenuSeparator,{templateString:dojo.cache("pentaho.common","MenuSeparator.html","<tr>\n\t<td colspan=\"10\" class=\"pentaho-menu-separator\">\n        <div class=\"pentaho-menu-separator-inner\"></div>\n\t</td>\n</tr>\n")});}if(!dojo._hasResource["pentaho.common.Select"]){dojo._hasResource["pentaho.common.Select"]=true;dojo.provide("pentaho.common.Select");dojo.declare("pentaho.common._SelectMenu",pentaho.common.Menu,{buildRendering:function(){this.inherited(arguments);var o=(this.menuTableNode=this.domNode);var n=(this.domNode=dojo.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}}));if(o.parentNode){o.parentNode.replaceChild(n,o);}dojo.removeClass(o,"dijitMenuTable");n.className=o.className+" dijitSelectMenu";n.className="pentaho-listbox";o.className="dijitReset dijitMenuTable";dijit.setWaiRole(o,"listbox");dijit.setWaiRole(n,"presentation");n.appendChild(o);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent);},resize:function(mb){if(mb){dojo.marginBox(this.domNode,mb);if("w" in mb){this.menuTableNode.style.width="100%";}}}});dojo.declare("pentaho.common.Select",dijit.form.Select,{templateString:dojo.cache("pentaho.common","Select.html","<table class=\"dijit dijitReset dijitInline dijitLeft pentaho-listbox\"\n\tdojoAttachPoint=\"_buttonNode,tableNode,focusNode\" cellspacing='0' cellpadding='0'\n\trole=\"combobox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents dijitButtonNode\" role=\"presentation\"\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"  dojoAttachPoint=\"containerNode,_popupStateNode\"></span\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} dojoAttachPoint=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\t\tdojoAttachPoint=\"titleNode\" role=\"presentation\"\n\t\t\t>\n                        <div class=\"pentaho-dropdownbutton-outer\">\n                            <div class=\"pentaho-dropdownbutton-inner\">\n                            </div>\n                        </div>\n            <div class=\"dijitReset dijitArrowButtonInner\" style=\"display:none\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" style=\"display:none\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n"),_setDisplay:function(_d07){var lbl=_d07||this.emptyLabel;this.containerNode.innerHTML="<span class=\"dijitReset dijitInline label\">"+lbl+"</span>";dijit.setWaiState(this.focusNode,"valuetext",lbl);},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this.value=this.options[si>=0?si:0].value;}this.dropDown.destroy();this.dropDown=new pentaho.common._SelectMenu({id:this.id+"_menu"});dojo.addClass(this.dropDown.domNode,"pentaho-listbox");},_getMenuItemForOption:function(_d08){if(!_d08.value&&!_d08.label){return new pentaho.common.MenuSeparator();}else{var _d09=dojo.hitch(this,"_setValueAttr",_d08);var item=new pentaho.common.ListItem({option:_d08,label:_d08.label||this.emptyLabel,onClick:_d09,disabled:_d08.disabled||false});dijit.setWaiRole(item.focusNode,"listitem");return item;}}});}if(!dojo._hasResource["pentaho.common.ListBox"]){dojo._hasResource["pentaho.common.ListBox"]=true;dojo.provide("pentaho.common.ListBox");dojo.declare("pentaho.common.ListBox",pentaho.common.Select,{templateString:dojo.cache("pentaho.common","ListBox.html","<div style=\"width: ${width}; height: ${height}\" dojoAttachPoint=\"outerNode\">\n    <table class=\"dijit dijitReset dijitInline dijitLeft\"\n        dojoAttachPoint=\"_buttonNode,tableNode,focusNode\" cellspacing='0' cellpadding='0' style=\"display:none;\n        role=\"combobox\" aria-haspopup=\"true\"\n        ><tbody role=\"presentation\"><tr role=\"presentation\"\n            ><td class=\"dijitReset dijitStretch dijitButtonContents dijitButtonNode\" role=\"presentation\"\n                ><span class=\"dijitReset dijitInline dijitButtonText\"  dojoAttachPoint=\"containerNode,_popupStateNode\"></span\n                ><input type=\"hidden\" ${!nameAttrSetting} dojoAttachPoint=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n            /></td><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n                    dojoAttachPoint=\"titleNode\" role=\"presentation\"\n                >\n                            <div class=\"pentaho-dropdownbutton-outer\">\n                                <div class=\"pentaho-dropdownbutton-inner\">\n                                </div>\n                            </div>\n                <div class=\"dijitReset dijitArrowButtonInner\" style=\"display:none\" role=\"presentation\"></div\n                ><div class=\"dijitReset dijitArrowButtonChar\" style=\"display:none\" role=\"presentation\">&#9660;</div\n            ></td\n        ></tr></tbody\n    ></table>\n    <div dojoAttachPoint=\"menuOuterNode\" style=\"width:100%;height:100%;\" class=\"pentaho-listbox\"\n        ><div dojoAttachPoint=\"menuNode\" dojoType=\"pentaho.common.Menu\" style=\"width:100%\">\n        </div\n    ></div>\n</div>\n"),widgetsInTemplate:true,width:"150px",height:"75px",selectedIndex:-1,onchange:null,ignoreChange:false,loadChildrenOnOpen:true,postCreate:function(){this.inherited(arguments);this.loadDropDown(function(){});dojo.removeClass(this.outerNode,"dijitSelect");dojo.removeClass(this.menuNode.domNode,"pentaho-listbox");dojo.removeClass(this.menuNode.domNode,"pentaho-menu-outer");this.menuNode._onBlur=function(){};},_fillContent:function(){this.inherited(arguments);this.value={};},_addOptionItem:function(_d0a){if(this.menuNode){this.menuNode.addChild(this._getMenuItemForOption(_d0a));}},_loadChildren:function(_d0b){this.ignoreChange=true;this.inherited(arguments);},addOption:function(_d0c){this._addOptionItem(_d0c);},setOptions:function(_d0d){this.clearOptions();for(var idx=0;idx<_d0d.length;idx++){this.addOption(_d0d[idx]);}},clearOptions:function(){dojo.forEach(this.menuNode.getChildren(),function(_d0e){_d0e.destroyRecursive();});},_getMenuItemForOption:function(_d0f){if(!_d0f.value&&!_d0f.label){return new pentaho.common.MenuSeparator();}else{var _d10=dojo.hitch(this,"_setValueAttr",_d0f);var item=new pentaho.common.ListItem({option:_d0f,label:_d0f.text||_d0f.value,value:_d0f.value,onMouseDown:_d10,onKeyUp:_d10,disabled:_d0f.disabled||false});dijit.setWaiRole(item.focusNode,"listitem");return item;}},set:function(_d11,_d12){if(_d11=="value"){this.ignoreChange=true;}this.inherited(arguments);},_getValueAttr:function(){this.inherited(arguments);if(this.value){return this.value.value;}else{return null;}},_setValueAttr:function(_d13){var _d14=_d13.value?_d13.value:_d13;var _d15=this.menuNode.getChildren();var _d16=this.selectedIndex;this.selectedIndex=-1;for(var idx=0;idx<_d15.length;idx++){var item=_d15[idx];if(item.value==_d14){item.set("selected",true);item._setSelected(true);if(!this.multiple){this.selectedIndex=idx;this.value=item;}}else{if(!this.multiple){item.set("selected",false);item._setSelected(false);}}}if(this.selectedIndex!=_d16&&!this.ignoreChange){if(this.onChange){this.onChange();}}this.ignoreChange=false;},_updateSelection:function(){this.inherited(arguments);var val=this.value;if(!dojo.isArray(val)){val=[val];}if(val&&val[0]){dojo.forEach(this._getChildren(),function(_d17){var _d18=dojo.some(val,function(v){return _d17.option&&(v===_d17.option.value);});dojo.removeClass(_d17.domNode,this.baseClass+"SelectedOption");dojo.addClass(_d17.domNode,"pentaho-listitem-selected");},this);}}});}if(!dojo._hasResource["pentaho.common.MessageBox"]){dojo._hasResource["pentaho.common.MessageBox"]=true;dojo.provide("pentaho.common.MessageBox");dojo.declare("pentaho.common.MessageBox",[pentaho.common.Dialog],{buttons:["btn1","btn2","btn3"],messageType:null,setTitle:function(_d19){this.set("title",_d19);},postCreate:function(){this.inherited(arguments);this.setMessageType(this.messageType);},setMessageType:function(type){this.messageType=type;if(type!=null){if(type=="ERR"||type=="ERROR"){dojo.replaceClass(this.typeIcon,"error-large-icon","warning-large-icon info-large-icon");}else{if(type=="WARN"||type=="WARNING"){dojo.replaceClass(this.typeIcon,"warning-large-icon","error-large-icon info-large-icon");}else{dojo.replaceClass(this.typeIcon,"info-large-icon","error-large-icon warning-large-icon");}}}else{dojo.removeClass(this.typeIcon,"error-large-icon info-large-icon warning-large-icon");}},setMessage:function(_d1a){this.messagelbl.innerHTML=_d1a;},setButtons:function(_d1b){this.buttons=_d1b;for(var i=0;i<3;i++){var _d1c=dojo.query("button"+i,this.popup.domNode);if(_d1c){if(i<this.buttons.length){_d1c.innerHTML=this.buttons[i];dojo.removeClass(_d1c,"hidden");}else{dojo.addClass(_d1c,"hidden");}}}},templateString:"<div class=\"dialog-content pentaho-padding-sm\" style=\"width:100%; overflow: auto\">\n\t<table width=\"100%\">\n    <tbody>\n      <tr>\n        <td>\n          <div dojoAttachPoint=\"typeIcon\"></div>\n        </td>\n        <td width=\"100%\" valign=\"middle\">\n          <div dojoAttachPoint=\"messagelbl\" class=\"label pentaho-padding-lg\"></div>\n        </td>\n      </tr>\n    </tbody>\n\t</table>\n</div>\n"});}if(!dojo._hasResource["pentaho.common.datasourceselect"]){dojo._hasResource["pentaho.common.datasourceselect"]=true;dojo.provide("pentaho.common.datasourceselect");dojo.declare("pentaho.common.datasourceselect",[pentaho.common.Dialog],{getModel:null,modelSelected:null,canDataSourceAdmin:false,datasourceEditCallback:null,datasourceAddCallback:null,datasourceDeleteCallback:null,datasourceWizardIncluded:false,datasourceEditorPath:"",models:null,buttons:["Ok_txt","Cancel_txt"],setModelList:function(list){this.models=list;this.modelList.clearOptions();for(var idx=0;idx<list.length;idx++){var opt=new Option(list[idx].name,list[idx].id);this.modelList.addOption(opt);}if(list.length>0){this.modelList.set("value",list[0].id);this.datasourceSelected();}},onModelDblClick:function(x){this.buttonClick(0);},getSelectedModel:function(){var idx=this.modelList.selectedIndex;return this.models[idx];},setSelectedIndex:function(idx){this.modelList.set("value",this.models[idx]);this.modelList.selectedIndex=idx;this.datasourceSelected();},setCanDataSourceAdmin:function(_d1d){if(_d1d){this.canDataSourceAdmin=window.parent&&window.parent.pho&&window.parent.pho.openEditDatasourceEditor;}else{this.canDataSourceAdmin=false;}this.disableDatasourceAdminButtons();this.enableIconButton(this.adddatasourceimg,this.canDataSourceAdmin,this.addDatasource);},datasourceSelected:function(){var id=this.modelList.get("value");var _d1e=this.getModel(id);var _d1f=_d1e.modelId=="MODEL_1"&&this.canDataSourceAdmin;this.enableIconButton(this.editdatasourceimg,_d1f,this.editDatasource);this.enableIconButton(this.deletedatasourceimg,_d1f,this.deleteDatasource);this.enableIconButton(this.adddatasourceimg,this.canDataSourceAdmin,this.addDatasource);},enableIconButton:function(_d20,_d21,func){var e=_d20;var src=e.src;if(this.canDataSourceAdmin&&_d21){_d20.set("disabled",false);}else{if(!_d21){_d20.set("disabled",true);}}},_localize:function(){this.inherited(arguments);this.set("title",this.getLocaleString("modelSelectDialog_title"));this.modelSelectDialogComment.innerHTML=this.getLocaleString("modelSelectDialogComment_content");this.datasourcelistlbl.innerHTML=this.getLocaleString("datasourcelistlbl_content");this.editdatasourceimg.title=this.getLocaleString("editdatasourceimg_title");this.adddatasourceimg.title=this.getLocaleString("adddatasourceimg_title");this.deletedatasourceimg.title=this.getLocaleString("deletedatasourceimg_title");},templateString:"<div class=\"dialog-content\" style=\"width: 370px;\">\n<table class=\"pentaho-padding-sm\" onkeyup=\"\">\n    <tr>\n        <td colspan=\"3\">\n            <span dojoAttachPoint=\"modelSelectDialogComment\" class=\"label\"></span>\n        </td>\n    </tr>\n    <tr>\n        <td colspan=\"3\">\n            <table style=\"padding:0px; margin:0px; width:100%\">\n                <tr>\n                    <td style=\"width:100%\">\n                        <span dojoAttachPoint=\"datasourcelistlbl\" class=\"label\">Data Sources:</span>\n                    </td>\n                    <td>\n                        <div dojoAttachPoint=\"editdatasourceimg\" dojoType=\"pentaho.common.SmallImageButton\" title=\"Edit the selected datasource\" baseClass=\"pentaho-editbutton\">\n                        </div>\n                    </td>\n                    <td>\n                        <div dojoAttachPoint=\"adddatasourceimg\" dojoType=\"pentaho.common.SmallImageButton\" title=\"Add a datasource\" baseClass=\"pentaho-addbutton\">\n                        </div>\n                    </td>\n                    <td>\n                        <div dojoAttachPoint=\"deletedatasourceimg\" dojoType=\"pentaho.common.SmallImageButton\" title=\"Delete the selected datasource\" baseClass=\"pentaho-deletebutton\">\n                        </div>\n                    </td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n    <tr>\n        <td colspan=\"3\">\n            <div dojoType=\"pentaho.common.ListBox\" dojoAttachPoint=\"modelList\" name=\"model\" size=\"6\" width=\"100%\" height=\"100px\" style=\"overflow:auto;width:100%\">\n            </div>\n        </td>\n    </tr>\n</table>\n</div>\n",postCreate:function(){this.inherited(arguments);this.modelList.onChange=dojo.hitch(this,this.datasourceSelected);dojo.connect(this.adddatasourceimg.buttonImg,"onclick",this,this.addDatasource);dojo.connect(this.editdatasourceimg.buttonImg,"onclick",this,this.editDatasource);dojo.connect(this.deletedatasourceimg.buttonImg,"onclick",this,this.deleteDatasource);dojo.connect(this.modelList.menuNode,"onDblClick",this,this.onModelDblClick);},addDatasource:function(){if(this.adddatasourceimg.disabled){return;}var _d22={onError:function(val){alert("error:"+val);},onCancel:function(){alert("cancelled");},onReady:function(){}};_d22.onFinish=dojo.hitch(this,this.datasourceAddCallback);if(window.parent&&window.parent.pho&&window.parent.pho.openDatasourceEditor){window.parent.pho.openDatasourceEditor(_d22);}},editDatasource:function(){if(this.editdatasourceimg.disabled){return;}if(this.canDataSourceAdmin&&window.parent&&window.parent.pho&&window.parent.pho.openEditDatasourceEditor){if(this.modelList.selectedIndex==-1){return false;}var id=this.modelList.get("value");var _d23={onError:function(val){alert("error:"+val);},onCancel:function(){alert("cancelled");},onReady:function(){}};_d23.onFinish=dojo.hitch(this,this.datasourceEditCallback);var _d24=this.getModel(this.modelList.get("value"));window.parent.pho.openEditDatasourceEditor(_d24.domainId,_d24.modelId,_d23);}},deleteDatasource:function(){if(this.deletedatasourceimg.disabled){return;}if(this.canDataSourceAdmin&&window.parent&&window.parent.pho&&window.parent.pho.openEditDatasourceEditor){if(this.modelList.selectedIndex==-1){return false;}if(!this.msgBox){this.msgBox=dijit.byId("messagebox");this.msgBox.setLocalizationLookupFunction(this.getLocaleString);}this.msgBox.buttons=[this.getLocaleString("Ok"),this.getLocaleString("Cancel")];this.msgBox.setTitle(this.getLocaleString("Warning"));this.msgBox.setMessage(this.getLocaleString("DeleteDatasourceWarning"));this.msgBox.callbacks=[dojo.hitch(this,this.deleteDatasource2),dojo.hitch(this,function(){this.msgBox.hide();})];this.msgBox.show();}},deleteDatasource2:function(){this.msgBox.hide();var _d25={onError:function(val){alert("error:"+val);},onCancel:function(){},onReady:function(){}};_d25.onFinish=dojo.hitch(this,this.datasourceDeleteCallback);window.parent.pho.deleteModel(this.models[this.modelList.selectedIndex].domainId,this.models[this.modelList.selectedIndex].modelId,_d25);},disableDatasourceAdminButtons:function(){this.enableIconButton(this.editdatasourceimg,false);this.enableIconButton(this.deletedatasourceimg,false);this.enableIconButton(this.adddatasourceimg,false);}});}if(!dojo._hasResource["pentaho.common.DateTextBox"]){dojo._hasResource["pentaho.common.DateTextBox"]=true;dojo.provide("pentaho.common.DateTextBox");dojo.declare("pentaho.common.DateTextBox",[dijit.form.DateTextBox],{templateString:dojo.cache("pentaho.common","DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft pentaho-listbox\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\">\n    <div class='dijitReset dijitRight dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\">\n                        <div class=\"pentaho-dropdownbutton-outer\">\n                            <div class=\"pentaho-dropdownbutton-inner\">\n                            </div>\n                        </div>\n\n        <input class=\"dijitReset dijitInputField dijitArrowButtonInner\" style=\"display:none\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\t${_buttonInputDisabled} />\n    </div>\n    <div class='dijitReset dijitValidationContainer'>\n        <input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"/>\n    </div>\n    <div class=\"dijitReset dijitInputField dijitInputContainer\">\n        <input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"/>\n    </div>\n\n</div>\n"),popupClass:"pentaho.common.Calendar"});}if(!dojo._hasResource["pentaho.common.DisclosurePanel"]){dojo._hasResource["pentaho.common.DisclosurePanel"]=true;dojo.provide("pentaho.common.DisclosurePanel");dojo.declare("pentaho.common.DisclosurePanel",dijit.TitlePane,{templateString:dojo.cache("pentaho.common","DisclosurePanel.html","<div>\n    <table class=\"pentaho-disclosure-panel pentaho-disclosure-panel-open\" cellspacing=\"0\" cellpadding=\"0\">\n        <tr>\n            <td class=\"header\" dojoAttachEvent=\"onclick:_onTitleClick, onkeypress:_onTitleKey\" dojoAttachPoint=\"titleBarNode\">\n                <div class=\"\" dojoAttachPoint=\"focusNode\">\n                </div>\n                <table>\n                    <tbody>\n                        <tr>\n                            <td align=\"center\" style=\"width: 16px;\">\n                                <img dojoAttachPoint=\"arrowNode\" src=\"images/spacer.gif\" id=\"disclosure-panel-icon\" class=\"pentaho-disclosure-panel-openicon\"/>\n                            </td>\n                            <td dojoAttachPoint=\"titleNode\" >Panel Title</td>\n                        </tr>\n                    </tbody>\n                </table>\n                <span dojoAttachPoint=\"arrowNodeInner\" style=\"display:none\"></span>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <div class=\"pentaho-disclosure-panel-dropdown pentaho-shadow-padding\" dojoAttachPoint=\"hideNode\" role=\"presentation\">\n                    <div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\" role=\"presentation\">\n                        <div class=\"pentaho-rounded-panel-bottom-lr panel-content pentaho-shadow  pentaho-padding-sm\" dojoAttachPoint=\"containerNode\" role=\"region\" id=\"${id}_pane\">\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n    </table>\n</div>\n\n                        \n"),baseClass:"",duration:0,_setCss:function(){},postCreate:function(){this.toggleable=false;this.inherited(arguments);this.toggleable=true;},_setOpenAttr:function(open,_d26){this.hideNode.style.display=open?"":"none";this.arrowNode.className=open?"pentaho-disclosure-panel-openicon":"pentaho-disclosure-panel-closeicon";this._set("open",open);}});}if(!dojo._hasResource["pentaho.common.FieldList"]){dojo._hasResource["pentaho.common.FieldList"]=true;dojo.provide("pentaho.common.FieldList");dojo.declare("pentaho.common.FieldList",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"containerNode\"></div>",datasource:undefined,connectHandles:[],enableDragDrop:true,singleSelect:false,getLocaleString:undefined,filters:[],categorize:true,categoryClassMap:{},usedCategoryIds:{},sanitizeIdAndClassNames:function(name){if(name!=null){return dojox.html.entities.encode(name).replace(/ /g,"_");}else{return "";}},generateUniqueClassName:function(_d27){var gen=function(){return Math.round(Math.random()*100000);};var _d28="category"+gen();while(this.usedCategoryIds[_d28]){_d28=gen();}this.usedCategoryIds[_d28]=true;return ""+_d28;},getCategoryClassName:function(_d29){var _d2a=this.categoryClassMap[_d29];if(!_d2a){_d2a=this.generateUniqueClassName(_d29);this.categoryClassMap[_d29]=_d2a;}return _d2a;},fieldContextMenuCallback:function fieldContextMenuShow(_d2b){if(!this.fieldContextMenu){return;}dojo.stopEvent(_d2b);var x=_d2b.pageX;var y=_d2b.pageY;this.fieldContextMenu._scheduleOpen(_d2b.target,null,{x:x,y:y});},doubleClickCallback:undefined,clickCallback:undefined,dndObj:undefined,selector:undefined,expandCollapseCategoryCallback:undefined,textSelectionDisabler:function(_d2c){if(typeof _d2c.onselectstart!="undefined"){this.connectHandles.push(dojo.connect(_d2c,"onselectstart",function(){return false;}));}else{if(typeof _d2c.style.MozUserSelect!="undefined"){_d2c.style.MozUserSelect="none";}else{this.connectHandles.push(this.connect(_d2c,"onmousedown",function(){return false;}));}}_d2c.style.cursor="default";},registerLocalizationLookup:function(f){this.getLocaleString=f;this._localize();},registerTextSelectionDisabler:function(f){this.textSelectionDisabler=f;},registerFieldContextMenuCallback:function(f){this.fieldContextMenuCallback=f;},registerDoubleClickCallback:function(f){this.doubleClickCallback=f;},registerClickCallback:function(f){this.clickCallback=f;},registerExpandCollapseCategoryCallback:function(f){this.expandCollapseCategoryCallback=f;},_localize:function(){},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);if(type=="Selected"||type=="Anchor"){dojo.addClass(node,"pentaho-listitem-selected");dojo.removeClass(node,"pentaho-listitem-hover");}},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);if(type=="Selected"||type=="Anchor"){dojo.removeClass(node,"pentaho-listitem-selected");dojo.removeClass(node,"pentaho-listitem-hover");}},unload:function(){if(this.dndObj){this.dndObj.destroy();}dojo.forEach(this.connectHandles,function(_d2d){dojo.disconnect(_d2d);});this.connectHandles=[];dojo.empty(this.containerNode);this.categoryClassMap={};this.usedCategoryIds={};},configureFor:function(_d2e){this.unload();this.dndObj=new dojo.dnd.Source(this.containerNode,{"copyOnly":true,"accept":"","selfAccept":false,"singular":this.singleSelect,"creator":dojo.hitch(this,this._dndItemCreator)});if(!this.enableDragDrop){this.selector=new dojo.dnd.Selector(this.containerNode,{"copyOnly":true,"accept":"","selfAccept":false,"singular":this.singleSelect,"creator":dojo.hitch(this,this._dndItemCreator)});this.selector._addItemClass=this._addItemClass;this.selector._removeItemClass=this._removeItemClass;}this.dndObj._addItemClass=this._addItemClass;this.dndObj._removeItemClass=this._removeItemClass;if(!this.categorize){var _d2f=this.getFields(_d2e,null,this.filters);this.addFields(_d2f,this.containerNode,"");return;}var _d30=[];var _d31=this.getCategories(_d2e);dojo.forEach(_d31,function(_d32,idx){if(dojo.indexOf(_d30,_d32.id)!=-1){return;}var _d33=this.getFields(_d2e,_d32,this.filters);if(_d33.length==0){return;}var _d34=this.getCategoryClassName(_d32.id);_d30.push(_d32.id);var _d35=dojo.create("div",{"id":_d34},this.containerNode);var _d36=dojo.create("div",{"id":_d34+"-indicator","class":"categoryIndicator treenode-open","categoryId":_d34},_d35);this.connectHandles.push(dojo.connect(_d36,"onclick",this,this.expandCollapseCategory));var _d37=dojo.create("span",{"id":_d34+"-span","class":"treenode-branch-label","innerHTML":_d32.name,"categoryId":_d34},_d35);this.textSelectionDisabler(_d37);this.connectHandles.push(dojo.connect(_d37,"ondblclick",this,this.expandCollapseCategory));var _d38=dojo.create("div",{"id":_d34+"-fields"},_d35);this.addFields(_d33,_d38,_d34);},this);},addFields:function(_d39,_d3a,_d3b){var _d3c=[];dojo.forEach(_d39,function(_d3d){var item={"categoryId":_d3b,"displayName":_d3d.name,"fieldId":_d3d.id,"dataType":_d3d.dataType,"type":["treenode-leaf-label"],"description":_d3d.description};if(_d3d.hiddenForUser!="true"){_d3c.push(item);this.dndObj.setItem("field-"+item.fieldId,{"data":item,"type":"treenode-leaf-label","fieldId":item.fieldId});}},this);if(this.enableDragDrop){this.dndObj.insertNodes(false,_d3c,false,_d3a);}else{for(var idx=0;idx<_d3c.length;idx++){var x=this._dndItemCreator(_d3c[idx],"");_d3a.appendChild(x.node);this.selector.setItem("field-"+_d3c[idx].fieldId,{"data":_d3c[idx],"type":"treenode-leaf-label","fieldId":_d3c[idx].fieldId});this.connectHandles.push(dojo.connect(x.node,"onmousedown",this,this.onMouseDown));this.connectHandles.push(dojo.connect(x.node,"onmouseup",this,this.onMouseUp));}}},onMouseDown:function(e){this.selector.current=e.target;this.selector.onMouseDown(e);},onMouseUp:function(e){this.selector.current=e.target;this.selector.onMouseUp(e);},_dndItemCreator:function(item,hint){var _d3e={"id":"field-"+this.sanitizeIdAndClassNames(item.fieldId),"innerHTML":item.displayName,"fieldId":item.fieldId,"class":item.categoryId};if(item.description){_d3e.title=item.description;}else{_d3e.title=item.fieldId;}var div=dojo.create("div",_d3e);if(hint==="avatar"){dojo.addClass(div,"dragDropAvatar");}else{dojo.addClass(div,"field");dojo.addClass(div,"treenode-leaf-label");dojo.addClass(div,"pentaho-listitem");this.connectHandles.push(dojo.connect(div,"oncontextmenu",this,function(_d3f){this.updateSelectionForContextMenu(item.fieldId);if(this.fieldContextMenuCallback){this.fieldContextMenuCallback(_d3f);}}));this.connectHandles.push(dojo.connect(div,"ondblclick",this,function(_d40){if(this.doubleClickCallback){this.doubleClickCallback(item.fieldId);}}));this.connectHandles.push(dojo.connect(div,"onmouseover",this,function(_d41){this.onFieldMouseOver(_d41);}));this.connectHandles.push(dojo.connect(div,"onmouseout",this,function(_d42){this.onFieldMouseOut(_d42);}));this.connectHandles.push(dojo.connect(div,"onclick",this,function(_d43){this.onFieldClick(_d43);}));}return {node:div,data:item,type:["treenode-leaf-label"]};},onFieldClick:function(_d44){if(this.selector){this.selector.onClick(_d44);}if(this.clickCallback){this.clickCallback(_d44);}},onFieldMouseOver:function(_d45){if(this.selector){this.selector.onMouseOver(_d45);}if(!dojo.hasClass(_d45.target,"pentaho-listitem-selected")){dojo.addClass(_d45.target,"pentaho-listitem-hover");dojo.removeClass(_d45.target,"pentaho-listitem");}},onFieldMouseOut:function(_d46){if(this.selector){this.selector.onMouseOut(_d46);}if(!dojo.hasClass(_d46.target,"pentaho-listitem-selected")){dojo.addClass(_d46.target,"pentaho-listitem");dojo.removeClass(_d46.target,"pentaho-listitem-hover");}else{dojo.removeClass(_d46.target,"pentaho-listitem-hover");dojo.addClass(_d46.target,"pentaho-listitem-selected");}},_elementComparator:function(a,b){if(a.name<b.name){return -1;}else{if(a.name==b.name){return 0;}else{return 1;}}},getCategories:function(_d47){var _d48=[];dojo.forEach(_d47.getAllElements(),function(_d49){if(_d49.elementType==pentaho.pda.Column.ELEMENT_TYPES.CATEGORY&&_d48[_d49]==null){_d48.push(_d49);}});return _d48;},getFields:function(_d4a,_d4b,_d4c){var _d4d=[];var _d4e=_d4a.getAllElements();dojo.forEach(_d4a.getAllElements(),function(_d4f){if(_d4f.isQueryElement&&(_d4b==null||_d4f.parent==_d4b)&&_d4d[_d4f]==null){if(_d4c&&_d4c.length>0){var ok=true;for(var _d50=0;_d50<_d4c.length;_d50++){var _d51=_d4c[_d50].values;var _d52=false;for(var _d53=0;_d53<_d51.length;_d53++){if(_d4f[_d4c[_d50].type]==_d51[_d53]){_d52=true;break;}}ok=ok&&_d52;if(!ok){break;}}if(ok){_d4d.push(_d4f);}}else{_d4d.push(_d4f);}}});return _d4d;},expandCollapseCategory:function(_d54){var _d55=dojo.attr(_d54.target,"categoryId");var node=dojo.byId(_d55+"-fields");var _d56=dojo.byId(_d55+"-indicator");var _d57=dojo.attr(_d56,"collapsed")!="true";if(_d57){dojo.addClass(_d56,"treenode-closed");dojo.removeClass(_d56,"treenode-open");}else{dojo.addClass(_d56,"treenode-open");dojo.removeClass(_d56,"treenode-closed");}dojo.attr(_d56,"collapsed",""+_d57);var _d58=dojo.query("."+_d55,this.containerNode);if(_d57){_d58.addClass("hidden");}else{_d58.removeClass("hidden");}if(this.expandCollapseCategoryCallback){this.expandCollapseCategoryCallback(_d57);}},updateFilterIndicators:function(_d59){dojo.query(".treenode-leaf-label",this.containerNode).removeClass("fieldlist-filtered-field");if(!_d59){return;}dojo.forEach(_d59,function(_d5a){var _d5b=dojo.byId("field-"+this.sanitizeIdAndClassNames(_d5a.column));if(_d5b!=null){dojo.addClass(_d5b,"fieldlist-filtered-field");}},this);},updateSelectionForContextMenu:function(_d5c){var _d5d=false;this.dndObj.forInSelectedItems(function(item,id){if(item.data.fieldId===_d5c){_d5d=true;}});var id="field-"+_d5c;var node=dojo.byId(id);if(!_d5d){this.clearSelection();this.dndObj._addItemClass(node,"pentaho-listitem-selected");this.dndObj.selection[id]=1;}if(this.dndObj.anchor){this.dndObj._addItemClass(this.dndObj.anchor,"pentaho-listitem-selected");}this.dndObj._removeAnchor();this.dndObj._addItemClass(node,"Anchor");this.dndObj.anchor=node;},getSelectedItems:function(){if(this.dndObj&&this.enableDragDrop){var _d5e=[];this.dndObj.forInSelectedItems(function(item){_d5e.push(item.data);});return _d5e;}if(this.selector&&!this.enableDragDrop){var _d5e=[];this.selector.forInSelectedItems(function(item){_d5e.push(item.data);},this);return _d5e;}},clearSelection:function(){if(this.dndObj&&this.enableDragDrop){this.dndObj.selectNone();}if(this.selector){this.selector.selectNone();}},addFilter:function(_d5f){this.filters.push(_d5f);},clearFilters:function(){this.filters=[];},setCategorized:function(_d60){this.categorize=_d60;},setEnableDragDrop:function(_d61){this.enableDragDrop=_d61;},setContextMenu:function(_d62){this.fieldContextMenu=_d62;}});}if(!dojo._hasResource["pentaho.common.FilterDialog"]){dojo._hasResource["pentaho.common.FilterDialog"]=true;dojo.provide("pentaho.common.FilterDialog");dojo.declare("pentaho.common.FilterDialog",[pentaho.common.Dialog],{templateString:"<div dojoAttachPoint=\"dialogContainer\" class=\"filterDialogContainer dialog-content pentaho-padding-sm\" dojoAttachPoint=\"containerNode\">\n  <div dojoAttachPoint=\"typeContainer\" class=\"filterDialogTypeContainer\">\n    <div dojoAttachPoint=\"fieldPicklistContainer\" class=\"filterDialogHidden\">\n      <span class=\"filterDialogFieldPicklistText\"\n            dojoAttachPoint=\"fieldPicklistSpan\">!Field:!</span>\n      <select dojoAttachPoint=\"picklistFields\" dojoAttachEvent=\"onchange:_fieldChanged\">\n      </select>\n    </div>\n    <div dojoAttachPoint=\"typePicklistContainer\">\n      <input type=\"radio\" value=\"PICKLIST\"\n             name=\"filterType\" dojoAttachPoint=\"typePicklistInput\"\n             dojoAttachEvent=\"onclick:_filterTypeChanged\">\n      <span class=\"filterDialogTypePicklistText\"\n            dojoAttachPoint=\"typePicklistSpan\">!Select from a list!</span>\n      <span class=\"filterDialogTypePicklistCombinationTypeLinksSpan\">(<a href=\"#\" onclick=\"return false;\" dojoAttachPoint=\"typePicklistCombinationTypeLinksIncludeLink\">!Includes!</a>,&nbsp;<a href=\"#\" onclick=\"return false;\" dojoAttachPoint=\"typePicklistCombinationTypeLinksExcludeLink\">!Excludes!</a>)</span>\n      <br/>\n    </div>\n    <div dojoAttachPoint=\"typeMatchContainer\">\n      <input type=\"radio\" dojoAttachPoint=\"typeMatchInput\"\n             value=\"MATCH\" name=\"filterType\"\n             dojoAttachEvent=\"onclick:_filterTypeChanged\">\n      <span class=\"filterDialogTypeMatchText\" dojoAttachPoint=\"typeMatchSpan\">!Match a specific string!</span>\n      <br/>\n    </div>\n    <div dojoAttachPoint=\"typeDateRangeContainer\">\n      <input type=\"radio\" dojoAttachPoint=\"typeDateInput\"\n             value=\"DATERANGE\" name=\"filterType\"\n             dojoAttachEvent=\"onclick:_filterTypeChanged\">\n      <span class=\"filterDialogTypeDateRangeText\" dojoAttachPoint=\"typeDateRangeSpan\">!Select a range!</span>\n      <br/>\n    </div>\n    <!--\n    <input type=\"radio\" id=\"filter-type-picklist\" value=\"FILTER_PICKLIST\"\n           name=\"filterType\" onchange=\"view.updateFilterType(this.value);\">\n    Select from a list\n    <br>\n    <input type=\"radio\" id=\"filter-type-match\" value=\"FILTER_MATCH\"\n           name=\"filterType\" onchange=\"view.updateFilterType(this.value);\">\n    Match a specific string\n    -->\n    <p></p>\n  </div>\n  <div dojoAttachPoint=\"detailsContainer\" class=\"filterDialogDetailsContainer\">\n    <div dojoAttachPoint=\"picklistContainer\"\n         class=\"filterDialogPicklistContainer\">\n      <table>\n        <col style=\"width: 220px\">\n        <col style=\"width: 40px\">\n        <col style=\"width: 220px\">\n        <tbody>\n        <tr>\n          <td>\n\t\t\t      <span class=\"filterDialogPicklistHeadingText\" dojoAttachPoint=\"picklistHeadingSpan\">!Choose values from list:!</span>\n\t\t\t    </td>\n\t\t\t    <td></td>\n\t\t\t    <td></td>\n\t\t\t  </tr>\n\t\t\t  <tr>\n\t\t\t    <td>\n\t\t\t      <input type=\"text\" class=\"filterDialogPicklistFindInput\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"picklistFindInput\" dojoAttachEvent=\"onKeyPress:_picklistFindKeyPressed\"/>\n                  <button dojoAttachPoint=\"picklistFindButton\" dojoAttachEvent=\"onclick:_filterPicklistByFindInput\">!Find!</button>\n\t\t\t    </td>\n\t\t\t    <td>\n          </td>\n          <td>\n            <span dojoAttachPoint=\"picklistCombinationTypeSpan\">!Currently!</span>\n            <select dojoAttachPoint=\"picklistCombinationType\">\n              <option value=\"!AND!\" dojoAttachPoint=\"picklistCombinationTypeIncludeOption\">!INCLUDE!</option>\n              <option value=\"!AND_NOT!\" dojoAttachPoint=\"picklistCombinationTypeExcludeOption\">!EXCLUDE!</option>\n            </select>\n            :\n          </td>\n        </tr>\n        <tr>\n          <td>\n            <select dojoType=\"dijit.form.MultiSelect\"\n                    class=\"filterDialogPicklistSelect\"\n                    dojoAttachPoint=\"picklistAvailableValues\" name=\"available\"\n                    dojoAttachEvent=\"onDblClick:_picklistAddSelected\"\n                    size=\"12\"></select>\n          </td>\n          <td valign=\"middle\" align=\"center\">\n            <img dojoAttachEvent=\"onclick:_picklistAddSelected\"\n                 dojoAttachPoint=\"picklistAddSelected\"\n                 class=\"filterDialogPicklistButton\"\n                 src=\"images/filter_add_selected.png\"\n                 title=\"!Add Selected!\"><br>\n            <img dojoAttachEvent=\"onclick:_picklistRemoveSelected\"\n                 dojoAttachPoint=\"picklistRemoveSelected\"\n                 class=\"filterDialogPicklistButton\"\n                 src=\"images/filter_remove_selected.png\"\n                 title=\"!Remove Selected!\"><br>\n            <br><br>\n            <img dojoAttachEvent=\"onclick:_picklistAddAll\"\n                 dojoAttachPoint=\"picklistAddAll\"\n                 class=\"filterDialogPicklistButton\"\n                 src=\"images/filter_add_all.png\"\n                 title=\"!Add All!\"><br>\n            <img dojoAttachEvent=\"onclick:_picklistRemoveAll\"\n                 dojoAttachPoint=\"picklistRemoveAll\"\n                 class=\"filterDialogPicklistButton\"\n                 src=\"images/filter_remove_all.png\"\n                 title=\"!Remove All!\">\n          </td>\n          <td>\n            <select dojoType=\"dijit.form.MultiSelect\"\n                    class=\"filterDialogPicklistSelect\"\n                    dojoAttachPoint=\"picklistUsedValues\" name=\"used\"\n                    dojoAttachEvent=\"onDblClick:_picklistRemoveSelected\"\n                    size=\"12\"></select>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div dojoAttachPoint=\"matchContainer\" class=\"filterDialogMatchContainer\">\n        <span dojoAttachPoint=\"matchFieldName\">!Field name!</span>\n        <select dojoAttachPoint=\"matchAggType\"></select>\n        <select dojoAttachPoint=\"matchComparator\" dojoAttachEvent=\"onchange:_matchComparatorChanged\"></select>\n        <input type=\"text\" dojoAttachPoint=\"matchValueInput\" size=\"10\"/><!--dojoType=\"dijit.form.TextBox\"-->\n        <!-- Date pattern to match what metadata expects. -->\n        <!-- TODO Change this to locale-specific for presentation layer? -->\n        <input type=\"text\" dojoAttachPoint=\"matchValueInputDate\" dojoType=\"pentaho.common.DateTextBox\" constraints=\"{datePattern:'yyyy-MM-dd'}\"/>\n      </table>\n    </div>\n    <div dojoAttachPoint=\"dateRangeContainer\" class=\"filterDialogDateRangeContainer\">\n      <span dojoAttachPoint=\"dateRangeFieldName\">!Field name!</span>\n      <select dojoAttachPoint=\"dateRangeComparator\" dojoAttachEvent=\"onchange:_dateRangeComparatorChanged\"></select>\n      <!-- Date pattern to match what metadata expects. -->\n      <!-- TODO Change this to locale-specific for presentation layer? -->\n      <input type=\"text\" dojoAttachPoint=\"dateRangeValueInputDate1\" dojoType=\"pentaho.common.DateTextBox\" constraints=\"{datePattern:'yyyy-MM-dd'}\"/>\n      <span dojoAttachPoint=\"dateRangeBetweenSeparatorSpan\">!and!</span>\n      <input type=\"text\" dojoAttachPoint=\"dateRangeValueInputDate2\" dojoType=\"pentaho.common.DateTextBox\" constraints=\"{datePattern:'yyyy-MM-dd'}\"/>\n    </div>\n  </div>\n  <div class=\"filterDialogParameterContainer\">\n    <span dojoAttachPoint=\"parameterNameLabel\"></span><input type=\"text\" dojoAttachPoint=\"parameterNameInput\" dojoType=\"dijit.form.TextBox\"/>\n  </div>\n  <div dojoAttachPoint=\"errorDialog\" dojoType=\"pentaho.common.MessageBox\" style=\"width: 300px\"/>\n</div>\n",widgetsInTemplate:true,filterType:"PICKLIST",currentFilter:null,hasCloseIcon:true,buttons:["Ok_txt","Cancel_txt"],searchListLimit:500,_reauthenticateCallback:null,_preSaveCallback:undefined,_onSuccessCallback:undefined,_onCancelCallback:undefined,errorDialog:undefined,_numericFormatRegex:/[^0-9.]/g,postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);pentaho.common.Messages.addUrlBundle("pentaho.common",CONTEXT_PATH+"i18n?plugin=common-ui&name=resources/web/dojo/pentaho/common/nls/messages");dojo.connect(this.typePicklistCombinationTypeLinksIncludeLink,"onclick",this,function(){this._setPicklistCombinationTypeLink(pentaho.pda.Column.OPERATOR_TYPES.AND);});dojo.connect(this.typePicklistCombinationTypeLinksExcludeLink,"onclick",this,function(){this._setPicklistCombinationTypeLink(pentaho.pda.Column.OPERATOR_TYPES.AND_NOT);});dojo.attr(this.picklistCombinationTypeIncludeOption,"value",pentaho.pda.Column.OPERATOR_TYPES.AND);dojo.attr(this.picklistCombinationTypeExcludeOption,"value",pentaho.pda.Column.OPERATOR_TYPES.AND_NOT);this.callbacks=[dojo.hitch(this,this.save),dojo.hitch(this,this.cancel)];this.errorDialog.setButtons([this.getLocaleString("Ok_txt")]);this.errorDialog.callbacks=[dojo.hitch(this,function(){this.errorDialog.hide();})];},_createNumericFormatRegex:function(_d63){return new RegExp(_d63,"g");},setDecimalSeparator:function(s){this._numericFormatRegex=this._createNumericFormatRegex("[^0-9"+s+"]");},onCancel:function(){this.cancel();},_localize:function(){this.inherited(arguments);var _d64=this.getLocaleString("filterDialogDecimalSeparator");if(_d64!==undefined&&_d64!=="filterDialogDecimalSeparator"){this.setDecimalSeparator(_d64);}this.typePicklistSpan.innerHTML=this.getLocaleString("filterDialogTypePicklistSpan_content");this.typeMatchSpan.innerHTML=this.getLocaleString("filterDialogTypeMatchSpan_content");this.typeDateRangeSpan.innerHTML=this.getLocaleString("filterDialogTypeDateRangeSpan_content");this.picklistHeadingSpan.innerHTML=this.getLocaleString("filterDialogPicklistHeadingSpan_content");this.picklistFindButton.innerHTML=this.getLocaleString("filterDialogFindButton_content");this.picklistAddSelected.title=this.getLocaleString("filterDialogAddSelected_title");this.picklistRemoveSelected.title=this.getLocaleString("filterDialogRemoveSelected_title");this.picklistAddAll.title=this.getLocaleString("filterDialogAddAll_title");this.picklistRemoveAll.title=this.getLocaleString("filterDialogRemoveAll_title");this.parameterNameLabel.innerHTML=this.getLocaleString("filterDialogParameterName_content");this.typePicklistCombinationTypeLinksIncludeLink.innerHTML=this.getLocaleString("filterDialogTypePicklistCombinationTypeLinksIncludeLink_content");this.typePicklistCombinationTypeLinksExcludeLink.innerHTML=this.getLocaleString("filterDialogTypePicklistCombinationTypeLinksExcludeLink_content");this.picklistCombinationTypeIncludeOption.text=this.getLocaleString("filterDialogTypePicklistCombinationTypeIncluded_content");this.picklistCombinationTypeExcludeOption.text=this.getLocaleString("filterDialogTypePicklistCombinationTypeExcluded_content");this.picklistCombinationTypeSpan.innerHTML=this.getLocaleString("filterDialogTypePicklistCombinationType_label");this.matchFieldName.innerHTML=this.getLocaleString("filterDialogFieldName_content");this.dateRangeFieldName.innerHTML=this.getLocaleString("filterDialogFieldName_content");this.dateRangeBetweenSeparatorSpan.innerHTML=this.getLocaleString("dateRangeBetweenSeparatorSpan_content");this.fieldPicklistSpan.innerHTML=this.getLocaleString("filterDialogFieldPicklistSpan_content");},_filterTypeChanged:function(_d65){this.setFilterType(_d65.target.value);},configureFor:function(_d66){this.currentFilter=_d66;this.currentColumn=this.datasource.getColumnById(this.currentFilter.column);this.title=this.getLocaleString("FilterDialogTitle")+" "+this.currentColumn.name;this.picklistLoaded=false;this.configureFilterTypesFor(this.currentColumn.dataType);if(this.currentColumn.dataType===pentaho.pda.Column.DATA_TYPES.STRING&&(this.currentFilter.combinationType!=pentaho.pda.Column.OPERATOR_TYPES.AND||(dojo.isArray(this.currentFilter.value)&&this.currentFilter.value.length>1))){this.setFilterType("PICKLIST");}else{this.setFilterType("MATCH");}this._initParameterUI();},registerPreSaveCallback:function(f){this._preSaveCallback=f;},registerReauthenticateCallback:function(f){this._reauthenticateCallback=f;},registerOnSuccessCallback:function(f){this._onSuccessCallback=f;},registerOnCancelCallback:function(f){this._onCancelCallback=f;},setDatasource:function(_d67){this.datasource=_d67;},setSearchListLimit:function(_d68){this.searchListLimit=_d68;},enableFieldSelection:function(_d69){if(_d69){dojo.removeClass(this.fieldPicklistContainer,"filterDialogHidden");this.configureFilterTypesFor(null);this.setFilterType(null);this.title=this.getLocaleString("FilterDialogTitle");}else{dojo.addClass(this.fieldPicklistContainer,"filterDialogHidden");}},setFieldList:function(_d6a){this.picklistFields.length=0;this.fieldList=_d6a;var list=this.picklistFields;var opt=new Option("");list.options[0]=opt;for(var idx=0;idx<_d6a.length;idx++){opt=new Option(_d6a[idx].name,_d6a[idx].id);opt.title=_d6a[idx].name;list.options[list.length]=opt;}},_fieldChanged:function(){var idx=this.picklistFields.selectedIndex;var _d6b=this.fieldList[idx-1];this.configureFilterTypesFor(null);this.setFilterType(null);var _d6c={"column":_d6b.id,"value":null,"combinationType":pentaho.pda.Column.OPERATOR_TYPES.AND,"operator":pentaho.pda.Column.CONDITION_TYPES.EQUAL};this.title=this.getLocaleString("FilterDialogTitle")+" "+_d6b.name;this.setTitle(this.title);_d6c.value=[];this.configureFor(_d6c);},configureFilterTypesFor:function(_d6d){switch(_d6d){case null:dojo.addClass(this.typePicklistContainer,"filterDialogHidden");dojo.addClass(this.typeMatchContainer,"filterDialogHidden");dojo.addClass(this.typeDateRangeContainer,"filterDialogHidden");break;case pentaho.pda.Column.DATA_TYPES.UNKNOWN:case pentaho.pda.Column.DATA_TYPES.STRING:dojo.removeClass(this.typePicklistContainer,"filterDialogHidden");dojo.removeClass(this.typeMatchContainer,"filterDialogHidden");dojo.addClass(this.typeDateRangeContainer,"filterDialogHidden");break;case pentaho.pda.Column.DATA_TYPES.NUMERIC:case pentaho.pda.Column.DATA_TYPES.DATE:dojo.addClass(this.typePicklistContainer,"filterDialogHidden");dojo.removeClass(this.typeMatchContainer,"filterDialogHidden");dojo.addClass(this.typeDateRangeContainer,"filterDialogHidden");break;case pentaho.pda.Column.DATA_TYPES.BOOLEAN:dojo.addClass(this.typePicklistContainer,"filterDialogHidden");dojo.addClass(this.typeMatchContainer,"filterDialogHidden");dojo.addClass(this.typeDateRangeContainer,"filterDialogHidden");break;default:this.showErrorDialog(this.getLocaleString("filterDialogUnknownDataType")+_d6d);dojo.addClass(this.typePicklistContainer,"filterDialogHidden");dojo.addClass(this.typeMatchContainer,"filterDialogHidden");dojo.addClass(this.typeDateRangeContainer,"filterDialogHidden");}},setFilterType:function(type){switch(type){case null:dojo.addClass(this.picklistContainer,"filterDialogHidden");dojo.addClass(this.matchContainer,"filterDialogHidden");dojo.addClass(this.dateRangeContainer,"filterDialogHidden");break;case "PICKLIST":dojo.attr(this.typePicklistInput,"checked",true);dojo.removeClass(this.picklistContainer,"filterDialogHidden");dojo.addClass(this.matchContainer,"filterDialogHidden");dojo.addClass(this.dateRangeContainer,"filterDialogHidden");this._configurePicklistContainer();break;case "MATCH":dojo.attr(this.typeMatchInput,"checked",true);dojo.addClass(this.picklistContainer,"filterDialogHidden");dojo.removeClass(this.matchContainer,"filterDialogHidden");dojo.addClass(this.dateRangeContainer,"filterDialogHidden");this._configureMatchContainer();break;default:console.log("Unknown filter type: "+type);return;}this.filterType=type;},_initParameterUI:function(){if(this.currentFilter.parameterName){this.parameterNameInput.set("value",this.currentFilter.parameterName);}else{this.parameterNameInput.set("value","");}},save:function(){if(this._preSaveCallback){this._preSaveCallback.call(this,this,this.currentFilter,this._save.bind(this));}else{this._save();}},_save:function(){switch(this.filterType){case "PICKLIST":if(!this._savePicklistContainer()){return false;}break;case "MATCH":if(!this._saveMatchContainer()){return false;}break;default:console.log("Unknown filter type: "+type);return;}this._scrubFilterValues(this.currentFilter);var _d6e=this.getParameterName();if(_d6e){this.currentFilter.parameterName=_d6e;}else{this.currentFilter.parameterName=null;}if(this._onSuccessCallback){try{this._onSuccessCallback(this.currentFilter);}catch(e){console.warn("Error in onSuccessCallback of Filter Dialog: "+e);}}this.hide();return true;},getParameterName:function(){var _d6f=this.parameterNameInput.get("value");if(_d6f){_d6f=dojo.trim(_d6f).replace(/[^a-zA-Z0-9 ]/g,"");}return _d6f.length>0?_d6f:undefined;},cancel:function(){if(this._onCancelCallback){try{this._onCancelCallback(this.currentFilter);}catch(e){console.warn("Error in onCancelCallback of Filter Dialog: "+e);}}this.hide();},_configurePicklistContainer:function(){dojo.empty(this.picklistUsedValues.domNode);dojo.attr(this.picklistCombinationType,"value",this.currentFilter.combinationType);var _d70=dojo.isArray(this.currentFilter.value)?this.currentFilter.value:[this.currentFilter.value];var idx=0;dojo.forEach(_d70,function(_d71){if(_d71!=null){var opt=new Option(_d71,_d71);opt.title=_d71;this.containerNode.options[idx++]=opt;}},this.picklistUsedValues);if(this.picklistLoaded!=true){this.picklistFindInput.set("value","");this.filterPicklist("");}},_flagPicklistAvailableValuesLoading:function(){dojo.empty(this.picklistAvailableValues.domNode);var _d72=this.getLocaleString("filterDialogPicklistLoadingMessage");this.picklistAvailableValues.containerNode.options[0]=new Option(_d72,_d72);},_updatePicklistAvailableValues:function(_d73){dojo.empty(this.picklistAvailableValues.domNode);var sel=this.picklistAvailableValues.domNode;dojo.forEach(_d73,function(_d74,idx){this.containerNode.options[idx]=new Option(_d74,_d74);this.containerNode.options[idx].title=_d74;},this.picklistAvailableValues);this.picklistLoaded=true;},_picklistAddSelected:function(){dojo.forEach(this.picklistAvailableValues.getSelected(),function(_d75){var _d76=false;dojo.some(this.domNode.options,function(_d77){if(_d77.value===_d75.value){_d76=true;return true;}});if(!_d76){this.containerNode.appendChild(dojo.clone(_d75));}},this.picklistUsedValues);},_picklistRemoveSelected:function(){dojo.forEach(this.picklistUsedValues.getSelected(),function(_d78){this.containerNode.removeChild(_d78);},this.picklistUsedValues);},_picklistAddAll:function(){this._picklistRemoveAll();dojo.forEach(this.picklistAvailableValues.containerNode.options,function(_d79){this.containerNode.appendChild(dojo.clone(_d79));},this.picklistUsedValues);},_picklistRemoveAll:function(){dojo.empty(this.picklistUsedValues.domNode);},_savePicklistContainer:function(){var _d7a=[];dojo.forEach(this.picklistUsedValues.domNode.options,function(_d7b){_d7a.push(_d7b.value);});if(_d7a.length==0){this.showErrorDialog(this.getLocaleString("filterDialogMissingValueError_title"),this.getLocaleString("filterDialogMissingValueError_message"));return false;}this.currentFilter.operator=pentaho.pda.Column.CONDITION_TYPES.EQUAL;this.currentFilter.value=_d7a;this.currentFilter.combinationType=dojo.attr(this.picklistCombinationType,"value");return true;},_picklistFindKeyPressed:function(_d7c){if(_d7c.keyCode===dojo.keys.ENTER){this._filterPicklistByFindInput();}},_filterPicklistByFindInput:function(){var _d7d=this.picklistFindInput.get("value");if(this.oldPicklistFindValue!==_d7d){this.filterPicklist(_d7d);this.oldPicklistFindValue=_d7d;}},filterPicklist:function(_d7e){this._flagPicklistAvailableValuesLoading();this.datasource.searchColumn(this.currentColumn,_d7e,this.searchListLimit,dojo.hitch(this,function(_d7f){this._updatePicklistAvailableValues(_d7f==null?[]:_d7f.resultset);if(_d7f==null&&this._reauthenticateCallback){this._reauthenticateCallback(dojo.hitch(this,function(){this.filterPicklist(_d7e);}));}}));},_setPicklistCombinationTypeLink:function(_d80){if(this.filterType!="PICKLIST"){this.setFilterType("PICKLIST");}dojo.attr(this.picklistCombinationType,"value",_d80);},_isDateType:function(){return this.currentColumn.dataType===pentaho.pda.Column.DATA_TYPES.DATE;},_matchComparatorChanged:function(){var node=this._isDateType()?this.matchValueInputDate.domNode:this.matchValueInput;if(this._matchOperatorRequiresValue()){dojo.removeClass(node,"filterDialogHidden");}else{dojo.addClass(node,"filterDialogHidden");}},_matchOperatorRequiresValue:function(){return pentaho.pda.Column.SINGLE_COMPARATORS[this.matchComparator.value]==undefined;},_configureMatchContainer:function(){this.matchFieldName.innerHTML=this.currentColumn.name;var _d81=dojo.isArray(this.currentFilter.value)?this.currentFilter.value[0]:null;switch(this.currentColumn.dataType){case pentaho.pda.Column.DATA_TYPES.DATE:this.matchValueInputDate.setValue(dojo.date.stamp.fromISOString(_d81));dojo.removeClass(this.matchValueInputDate.domNode,"filterDialogHidden");dojo.addClass(this.matchValueInput,"filterDialogHidden");break;case pentaho.pda.Column.DATA_TYPES.NUMERIC:var _d81="";dojo.forEach(this.currentFilter.value,function(val){if(val.length>0){if(_d81.length>0){_d81+="|";}_d81+=val;}});this.matchValueInput.value=_d81;dojo.removeClass(this.matchValueInput,"filterDialogHidden");dojo.addClass(this.matchValueInputDate.domNode,"filterDialogHidden");break;default:this.matchValueInput.value=_d81==null?"":_d81;dojo.removeClass(this.matchValueInput,"filterDialogHidden");dojo.addClass(this.matchValueInputDate.domNode,"filterDialogHidden");break;}dojo.empty(this.matchAggType);dojo.forEach(this.currentColumn.availableAggregations,function(_d82,idx){this.options[idx]=new Option(pentaho.pda.Column.AGG_TYPES_STRINGS[_d82],_d82);this.options[idx].title=_d82;},this.matchAggType);if(this.currentFilter.selectedAggType){this.matchAggType.value=this.currentFilter.selectedAggType;}dojo.empty(this.matchComparator);var _d83=this.currentColumn.dataType===pentaho.pda.Column.DATA_TYPES.UNKNOWN?pentaho.pda.Column.DATA_TYPES.STRING:this.currentColumn.dataType;dojo.forEach(pentaho.pda.Column.COMPARATOR[_d83],function(_d84,idx){this.options[idx]=new Option(_d84[0],_d84[1]);this.options[idx].title=_d84[0];},this.matchComparator);this.matchComparator.value=this.currentFilter.operator;this._matchComparatorChanged();},_saveMatchContainer:function(){this.currentFilter.operator=this.matchComparator.value;this.currentFilter.selectedAggType=this.matchAggType.value;this.currentFilter.combinationType=pentaho.pda.Column.OPERATOR_TYPES.AND;if(!this._matchOperatorRequiresValue()){this.currentFilter.value=[""];}else{switch(this.currentColumn.dataType){case pentaho.pda.Column.DATA_TYPES.DATE:var date=this.matchValueInputDate.getValue();if(date==null){this.currentFilter.value=[""];}else{this.currentFilter.value=[dojo.date.stamp.toISOString(date,{selector:"date"})];}break;case pentaho.pda.Column.DATA_TYPES.NUMERIC:if(this.currentFilter.operator===pentaho.pda.Column.CONDITION_TYPES.EQUAL){var _d85=[];dojo.forEach(this.matchValueInput.value.split("|"),function(val){var v=this._scrubNumericValue(val);if(v&&v!==""){_d85.push(v);}},this);this.currentFilter.value=_d85;}else{if(this.matchValueInput.value.indexOf("|")>0){this.showErrorDialog(this.getLocaleString("filterDialogMissingValueError_title"),this.getLocaleString("filterDialogInvalidNumericError_message"));return false;}this.currentFilter.value=[this._scrubNumericValue(this.matchValueInput.value)];}break;default:this.currentFilter.value=[this.matchValueInput.value];break;}var _d86=false;dojo.some(this.currentFilter.value,function(val){if(val!==""){_d86=true;return false;}});if(!_d86){this.showErrorDialog(this.getLocaleString("filterDialogMissingValueError_title"),this.getLocaleString("filterDialogMissingValueError_message"));return false;}}return true;},_scrubNumericValue:function(val){return dojo.trim(val).replace(this._numericFormatRegex,"");},_scrubFilterValues:function(_d87){_d87.value=dojo.map(_d87.value,function(_d88){return _d88.replace(/["]/g,"");});},_configureDateRangeContainer:function(){this.dateRangeFieldName.innerHTML=this.currentColumn.name;this.dateRangeValueInputDate1.value=dojo.date.stamp.fromISOString(this.currentFilter.value);this.dateRangeValueInputDate2.value=null;},_dateRangeComparatorChanged:function(){console.log("_dateRangeComparatorChanged() Not yet implemented");},buildFilterText:function(_d89,_d8a){var _d8b=this.datasource.getColumnById(_d89.column);var _d8c=_d89.operator;if(_d89.combinationType!=pentaho.pda.Column.OPERATOR_TYPES.AND||(_d89.operator==pentaho.pda.Column.CONDITION_TYPES.EQUAL&&dojo.isArray(_d89.value)&&_d89.value.length>1)){switch(_d89.combinationType){case pentaho.pda.Column.OPERATOR_TYPES.AND:_d8c=this.getLocaleString("FilterCombinationTypeIn");break;case pentaho.pda.Column.OPERATOR_TYPES.AND_NOT:_d8c=this.getLocaleString("FilterCombinationTypeNotIn");break;default:console.log("Unknown filter combination type for IN condition type: "+_d89.combinationType);}}else{var _d8d=_d8b.dataType==pentaho.pda.Column.DATA_TYPES.UNKNOWN?pentaho.pda.Column.DATA_TYPES.STRING:_d8b.dataType;var _d8e=pentaho.pda.Column.COMPARATOR[_d8d];if(_d8e){dojo.some(_d8e,function(_d8f){if(_d8f[1]===_d89.operator){_d8c=_d8f[0];return true;}});}}var _d90="";var _d91=" ";if(_d89.selectedAggType){_d91=" ("+pentaho.pda.Column.AGG_TYPES_STRINGS[_d89.selectedAggType]+") ";}if(_d8a){_d90=this.getLocaleString("FilterTextValueFromPrompt",_d89.parameterName);}else{if(_d89.value!=undefined){if(_d89.value.length>10){_d90=_d89.value.length+" values";}else{dojo.forEach(_d89.value,function(_d92){if(_d90.length>0){_d90+=", ";}_d90+=dojox.html.entities.encode(_d92);},this);}}}return _d8b.name+_d91+_d8c+" "+_d90;},showErrorDialog:function(_d93){showErrorDialog(this.getLocaleString("ErrorDialog_title"),_d93);},showErrorDialog:function(_d94,_d95){this.errorDialog.setTitle(_d94);this.errorDialog.setMessage(_d95);this.errorDialog.show();}});}if(!dojo._hasResource["pentaho.common.FilterIndicator"]){dojo._hasResource["pentaho.common.FilterIndicator"]=true;dojo.provide("pentaho.common.FilterIndicator");dojo.declare("pentaho.common.FilterIndicator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"containerNode\" class=\"hidden cursorPointer filterToolbarIndicator\"></div>",backgroundClassPrefix:"filterIndicatorBackground_",backgroundClassOverflow:"9_plus",min:1,max:9,currentBackgroundClass:undefined,toolbarButton:undefined,anchorElement:undefined,defaultOffsets:{top:0,left:0,bottom:0,right:0},offsets:this.defaultOffsets,configure:function(_d96,_d97){this.setToolbarButton(_d96);this.setAnchorElement(_d96.domNode);this.setOffsets(_d97);this._connectToToolbarButton();this._updatePosition();},setToolbarButton:function(_d98){this.toolbarButton=_d98;},setOffsets:function(_d99){this.offsets=_d99?_d99:defaultOffsets;},setAnchorElement:function(e){this.anchorElement=e;},_connectToToolbarButton:function(){dojo.connect(this.containerNode,"onclick",this,function(_d9a){this.toolbarButton._onButtonClick(_d9a);dojo.stopEvent(_d9a);});dojo.connect(this.containerNode,"onmouseover",this,function(){this.toolbarButton._set("hovering",true);});dojo.connect(this.containerNode,"onmouseout",this,function(){this.toolbarButton._set("hovering",false);this.toolbarButton._set("active",false);});dojo.connect(this.containerNode,"onmousedown",this,function(){this.toolbarButton._set("hovering",true);this.toolbarButton._set("active",true);});dojo.connect(this.containerNode,"onmouseup",this,function(){this.toolbarButton._set("hovering",true);this.toolbarButton._set("active",false);});},_updatePosition:function(){if(!this.anchorElement){this.hide();return;}var c=dojo.coords(this.anchorElement);var left=c.x+this.offsets.left;var top=c.y+this.offsets.top;dojo.style(this.containerNode,"left",left+"px");dojo.style(this.containerNode,"top",top+"px");},update:function(_d9b){if(!_d9b||_d9b<this.min){this.hide();}else{if(_d9b<=this.max){this.changeBackground(this.backgroundClassPrefix+_d9b);}else{this.changeBackground(this.backgroundClassPrefix+this.backgroundClassOverflow);}}this._updatePosition();},show:function(){dojo.removeClass(this.containerNode,"hidden");},hide:function(){dojo.addClass(this.containerNode,"hidden");},changeBackground:function(_d9c){if(this.currentBackgroundClass!==_d9c){dojo.addClass(this.containerNode,_d9c);if(this.currentBackgroundClass){dojo.removeClass(this.containerNode,this.currentBackgroundClass);}this.currentBackgroundClass=_d9c;}this.show();}});}if(!dojo._hasResource["pentaho.common.GlassPane"]){dojo._hasResource["pentaho.common.GlassPane"]=true;dojo.provide("pentaho.common.GlassPane");dojo.declare("pentaho.common.GlassPane",[dijit._Widget],{_glassPaneDiv:null,create:function(_d9d,_d9e){this.inherited(arguments);this._glassPaneDiv=dojo.create("div",{id:"glasspane",className:"glasspane"});document.body.appendChild(this._glassPaneDiv);},show:function(){dojo.style(this._glassPaneDiv,"display","block");},hide:function(){dojo.style(this._glassPaneDiv,"display","none");}});}if(!dojo._hasResource["pentaho.common.MenuItem"]){dojo._hasResource["pentaho.common.MenuItem"]=true;dojo.provide("pentaho.common.MenuItem");dojo.declare("pentaho.common.MenuItem",[dijit.MenuItem],{baseClass:"pentaho-menuitem",templateString:dojo.cache("pentaho.common","MenuItem.html","<tr class=\"dijitReset pentaho-menuitem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"pentaho-checkmenuitem\" dojoAttachPoint=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset pentaho-menuitem-label\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),_setSelected:function(_d9f){if(!this.disabled){dojo.toggleClass(this.domNode,"pentaho-menuitem-hover",_d9f);}},setDisabled:function(_da0){this.set("disabled",_da0);dojo.toggleClass(this.domNode,"pentaho-menuitem-disabled",_da0);},_setDisabledAttr:function(_da1){dijit.setWaiState(this.focusNode,"disabled",_da1?"true":"false");this._set("disabled",_da1);dojo.toggleClass(this.domNode,"pentaho-menuitem-disabled",_da1);},_onHover:function(){this.getParent().onItemHover(this);if(!this.disabled){dojo.addClass(this.domNode,"pentaho-menuitem-hover");}},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false);if(!this.disabled){dojo.removeClass(this.domNode,"pentaho-menuitem-hover");}}});}if(!dojo._hasResource["pentaho.common.Overrides"]){dojo._hasResource["pentaho.common.Overrides"]=true;dojo.provide("pentaho.common.Overrides");dojo.extend(dijit.layout.TabContainer,{baseClass:"pentahoTabContainer"});dojo.extend(dijit.DialogUnderlay,{templateString:"<div class='glasspane'><div class='' dojoAttachPoint='node'></div></div>",_setClassAttr:function(_da2){this.node.className=_da2;this._set("class",_da2);}});dojo.extend(dijit.layout._TabButton,{baseClass:"pentaho-tabWidget"});dojo.dnd.autoScroll=function(e){};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if((!n.getAttribute||!n.getAttribute("preventAutoScroll")||n.getAttribute("preventAutoScroll")=="false")&&n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft;ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _da3=n.scrollLeft,_da4=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_da3!=n.scrollLeft||_da4!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["pentaho.common.PopupMenuItem"]){dojo._hasResource["pentaho.common.PopupMenuItem"]=true;dojo.provide("pentaho.common.PopupMenuItem");dojo.declare("pentaho.common.PopupMenuItem",[dijit.PopupMenuItem,pentaho.common.MenuItem],{baseClass:"pentaho-menuitem",_setSelected:function(_da5){if(!this.disabled){dojo.toggleClass(this.domNode,"pentaho-menuitem-hover",_da5);}}});}if(!dojo._hasResource["pentaho.common.SectionHeader"]){dojo._hasResource["pentaho.common.SectionHeader"]=true;dojo.provide("pentaho.common.SectionHeader");dojo.declare("pentaho.common.SectionHeader",[dijit._Widget,dijit._Templated],{title:"",header:"header",buttonTypes:"",headerButtons:[],id:"",buttonInfo:[],height:"20px",templateString:"<div dojoAttachPoint=\"outerdiv\" class=\"section-header-outer\">\n    <div class=\"section-header-middle\">\n        <div class=\"pentaho-titled-toolbar section-header-inner pentaho-padding-sm\" style=\"height: ${height}; \">\n            <table dojoAttachPoint=\"table\" style=\"padding:0px; margin:0px; width:100%; height:100%\">\n                <tr>\n                    <td style=\"width:100%\">\n                        <span dojoAttachPoint=\"headerNode\" id=\"sectionHeader-${id}\" class=\"label\">${header}</span>\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n</div>\n",postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.buttonTypes&&this.buttonTypes.length>0){var list=this.buttonTypes.split(",");var _da6=[];for(var idx=0;idx<list.length;idx++){var info={baseClass:list[idx],id:""+this.id+"-button-"+idx,title:"",callback:dojo.hitch(this,this.buttonClick,idx)};_da6.push(info);}this.setButtons(_da6);}},setButtons:function(_da7){this.buttonInfo=_da7;this.headerButtons=[];for(var idx=0;idx<_da7.length;idx++){var _da8=new pentaho.common.SmallImageButton(_da7[idx]);this.headerButtons.push(_da8);var cell=this.table.rows[0].insertCell(-1);cell.appendChild(_da8.domNode);}},buttonClick:function(idx){if(this.callbacks&&idx<this.callbacks.length){this.callbacks[idx](this.headerButtons[idx].id);}},setHeader:function(_da9){this.header=_da9;this.headerNode.innerHTML=_da9;}});}if(!dojo._hasResource["pentaho.common.SplashScreen"]){dojo._hasResource["pentaho.common.SplashScreen"]=true;dojo.provide("pentaho.common.SplashScreen");dojo.declare("pentaho.common.SplashScreen",[pentaho.common.Dialog],{buttons:["ok"],imagePath:"",hasTitleBar:false,setTitle:function(_daa){this.splashtitle.innerHTML=_daa;},setText:function(text){this.splashmessage.innerHTML=text;},setButtonText:function(text){this.buttons[0]=text;dojo.query("#button"+0,this.domNode).innerHTML=text;},templateString:"<table class=\"splash-content\" style=\"width:100%\" onkeyup=\"\">\n    <tr>\n        <td>\n            <img dojoAttachPoint=\"splashimg\" src=\"${imagePath}\" class=\"splashimage\"></img>\n        </td>\n        <td style=\"vertical-align:top\">\n            <table>\n                <tr>\n                    <td dojoAttachPoint=\"splashtitle\" class=\"splashtitle\">\n                    </td>\n                </tr>\n                <tr>\n                    <td dojoAttachPoint=\"splashmessage\" class=\"splashtext label\">\n                    </td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>\n            \n",postCreate:function(){this.inherited(arguments);}});}if(!dojo._hasResource["pentaho.common.TemplatePicker"]){dojo._hasResource["pentaho.common.TemplatePicker"]=true;dojo.provide("pentaho.common.TemplatePicker");dojo.declare("pentaho.common.TemplatePicker",[pentaho.common.Dialog],{buttons:[],templates:[],pageNo:0,hasTitleBar:false,hasBorder:false,templateSelectedCallback:null,updatePageArrows:function(){this.prevSetBtn.set("disabled",this.pageNo==0);this.nextSetBtn.set("disabled",(this.pageNo+1)*6>=this.templates.length);},setTemplates:function(_dab){this.templates=_dab;this.showPage();this.updatePageArrows();},showPage:function(){var _dac=this.pageNo*6;for(var idx=0;idx<6;idx++){if(idx+_dac<this.templates.length){this["templateImg"+idx].src=this.templates[idx+_dac].imagePath;this["templateName"+idx].innerHTML=this.templates[idx+_dac].name;dojo.removeClass(this["templateImg"+idx],"hidden");dojo.addClass(this["templateName"+idx],"fade");}else{dojo.addClass(this["templateImg"+idx],"hidden");dojo.removeClass(this["templateName"+idx],"fade");this["templateName"+idx].innerHTML="";}}this.updatePageArrows();},templateString:"<div style=\"overflow:auto; width:868px; height: 590px\">\n    <div style=\"position:absolute; left: 0px; top: 0px; width:100%; z-index: 1200\">\n        <table style=\"width:100%\" border=\"0\">\n            <tr>\n                <td style=\"text-align:right\">\n                    <div dojoAttachPoint=\"closeBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-closebutton-big\">\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n    <div style=\"z-index: 1100; position:absolute; left: 0px; top: 0px; width:100%; height:100% padding-top:0px; padding-right:0px;\">\n        <div style=\"widthx:100%; heightx:100%; padding-top:15px; padding-right:15px;\">\n            <div style=\"widthx:100%;\" class=\"pentaho-selection-dialog-outer\" style=\" padding-right:2px; \" >\n                <table class=\"pentaho-selection-dialog-inner\" style=\"widthx:100%; height: 570px;\" >\n                    <tr>\n                        <td>\n                            <div dojoAttachPoint=\"prevSetBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-left-lgbutton\">\n                            </div>                            \n                        </td>\n                        <td>\n                            <div style=\"overflow:auto; width:100%; height: 100%\">\n                                <table dojoAttachPoint=\"templateListTbl\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"width:100%\">\n                                    <tbody>\n                                        <tr>\n                                            <td style=\"width:260px;heightx:250px;text-align:center\">\n                                                <img dojoAttachPoint=\"templateImg0\" idx=\"0\" class=\"handpointer templatePickerImg\" />\n                                            </td>\n                                            <td style=\"width:260px;heightx:250px;text-align:center\">\n                                                <img dojoAttachPoint=\"templateImg1\" idx=\"1\" class=\"handpointer templatePickerImg\" />                                        \n                                             </td>\n                                            <td style=\"width:260px;heightx:250px;text-align:center\">\n                                                <img dojoAttachPoint=\"templateImg2\" idx=\"2\" class=\"handpointer templatePickerImg\" />                                        \n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td dojoAttachPoint=\"templateName0\" idx=\"0\" class=\"contrast-color fade\" style=\"height:50px;text-align:center\"></td>\n                                            <td dojoAttachPoint=\"templateName1\" idx=\"1\" class=\"contrast-color fade\" style=\"height:50px;text-align:center\"></td>\n                                            <td dojoAttachPoint=\"templateName2\" idx=\"2\" class=\"contrast-color fade\" style=\"height:50px;text-align:center\"></td>\n                                        </tr>\n                                        <tr>\n                                            <td style=\"width:260px;heightx:250px;text-align:center\">\n                                                <img dojoAttachPoint=\"templateImg3\" idx=\"3\" class=\"handpointer templatePickerImg\" />                                        \n                                            </td>\n                                            <td style=\"width:260px;heightx:250px;text-align:center\">\n                                                <img dojoAttachPoint=\"templateImg4\" idx=\"4\" class=\"handpointer templatePickerImg\" />                                        \n                                            </td>\n                                            <td style=\"width:260px;heightx:250px;text-align:center\">\n                                                <img dojoAttachPoint=\"templateImg5\" idx=\"5\" class=\"handpointer templatePickerImg\" />                                        \n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td dojoAttachPoint=\"templateName3\" idx=\"3\" class=\"contrast-color fade\" style=\"height:33px;text-align:center\"></td>\n                                            <td dojoAttachPoint=\"templateName4\" idx=\"4\" class=\"contrast-color fade\" style=\"height:33px;text-align:center\"></td>\n                                            <td dojoAttachPoint=\"templateName5\" idx=\"5\" class=\"contrast-color fade\" style=\"height:33px;text-align:center\"></td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </td>\n                        <td>\n                            <div dojoAttachPoint=\"nextSetBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-right-lgbutton\">\n                            </div>                            \n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n\t</div>\n</div>\n            \n",postCreate:function(){this.inherited(arguments);this.closeBtn.callback=dojo.hitch(this,this.closeClick);this.prevSetBtn.callback=dojo.hitch(this,this.prevPage);this.nextSetBtn.callback=dojo.hitch(this,this.nextPage);dojo.connect(this.templateImg0,"onclick",this,"imgClick");dojo.connect(this.templateImg1,"onclick",this,"imgClick");dojo.connect(this.templateImg2,"onclick",this,"imgClick");dojo.connect(this.templateImg3,"onclick",this,"imgClick");dojo.connect(this.templateImg4,"onclick",this,"imgClick");dojo.connect(this.templateImg5,"onclick",this,"imgClick");dojo.connect(this.templateName0,"onclick",this,"imgClick");dojo.connect(this.templateName1,"onclick",this,"imgClick");dojo.connect(this.templateName2,"onclick",this,"imgClick");dojo.connect(this.templateName3,"onclick",this,"imgClick");dojo.connect(this.templateName4,"onclick",this,"imgClick");dojo.connect(this.templateName5,"onclick",this,"imgClick");},imgClick:function(_dad){var idx=parseInt(dojo.attr(_dad.target,"idx"));var idx=this.pageNo*6+idx;if(this.templateSelectedCallback){this.templateSelectedCallback(idx);}},closeClick:function(){this.buttonClick(0);},prevPage:function(){if(this.pageNo==0){return;}this.pageNo--;this.showPage();},nextPage:function(){if((this.pageNo+1)*6>=this.templates.length){return;}this.pageNo++;this.showPage();}});}if(!dojo._hasResource["pentaho.common.TemplatePickerEmbed"]){dojo._hasResource["pentaho.common.TemplatePickerEmbed"]=true;dojo.provide("pentaho.common.TemplatePickerEmbed");dojo.declare("pentaho.common.TemplatePickerEmbed",[dijit._Widget,dijit._Templated],{buttons:[],templates:[],pageNo:0,hasTitleBar:false,widgetsInTemplate:true,hasBorder:false,templateSelectedCallback:null,updatePageArrows:function(){if(this.prevSetBtn.set){this.prevSetBtn.set("disabled",this.pageNo==0);}if(this.nextSetBtn.set){this.nextSetBtn.set("disabled",(this.pageNo+1)*6>=this.templates.length);}},setTemplates:function(_dae){this.templates=_dae;this.showPage();this.updatePageArrows();},showPage:function(){var _daf=this.pageNo*6;for(var idx=0;idx<6;idx++){if(idx+_daf<this.templates.length){this["templateImg"+idx].src=this.templates[idx+_daf].imagePath;if(this.templates[idx+_daf].description&&this.templates[idx+_daf].description!=null){this["templateImg"+idx].title=this.templates[idx+_daf].description;}this["templateName"+idx].innerHTML=this.templates[idx+_daf].name;dojo.removeClass(this["templateImg"+idx],"hidden");dojo.addClass(this["templateName"+idx],"fadeEmbed");if(this.templates[idx+_daf].selected){dojo.addClass(this["templateName"+idx],"pentaho-selection-dialog-selected");dojo.addClass(this["templateImgCell"+idx],"pentaho-selection-dialog-selected");dojo.removeClass(this["templateName"+idx],"pentaho-selection-dialog-unselected");dojo.removeClass(this["templateImgCell"+idx],"pentaho-selection-dialog-unselected");}else{dojo.addClass(this["templateName"+idx],"pentaho-selection-dialog-unselected");dojo.addClass(this["templateImgCell"+idx],"pentaho-selection-dialog-unselected");dojo.removeClass(this["templateName"+idx],"pentaho-selection-dialog-selected");dojo.removeClass(this["templateImgCell"+idx],"pentaho-selection-dialog-selected");}}else{dojo.addClass(this["templateImg"+idx],"hidden");dojo.removeClass(this["templateName"+idx],"fadeEmbed");dojo.addClass(this["templateImgCell"+idx],"pentaho-selection-dialog-unselected");dojo.removeClass(this["templateImgCell"+idx],"pentaho-selection-dialog-selected");dojo.removeClass(this["templateName"+idx],"pentaho-selection-dialog-selected");this["templateName"+idx].innerHTML="";}}this.updatePageArrows();},templateString:"                <table border=\"0\" class=\"pentaho-selection-dialog-inner-embed\" style=\"widthx:100%; height: 350px;\" >\n                    <tr>\n                        <td>\n                            <div dojoAttachPoint=\"prevSetBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-left-lgbutton\">\n                            </div>                            \n                        </td>\n                        <td>\n                            <div style=\"overflow:auto; width:100%; height: 350px; vertical-align:middle; padding-top:20px\">\n                                <table dojoAttachPoint=\"templateListTbl\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"width:100%;\">\n                                    <tbody>\n                                        <tr>\n                                            <td dojoAttachPoint=\"templateImgCell0\" class=\"pentaho-selection-dialog-unselected\" style=\"width:260px;heightx:250px;text-align:center;padding-top:10px\">\n                                                <img dojoAttachPoint=\"templateImg0\" idx=\"0\" class=\"handpointer templatePickerImgEmbed\" />\n                                            </td>\n                                            <td dojoAttachPoint=\"templateImgCell1\" class=\"pentaho-selection-dialog-unselected\" style=\"width:260px;heightx:250px;text-align:center;padding-top:10px\">\n                                                <img dojoAttachPoint=\"templateImg1\" idx=\"1\" class=\"handpointer templatePickerImgEmbed\" />                                        \n                                             </td>\n                                            <td dojoAttachPoint=\"templateImgCell2\" class=\"pentaho-selection-dialog-unselected\" style=\"width:260px;heightx:250px;text-align:center;padding-top:10px\">\n                                                <img dojoAttachPoint=\"templateImg2\" idx=\"2\" class=\"handpointer templatePickerImgEmbed\" />                                        \n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td dojoAttachPoint=\"templateName0\" idx=\"0\" class=\"fadeEmbed pentaho-selection-dialog-unselected\" style=\"height:25px;text-align:center;\"></td>\n                                            <td dojoAttachPoint=\"templateName1\" idx=\"1\" class=\"fadeEmbed pentaho-selection-dialog-unselected\" style=\"height:25px;text-align:center;\"></td>\n                                            <td dojoAttachPoint=\"templateName2\" idx=\"2\" class=\"fadeEmbed pentaho-selection-dialog-unselected\" style=\"height:25px;text-align:center;\"></td>\n                                        </tr>\n                                        <tr>\n                                            <td colspan=\"3\" style=\"height:25px;\">&nbsp;</td>\n                                        </tr>\n                                        <tr>\n                                            <td dojoAttachPoint=\"templateImgCell3\" class=\"pentaho-selection-dialog-unselected\" style=\"width:260px;heightx:250px;text-align:center;padding-top:10px\">\n                                                <img dojoAttachPoint=\"templateImg3\" idx=\"3\" class=\"handpointer templatePickerImgEmbed\" />                                        \n                                            </td>\n                                            <td dojoAttachPoint=\"templateImgCell4\" class=\"pentaho-selection-dialog-unselected\" style=\"width:260px;heightx:250px;text-align:center;padding-top:10px\">\n                                                <img dojoAttachPoint=\"templateImg4\" idx=\"4\" class=\"handpointer templatePickerImgEmbed\" />                                        \n                                            </td>\n                                            <td dojoAttachPoint=\"templateImgCell5\" class=\"pentaho-selection-dialog-unselected\" style=\"width:260px;heightx:250px;text-align:center;padding-top:10px\">\n                                                <img dojoAttachPoint=\"templateImg5\" idx=\"5\" class=\"handpointer templatePickerImgEmbed\" />                                        \n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td dojoAttachPoint=\"templateName3\" idx=\"3\" class=\"fadeEmbed pentaho-selection-dialog-unselected\" style=\"height:25px;text-align:center;\"></td>\n                                            <td dojoAttachPoint=\"templateName4\" idx=\"4\" class=\"fadeEmbed pentaho-selection-dialog-unselected\" style=\"height:25px;text-align:center;\"></td>\n                                            <td dojoAttachPoint=\"templateName5\" idx=\"5\" class=\"fadeEmbed pentaho-selection-dialog-unselected\" style=\"height:25px;text-align:center;\"></td>\n                                        </tr>\n                                        <tr>\n                                            <td colspan=\"3\" style=\"height:25px;\">&nbsp;</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </td>\n                        <td>\n                            <div dojoAttachPoint=\"nextSetBtn\" dojoType=\"pentaho.common.SmallImageButton\" baseClass=\"pentaho-right-lgbutton\">\n                            </div>                            \n                        </td>\n                    </tr>\n                </table>\n",postCreate:function(){this.inherited(arguments);this.prevSetBtn.callback=dojo.hitch(this,this.prevPage);this.nextSetBtn.callback=dojo.hitch(this,this.nextPage);for(var idx=0;idx<6;idx++){dojo.connect(this["templateImg"+idx],"onclick",this,"imgClick");dojo.connect(this["templateName"+idx],"onclick",this,"imgClick");dojo.connect(this["templateImg"+idx],"ondblclick",this,"imgDblClick");dojo.connect(this["templateName"+idx],"ondblclick",this,"imgDblClick");dojo.connect(this["templateImgCell"+idx],"onmouseover",this,"mouseOver");dojo.connect(this["templateImgCell"+idx],"onmouseout",this,"mouseOut");dojo.connect(this["templateName"+idx],"onmouseover",this,"mouseOver");dojo.connect(this["templateName"+idx],"onmouseout",this,"mouseOut");}},mouseOver:function(_db0){var idx=parseInt(dojo.attr(_db0.target,"idx"));if(this.templates[idx]&&this.templates[idx].selected){return;}var node=this["templateImgCell"+idx];if(node){dojo.addClass(node,"pentaho-selection-dialog-hover");}var node=this["templateName"+idx];if(node){dojo.addClass(node,"pentaho-selection-dialog-hover");}},mouseOut:function(_db1){var idx=parseInt(dojo.attr(_db1.target,"idx"));var node=this["templateImgCell"+idx];if(node){dojo.removeClass(node,"pentaho-selection-dialog-hover");}var node=this["templateName"+idx];if(node){dojo.removeClass(node,"pentaho-selection-dialog-hover");}},imgDblClick:function(_db2){var idx=parseInt(dojo.attr(_db2.target,"idx"));var _db3=this.pageNo*6+idx;if(this.templateDblClickCallback){this.templateDblClickCallback(_db3);}},imgClick:function(_db4){var idx=parseInt(dojo.attr(_db4.target,"idx"));var _db5=this.pageNo*6+idx;this.select(idx,_db5);if(this.templateSelectedCallback){this.templateSelectedCallback(_db5);}},prevPage:function(){if(this.pageNo==0){return;}this.pageNo--;this.showPage();},nextPage:function(){if((this.pageNo+1)*6>=this.templates.length){return;}this.pageNo++;this.showPage();},select:function(idx,_db6){for(var n=0;n<this.templates.length;n++){this.templates[n].selected=false;}this.templates[_db6].selected=true;var node=this["templateImgCell"+idx];dojo.removeClass(node,"pentaho-selection-dialog-hover");var node=this["templateName"+idx];dojo.removeClass(node,"pentaho-selection-dialog-hover");this.showPage();}});}if(!dojo._hasResource["pentaho.common.ToggleButton"]){dojo._hasResource["pentaho.common.ToggleButton"]=true;dojo.provide("pentaho.common.ToggleButton");dojo.declare("pentaho.common.ToggleButton",[dijit._Widget,dijit._Templated],{title:"",label:"button",width:"80px",templateString:dojo.cache("pentaho.common","ToggleButton.html","<div dojoAttachPoint=\"outerNode\" class=\"pentaho-toggle-button pentaho-toggle-button-up\" style=\"width:${width}\" role=\"button\" \n    title=\"${title}\" \n    dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\"\n    >\n    <div class=\"html-face\" dojoAttachPoint=\"innerNode\" \n        dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover\"\n    >${label}</div>\n</div>\n"),checked:false,hover:false,disabled:false,onChange:null,set:function(_db7,_db8){if(_db7=="label"){this.innerNode.innerHTML=_db8;}else{if(_db7=="checked"){this._setChecked(_db8);}else{if(_db7=="disabled"){this._setDisabled(_db8);}}}},_setChecked:function(_db9){this.checked=_db9;if(this.hover){this._onHover();}},_setDisabled:function(_dba){this.disabled=_dba;if(this.disabled){if(this.checked){this.outerNode.className="pentaho-toggle-button pentaho-toggle-button-down pentaho-toggle-button-down-disabled";}else{this.outerNode.className="pentaho-toggle-button pentaho-toggle-button-up pentaho-toggle-button-up-disabled";}}else{if(this.hover){this._onHover();}else{this._onUnhover();}}},_onHover:function(){this.hover=true;if(this.disabled){return;}if(this.checked){this.outerNode.className="pentaho-toggle-button pentaho-toggle-button-down pentaho-toggle-button-down-hovering";}else{this.outerNode.className="pentaho-toggle-button pentaho-toggle-button-up pentaho-toggle-button-up-hovering";}},_onUnhover:function(){this.hover=false;if(this.disabled){return;}if(this.checked){this.outerNode.className="pentaho-toggle-button pentaho-toggle-button-down";}else{this.outerNode.className="pentaho-toggle-button pentaho-toggle-button-up";}},_onClick:function(){if(this.disabled){return;}this._setChecked(!this.checked);if(this.onChange){this.onChange(this.checked);}}});}if(!dojo._hasResource["pentaho.common.GroupToggleButton"]){dojo._hasResource["pentaho.common.GroupToggleButton"]=true;dojo.provide("pentaho.common.GroupToggleButton");dojo.declare("pentaho.common.GroupToggleButton",pentaho.common.ToggleButton,{groupName:"group",first:false,last:false,orientation:"horizontal",postCreate:function(){this.inherited(arguments);this.init();},postMixInProperties:function(){this.inherited(arguments);this.unselectChannel="/ButtonGroup/"+this.groupName;dojo.subscribe(this.unselectChannel,this,"_unselect");},init:function(){this._applyGroupStyling();},_applyGroupStyling:function(){if(this.orientation!=null){dojo.addClass(this.outerNode,"pentaho-toggle-button-"+this.orientation);if(this.first){dojo.addClass(this.outerNode,"pentaho-toggle-button-"+this.orientation+"-first");}if(this.last){dojo.addClass(this.outerNode,"pentaho-toggle-button-"+this.orientation+"-last");}}},_setDisabled:function(_dbb){this.inherited(arguments);this._applyGroupStyling();},_onHover:function(){this.inherited(arguments);this._applyGroupStyling();},_onUnhover:function(){this.inherited(arguments);this._applyGroupStyling();},_onClick:function(){if(this.disabled){return;}if(!this.checked){this._setChecked(!this.checked);if(this.onChange){this.onChange(this.checked);}dojo.publish(this.unselectChannel,[this]);}},_unselect:function(_dbc){if(_dbc!==this&&this.checked){try{this.set("checked",false);this._onUnhover();}catch(err){}}},uninitialize:function(){this.inherited(arguments);dojo.unsubscribe(this.unselectChannel,this);}});}if(!dojo._hasResource["pentaho.common.propertiesPanel.Panel"]){dojo._hasResource["pentaho.common.propertiesPanel.Panel"]=true;dojo.provide("pentaho.common.propertiesPanel.Panel");dojo.declare("pentaho.common.propertiesPanel.Panel",[dijit.layout.ContentPane],{captionTemplate:"<div class='caption'><span class='caption-text'>${ui.caption:i18n}&nbsp;&nbsp;</span><img class='captionIcon'/></div>",seperatorTemplate:"<div class='propPanel-seperator'></div>",propUIs:[],groups:{},gutters:false,baseClass:"pentahoPropertiesPanel",minHeightDeviation:0,constructor:function(_dbd){this.configuration=_dbd;},postCreate:function(){dojo.forEach(this.configuration.items,dojo.hitch(this,"initializeItem"));this.inherited(arguments);},resize:function(){this.minHeightDeviation=0;this.inherited(arguments);},initializeItem:function(item){if(item.ui.hidden){return;}var _dbe=pentaho.common.propertiesPanel.Panel.registeredTypes[item.ui.type];if(!_dbe){throw "No Properties Panel UI implementation found for "+item.ui.type;}var _dbf;if(_dbe.create){_dbf=_dbe.create({model:item,propPanel:this});}else{_dbf=new _dbe({model:item,propPanel:this});}var _dc0=this.domNode;var _dc1=item.ui.group;if(_dc1){var _dc2=this.groups[_dc1];var _dc3=this.configuration.groups[item.ui.group];if(!_dc2&&_dc3){var _dc4=document.createElement("div");var _dc5=this;_dc2=new dijit.TitlePane({title:pentaho.common.Messages.getString(_dc3.title,_dc3.title),content:_dc4,region:"top",splitter:false});dojo.connect(_dc2,"resize",function(){var _dc6=dojo.coords(_dc5.domNode.children[_dc5.domNode.children.length-1]);var _dc7=0;var _dc8=0;var _dc9=0;var _dca=0;for(var g in _dc5.groups){_dc7++;var gp=_dc5.groups[g];var _dcb=dojo.coords(gp.titleBarNode).h;_dc8+=(gp.open)?_dcb+gp.hideNode.scrollHeight:0;if(gp.open){_dca+=(gp.usingMinHeight)?gp.heightAdjustment:0;}else{_dca+=_dcb;}}dojo.forEach(_dc5.domNode.children,function(node){if(!node.className.match(/dijitTitlePane/)){_dc9+=dojo.coords(node).h;}});var _dcc=dojo.coords(_dc5.domNode).h;var _dcd=dojo.coords(_dc5.domNode).h-_dc9-_dca;var _dce=dojo.coords(_dc2.titleBarNode);var _dcb=_dce.h;var _dcf=_dce.w;if(_dc2.open){var _dd0=_dcb+_dc2.hideNode.scrollHeight;var _dd1=(_dd0/_dc8)*_dcd;if(_dd1>_dd0){_dc2.hideNode.style.overflow="hidden";_dc2.wipeNode.style.width=_dcf+"px";}else{_dc2.hideNode.style.overflow="auto";_dc2.wipeNode.style.width="";}var _dd2=2.2;if(_dd1<_dcb*_dd2){_dc2.usingMinHeight=true;_dc2.heightAdjustment=_dcb*_dd2-_dd1;_dd1=_dcb*_dd2;}else{_dc2.usingMinHeight=false;}if(!isNaN(_dd1)){_dc2.domNode.style.height=_dd1+"px";}if(dojo.coords(_dc2.domNode).h>0){_dc2.hideNode.style.height=Math.min((dojo.coords(_dc2.domNode).h-_dcb),_dc2.hideNode.scrollHeight)+"px";}}else{if(!isNaN(_dcb)){_dc2.domNode.style.height=_dcb+"px";}_dc2.usingMinHeight=false;}_dc2.domNode.style.width="";});dojo.connect(_dc2._wipeOut,"onEnd",function(){_dc5.resize();});dojo.connect(_dc2._wipeIn,"onEnd",function(){_dc5.resize();});this.groups[_dc1]=_dc2;this.domNode.appendChild(_dc2.domNode);}_dc0=_dc2.content;}if(item.ui.seperator){_dc0.appendChild(dojo._toDom(this.seperatorTemplate));}if(item.ui.caption){var cap=dojo._toDom(dojo.string.substitute(this.captionTemplate,item,null,{i18n:function(_dd3,key){return pentaho.common.Messages.getString(_dd3,_dd3);}}));var img=dojo.query("img",cap);img=img[img.length-1];if(item.ui.captionIcon){img.src=item.ui.captionIcon;}else{img.style.display="none";}_dc0.appendChild(cap);}this.setupEventHandling(_dbf);this.propUIs.push(_dbf);this.connect(_dbf,"onUIEvent","onUIEvent");dojo.addClass(_dbf.domNode,"propPanelItem");_dc0.appendChild(_dbf.domNode);this.resize();},onUIEvent:function(type,args){},setupEventHandling:function(ui){this.connect(ui,"onContextMenu",function(e){this.onUIEvent("onContextMenu",{item:ui,args:[ui,e]});});this.connect(ui,"onClick",function(e){this.onUIEvent("onClick",{item:ui,args:[ui,e]});});this.connect(ui,"onDblClick",function(e){this.onUIEvent("onDblClick",{item:ui,args:[ui,e]});});},setConfiguration:function(_dd4){this._setConfiguration(new pentaho.common.propertiesPanel.Configuration(_dd4));},_setConfiguration:function(_dd5){this.propUIs.forEach(function(_dd6){_dd6.destroyRecursive();});this.propUIs=[];this.groups={};this.domNode.innerHTML="";this.configuration=_dd5;this.postCreate();},reload:function(){this._setConfiguration(this.configuration);},set:function(_dd7,id,_dd8){dojo.forEach(this.propUIs,function(prop){if(prop.model.id==id){prop.model.set(_dd7,_dd8);}});}});pentaho.common.propertiesPanel.Panel.registeredTypes={};dojo.declare("pentaho.common.propertiesPanel.StatefulUI",[],{constructor:function(_dd9){this.model=_dd9.model;this.propPanel=_dd9.propPanel;var _dda=this;this.model.watch(function(_ddb,_ddc,_ddd){switch(_ddb){case "value":case "default":_dda.set(_ddb,_ddd);break;}});},onUIEvent:function(type,args){}});dojo.declare("pentaho.common.propertiesPanel.GemBarUISource",[dojo.dnd.Source],{constructor:function(node){this.dropIndicator=document.createElement("div");this.dropIndicator.className="indicator";this.dropIndicator.id="propertyPanelIndicator";var line=document.createElement("div");line.className="indicatorLine";this.dropIndicator.appendChild(line);this.dropIndicator.style.display="none";dojo.connect(this.dropIndicator,"onmouseover",this,"_redirectMouseOver");dojo.connect(this.dropIndicator,"onmouseup",this,"_redirectMouseUp");this.node.parentNode.appendChild(this.dropIndicator);},_redirectMouseOver:function(e){var idx=this._getNodeUnderMouse(e);this.lastItemOver=idx;if(idx>-1){if(document.createEvent){var evt=document.createEvent("MouseEvent");evt.initMouseEvent("mouseover",true,true,window,0,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);this.node.dispatchEvent(evt);this.node.children[idx].dispatchEvent(evt);evt=document.createEvent("MouseEvent");evt.initMouseEvent("mousemove",true,true,window,0,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);this.node.dispatchEvent(evt);this.node.children[idx].dispatchEvent(evt);}else{if(document.createEventObject){var evt=document.createEventObject(window.event);evt.button=1;this.node.children[idx].fireEvent("onmouseover",evt);this.node.children[idx].fireEvent("onmousemove",evt);}}}},_redirectMouseUp:function(e){var idx=this._getNodeUnderMouse(e);if(idx>-1){if(document.createEvent){var evt=document.createEvent("MouseEvent");evt.initMouseEvent("mouseup",true,true,window,0,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);this.node.children[idx].dispatchEvent(evt);}else{if(document.createEventObject){var evt=document.createEventObject(window.event);this.node.children[idx].fireEvent("onmouseup",evt);}}}},onDrop:function(_dde,_ddf,copy,_de0){this.dropAtEnd=_de0;this.dropZone2Zone=false;if(!_ddf||_ddf.length==0){return false;}var _de1=_ddf[0];var _de2=dijit.byId(_de1.id);if(!_de2){dijit.byId("gem-"+_de1.id);}if((!_de2||(_de2&&_de2.gemBar!=this.gemBar))&&!this.gemBar.checkAcceptance(this,_ddf,true)){return;}var gem;if(_de2){gem=_de2.model;if(_de2.gemBar==this.gemBar){}else{this.dropZone2Zone=true;_de2.gemBar.remove(_de2,true);_de2.model.previousGemBar=_de2.gemBar.model;_de2.gemBar=this.gemBar;}}else{var gem=this.createGemFromNode(_de1);_de2=this.createGemUI(gem,_de1);_ddf[0]=_de2.domNode;}this.gemUIbeingInserted=_de2;var _de3=_ddf[0].id;_ddf[0].id=_de1.id;this.inherited(arguments);_ddf[0].id=_de3;this.sync();_dde.sync();return true;},createGemFromNode:function(_de4){var _de5=pentaho.common.propertiesPanel.Configuration.registeredTypes["gem"];var _de6={id:"gem-"+_de4.id,value:_de4.innerHTML,gemBar:this.gemBar.model,sourceNode:_de4};if(_de5.create){return _de5.create(_de6);}else{return new _de5(_de6);}},createGemUI:function(gem,_de7){var _de8=pentaho.common.propertiesPanel.Panel.registeredTypes["gem"];var _de9={id:gem.id,model:gem,gemBar:this.gemBar,dndType:_de7.getAttribute("dndType"),sourceNode:_de7};if(_de8.create){return _de8.create(_de9);}else{return new _de8(_de9);}},onMouseMove:function(e){this.showIndicatorIfReorder(e);this.inherited(arguments);},onMouseOver:function(e){this.showIndicatorIfReorder(e);this.inherited(arguments);},showIndicatorIfReorder:function(e){if(dojo.dnd.manager().source&&this.checkAcceptance(this,dojo.dnd.manager().nodes)){var _dea=this.dropIndicator;var _deb=function(){_dea.style.display="none";dojo.unsubscribe(_dec);};var _dec=dojo.subscribe("/dnd/cancel",_deb);var _ded=dojo.subscribe("/dnd/drop",_deb);var _dee=this._getNodeUnderMouse(e);var _def=this.gravity(this.node.children[_dee],e)&1;if(this.node.children[_dee]==dojo.dnd.manager().nodes[0]&&(_def&&_dee==0||!_def&&this.node.children.length-1==_dee)){this.dropIndicator.style.display="none";return;}this.placeIndicator(e,_dee,_def);}},onMouseOut:function(e){if(e.target==this.dropIndicator){return;}this.dropIndicator.style.display="none";this.inherited(arguments);},onDraggingOut:function(e){this.dropIndicator.style.display="none";this.inherited(arguments);},placeIndicator:function(e,_df0,_df1){var _df2=-5,_df3=3;var _df4=dojo.coords(this.node,true);with(this.dropIndicator.style){if(_df0<0){if(this.node.children.length){var _df5=dojo.coords(this.node.children[this.node.children.length-1],true);left=_df5.x-7-(_df4.x-5)+"px";var _df5=dojo.coords(this.node.children[0]);var _df6=dojo.coords(this.node.children[this.node.children.length-1]);top=(_df1?_df5.y-_df2:_df6.y+_df6.h+_df2)-(_df4.y-5)+"px";width=_df5.w+"px";}else{var pos=dojo.coords(this.node,true);left=pos.x-7-(_df4.x-5)+"px";top=(pos.y+pos.h)-(_df4.y-5)+"px";width=pos.w+"px";}}else{var _df7=dojo.coords(this.node.children[_df0],true);left=_df7.x-7-(_df4.x-5)+"px";top=(_df1)?(_df7.y+_df2)-(_df4.y-5)+"px":_df7.y+_df7.h+_df2-(_df4.y-5)+"px";width=_df7.w+"px";}}this.dropIndicator.style.display="";},_getNodeUnderMouse:function(e){var _df8=this.node.children;for(var i=0,_df9;_df8&&i<_df8.length;++i){if(_df8[i]==this.dropIndicator){continue;}var _dfa=dojo.coords(_df8[i],true);if(e.clientX>=_dfa.x&&e.clientX<=_dfa.x+_dfa.w&&e.clientY>=_dfa.y&&e.clientY<=_dfa.y+_dfa.h){return i;}}return -1;},gravity:function(node,e){node=dojo.byId(node);var _dfb={y:e.clientY,x:e.clientX};with(dojo.html){var bb=dojo.coords(node);var _dfc=bb.x+(bb.w/2);var _dfd=bb.y+(bb.h/2);}with(cv.util.gravity){return ((_dfb.x<_dfc?WEST:EAST)|(_dfb.y<_dfd?NORTH:SOUTH));}},insertNodes:function(_dfe,data,_dff,_e00){if(typeof this.dropAtEnd!="undefined"){_dff=!this.dropAtEnd;}var pos=0;if(_e00==null){pos=this.gemBar.gems.length;_dff=false;}else{if(_e00!=null){for(var i=0;i<this.node.children.length;i++){if(this.node.children[i]==_e00){pos=i;}}pos=(_dff)?pos:pos+1;}}this.gemBar.insertAt(this.gemUIbeingInserted,pos,this.dropZone2Zone);this.inherited(arguments);this.gemBar.propPanel.resize();},checkAcceptance:function(_e01,_e02,_e03){var ok=this.gemBar.checkAcceptance(_e01,_e02,_e03);return ok;}});dojo.declare("pentaho.common.propertiesPanel.PlaceholderSource",[dojo.dnd.Target],{constructor:function(node,opts){this.dropZone=opts.dropZone;},onDrop:function(_e04,_e05,copy){return this.dropZone.onDrop(_e04,_e05,copy,true);},checkAcceptance:function(_e06,_e07,_e08){var ok=this.dropZone.checkAcceptance(_e06,_e07,_e08);return ok;}});dojo.declare("pentaho.common.propertiesPanel.GemBarUI",[dijit._Widget,dijit._Templated,pentaho.common.propertiesPanel.StatefulUI],{className:"propPanel_gemBar",gemLimit:-1,widgetsInTemplate:true,templateString:"<div class='${className}' data-dojo-type='dijit.layout.BorderContainer' data-dojo-props='gutters:false'><div data-dojo-props='region:center'></div><div class='gemPlaceholder'><span>${placeholderText}</span></div></div>",gems:[],handles:[],subscriptions:[],accept:["gem"],showPlaceholder:true,placeholderText:"Drop Level Here",constructor:function(_e09){this.id=this.model.id+"_ui";this.showPlaceholder=this.model.ui.showPlaceholder;if(this.model.ui.placeholderText){this.placeholderText=this.model.ui.placeholderText;}},postCreate:function(){dojo.addClass(this.domNode,this.model.dataType);this.gems=[];this.placeholder=dojo.query(".gemPlaceholder",this.domNode)[0];this.placeholder.style.display=(this.showPlaceholder&&(this.model.allowMultiple||this.model.gems.length==0))?"":"none";if(this.model.required&&this.model.gems.length==0){dojo.addClass(this.placeholder,"reqiured");}this.dropZoneNode=this.domNode.firstChild;this.dropZone=new pentaho.common.propertiesPanel.GemBarUISource(this.dropZoneNode,{accept:this.model.ui.dndType,gemBar:this});if(this.showPlaceholder&&(this.model.allowMultiple||this.model.gems.length<2)){new pentaho.common.propertiesPanel.PlaceholderSource(this.placeholder,{accept:this.model.ui.dndType,dropZone:this.dropZone});}var _e0a=this;this.subscriptions.push(dojo.subscribe("/dnd/start",function(){if(!_e0a.checkAcceptance(_e0a.dropZone,dojo.dnd.manager().nodes)){dojo.addClass(_e0a.domNode,"dimished");}}));var _e0b=function(){if(_e0a.domNode){dojo.removeClass(_e0a.domNode,"dimished");}};this.subscriptions.push(dojo.subscribe("/dnd/cancel",_e0b));this.subscriptions.push(dojo.subscribe("/dnd/drop",_e0b));dojo.connect(this.domNode,"onmouseover",function(_e0c){if(dojo.dnd.manager().source&&_e0a.checkAcceptance(_e0a.dropZone,dojo.dnd.manager().nodes)){dojo.addClass(_e0a.domNode,"over");}});dojo.connect(this.domNode,"onmouseout",function(_e0d){dojo.removeClass(_e0a.domNode,"over");});dojo.connect(this.domNode,"onmouseup",function(_e0e){dojo.removeClass(_e0a.domNode,"over");});this.handles.push[dojo.connect(this.dropZone,"createDropIndicator",this,"createDropIndicator")];this.handles.push[dojo.connect(this.dropZone,"placeDropIndicator",this,"placeDropIndicator")];this.handles.push[dojo.connect(this.dropZone,"onMouseOver",this,"onMouseOver")];this.handles.push[dojo.connect(this.dropZone,"onMouseOut",this,"onMouseOut")];this.handles.push[dojo.connect(this.dropZone,"onDraggingOver",this,"onDraggingOver")];this.handles.push[dojo.connect(this.dropZone,"onDraggingOver",this,"onDraggingOut")];this.handles.push[dojo.connect(this.dropZone,"insertNodes",this,"insertNodes")];dojo.forEach(this.model.gems,function(gem){var _e0f=pentaho.common.propertiesPanel.Panel.registeredTypes["gem"];var _e10={sourceNode:gem.sourceNode,id:gem.id,model:gem,gemBar:this,dndType:gem.dndType};var _e11;if(_e0f.create){_e11=_e0f.create(_e10);}else{_e11=new _e0f(_e10);}this.domNode.firstChild.appendChild(_e11.domNode);this.add(_e11);},this);this.dropZone.sync();this.inherited(arguments);},insertNodes:function(_e12,data,_e13,_e14){this.onUIEvent("insertNodes",{item:this,args:arguments});},add:function(_e15){_e15.model.gemBar=this.model;this.gems.push(_e15);_e15.gemBar=this;this.propPanel.setupEventHandling(_e15);if(this.model.required){dojo.removeClass(this.placeholder,"reqiured");}},insertAt:function(gem,pos,move){var _e16=dojo.indexOf(this.gems,gem);this.gems.splice(pos,0,gem);if(_e16>-1){if(_e16>=pos){_e16++;}this.gems.splice(_e16,1);}this.model.insertAt(gem.model,pos,_e16,move);if(this.model.allowMultiple==false){this.placeholder.style.display="none";}if(this.model.required){dojo.removeClass(this.placeholder,"reqiured");}},remove:function(_e17,_e18){this.dropZoneNode.removeChild(_e17.domNode);var _e19=dojo.indexOf(this.gems,_e17);this.gems.splice(_e19,1);this.model.remove(_e17.model,_e18);if(this.model.allowMultiple==true||this.model.gems.length==0){this.placeholder.style.display="";}this.propPanel.resize();},onContextMenu:function(_e1a,gem){},createDropIndicator:function(){},placeDropIndicator:function(e){},onMouseOver:function(){},onMouseOut:function(){},onDraggingOver:function(){return this.inherited(arguments);},onDraggingOut:function(){},checkAcceptance:function(_e1b,_e1c){var ok=this.model.allowMultiple||(this.model.allowMultiple==false&&this.model.gems.length==0);return ok;},createGems:function(gem){var _e1d=createGemUI(gem);this.domNode.appendChild(_e1d.domNode);this.propPanel.setupEventHandling(_e1d);},validateGem:function(gem){return true;},createGemFromNode:function(_e1e){return new pentaho.common.propertiesPanel.Configuration.registeredTypes["gem"]({id:_e1e.innerHTML});},createGemUI:function(gem){return new pentaho.common.propertiesPanel.GemUI(gem,this.className);},destroyRecursive:function(){this.inherited(arguments);dojo.forEach(this.gems,function(gem){gem.destroy();});this.destroy();dojo.forEach(this.handles,dojo.disconnect);},destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);this.inherited(arguments);}});pentaho.common.propertiesPanel.Panel.registeredTypes["gemBar"]=pentaho.common.propertiesPanel.GemBarUI;dojo.declare("pentaho.common.propertiesPanel.GemUI",[dijit._Widget,dijit._Templated,pentaho.common.propertiesPanel.StatefulUI],{className:"gem",templateString:"<div id='${id}' class='${className} dojoDndItem' dndType='${dndType}'><div class='gem-label'>${model.value}</div><div class='gemMenuHandle'></div></div>",constructor:function(_e1f){this.gemBar=_e1f.gemBar;this.dndType=_e1f.dndType;this.id=_e1f.id;},detach:function(){model.detach();},postCreate:function(){dojo.connect(this.domNode,"oncontextmenu",this,"onContextMenu");var _e20=this;this.menuHandle=dojo.query("div.gemMenuHandle",this.domNode)[0];dojo.connect(dojo.query("div.gemMenuHandle",this.domNode)[0],"onmouseover",function(e){if(!dojo.dnd.manager().source){dojo.addClass(e.target,"over");}});dojo.connect(dojo.query("div.gemMenuHandle",this.domNode)[0],"onmouseout",function(e){if(!dojo.dnd.manager().source){dojo.removeClass(e.target,"over");}});dojo.connect(this.menuHandle,"onclick",this,"onContextMenu");dojo.connect(this.domNode,"onmouseover",this,"onMouseOver");dojo.connect(this.domNode,"onmouseout",this,"onMouseOut");this.inherited(arguments);},onMouseOver:function(){if(!dojo.dnd.manager().source){dojo.addClass(this.domNode,"over");}},onMouseOut:function(){dojo.removeClass(this.domNode,"over");},onContextMenu:function(e){console.log("inner onContextMenu");}});pentaho.common.propertiesPanel.Panel.registeredTypes["gem"]=pentaho.common.propertiesPanel.GemUI;dojo.declare("pentaho.common.propertiesPanel.ComboUI",[dijit._Widget,dijit._Templated,pentaho.common.propertiesPanel.StatefulUI],{className:"propPanel_combobox propPanel_control",options:[],widgetsInTemplate:false,templateString:"<div class='${className}' id='${model.id}_wrapper'></div>",handles:[],constructor:function(_e21){this.name=_e21.id;this.options=[];dojo.forEach(this.model.values,function(val,idx){var opt={label:val,value:val};if(this.model.ui.labels){var lbl=this.model.ui.labels[idx];opt.label=pentaho.common.Messages.getString(lbl,lbl);}this.options.push(opt);},this);if(this.model.value==null){this.model.set("value",this.model.values[0]);}this.value=this.model.value;},postCreate:function(){var me=this;var opts=this.options;dojo.forEach(opts,function(val,idx){if(typeof (me.value)=="undefined"){opts["selected"]=true;}else{if(me.value==val.value){val["selected"]=true;}}},this);if(this.isMobile()){var _e22=this.id+"_select";var _e23=dojo.create("select",{id:_e22});dojo.forEach(opts,function(val,idx){if(typeof (val.selected)!="undefined"&&val.selected==true){var _e24={label:val.label,value:val.value,selected:true};}else{var _e24={label:val.label,value:val.value};}dojo.create("option",_e24,_e23);},this);this.domNode.appendChild(_e23);this.handles.push(dojo.connect(_e23,"onchange",function(){me.model.set("value",this.value);me.value=this.value;}));}else{dojo.addClass(this.domNode,this.className);var sel=new dijit.form.Select({options:opts,onChange:function(){me.model.set("value",this.value);me.value=this.value;}});sel.placeAt(this.domNode);}this.inherited(arguments);},isMobile:function(){return (this.isMobileSafari()||window.orientation!==undefined);},isMobileSafari:function(){return navigator.userAgent.match(/(iPad|iPod|iPhone)/)!=null;},destroy:function(){dojo.forEach(this.handles,dojo.disconnect);this.inherited(arguments);}});pentaho.common.propertiesPanel.Panel.registeredTypes["combo"]=pentaho.common.propertiesPanel.ComboUI;dojo.declare("pentaho.common.propertiesPanel.SliderUI",[dijit.form.HorizontalSlider,pentaho.common.propertiesPanel.StatefulUI],{className:"propPanel_slider propPanel_control",minimum:0,maximum:100,style:"width: 100%",intermediateChanges:true,discreteValues:true,constructor:function(_e25){this.inherited(arguments);this.value=this.model.value;if(this.model.minimum){this.minimum=this.model.minimum;}if(this.model.maximum){this.maximum=this.model.maximum;}this.discreteValues=this.maximum-this.minimum+1;this.id=this.model.id+"_slider";},onChange:function(){this.model.set("value",this.value);}});pentaho.common.propertiesPanel.Panel.registeredTypes["slider"]=pentaho.common.propertiesPanel.SliderUI;dojo.declare("pentaho.common.propertiesPanel.TextboxUI",[dijit.form.TextBox,pentaho.common.propertiesPanel.StatefulUI],{className:"propPanel_control",constructor:function(_e26){this.disabled=this.model.disabled;this.inherited(arguments);},onChange:function(){this.model.set("value",this.value);}});pentaho.common.propertiesPanel.Panel.registeredTypes["textbox"]=pentaho.common.propertiesPanel.TextboxUI;dojo.declare("pentaho.common.propertiesPanel.CheckBoxUI",[dijit._Widget,dijit._Templated,pentaho.common.propertiesPanel.StatefulUI],{className:"propPanel_checkbox propPanel_control",widgetsInTemplate:true,value:false,templateString:"<div class='${className}'><input id='${model.id}_checkbox' name='${model.id}_checkbox' dojoType='dijit.form.CheckBox' /> <label for='${model.id}_checkbox'>${label}</label></div>",handles:[],constructor:function(_e27){if(this.model.value){this.value=this.model.value;}else{this.model.set("value",this.value);}this.label=pentaho.common.Messages.getString(this.model.ui.label,this.model.ui.label);},postCreate:function(){this.checkbox=dijit.byId(this.model.id+"_checkbox");var _e28=this;if(typeof (this.value)!="boolean"){this.value=false;}this.checkbox.attr("checked",this.value);this.handles.push(dojo.connect(this.checkbox,"onChange",function(){if(_e28.model.value!=_e28.checkbox.checked){_e28.model.set("value",_e28.checkbox.checked);}}));},set:function(prop,_e29){if(this.checkbox){if(prop=="value"&&_e29!=this.checkbox.checked){this.checkbox.set(prop,_e29);}}},onChange:function(){},destroy:function(){dojo.forEach(this.handles,dojo.disconnect);this.inherited(arguments);}});pentaho.common.propertiesPanel.Panel.registeredTypes["checkbox"]=pentaho.common.propertiesPanel.CheckBoxUI;dojo.declare("pentaho.common.propertiesPanel.ButtonUI",[dijit._Widget,dijit._Templated,pentaho.common.propertiesPanel.StatefulUI],{widgetsInTemplate:true,templateString:"<div class='button-wrapper'><button id='${model.id}_button' name='${model.id}_button'  data-dojo-type='dijit.form.Button' type='button' >${label}</button></div>",constructor:function(_e2a){this.disabled=this.model.disabled;this.label=pentaho.common.Messages.getString(this.model.ui.label,this.model.ui.label);this.inherited(arguments);},postCreate:function(){this.button=dijit.byId(this.model.id+"_button");this.connect(this.button,"onClick","onClick");},onClick:function(){this.model.set("clicked",true);}});pentaho.common.propertiesPanel.Panel.registeredTypes["button"]=pentaho.common.propertiesPanel.ButtonUI;}if(!dojo._hasResource["pentaho.common.propertiesPanel.Configuration"]){dojo._hasResource["pentaho.common.propertiesPanel.Configuration"]=true;dojo.provide("pentaho.common.propertiesPanel.Configuration");dojo.declare("pentaho.common.propertiesPanel.Configuration",dojo.Stateful,{constructor:function(_e2b){this.items=[];this.rawConfiguration=_e2b;if(_e2b&&_e2b.properties){dojo.forEach(_e2b.properties,this.initializeItem,this);}},initializeItem:function(item){var _e2c=pentaho.common.propertiesPanel.Configuration.registeredTypes[item.ui.type];if(!_e2c){throw "No Properties Panel UI implementation found for "+item.ui.type;}var _e2d=new _e2c(item);_e2d.postCreate();var _e2e=this;dojo.connect(_e2d,"onModelEvent",function(_e2f,args){_e2e.onModelEvent(_e2d,_e2f,args);});_e2d.watch(function(_e30,old,now){_e2e.onModelEvent(_e2d,_e30,{prevVal:old,newVal:now});});this.items.push(_e2d);},onModelEvent:function(item,_e31,args){},byId:function(id){for(var i=0;i<this.items.length;i++){if(this.items[i].id==id){return this.items[i];}}}});pentaho.common.propertiesPanel.Configuration.registeredTypes={};dojo.declare("pentaho.common.propertiesPanel.Property",[dojo.Stateful],{constructor:function(item){this.item=item;dojo.mixin(this,item);},postCreate:function(){},value:null,setValue:function(_e32){this.value=_e32;},onModelEvent:function(prop,args){}});dojo.declare("pentaho.common.propertiesPanel.GemBar",[pentaho.common.propertiesPanel.Property],{gems:[],allowMultiple:true,constructor:function(item){},initializeGem:function(_e33){var gem=new pentaho.common.propertiesPanel.Configuration.registeredTypes["gem"](_e33);gem.postCreate();this.gems.push(gem);},postCreate:function(){var _e34=this.gems;this.gems=[];dojo.forEach(_e34,this.initializeGem,this);},remove:function(gem){this.gems.splice(this.gems.indexOf(gem),1);this.set("gems",this.gems);this.onModelEvent("removedGem",{gem:gem});},add:function(gem){this.gems.push(gem);this.set("gems",this.gems);this.onModelEvent("insertAt",{gem:gem,idx:this.gems.length,oldIdx:-1});},reorder:function(){this.set("gems",this.gems);this.onModelEvent("reorderedGems",{});},insertAt:function(gem,_e35,_e36){var _e37=dojo.indexOf(this.gems,gem);this.gems.splice(_e35,0,gem);var _e36=_e37;if(_e37>-1){if(_e37>=_e35){_e37++;}this.gems.splice(_e37,1);}if(_e37>-1&&_e37<_e35){_e35--;}this.onModelEvent("insertAt",{gem:gem,idx:_e35,oldIdx:_e36});},gems:[],selectedGem:null});pentaho.common.propertiesPanel.Configuration.registeredTypes["gemBar"]=pentaho.common.propertiesPanel.GemBar;pentaho.common.propertiesPanel.Configuration.registeredTypes["gem"]=pentaho.common.propertiesPanel.Property;pentaho.common.propertiesPanel.Configuration.registeredTypes["combo"]=pentaho.common.propertiesPanel.Property;pentaho.common.propertiesPanel.Configuration.registeredTypes["slider"]=pentaho.common.propertiesPanel.Property;pentaho.common.propertiesPanel.Configuration.registeredTypes["textbox"]=pentaho.common.propertiesPanel.Property;pentaho.common.propertiesPanel.Configuration.registeredTypes["checkbox"]=pentaho.common.propertiesPanel.Property;pentaho.common.propertiesPanel.Configuration.registeredTypes["button"]=pentaho.common.propertiesPanel.Property;}if(!dojo._hasResource["pentaho.common.DisableablePanel"]){dojo._hasResource["pentaho.common.DisableablePanel"]=true;dojo.provide("pentaho.common.DisableablePanel");dojo.declare("pentaho.common.DisableablePanel",[dijit.layout.ContentPane,dijit.layout._LayoutWidget,dijit._Templated],{templateString:"<div class=\"pentaho-disable-panel pentaho-rounded-panel2\" style=\"width: ${width}\">\n  <div dojoAttachPoint=\"disabledPane\" class=\"disabledpane\"></div>\n  <div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\">\n  </div>\n</div>\n",widgetsInTemplate:true,width:"150px",disabled:false,postCreate:function(){this.inherited(arguments);if(this.disabled){this.disable();}},disable:function(){dojo.style(this.disabledPane,{display:"block",height:"100%",width:"100%"});dojo.query("input",this.containerNode).forEach(function(_e38){_e38.disabled=true;});this.disabled=true;},enable:function(){dojo.style(this.disabledPane,{display:"none"});dojo.query("input",this.containerNode).forEach(function(_e39){_e39.disabled=false;});this.disabled=false;}});}if(!dojo._hasResource["pentaho.common.FieldsetPane"]){dojo._hasResource["pentaho.common.FieldsetPane"]=true;dojo.provide("pentaho.common.FieldsetPane");dojo.declare("pentaho.common.FieldsetPane",[pentaho.common.DisableablePanel],{templateString:"<div class=\"pentaho-fieldset-pane\" style=\"width: ${width}\">\n  <div dojoAttachPoint=\"disabledPane\" class=\"disabledpane\"></div>\n  <div class=\"pentaho-fieldset-pane-header\">\n    <span dojoAttachPoint=\"titleNode\" class=\"pentaho-fieldset-pane-title\">${title}</span>\n  </div>\n  <div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\">\n  </div>\n</div>\n",widgetsInTemplate:true,title:"title",width:"100%",getLocalString:pentaho.common.Messages.getString,postCreate:function(){this.inherited(arguments);this._localize();},_localize:function(){var _e3a=this.getLocalString(this.title);if(_e3a!=this.title){this.setTitle(_e3a);}},setTitle:function(_e3b){this.title=_e3b;this.titleNode.innerHTML=_e3b;},layout:function(){var box=this._borderBox;var _e3c=this.containerNode;var _e3d=this.titleNode;var _e3e=20;dojo.style(_e3c,{height:(box.h-_e3d.offsetHeight-_e3e)+"px"});}});}dojo.i18n._preloadLocalizations("dojo.nls.dojo-ext",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
