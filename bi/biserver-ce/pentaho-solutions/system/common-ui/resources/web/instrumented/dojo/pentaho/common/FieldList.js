/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['dojo/pentaho/common/FieldList.js']) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'] = [];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][1] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][6] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][22] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][23] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][26] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][31] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][32] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][33] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][34] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][36] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][37] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][41] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][42] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][43] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][44] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][46] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][55] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][56] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][58] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][59] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][60] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][61] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][95] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][96] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][98] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][99] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][101] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][103] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][107] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][108] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][112] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][116] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][120] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][124] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][128] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][141] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][142] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][143] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][144] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][155] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][156] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][157] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][158] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][163] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][164] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][166] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][167] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][169] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][170] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][172] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][173] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][177] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][179] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][188] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][189] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][197] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][198] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][201] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][202] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][204] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][205] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][206] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][207] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][210] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][212] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][214] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][215] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][216] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][218] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][219] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][221] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][223] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][224] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][226] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][232] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][238] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][241] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][248] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][249] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][252] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][257] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][263] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][264] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][265] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][273] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][274] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][275] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][278] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][279] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][282] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][283] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][284] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][285] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][286] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][287] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][293] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][294] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][298] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][299] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][303] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][309] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][310] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][312] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][314] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][315] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][316] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][318] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][319] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][320] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][322] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][323] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][324] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][325] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][328] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][329] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][330] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][333] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][334] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][336] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][337] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][339] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][340] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][343] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][347] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][348] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][350] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][351] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][356] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][357] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][359] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][360] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][361] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][366] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][367] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][369] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][370] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][371] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][373] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][374] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][379] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][380] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][381] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][382] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][384] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][389] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][390] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][391] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][392] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][395] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][399] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][400] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][401] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][402] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][404] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][406] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][407] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][408] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][409] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][410] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][411] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][412] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][413] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][416] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][417] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][418] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][421] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][422] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][425] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][429] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][433] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][434] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][435] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][436] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][437] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][438] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][439] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][441] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][442] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][444] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][446] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][447] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][448] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][450] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][453] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][454] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][460] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][462] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][463] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][466] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][467] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][468] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][469] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][478] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][479] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][480] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][481] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][485] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][486] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][487] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][488] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][490] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][491] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][494] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][495] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][497] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][498] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][499] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][503] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][504] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][505] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][506] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][508] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][510] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][511] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][512] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][513] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][515] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][520] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][521] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][523] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][524] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][529] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][533] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][537] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][541] = 0;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][545] = 0;
}
_$jscoverage['dojo/pentaho/common/FieldList.js'].source = ["dojo<span class=\"k\">.</span>provide<span class=\"k\">(</span><span class=\"s\">\"pentaho.common.FieldList\"</span><span class=\"k\">);</span>","","<span class=\"c\">/**</span>","<span class=\"c\"> * Creates a list of fields from a </span>","<span class=\"c\"> */</span>","dojo<span class=\"k\">.</span>declare<span class=\"k\">(</span>","    <span class=\"s\">\"pentaho.common.FieldList\"</span><span class=\"k\">,</span>","    <span class=\"k\">[</span>dijit<span class=\"k\">.</span>_Widget<span class=\"k\">,</span> dijit<span class=\"k\">.</span>_Templated<span class=\"k\">],</span>","<span class=\"k\">{</span>","  templateString<span class=\"k\">:</span> <span class=\"s\">'&lt;div dojoAttachPoint=\"containerNode\"&gt;&lt;/div&gt;'</span><span class=\"k\">,</span>","  datasource<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","  connectHandles<span class=\"k\">:</span> <span class=\"k\">[],</span>","  enableDragDrop<span class=\"k\">:</span> <span class=\"k\">true</span><span class=\"k\">,</span>","  singleSelect<span class=\"k\">:</span> <span class=\"k\">false</span><span class=\"k\">,</span>","  getLocaleString<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","  filters<span class=\"k\">:</span> <span class=\"k\">[],</span>","  categorize<span class=\"k\">:</span> <span class=\"k\">true</span><span class=\"k\">,</span>","  categoryClassMap<span class=\"k\">:</span> <span class=\"k\">{}</span><span class=\"k\">,</span>","  usedCategoryIds<span class=\"k\">:</span> <span class=\"k\">{}</span><span class=\"k\">,</span>","  ","  sanitizeIdAndClassNames<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>name<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span><span class=\"k\">(</span>name <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span><span class=\"k\">{</span>","      <span class=\"k\">return</span> dojox<span class=\"k\">.</span>html<span class=\"k\">.</span>entities<span class=\"k\">.</span>encode<span class=\"k\">(</span>name<span class=\"k\">).</span>replace<span class=\"k\">(</span><span class=\"s\">/ /g</span><span class=\"k\">,</span><span class=\"s\">\"_\"</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">else</span><span class=\"k\">{</span>","      <span class=\"k\">return</span> <span class=\"s\">''</span><span class=\"k\">;</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  generateUniqueClassName<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>categoryId<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> gen <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span><span class=\"k\">{</span> <span class=\"k\">return</span> Math<span class=\"k\">.</span>round<span class=\"k\">(</span>Math<span class=\"k\">.</span>random<span class=\"k\">()</span> <span class=\"k\">*</span> <span class=\"s\">100000</span><span class=\"k\">);</span><span class=\"k\">}</span><span class=\"k\">;</span>","    <span class=\"k\">var</span> className <span class=\"k\">=</span> <span class=\"s\">\"category\"</span> <span class=\"k\">+</span> gen<span class=\"k\">();</span>","    <span class=\"k\">while</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>usedCategoryIds<span class=\"k\">[</span>className<span class=\"k\">])</span><span class=\"k\">{</span>","      className <span class=\"k\">=</span> gen<span class=\"k\">();</span>","    <span class=\"k\">}</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>usedCategoryIds<span class=\"k\">[</span>className<span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"k\">true</span><span class=\"k\">;</span>","    <span class=\"k\">return</span> <span class=\"s\">\"\"</span> <span class=\"k\">+</span> className<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  getCategoryClassName<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>categoryId<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> className <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>categoryClassMap<span class=\"k\">[</span>categoryId<span class=\"k\">];</span>","    <span class=\"k\">if</span> <span class=\"k\">(!</span>className<span class=\"k\">)</span> <span class=\"k\">{</span>","      className <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>generateUniqueClassName<span class=\"k\">(</span>categoryId<span class=\"k\">);</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>categoryClassMap<span class=\"k\">[</span>categoryId<span class=\"k\">]</span> <span class=\"k\">=</span> className<span class=\"k\">;</span>","    <span class=\"k\">}</span>","    <span class=\"k\">return</span> className<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  <span class=\"c\">/**</span>","<span class=\"c\">   * Function to call when a field's oncontextmenu event is received</span>","<span class=\"c\">   * The default implementation is provided here. Call registerFieldContextMenuCallback</span>","<span class=\"c\">   * to override it.</span>","<span class=\"c\">   */</span>","  fieldContextMenuCallback<span class=\"k\">:</span> <span class=\"k\">function</span> fieldContextMenuShow<span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">if</span><span class=\"k\">(</span> <span class=\"k\">!</span><span class=\"k\">this</span><span class=\"k\">.</span>fieldContextMenu <span class=\"k\">)</span> <span class=\"k\">{</span>","            <span class=\"k\">return</span><span class=\"k\">;</span>","        <span class=\"k\">}</span>","        dojo<span class=\"k\">.</span>stopEvent<span class=\"k\">(</span>event<span class=\"k\">);</span>","        <span class=\"k\">var</span> x <span class=\"k\">=</span> event<span class=\"k\">.</span>pageX<span class=\"k\">;</span>","        <span class=\"k\">var</span> y <span class=\"k\">=</span> event<span class=\"k\">.</span>pageY<span class=\"k\">;</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>fieldContextMenu<span class=\"k\">.</span>_scheduleOpen<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"k\">null</span><span class=\"k\">,</span> <span class=\"k\">{</span>x<span class=\"k\">:</span> x<span class=\"k\">,</span> y<span class=\"k\">:</span> y<span class=\"k\">}</span><span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">,</span>","    ","  <span class=\"c\">/**</span>","<span class=\"c\">   * Function to handle adding a field. Will receive the fieldId as the only parameter.</span>","<span class=\"c\">   */</span>","  doubleClickCallback<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","","  <span class=\"c\">/**</span>","<span class=\"c\">   * Function to handle adding a field. Will receive the fieldId as the only parameter.</span>","<span class=\"c\">   */</span>","  clickCallback<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","","  <span class=\"c\">/**</span>","<span class=\"c\">   * The dojo.dnd.Source container for the fields</span>","<span class=\"c\">   */</span>","  dndObj<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","","  <span class=\"c\">/**</span>","<span class=\"c\">   * The dojo.dnd.Selector object used if enableDragDrop is false</span>","<span class=\"c\">   */</span>","  selector<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","","  <span class=\"c\">/**</span>","<span class=\"c\">   * A callback function so we can notify someone, if desired, when expand/collapse happens</span>","<span class=\"c\">   */</span>","  expandCollapseCategoryCallback<span class=\"k\">:</span> undefined<span class=\"k\">,</span>","  ","  <span class=\"c\">/**</span>","<span class=\"c\">   * Function to handle disabling the selection of text.</span>","<span class=\"c\">   * The default implementation is provided here. Call registerTextSelectionDisabler</span>","<span class=\"c\">   * to override it.</span>","<span class=\"c\">   */</span>","  textSelectionDisabler<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>target<span class=\"k\">)</span><span class=\"k\">{</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span> target<span class=\"k\">.</span>onselectstart<span class=\"k\">!=</span><span class=\"s\">\"undefined\"</span><span class=\"k\">)</span> <span class=\"k\">{</span> <span class=\"c\">//IE route</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>target<span class=\"k\">,</span> <span class=\"s\">\"onselectstart\"</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span> <span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span> <span class=\"k\">}</span><span class=\"k\">));</span>","    <span class=\"k\">}</span> ","    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span> target<span class=\"k\">.</span>style<span class=\"k\">.</span>MozUserSelect<span class=\"k\">!=</span><span class=\"s\">\"undefined\"</span><span class=\"k\">)</span> <span class=\"k\">{</span> <span class=\"c\">//Firefox route</span>","        target<span class=\"k\">.</span>style<span class=\"k\">.</span>MozUserSelect<span class=\"k\">=</span><span class=\"s\">\"none\"</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span> <span class=\"c\">//All other route (ie: Opera)</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>connect<span class=\"k\">(</span>target<span class=\"k\">,</span> <span class=\"s\">\"onmousedown\"</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span> <span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span> <span class=\"k\">}</span><span class=\"k\">));</span>","    <span class=\"k\">}</span>","    target<span class=\"k\">.</span>style<span class=\"k\">.</span>cursor <span class=\"k\">=</span> <span class=\"s\">\"default\"</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  registerLocalizationLookup<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>getLocaleString <span class=\"k\">=</span> f<span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>_localize<span class=\"k\">();</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  registerTextSelectionDisabler<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>textSelectionDisabler <span class=\"k\">=</span> f<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  registerFieldContextMenuCallback<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>fieldContextMenuCallback <span class=\"k\">=</span> f<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  registerDoubleClickCallback<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>doubleClickCallback <span class=\"k\">=</span> f<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  registerClickCallback<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>clickCallback <span class=\"k\">=</span> f<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  registerExpandCollapseCategoryCallback<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>f<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>expandCollapseCategoryCallback <span class=\"k\">=</span> f<span class=\"k\">;</span>  ","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  _localize<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  _addItemClass<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>node<span class=\"k\">,</span> type<span class=\"k\">)</span><span class=\"k\">{</span>","    <span class=\"c\">// summary:</span>","    <span class=\"c\">//\t\tadds a class with prefix \"dojoDndItem\"</span>","    <span class=\"c\">// node: Node</span>","    <span class=\"c\">//\t\ta node</span>","    <span class=\"c\">// type: String</span>","    <span class=\"c\">//\t\ta variable suffix for a class name</span>","    dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">\"dojoDndItem\"</span> <span class=\"k\">+</span> type<span class=\"k\">);</span>","    <span class=\"k\">if</span><span class=\"k\">(</span>type <span class=\"k\">==</span> <span class=\"s\">'Selected'</span> <span class=\"k\">||</span> type <span class=\"k\">==</span> <span class=\"s\">'Anchor'</span><span class=\"k\">)</span><span class=\"k\">{</span>","        dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">\"pentaho-listitem-selected\"</span><span class=\"k\">);</span>","        dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem-hover'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  _removeItemClass<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>node<span class=\"k\">,</span> type<span class=\"k\">)</span><span class=\"k\">{</span>","    <span class=\"c\">// summary:</span>","    <span class=\"c\">//\t\tremoves a class with prefix \"dojoDndItem\"</span>","    <span class=\"c\">// node: Node</span>","    <span class=\"c\">//\t\ta node</span>","    <span class=\"c\">// type: String</span>","    <span class=\"c\">//\t\ta variable suffix for a class name</span>","    dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">\"dojoDndItem\"</span> <span class=\"k\">+</span> type<span class=\"k\">);</span>","    <span class=\"k\">if</span><span class=\"k\">(</span>type <span class=\"k\">==</span> <span class=\"s\">'Selected'</span> <span class=\"k\">||</span> type <span class=\"k\">==</span> <span class=\"s\">'Anchor'</span><span class=\"k\">)</span><span class=\"k\">{</span>","        dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">\"pentaho-listitem-selected\"</span><span class=\"k\">);</span>","        dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem-hover'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","    ","  unload<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>destroy<span class=\"k\">();</span>","    <span class=\"k\">}</span>","    dojo<span class=\"k\">.</span>forEach<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>handle<span class=\"k\">)</span> <span class=\"k\">{</span>","      dojo<span class=\"k\">.</span>disconnect<span class=\"k\">(</span>handle<span class=\"k\">);</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles <span class=\"k\">=</span> <span class=\"k\">[];</span>","    dojo<span class=\"k\">.</span>empty<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">);</span>","    ","    <span class=\"k\">this</span><span class=\"k\">.</span>categoryClassMap <span class=\"k\">=</span> <span class=\"k\">{}</span><span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>usedCategoryIds <span class=\"k\">=</span> <span class=\"k\">{}</span><span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  configureFor<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>datasource<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>unload<span class=\"k\">();</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj <span class=\"k\">=</span> <span class=\"k\">new</span> dojo<span class=\"k\">.</span>dnd<span class=\"k\">.</span>Source<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">,</span> ","      <span class=\"k\">{</span>","        <span class=\"s\">\"copyOnly\"</span><span class=\"k\">:</span> <span class=\"k\">true</span><span class=\"k\">,</span>","        <span class=\"s\">\"accept\"</span><span class=\"k\">:</span> <span class=\"s\">\"\"</span><span class=\"k\">,</span>","        <span class=\"s\">\"selfAccept\"</span><span class=\"k\">:</span> <span class=\"k\">false</span><span class=\"k\">,</span>","        <span class=\"s\">\"singular\"</span><span class=\"k\">:</span> <span class=\"k\">this</span><span class=\"k\">.</span>singleSelect<span class=\"k\">,</span>","        <span class=\"s\">\"creator\"</span><span class=\"k\">:</span> dojo<span class=\"k\">.</span>hitch<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>_dndItemCreator<span class=\"k\">)</span>","      <span class=\"k\">}</span><span class=\"k\">);</span>","","    <span class=\"k\">if</span><span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>enableDragDrop<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>selector <span class=\"k\">=</span> <span class=\"k\">new</span> dojo<span class=\"k\">.</span>dnd<span class=\"k\">.</span>Selector<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">,</span> ","        <span class=\"k\">{</span>","          <span class=\"s\">\"copyOnly\"</span><span class=\"k\">:</span> <span class=\"k\">true</span><span class=\"k\">,</span>","          <span class=\"s\">\"accept\"</span><span class=\"k\">:</span> <span class=\"s\">\"\"</span><span class=\"k\">,</span>","          <span class=\"s\">\"selfAccept\"</span><span class=\"k\">:</span> <span class=\"k\">false</span><span class=\"k\">,</span>","          <span class=\"s\">\"singular\"</span><span class=\"k\">:</span> <span class=\"k\">this</span><span class=\"k\">.</span>singleSelect<span class=\"k\">,</span>","          <span class=\"s\">\"creator\"</span><span class=\"k\">:</span> dojo<span class=\"k\">.</span>hitch<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>_dndItemCreator<span class=\"k\">)</span>","        <span class=\"k\">}</span><span class=\"k\">);</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>_addItemClass <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>_addItemClass<span class=\"k\">;</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>_removeItemClass <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>_removeItemClass<span class=\"k\">;</span>","    <span class=\"k\">}</span>","","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>_addItemClass <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>_addItemClass<span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>_removeItemClass <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>_removeItemClass<span class=\"k\">;</span>","    ","    <span class=\"k\">if</span><span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>categorize<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">var</span> fields <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>getFields<span class=\"k\">(</span>datasource<span class=\"k\">,</span> <span class=\"k\">null</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>filters<span class=\"k\">);</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>addFields<span class=\"k\">(</span> fields<span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">,</span> <span class=\"s\">''</span> <span class=\"k\">);</span>","      <span class=\"k\">return</span><span class=\"k\">;</span>","    <span class=\"k\">}</span>","    ","    <span class=\"k\">var</span> addedCategories <span class=\"k\">=</span> <span class=\"k\">[];</span>","","    <span class=\"k\">var</span> categories <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>getCategories<span class=\"k\">(</span>datasource<span class=\"k\">);</span>","","    dojo<span class=\"k\">.</span>forEach<span class=\"k\">(</span>categories<span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>category<span class=\"k\">,</span> idx<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">if</span> <span class=\"k\">(</span>dojo<span class=\"k\">.</span>indexOf<span class=\"k\">(</span>addedCategories<span class=\"k\">,</span> category<span class=\"k\">.</span>id<span class=\"k\">)</span> <span class=\"k\">!=</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">return</span><span class=\"k\">;</span>","      <span class=\"k\">}</span>","      <span class=\"k\">var</span> fields <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>getFields<span class=\"k\">(</span>datasource<span class=\"k\">,</span> category<span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>filters<span class=\"k\">);</span>","      <span class=\"k\">if</span><span class=\"k\">(</span>fields<span class=\"k\">.</span>length <span class=\"k\">==</span> <span class=\"s\">0</span><span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"c\">// there are no fields for this category with the current filters</span>","        <span class=\"k\">return</span><span class=\"k\">;</span>","      <span class=\"k\">}</span>","      <span class=\"k\">var</span> catId <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>getCategoryClassName<span class=\"k\">(</span>category<span class=\"k\">.</span>id<span class=\"k\">);</span>","      addedCategories<span class=\"k\">.</span>push<span class=\"k\">(</span>category<span class=\"k\">.</span>id<span class=\"k\">);</span>","      <span class=\"c\">// create div for category</span>","      <span class=\"k\">var</span> categoryDiv <span class=\"k\">=</span> dojo<span class=\"k\">.</span>create<span class=\"k\">(</span><span class=\"s\">\"div\"</span><span class=\"k\">,</span>","        <span class=\"k\">{</span>","          <span class=\"s\">\"id\"</span><span class=\"k\">:</span> catId","        <span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">);</span>","","      <span class=\"c\">// create +- expand/collapse indicator</span>","      <span class=\"k\">var</span> categoryIndicator <span class=\"k\">=</span> dojo<span class=\"k\">.</span>create<span class=\"k\">(</span><span class=\"s\">\"div\"</span><span class=\"k\">,</span>","        <span class=\"k\">{</span>","          <span class=\"s\">\"id\"</span><span class=\"k\">:</span> catId <span class=\"k\">+</span> <span class=\"s\">\"-indicator\"</span><span class=\"k\">,</span>","          <span class=\"s\">\"class\"</span><span class=\"k\">:</span> <span class=\"s\">\"categoryIndicator treenode-open\"</span><span class=\"k\">,</span>","          <span class=\"s\">\"categoryId\"</span><span class=\"k\">:</span> catId","        <span class=\"k\">}</span><span class=\"k\">,</span> categoryDiv<span class=\"k\">);</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>categoryIndicator<span class=\"k\">,</span> <span class=\"s\">'onclick'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>expandCollapseCategory<span class=\"k\">));</span>","","      <span class=\"c\">// create span for categoryName to display text</span>","      <span class=\"k\">var</span> categoryNameSpan <span class=\"k\">=</span> dojo<span class=\"k\">.</span>create<span class=\"k\">(</span><span class=\"s\">\"span\"</span><span class=\"k\">,</span>","        <span class=\"k\">{</span>","          <span class=\"s\">\"id\"</span><span class=\"k\">:</span> catId <span class=\"k\">+</span> <span class=\"s\">\"-span\"</span><span class=\"k\">,</span>","          <span class=\"s\">\"class\"</span><span class=\"k\">:</span> <span class=\"s\">\"treenode-branch-label\"</span><span class=\"k\">,</span>","          <span class=\"s\">\"innerHTML\"</span><span class=\"k\">:</span> category<span class=\"k\">.</span>name<span class=\"k\">,</span>","          <span class=\"s\">\"categoryId\"</span><span class=\"k\">:</span> catId","        <span class=\"k\">}</span><span class=\"k\">,</span> categoryDiv<span class=\"k\">);</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>textSelectionDisabler<span class=\"k\">(</span>categoryNameSpan<span class=\"k\">);</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>categoryNameSpan<span class=\"k\">,</span> <span class=\"s\">'ondblclick'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>expandCollapseCategory<span class=\"k\">));</span>","","      <span class=\"c\">// create DND field list for this category</span>","      <span class=\"k\">var</span> categoryFieldsDiv <span class=\"k\">=</span> dojo<span class=\"k\">.</span>create<span class=\"k\">(</span><span class=\"s\">\"div\"</span><span class=\"k\">,</span>","        <span class=\"k\">{</span>","          <span class=\"s\">\"id\"</span><span class=\"k\">:</span> catId <span class=\"k\">+</span> <span class=\"s\">\"-fields\"</span>","        <span class=\"k\">}</span><span class=\"k\">,</span> categoryDiv<span class=\"k\">);</span>","","      <span class=\"k\">this</span><span class=\"k\">.</span>addFields<span class=\"k\">(</span> fields<span class=\"k\">,</span> categoryFieldsDiv<span class=\"k\">,</span> catId <span class=\"k\">);</span>","","    <span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">);</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  addFields<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span> fields<span class=\"k\">,</span> parent<span class=\"k\">,</span> parentId <span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">var</span> items <span class=\"k\">=</span> <span class=\"k\">[];</span>","      dojo<span class=\"k\">.</span>forEach<span class=\"k\">(</span>fields<span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>field<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">var</span> item <span class=\"k\">=</span> <span class=\"k\">{</span>","            <span class=\"s\">\"categoryId\"</span><span class=\"k\">:</span> parentId<span class=\"k\">,</span>","            <span class=\"s\">\"displayName\"</span><span class=\"k\">:</span> field<span class=\"k\">.</span>name<span class=\"k\">,</span>","            <span class=\"s\">\"fieldId\"</span><span class=\"k\">:</span> field<span class=\"k\">.</span>id<span class=\"k\">,</span>","            <span class=\"s\">\"dataType\"</span><span class=\"k\">:</span> field<span class=\"k\">.</span>dataType<span class=\"k\">,</span>","            <span class=\"s\">\"type\"</span><span class=\"k\">:</span> <span class=\"k\">[</span><span class=\"s\">\"treenode-leaf-label\"</span><span class=\"k\">],</span>","            <span class=\"s\">\"description\"</span><span class=\"k\">:</span> field<span class=\"k\">.</span>description","          <span class=\"k\">}</span><span class=\"k\">;</span>","        <span class=\"k\">if</span><span class=\"k\">(</span>field<span class=\"k\">.</span>hiddenForUser <span class=\"k\">!=</span> <span class=\"s\">\"true\"</span><span class=\"k\">)</span><span class=\"k\">{</span>","          items<span class=\"k\">.</span>push<span class=\"k\">(</span>item<span class=\"k\">);</span>","          <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>setItem<span class=\"k\">(</span><span class=\"s\">\"field-\"</span> <span class=\"k\">+</span> item<span class=\"k\">.</span>fieldId<span class=\"k\">,</span> <span class=\"k\">{</span> <span class=\"s\">\"data\"</span><span class=\"k\">:</span> item<span class=\"k\">,</span> <span class=\"s\">\"type\"</span><span class=\"k\">:</span> <span class=\"s\">\"treenode-leaf-label\"</span><span class=\"k\">,</span> <span class=\"s\">\"fieldId\"</span><span class=\"k\">:</span> item<span class=\"k\">.</span>fieldId <span class=\"k\">}</span><span class=\"k\">);</span>","        <span class=\"k\">}</span>","      <span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">);</span>","      <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>enableDragDrop<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>insertNodes<span class=\"k\">(</span><span class=\"k\">false</span><span class=\"k\">,</span> items<span class=\"k\">,</span> <span class=\"k\">false</span><span class=\"k\">,</span> parent<span class=\"k\">);</span>","      <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","        <span class=\"c\">// add the fields without the DnD stuff</span>","        <span class=\"k\">for</span><span class=\"k\">(</span><span class=\"k\">var</span> idx<span class=\"k\">=</span><span class=\"s\">0</span><span class=\"k\">;</span> idx<span class=\"k\">&lt;</span>items<span class=\"k\">.</span>length<span class=\"k\">;</span> idx<span class=\"k\">++)</span> <span class=\"k\">{</span>","            <span class=\"k\">var</span> x <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">.</span>_dndItemCreator<span class=\"k\">(</span>items<span class=\"k\">[</span>idx<span class=\"k\">],</span><span class=\"s\">''</span><span class=\"k\">);</span>","            parent<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>x<span class=\"k\">.</span>node<span class=\"k\">);</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>setItem<span class=\"k\">(</span><span class=\"s\">\"field-\"</span> <span class=\"k\">+</span> items<span class=\"k\">[</span>idx<span class=\"k\">].</span>fieldId<span class=\"k\">,</span> <span class=\"k\">{</span> <span class=\"s\">\"data\"</span><span class=\"k\">:</span> items<span class=\"k\">[</span>idx<span class=\"k\">],</span> <span class=\"s\">\"type\"</span><span class=\"k\">:</span> <span class=\"s\">\"treenode-leaf-label\"</span><span class=\"k\">,</span> <span class=\"s\">\"fieldId\"</span><span class=\"k\">:</span> items<span class=\"k\">[</span>idx<span class=\"k\">].</span>fieldId <span class=\"k\">}</span><span class=\"k\">);</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>x<span class=\"k\">.</span>node<span class=\"k\">,</span> <span class=\"s\">'onmousedown'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>onMouseDown<span class=\"k\">));</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>x<span class=\"k\">.</span>node<span class=\"k\">,</span> <span class=\"s\">'onmouseup'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>onMouseUp<span class=\"k\">));</span>","        <span class=\"k\">}</span>","      <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  onMouseDown<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>e<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>current <span class=\"k\">=</span> e<span class=\"k\">.</span>target<span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>onMouseDown<span class=\"k\">(</span>e<span class=\"k\">);</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  onMouseUp<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>e<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>current <span class=\"k\">=</span> e<span class=\"k\">.</span>target<span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>onMouseUp<span class=\"k\">(</span>e<span class=\"k\">);</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  _dndItemCreator<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>item<span class=\"k\">,</span> hint<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> props <span class=\"k\">=</span> <span class=\"k\">{</span>","        <span class=\"s\">\"id\"</span><span class=\"k\">:</span> <span class=\"s\">\"field-\"</span> <span class=\"k\">+</span> <span class=\"k\">this</span><span class=\"k\">.</span>sanitizeIdAndClassNames<span class=\"k\">(</span>item<span class=\"k\">.</span>fieldId<span class=\"k\">),</span>","        <span class=\"s\">\"innerHTML\"</span><span class=\"k\">:</span> item<span class=\"k\">.</span>displayName<span class=\"k\">,</span>","        <span class=\"s\">\"fieldId\"</span><span class=\"k\">:</span> item<span class=\"k\">.</span>fieldId<span class=\"k\">,</span>","        <span class=\"s\">\"class\"</span><span class=\"k\">:</span> item<span class=\"k\">.</span>categoryId","    <span class=\"k\">}</span><span class=\"k\">;</span>","    <span class=\"k\">if</span><span class=\"k\">(</span>item<span class=\"k\">.</span>description<span class=\"k\">)</span> <span class=\"k\">{</span>","        props<span class=\"k\">.</span>title <span class=\"k\">=</span> item<span class=\"k\">.</span>description<span class=\"k\">;</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","    \tprops<span class=\"k\">.</span>title <span class=\"k\">=</span> item<span class=\"k\">.</span>fieldId<span class=\"k\">;</span>","    <span class=\"k\">}</span>","    <span class=\"k\">var</span> div <span class=\"k\">=</span> dojo<span class=\"k\">.</span>create<span class=\"k\">(</span><span class=\"s\">\"div\"</span><span class=\"k\">,</span> props<span class=\"k\">);</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>hint <span class=\"k\">===</span> <span class=\"s\">\"avatar\"</span><span class=\"k\">)</span> <span class=\"k\">{</span>","      dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">\"dragDropAvatar\"</span><span class=\"k\">);</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","      dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">\"field\"</span><span class=\"k\">);</span>","      dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">\"treenode-leaf-label\"</span><span class=\"k\">);</span>","      dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">\"pentaho-listitem\"</span><span class=\"k\">);</span>","      <span class=\"c\">// Wire up interaction</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">\"oncontextmenu\"</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>updateSelectionForContextMenu<span class=\"k\">(</span>item<span class=\"k\">.</span>fieldId<span class=\"k\">);</span>","        <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>fieldContextMenuCallback<span class=\"k\">)</span> <span class=\"k\">{</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>fieldContextMenuCallback<span class=\"k\">(</span>event<span class=\"k\">);</span>","        <span class=\"k\">}</span>","      <span class=\"k\">}</span><span class=\"k\">));</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">'ondblclick'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>doubleClickCallback<span class=\"k\">)</span> <span class=\"k\">{</span>","            <span class=\"k\">this</span><span class=\"k\">.</span>doubleClickCallback<span class=\"k\">(</span>item<span class=\"k\">.</span>fieldId<span class=\"k\">);</span>","        <span class=\"k\">}</span>","      <span class=\"k\">}</span><span class=\"k\">));</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">'onmouseover'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>onFieldMouseOver<span class=\"k\">(</span>event<span class=\"k\">);</span>","      <span class=\"k\">}</span><span class=\"k\">));</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">'onmouseout'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>onFieldMouseOut<span class=\"k\">(</span>event<span class=\"k\">);</span>","      <span class=\"k\">}</span><span class=\"k\">));</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>connectHandles<span class=\"k\">.</span>push<span class=\"k\">(</span>dojo<span class=\"k\">.</span>connect<span class=\"k\">(</span>div<span class=\"k\">,</span> <span class=\"s\">'onclick'</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>onFieldClick<span class=\"k\">(</span>event<span class=\"k\">);</span>","      <span class=\"k\">}</span><span class=\"k\">));</span>","    <span class=\"k\">}</span>","    <span class=\"k\">return</span> <span class=\"k\">{</span>node<span class=\"k\">:</span> div<span class=\"k\">,</span> data<span class=\"k\">:</span> item<span class=\"k\">,</span> type<span class=\"k\">:</span> <span class=\"k\">[</span><span class=\"s\">\"treenode-leaf-label\"</span><span class=\"k\">]</span><span class=\"k\">}</span><span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  onFieldClick<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>onClick<span class=\"k\">(</span>event<span class=\"k\">);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>clickCallback<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>clickCallback<span class=\"k\">(</span>event<span class=\"k\">);</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  onFieldMouseOver<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>onMouseOver<span class=\"k\">(</span>event<span class=\"k\">);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">if</span><span class=\"k\">(!</span>dojo<span class=\"k\">.</span>hasClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span><span class=\"s\">'pentaho-listitem-selected'</span><span class=\"k\">))</span> <span class=\"k\">{</span>","        dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem-hover'</span><span class=\"k\">);</span>","        dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  onFieldMouseOut<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">)</span> <span class=\"k\">{</span>","        <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>onMouseOut<span class=\"k\">(</span>event<span class=\"k\">);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">if</span><span class=\"k\">(!</span>dojo<span class=\"k\">.</span>hasClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span><span class=\"s\">'pentaho-listitem-selected'</span><span class=\"k\">))</span> <span class=\"k\">{</span>","        dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem'</span><span class=\"k\">);</span>","        dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem-hover'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","        dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem-hover'</span><span class=\"k\">);</span>","        dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>event<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">'pentaho-listitem-selected'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  _elementComparator<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>a<span class=\"k\">,</span> b<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>a<span class=\"k\">.</span>name <span class=\"k\">&lt;</span> b<span class=\"k\">.</span>name<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">return</span> <span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">;</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>a<span class=\"k\">.</span>name <span class=\"k\">==</span> b<span class=\"k\">.</span>name<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">return</span> <span class=\"s\">0</span><span class=\"k\">;</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","      <span class=\"k\">return</span> <span class=\"s\">1</span><span class=\"k\">;</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  getCategories<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>datasource<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> categories <span class=\"k\">=</span> <span class=\"k\">[];</span>","    dojo<span class=\"k\">.</span>forEach<span class=\"k\">(</span>datasource<span class=\"k\">.</span>getAllElements<span class=\"k\">(),</span> <span class=\"k\">function</span><span class=\"k\">(</span>element<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">if</span> <span class=\"k\">(</span>element<span class=\"k\">.</span>elementType <span class=\"k\">==</span> pentaho<span class=\"k\">.</span>pda<span class=\"k\">.</span>Column<span class=\"k\">.</span>ELEMENT_TYPES<span class=\"k\">.</span>CATEGORY <span class=\"k\">&amp;&amp;</span> categories<span class=\"k\">[</span>element<span class=\"k\">]</span> <span class=\"k\">==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","        categories<span class=\"k\">.</span>push<span class=\"k\">(</span>element<span class=\"k\">);</span>","      <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","    <span class=\"k\">return</span> categories<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  getFields<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>datasource<span class=\"k\">,</span> category<span class=\"k\">,</span> filters<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> fields <span class=\"k\">=</span> <span class=\"k\">[];</span>","    <span class=\"k\">var</span> elements <span class=\"k\">=</span> datasource<span class=\"k\">.</span>getAllElements<span class=\"k\">();</span>   ","    dojo<span class=\"k\">.</span>forEach<span class=\"k\">(</span>datasource<span class=\"k\">.</span>getAllElements<span class=\"k\">(),</span> <span class=\"k\">function</span><span class=\"k\">(</span>element<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">if</span> <span class=\"k\">(</span>element<span class=\"k\">.</span>isQueryElement <span class=\"k\">&amp;&amp;</span> <span class=\"k\">(</span> category <span class=\"k\">==</span> <span class=\"k\">null</span> <span class=\"k\">||</span> element<span class=\"k\">.</span>parent <span class=\"k\">==</span> category<span class=\"k\">)</span> <span class=\"k\">&amp;&amp;</span> fields<span class=\"k\">[</span>element<span class=\"k\">]</span> <span class=\"k\">==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","      ","        <span class=\"k\">if</span><span class=\"k\">(</span>filters <span class=\"k\">&amp;&amp;</span> filters<span class=\"k\">.</span>length <span class=\"k\">&gt;</span> <span class=\"s\">0</span><span class=\"k\">)</span> <span class=\"k\">{</span>","            <span class=\"c\">// apply the filters</span>","            <span class=\"k\">var</span> ok <span class=\"k\">=</span> <span class=\"k\">true</span><span class=\"k\">;</span>","            <span class=\"k\">for</span><span class=\"k\">(</span><span class=\"k\">var</span> filterNo<span class=\"k\">=</span><span class=\"s\">0</span><span class=\"k\">;</span> filterNo<span class=\"k\">&lt;</span>filters<span class=\"k\">.</span>length<span class=\"k\">;</span> filterNo<span class=\"k\">++)</span> <span class=\"k\">{</span>","                <span class=\"k\">var</span> values <span class=\"k\">=</span> filters<span class=\"k\">[</span>filterNo<span class=\"k\">].</span>values<span class=\"k\">;</span>","                <span class=\"k\">var</span> filterOk <span class=\"k\">=</span> <span class=\"k\">false</span><span class=\"k\">;</span>","                <span class=\"k\">for</span><span class=\"k\">(</span><span class=\"k\">var</span> valueNo<span class=\"k\">=</span><span class=\"s\">0</span><span class=\"k\">;</span> valueNo<span class=\"k\">&lt;</span>values<span class=\"k\">.</span>length<span class=\"k\">;</span> valueNo<span class=\"k\">++)</span> <span class=\"k\">{</span>","                    <span class=\"k\">if</span><span class=\"k\">(</span>element<span class=\"k\">[</span>filters<span class=\"k\">[</span>filterNo<span class=\"k\">].</span>type<span class=\"k\">]</span> <span class=\"k\">==</span> values<span class=\"k\">[</span>valueNo<span class=\"k\">])</span> <span class=\"k\">{</span>","                        filterOk <span class=\"k\">=</span> <span class=\"k\">true</span><span class=\"k\">;</span>","                        <span class=\"k\">break</span><span class=\"k\">;</span>","                    <span class=\"k\">}</span>","                <span class=\"k\">}</span>","                ok <span class=\"k\">=</span> ok <span class=\"k\">&amp;&amp;</span> filterOk<span class=\"k\">;</span>","                <span class=\"k\">if</span><span class=\"k\">(!</span>ok<span class=\"k\">)</span> <span class=\"k\">{</span>","                    <span class=\"k\">break</span><span class=\"k\">;</span>","                <span class=\"k\">}</span>","            <span class=\"k\">}</span>","            <span class=\"k\">if</span><span class=\"k\">(</span>ok<span class=\"k\">)</span> <span class=\"k\">{</span>","                fields<span class=\"k\">.</span>push<span class=\"k\">(</span>element<span class=\"k\">);</span>","            <span class=\"k\">}</span>","        <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","            fields<span class=\"k\">.</span>push<span class=\"k\">(</span>element<span class=\"k\">);</span>","        <span class=\"k\">}</span>","      <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","    <span class=\"k\">return</span> fields<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  expandCollapseCategory<span class=\"k\">:</span> <span class=\"k\">function</span> <span class=\"k\">(</span>eventElement<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> categoryId <span class=\"k\">=</span> dojo<span class=\"k\">.</span>attr<span class=\"k\">(</span>eventElement<span class=\"k\">.</span>target<span class=\"k\">,</span> <span class=\"s\">\"categoryId\"</span><span class=\"k\">);</span>","    <span class=\"k\">var</span> node <span class=\"k\">=</span> dojo<span class=\"k\">.</span>byId<span class=\"k\">(</span>categoryId <span class=\"k\">+</span> <span class=\"s\">\"-fields\"</span><span class=\"k\">);</span>","    <span class=\"k\">var</span> indicatorNode <span class=\"k\">=</span> dojo<span class=\"k\">.</span>byId<span class=\"k\">(</span>categoryId <span class=\"k\">+</span> <span class=\"s\">\"-indicator\"</span><span class=\"k\">);</span>","    <span class=\"k\">var</span> collapsed <span class=\"k\">=</span> dojo<span class=\"k\">.</span>attr<span class=\"k\">(</span>indicatorNode<span class=\"k\">,</span> <span class=\"s\">\"collapsed\"</span><span class=\"k\">)</span> <span class=\"k\">!=</span> <span class=\"s\">\"true\"</span><span class=\"k\">;</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>collapsed<span class=\"k\">)</span> <span class=\"k\">{</span>","      dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>indicatorNode<span class=\"k\">,</span><span class=\"s\">'treenode-closed'</span><span class=\"k\">);</span>","      dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>indicatorNode<span class=\"k\">,</span><span class=\"s\">'treenode-open'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","      dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>indicatorNode<span class=\"k\">,</span><span class=\"s\">'treenode-open'</span><span class=\"k\">);</span>","      dojo<span class=\"k\">.</span>removeClass<span class=\"k\">(</span>indicatorNode<span class=\"k\">,</span><span class=\"s\">'treenode-closed'</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","    dojo<span class=\"k\">.</span>attr<span class=\"k\">(</span>indicatorNode<span class=\"k\">,</span> <span class=\"s\">\"collapsed\"</span><span class=\"k\">,</span> <span class=\"s\">\"\"</span> <span class=\"k\">+</span> collapsed<span class=\"k\">);</span>","","    <span class=\"k\">var</span> fields <span class=\"k\">=</span> dojo<span class=\"k\">.</span>query<span class=\"k\">(</span><span class=\"s\">\".\"</span> <span class=\"k\">+</span> categoryId<span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">);</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span>collapsed<span class=\"k\">)</span> <span class=\"k\">{</span>","      fields<span class=\"k\">.</span>addClass<span class=\"k\">(</span><span class=\"s\">\"hidden\"</span><span class=\"k\">)</span>","    <span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","      fields<span class=\"k\">.</span>removeClass<span class=\"k\">(</span><span class=\"s\">\"hidden\"</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","    ","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>expandCollapseCategoryCallback<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>expandCollapseCategoryCallback<span class=\"k\">(</span>collapsed<span class=\"k\">);</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  updateFilterIndicators<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>filters<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"c\">// Remove all filter indicators</span>","    dojo<span class=\"k\">.</span>query<span class=\"k\">(</span><span class=\"s\">\".treenode-leaf-label\"</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">.</span>containerNode<span class=\"k\">).</span>removeClass<span class=\"k\">(</span><span class=\"s\">\"fieldlist-filtered-field\"</span><span class=\"k\">);</span>","    <span class=\"c\">// Add filter icons to fields that are filtered</span>","    <span class=\"k\">if</span> <span class=\"k\">(!</span>filters<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">return</span><span class=\"k\">;</span>","    <span class=\"k\">}</span>","    <span class=\"c\">// For all active filters add the fieldFiltered class to the field list div for the column that's filtered</span>","    dojo<span class=\"k\">.</span>forEach<span class=\"k\">(</span>filters<span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>filter<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">var</span> fieldDiv <span class=\"k\">=</span> dojo<span class=\"k\">.</span>byId<span class=\"k\">(</span><span class=\"s\">\"field-\"</span> <span class=\"k\">+</span> <span class=\"k\">this</span><span class=\"k\">.</span>sanitizeIdAndClassNames<span class=\"k\">(</span>filter<span class=\"k\">.</span>column<span class=\"k\">));</span>","      <span class=\"k\">if</span><span class=\"k\">(</span>fieldDiv <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span><span class=\"k\">{</span>","        dojo<span class=\"k\">.</span>addClass<span class=\"k\">(</span>fieldDiv<span class=\"k\">,</span> <span class=\"s\">\"fieldlist-filtered-field\"</span><span class=\"k\">);</span>  ","      <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">);</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  <span class=\"c\">/**</span>","<span class=\"c\">   * If the item we invoked the context menu over is not selected make it the only selection.</span>","<span class=\"c\">   */</span>","  updateSelectionForContextMenu<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span>fieldId<span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">var</span> selected <span class=\"k\">=</span> <span class=\"k\">false</span><span class=\"k\">;</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>forInSelectedItems<span class=\"k\">(</span><span class=\"k\">function</span><span class=\"k\">(</span>item<span class=\"k\">,</span> id<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">if</span> <span class=\"k\">(</span>item<span class=\"k\">.</span>data<span class=\"k\">.</span>fieldId <span class=\"k\">===</span> fieldId<span class=\"k\">)</span> <span class=\"k\">{</span>","        selected <span class=\"k\">=</span> <span class=\"k\">true</span><span class=\"k\">;</span>","      <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","","    <span class=\"k\">var</span> id <span class=\"k\">=</span> <span class=\"s\">\"field-\"</span> <span class=\"k\">+</span> fieldId<span class=\"k\">;</span>","    <span class=\"k\">var</span> node <span class=\"k\">=</span> dojo<span class=\"k\">.</span>byId<span class=\"k\">(</span>id<span class=\"k\">);</span>","    <span class=\"k\">if</span> <span class=\"k\">(!</span>selected<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>clearSelection<span class=\"k\">();</span>","      <span class=\"c\">// Logic borrowed from dojo.dnd.Selector.selectAll</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>_addItemClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">\"pentaho-listitem-selected\"</span><span class=\"k\">)</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>selection<span class=\"k\">[</span>id<span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"s\">1</span><span class=\"k\">;</span>","    <span class=\"k\">}</span>","    <span class=\"c\">// Update anchor</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>anchor<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>_addItemClass<span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>anchor<span class=\"k\">,</span> <span class=\"s\">\"pentaho-listitem-selected\"</span><span class=\"k\">);</span>","    <span class=\"k\">}</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>_removeAnchor<span class=\"k\">();</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>_addItemClass<span class=\"k\">(</span>node<span class=\"k\">,</span> <span class=\"s\">\"Anchor\"</span><span class=\"k\">);</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>anchor <span class=\"k\">=</span> node<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  getSelectedItems<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>dndObj <span class=\"k\">&amp;&amp;</span> <span class=\"k\">this</span><span class=\"k\">.</span>enableDragDrop<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">var</span> items <span class=\"k\">=</span> <span class=\"k\">[];</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>forInSelectedItems<span class=\"k\">(</span><span class=\"k\">function</span><span class=\"k\">(</span>item<span class=\"k\">)</span> <span class=\"k\">{</span>","        items<span class=\"k\">.</span>push<span class=\"k\">(</span>item<span class=\"k\">.</span>data<span class=\"k\">);</span>","      <span class=\"k\">}</span><span class=\"k\">);</span>","      <span class=\"k\">return</span> items<span class=\"k\">;</span>","    <span class=\"k\">}</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>selector <span class=\"k\">&amp;&amp;</span> <span class=\"k\">!</span><span class=\"k\">this</span><span class=\"k\">.</span>enableDragDrop<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">var</span> items <span class=\"k\">=</span> <span class=\"k\">[];</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>forInSelectedItems<span class=\"k\">(</span><span class=\"k\">function</span><span class=\"k\">(</span>item<span class=\"k\">)</span> <span class=\"k\">{</span>","        items<span class=\"k\">.</span>push<span class=\"k\">(</span>item<span class=\"k\">.</span>data<span class=\"k\">);</span>","      <span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"k\">this</span><span class=\"k\">);</span>","      <span class=\"k\">return</span> items<span class=\"k\">;</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","","  clearSelection<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","    <span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>dndObj <span class=\"k\">&amp;&amp;</span> <span class=\"k\">this</span><span class=\"k\">.</span>enableDragDrop<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>dndObj<span class=\"k\">.</span>selectNone<span class=\"k\">();</span>","    <span class=\"k\">}</span>","    <span class=\"k\">if</span><span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">)</span> <span class=\"k\">{</span>","      <span class=\"k\">this</span><span class=\"k\">.</span>selector<span class=\"k\">.</span>selectNone<span class=\"k\">();</span>","    <span class=\"k\">}</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  addFilter<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span> filter <span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>filters<span class=\"k\">.</span>push<span class=\"k\">(</span>filter<span class=\"k\">);</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  clearFilters<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>filters <span class=\"k\">=</span> <span class=\"k\">[];</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  setCategorized<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span> categorize <span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>categorize <span class=\"k\">=</span> categorize<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  setEnableDragDrop<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span> enableDragDrop <span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>enableDragDrop <span class=\"k\">=</span> enableDragDrop<span class=\"k\">;</span>","  <span class=\"k\">}</span><span class=\"k\">,</span>","  ","  setContextMenu<span class=\"k\">:</span> <span class=\"k\">function</span><span class=\"k\">(</span> fieldContextMenu <span class=\"k\">)</span> <span class=\"k\">{</span>","    <span class=\"k\">this</span><span class=\"k\">.</span>fieldContextMenu <span class=\"k\">=</span> fieldContextMenu<span class=\"k\">;</span>","  <span class=\"k\">}</span>","  ","<span class=\"k\">}</span><span class=\"k\">);</span>"];
_$jscoverage['dojo/pentaho/common/FieldList.js'][1]++;
dojo.provide("pentaho.common.FieldList");
_$jscoverage['dojo/pentaho/common/FieldList.js'][6]++;
dojo.declare("pentaho.common.FieldList", [dijit._Widget, dijit._Templated], {templateString: "<div dojoAttachPoint=\"containerNode\"></div>", datasource: undefined, connectHandles: [], enableDragDrop: true, singleSelect: false, getLocaleString: undefined, filters: [], categorize: true, categoryClassMap: {}, usedCategoryIds: {}, sanitizeIdAndClassNames: (function (name) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][22]++;
  if ((name != null)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][23]++;
    return dojox.html.entities.encode(name).replace(/ /g, "_");
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][26]++;
    return "";
  }
}), generateUniqueClassName: (function (categoryId) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][31]++;
  var gen = (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][31]++;
  return Math.round((Math.random() * 100000));
});
  _$jscoverage['dojo/pentaho/common/FieldList.js'][32]++;
  var className = ("category" + gen());
  _$jscoverage['dojo/pentaho/common/FieldList.js'][33]++;
  while (this.usedCategoryIds[className]) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][34]++;
    className = gen();
}
  _$jscoverage['dojo/pentaho/common/FieldList.js'][36]++;
  this.usedCategoryIds[className] = true;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][37]++;
  return ("" + className);
}), getCategoryClassName: (function (categoryId) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][41]++;
  var className = this.categoryClassMap[categoryId];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][42]++;
  if ((! className)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][43]++;
    className = this.generateUniqueClassName(categoryId);
    _$jscoverage['dojo/pentaho/common/FieldList.js'][44]++;
    this.categoryClassMap[categoryId] = className;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][46]++;
  return className;
}), fieldContextMenuCallback: (function fieldContextMenuShow(event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][55]++;
  if ((! this.fieldContextMenu)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][56]++;
    return;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][58]++;
  dojo.stopEvent(event);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][59]++;
  var x = event.pageX;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][60]++;
  var y = event.pageY;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][61]++;
  this.fieldContextMenu._scheduleOpen(event.target, null, {x: x, y: y});
}), doubleClickCallback: undefined, clickCallback: undefined, dndObj: undefined, selector: undefined, expandCollapseCategoryCallback: undefined, textSelectionDisabler: (function (target) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][95]++;
  if (((typeof target.onselectstart) != "undefined")) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][96]++;
    this.connectHandles.push(dojo.connect(target, "onselectstart", (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][96]++;
  return false;
})));
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][98]++;
    if (((typeof target.style.MozUserSelect) != "undefined")) {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][99]++;
      target.style.MozUserSelect = "none";
    }
    else {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][101]++;
      this.connectHandles.push(this.connect(target, "onmousedown", (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][101]++;
  return false;
})));
    }
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][103]++;
  target.style.cursor = "default";
}), registerLocalizationLookup: (function (f) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][107]++;
  this.getLocaleString = f;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][108]++;
  this._localize();
}), registerTextSelectionDisabler: (function (f) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][112]++;
  this.textSelectionDisabler = f;
}), registerFieldContextMenuCallback: (function (f) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][116]++;
  this.fieldContextMenuCallback = f;
}), registerDoubleClickCallback: (function (f) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][120]++;
  this.doubleClickCallback = f;
}), registerClickCallback: (function (f) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][124]++;
  this.clickCallback = f;
}), registerExpandCollapseCategoryCallback: (function (f) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][128]++;
  this.expandCollapseCategoryCallback = f;
}), _localize: (function () {
}), _addItemClass: (function (node, type) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][141]++;
  dojo.addClass(node, ("dojoDndItem" + type));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][142]++;
  if (((type == "Selected") || (type == "Anchor"))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][143]++;
    dojo.addClass(node, "pentaho-listitem-selected");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][144]++;
    dojo.removeClass(node, "pentaho-listitem-hover");
  }
}), _removeItemClass: (function (node, type) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][155]++;
  dojo.removeClass(node, ("dojoDndItem" + type));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][156]++;
  if (((type == "Selected") || (type == "Anchor"))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][157]++;
    dojo.removeClass(node, "pentaho-listitem-selected");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][158]++;
    dojo.removeClass(node, "pentaho-listitem-hover");
  }
}), unload: (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][163]++;
  if (this.dndObj) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][164]++;
    this.dndObj.destroy();
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][166]++;
  dojo.forEach(this.connectHandles, (function (handle) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][167]++;
  dojo.disconnect(handle);
}));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][169]++;
  this.connectHandles = [];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][170]++;
  dojo.empty(this.containerNode);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][172]++;
  this.categoryClassMap = {};
  _$jscoverage['dojo/pentaho/common/FieldList.js'][173]++;
  this.usedCategoryIds = {};
}), configureFor: (function (datasource) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][177]++;
  this.unload();
  _$jscoverage['dojo/pentaho/common/FieldList.js'][179]++;
  this.dndObj = new (dojo.dnd.Source)(this.containerNode, {"copyOnly": true, "accept": "", "selfAccept": false, "singular": this.singleSelect, "creator": dojo.hitch(this, this._dndItemCreator)});
  _$jscoverage['dojo/pentaho/common/FieldList.js'][188]++;
  if ((! this.enableDragDrop)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][189]++;
    this.selector = new (dojo.dnd.Selector)(this.containerNode, {"copyOnly": true, "accept": "", "selfAccept": false, "singular": this.singleSelect, "creator": dojo.hitch(this, this._dndItemCreator)});
    _$jscoverage['dojo/pentaho/common/FieldList.js'][197]++;
    this.selector._addItemClass = this._addItemClass;
    _$jscoverage['dojo/pentaho/common/FieldList.js'][198]++;
    this.selector._removeItemClass = this._removeItemClass;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][201]++;
  this.dndObj._addItemClass = this._addItemClass;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][202]++;
  this.dndObj._removeItemClass = this._removeItemClass;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][204]++;
  if ((! this.categorize)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][205]++;
    var fields = this.getFields(datasource, null, this.filters);
    _$jscoverage['dojo/pentaho/common/FieldList.js'][206]++;
    this.addFields(fields, this.containerNode, "");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][207]++;
    return;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][210]++;
  var addedCategories = [];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][212]++;
  var categories = this.getCategories(datasource);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][214]++;
  dojo.forEach(categories, (function (category, idx) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][215]++;
  if ((dojo.indexOf(addedCategories, category.id) != -1)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][216]++;
    return;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][218]++;
  var fields = this.getFields(datasource, category, this.filters);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][219]++;
  if ((fields.length == 0)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][221]++;
    return;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][223]++;
  var catId = this.getCategoryClassName(category.id);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][224]++;
  addedCategories.push(category.id);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][226]++;
  var categoryDiv = dojo.create("div", {"id": catId}, this.containerNode);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][232]++;
  var categoryIndicator = dojo.create("div", {"id": (catId + "-indicator"), "class": "categoryIndicator treenode-open", "categoryId": catId}, categoryDiv);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][238]++;
  this.connectHandles.push(dojo.connect(categoryIndicator, "onclick", this, this.expandCollapseCategory));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][241]++;
  var categoryNameSpan = dojo.create("span", {"id": (catId + "-span"), "class": "treenode-branch-label", "innerHTML": category.name, "categoryId": catId}, categoryDiv);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][248]++;
  this.textSelectionDisabler(categoryNameSpan);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][249]++;
  this.connectHandles.push(dojo.connect(categoryNameSpan, "ondblclick", this, this.expandCollapseCategory));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][252]++;
  var categoryFieldsDiv = dojo.create("div", {"id": (catId + "-fields")}, categoryDiv);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][257]++;
  this.addFields(fields, categoryFieldsDiv, catId);
}), this);
}), addFields: (function (fields, parent, parentId) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][263]++;
  var items = [];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][264]++;
  dojo.forEach(fields, (function (field) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][265]++;
  var item = {"categoryId": parentId, "displayName": field.name, "fieldId": field.id, "dataType": field.dataType, "type": ["treenode-leaf-label"], "description": field.description};
  _$jscoverage['dojo/pentaho/common/FieldList.js'][273]++;
  if ((field.hiddenForUser != "true")) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][274]++;
    items.push(item);
    _$jscoverage['dojo/pentaho/common/FieldList.js'][275]++;
    this.dndObj.setItem(("field-" + item.fieldId), {"data": item, "type": "treenode-leaf-label", "fieldId": item.fieldId});
  }
}), this);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][278]++;
  if (this.enableDragDrop) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][279]++;
    this.dndObj.insertNodes(false, items, false, parent);
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][282]++;
    for (var idx = 0; (idx < items.length); (idx++)) {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][283]++;
      var x = this._dndItemCreator(items[idx], "");
      _$jscoverage['dojo/pentaho/common/FieldList.js'][284]++;
      parent.appendChild(x.node);
      _$jscoverage['dojo/pentaho/common/FieldList.js'][285]++;
      this.selector.setItem(("field-" + items[idx].fieldId), {"data": items[idx], "type": "treenode-leaf-label", "fieldId": items[idx].fieldId});
      _$jscoverage['dojo/pentaho/common/FieldList.js'][286]++;
      this.connectHandles.push(dojo.connect(x.node, "onmousedown", this, this.onMouseDown));
      _$jscoverage['dojo/pentaho/common/FieldList.js'][287]++;
      this.connectHandles.push(dojo.connect(x.node, "onmouseup", this, this.onMouseUp));
}
  }
}), onMouseDown: (function (e) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][293]++;
  this.selector.current = e.target;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][294]++;
  this.selector.onMouseDown(e);
}), onMouseUp: (function (e) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][298]++;
  this.selector.current = e.target;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][299]++;
  this.selector.onMouseUp(e);
}), _dndItemCreator: (function (item, hint) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][303]++;
  var props = {"id": ("field-" + this.sanitizeIdAndClassNames(item.fieldId)), "innerHTML": item.displayName, "fieldId": item.fieldId, "class": item.categoryId};
  _$jscoverage['dojo/pentaho/common/FieldList.js'][309]++;
  if (item.description) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][310]++;
    props.title = item.description;
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][312]++;
    props.title = item.fieldId;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][314]++;
  var div = dojo.create("div", props);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][315]++;
  if ((hint === "avatar")) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][316]++;
    dojo.addClass(div, "dragDropAvatar");
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][318]++;
    dojo.addClass(div, "field");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][319]++;
    dojo.addClass(div, "treenode-leaf-label");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][320]++;
    dojo.addClass(div, "pentaho-listitem");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][322]++;
    this.connectHandles.push(dojo.connect(div, "oncontextmenu", this, (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][323]++;
  this.updateSelectionForContextMenu(item.fieldId);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][324]++;
  if (this.fieldContextMenuCallback) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][325]++;
    this.fieldContextMenuCallback(event);
  }
})));
    _$jscoverage['dojo/pentaho/common/FieldList.js'][328]++;
    this.connectHandles.push(dojo.connect(div, "ondblclick", this, (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][329]++;
  if (this.doubleClickCallback) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][330]++;
    this.doubleClickCallback(item.fieldId);
  }
})));
    _$jscoverage['dojo/pentaho/common/FieldList.js'][333]++;
    this.connectHandles.push(dojo.connect(div, "onmouseover", this, (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][334]++;
  this.onFieldMouseOver(event);
})));
    _$jscoverage['dojo/pentaho/common/FieldList.js'][336]++;
    this.connectHandles.push(dojo.connect(div, "onmouseout", this, (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][337]++;
  this.onFieldMouseOut(event);
})));
    _$jscoverage['dojo/pentaho/common/FieldList.js'][339]++;
    this.connectHandles.push(dojo.connect(div, "onclick", this, (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][340]++;
  this.onFieldClick(event);
})));
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][343]++;
  return ({node: div, data: item, type: ["treenode-leaf-label"]});
}), onFieldClick: (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][347]++;
  if (this.selector) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][348]++;
    this.selector.onClick(event);
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][350]++;
  if (this.clickCallback) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][351]++;
    this.clickCallback(event);
  }
}), onFieldMouseOver: (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][356]++;
  if (this.selector) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][357]++;
    this.selector.onMouseOver(event);
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][359]++;
  if ((! dojo.hasClass(event.target, "pentaho-listitem-selected"))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][360]++;
    dojo.addClass(event.target, "pentaho-listitem-hover");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][361]++;
    dojo.removeClass(event.target, "pentaho-listitem");
  }
}), onFieldMouseOut: (function (event) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][366]++;
  if (this.selector) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][367]++;
    this.selector.onMouseOut(event);
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][369]++;
  if ((! dojo.hasClass(event.target, "pentaho-listitem-selected"))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][370]++;
    dojo.addClass(event.target, "pentaho-listitem");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][371]++;
    dojo.removeClass(event.target, "pentaho-listitem-hover");
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][373]++;
    dojo.removeClass(event.target, "pentaho-listitem-hover");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][374]++;
    dojo.addClass(event.target, "pentaho-listitem-selected");
  }
}), _elementComparator: (function (a, b) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][379]++;
  if ((a.name < b.name)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][380]++;
    return -1;
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][381]++;
    if ((a.name == b.name)) {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][382]++;
      return 0;
    }
    else {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][384]++;
      return 1;
    }
  }
}), getCategories: (function (datasource) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][389]++;
  var categories = [];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][390]++;
  dojo.forEach(datasource.getAllElements(), (function (element) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][391]++;
  if (((element.elementType == pentaho.pda.Column.ELEMENT_TYPES.CATEGORY) && (categories[element] == null))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][392]++;
    categories.push(element);
  }
}));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][395]++;
  return categories;
}), getFields: (function (datasource, category, filters) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][399]++;
  var fields = [];
  _$jscoverage['dojo/pentaho/common/FieldList.js'][400]++;
  var elements = datasource.getAllElements();
  _$jscoverage['dojo/pentaho/common/FieldList.js'][401]++;
  dojo.forEach(datasource.getAllElements(), (function (element) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][402]++;
  if ((element.isQueryElement && ((category == null) || (element.parent == category)) && (fields[element] == null))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][404]++;
    if ((filters && (filters.length > 0))) {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][406]++;
      var ok = true;
      _$jscoverage['dojo/pentaho/common/FieldList.js'][407]++;
      for (var filterNo = 0; (filterNo < filters.length); (filterNo++)) {
        _$jscoverage['dojo/pentaho/common/FieldList.js'][408]++;
        var values = filters[filterNo].values;
        _$jscoverage['dojo/pentaho/common/FieldList.js'][409]++;
        var filterOk = false;
        _$jscoverage['dojo/pentaho/common/FieldList.js'][410]++;
        for (var valueNo = 0; (valueNo < values.length); (valueNo++)) {
          _$jscoverage['dojo/pentaho/common/FieldList.js'][411]++;
          if ((element[filters[filterNo].type] == values[valueNo])) {
            _$jscoverage['dojo/pentaho/common/FieldList.js'][412]++;
            filterOk = true;
            _$jscoverage['dojo/pentaho/common/FieldList.js'][413]++;
            break;
          }
}
        _$jscoverage['dojo/pentaho/common/FieldList.js'][416]++;
        ok = (ok && filterOk);
        _$jscoverage['dojo/pentaho/common/FieldList.js'][417]++;
        if ((! ok)) {
          _$jscoverage['dojo/pentaho/common/FieldList.js'][418]++;
          break;
        }
}
      _$jscoverage['dojo/pentaho/common/FieldList.js'][421]++;
      if (ok) {
        _$jscoverage['dojo/pentaho/common/FieldList.js'][422]++;
        fields.push(element);
      }
    }
    else {
      _$jscoverage['dojo/pentaho/common/FieldList.js'][425]++;
      fields.push(element);
    }
  }
}));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][429]++;
  return fields;
}), expandCollapseCategory: (function (eventElement) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][433]++;
  var categoryId = dojo.attr(eventElement.target, "categoryId");
  _$jscoverage['dojo/pentaho/common/FieldList.js'][434]++;
  var node = dojo.byId((categoryId + "-fields"));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][435]++;
  var indicatorNode = dojo.byId((categoryId + "-indicator"));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][436]++;
  var collapsed = (dojo.attr(indicatorNode, "collapsed") != "true");
  _$jscoverage['dojo/pentaho/common/FieldList.js'][437]++;
  if (collapsed) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][438]++;
    dojo.addClass(indicatorNode, "treenode-closed");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][439]++;
    dojo.removeClass(indicatorNode, "treenode-open");
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][441]++;
    dojo.addClass(indicatorNode, "treenode-open");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][442]++;
    dojo.removeClass(indicatorNode, "treenode-closed");
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][444]++;
  dojo.attr(indicatorNode, "collapsed", ("" + collapsed));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][446]++;
  var fields = dojo.query(("." + categoryId), this.containerNode);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][447]++;
  if (collapsed) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][448]++;
    fields.addClass("hidden");
  }
  else {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][450]++;
    fields.removeClass("hidden");
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][453]++;
  if (this.expandCollapseCategoryCallback) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][454]++;
    this.expandCollapseCategoryCallback(collapsed);
  }
}), updateFilterIndicators: (function (filters) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][460]++;
  dojo.query(".treenode-leaf-label", this.containerNode).removeClass("fieldlist-filtered-field");
  _$jscoverage['dojo/pentaho/common/FieldList.js'][462]++;
  if ((! filters)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][463]++;
    return;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][466]++;
  dojo.forEach(filters, (function (filter) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][467]++;
  var fieldDiv = dojo.byId(("field-" + this.sanitizeIdAndClassNames(filter.column)));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][468]++;
  if ((fieldDiv != null)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][469]++;
    dojo.addClass(fieldDiv, "fieldlist-filtered-field");
  }
}), this);
}), updateSelectionForContextMenu: (function (fieldId) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][478]++;
  var selected = false;
  _$jscoverage['dojo/pentaho/common/FieldList.js'][479]++;
  this.dndObj.forInSelectedItems((function (item, id) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][480]++;
  if ((item.data.fieldId === fieldId)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][481]++;
    selected = true;
  }
}));
  _$jscoverage['dojo/pentaho/common/FieldList.js'][485]++;
  var id = ("field-" + fieldId);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][486]++;
  var node = dojo.byId(id);
  _$jscoverage['dojo/pentaho/common/FieldList.js'][487]++;
  if ((! selected)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][488]++;
    this.clearSelection();
    _$jscoverage['dojo/pentaho/common/FieldList.js'][490]++;
    this.dndObj._addItemClass(node, "pentaho-listitem-selected");
    _$jscoverage['dojo/pentaho/common/FieldList.js'][491]++;
    this.dndObj.selection[id] = 1;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][494]++;
  if (this.dndObj.anchor) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][495]++;
    this.dndObj._addItemClass(this.dndObj.anchor, "pentaho-listitem-selected");
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][497]++;
  this.dndObj._removeAnchor();
  _$jscoverage['dojo/pentaho/common/FieldList.js'][498]++;
  this.dndObj._addItemClass(node, "Anchor");
  _$jscoverage['dojo/pentaho/common/FieldList.js'][499]++;
  this.dndObj.anchor = node;
}), getSelectedItems: (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][503]++;
  if ((this.dndObj && this.enableDragDrop)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][504]++;
    var items = [];
    _$jscoverage['dojo/pentaho/common/FieldList.js'][505]++;
    this.dndObj.forInSelectedItems((function (item) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][506]++;
  items.push(item.data);
}));
    _$jscoverage['dojo/pentaho/common/FieldList.js'][508]++;
    return items;
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][510]++;
  if ((this.selector && (! this.enableDragDrop))) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][511]++;
    var items = [];
    _$jscoverage['dojo/pentaho/common/FieldList.js'][512]++;
    this.selector.forInSelectedItems((function (item) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][513]++;
  items.push(item.data);
}), this);
    _$jscoverage['dojo/pentaho/common/FieldList.js'][515]++;
    return items;
  }
}), clearSelection: (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][520]++;
  if ((this.dndObj && this.enableDragDrop)) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][521]++;
    this.dndObj.selectNone();
  }
  _$jscoverage['dojo/pentaho/common/FieldList.js'][523]++;
  if (this.selector) {
    _$jscoverage['dojo/pentaho/common/FieldList.js'][524]++;
    this.selector.selectNone();
  }
}), addFilter: (function (filter) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][529]++;
  this.filters.push(filter);
}), clearFilters: (function () {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][533]++;
  this.filters = [];
}), setCategorized: (function (categorize) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][537]++;
  this.categorize = categorize;
}), setEnableDragDrop: (function (enableDragDrop) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][541]++;
  this.enableDragDrop = enableDragDrop;
}), setContextMenu: (function (fieldContextMenu) {
  _$jscoverage['dojo/pentaho/common/FieldList.js'][545]++;
  this.fieldContextMenu = fieldContextMenu;
})});
